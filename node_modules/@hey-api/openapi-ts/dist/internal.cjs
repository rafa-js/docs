'use strict';var er=require('path'),c12=require('c12'),Bo=require('fs'),en=require('ansi-colors'),url=require('url'),S=require('typescript'),codegenCore=require('@hey-api/codegen-core'),os$1=require('os'),gn=require('semver'),jsonSchemaRefParser=require('@hey-api/json-schema-ref-parser');var _documentCurrentScript=typeof document!=='undefined'?document.currentScript:null;function _interopDefault(e){return e&&e.__esModule?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var er__default=/*#__PURE__*/_interopDefault(er);var Bo__default=/*#__PURE__*/_interopDefault(Bo);var en__default=/*#__PURE__*/_interopDefault(en);var S__default=/*#__PURE__*/_interopDefault(S);var gn__namespace=/*#__PURE__*/_interopNamespace(gn);var Oc=url.fileURLToPath((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (_documentCurrentScript && _documentCurrentScript.tagName.toUpperCase() === 'SCRIPT' && _documentCurrentScript.src || new URL('internal.cjs', document.baseURI).href)));er__default.default.dirname(Oc);var rn=e=>{Bo__default.default.existsSync(e)||Bo__default.default.mkdirSync(e,{recursive:true});};var _t=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var Ar=class extends Error{},nn=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:s,name:o,pluginName:i}){let p=r instanceof Error?r.message:"Unknown error";super(p),this.args=t,this.cause=r.cause,this.event=s,this.name=o||r.name,this.pluginName=i,this.stack=r.stack;}};var me=e=>{let t=I(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},I=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?.tags?.includes("client"))return r}return {config:{name:""},name:""}};var Ko,C=()=>{let e=Ko,t=I(e);return e.client=t,e},Wo=e=>(Ko=e,C()),Y=e=>I(e).name.startsWith("legacy/"),Et=e=>{if(Y(e))return e.name};var Tc=/^([\w-]+)\/([\w-]+)(?:\?([\w=&.-]*))?$/,Qt="https://get.heyapi.dev",Rc=(e,t,r)=>`${Qt}/${e}/${t}${r?`?${r}`:""}`,Ic=e=>{let t=e.organization,r=e.project,s;if(e.path){let i=e.path.match(Tc);if(!i)throw new Error(`Invalid Hey API shorthand format. Expected "organization/project?queryParams" or "organization/project", received: ${e.path}`);t=i[1],r=i[2],s=i[3];}if(!t)throw new Error("The Hey API organization cannot be empty.");if(!r)throw new Error("The Hey API project cannot be empty.");return {organization:t,project:r,queryParams:s}},Ls=e=>{let t=Ic(e);return Rc(t.organization,t.project,t.queryParams)};var Pc=/^(@([\w-]+)\/([\w\-.]+)#)?([\w-]+)$/,Ac=e=>`https://dash.readme.com/api/v1/api-registry/${e}`,sn="readme",Ec=e=>{let t=e.match(Pc);if(!t)throw new Error(`Invalid ReadMe shorthand format. Expected "${sn}:@organization/project#uuid" or "${sn}:uuid", received: ${sn}:${e}`);let[,,r,s,o]=t;if(!o)throw new Error("The ReadMe UUID cannot be empty.");return {organization:r,project:s,uuid:o}},zo=e=>{let t=e.slice(`${sn}:`.length),r=Ec(t);return Ac(r.uuid)};var Cc=/^(@[\w-]+)\/([\w.-]+)$/,Nc=(e,t)=>`https://registry.scalar.com/${e}/apis/${t}/latest?format=json`,Ds="scalar",jc=e=>{let t=e.match(Cc);if(!t)throw new Error(`Invalid Scalar shorthand format. Expected "${Ds}:@organization/project", received: ${Ds}:${e}`);let[,r,s]=t;if(!r)throw new Error("The Scalar organization cannot be empty.");if(!s)throw new Error("The Scalar project cannot be empty.");return {organization:r,project:s}},_o=e=>{let t=e.slice(`${Ds}:`.length),r=jc(t);return Nc(r.organization,r.project)};var Qo=e=>{if(e.path.startsWith("readme:")){e.path=zo(e.path);return}if(e.path.startsWith("scalar:")){e.path=_o(e.path);return}if(e.path.startsWith("."))return;if(e.path.startsWith(Qt)){e.path=e.path.slice(Qt.length+1),e.path=Ls(e);return}let t=e.path.split("/"),r=t.filter(Boolean);t.length===2&&r.length===2&&(e.path=Ls(e));};var Er={enabled:false,interval:1e3,timeout:6e4},Ho=e=>{let t={...Er};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},Zo=e=>{let t={path:"",watch:Er};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:Qt,...e.input},t.watch!==void 0&&(t.watch=Ho(t))):t={...t,path:e.input},typeof t.path=="string"&&Qo(t),e.watch!==void 0&&t.watch.enabled===Er.enabled&&t.watch.interval===Er.interval&&t.watch.timeout===Er.timeout&&(t.watch=Ho({path:t.path,watch:e.watch})),t};var Uo=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var kc=(e,t)=>({...e||{},...t||{}}),Vs=(e,t)=>{let r=e||{},s=t||{},o={...r,...s};return typeof o.logs=="object"&&(o.logs=kc(r.logs,s.logs)),o};var Xo=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t};var Jo=e=>{let t=e?er__default.default.dirname(e):process.cwd();for(;t!==er__default.default.dirname(t);){let r=er__default.default.join(t,"package.json");if(Bo__default.default.existsSync(r))try{let o=JSON.parse(Bo__default.default.readFileSync(r,"utf8"));return {...o.dependencies,...o.devDependencies,...o.peerDependencies,...o.optionalDependencies}}catch{}let s=er__default.default.dirname(t);if(s===t)break;t=s;}return {}};var vc=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)&&typeof e!="function",Ht=(e,t)=>{for(let[r,s]of Object.entries(t))s!==void 0&&s!==""&&(e[r]=s);return e},Ct=({defaultValue:e,mappers:t,value:r})=>{let s={...e};switch(typeof r){case "boolean":if(t&&"boolean"in t){let o=t.boolean;s=Ht(s,o(r));}break;case "function":if(t&&"function"in t){let o=t.function;s=Ht(s,o(r));}break;case "number":if(t&&"number"in t){let o=t.number;s=Ht(s,o(r));}break;case "string":if(t&&"string"in t){let o=t.string;s=Ht(s,o(r));}break;case "object":if(vc(r))if(t&&"object"in t&&typeof t.object=="function"){let o=t.object;s=Ht(s,o(r,e));}else s=Ht(s,r);break}return s};var wc=["after","before","cursor","offset","page","start"],Yo=e=>{let t={...e.parser,hooks:{},pagination:{keywords:wc},transforms:{enums:{case:"PascalCase",enabled:false,mode:"root",name:"{{name}}Enum"},readWrite:{enabled:true,requests:{case:"preserve",name:"{{name}}Writable"},responses:{case:"preserve",name:"{{name}}"}}},validate_EXPERIMENTAL:false};return e.parser&&(e.parser.hooks&&(t.hooks=e.parser.hooks),e.parser.pagination?.keywords&&(t.pagination.keywords=e.parser.pagination.keywords),e.parser.transforms&&(e.parser.transforms.enums!==void 0&&(t.transforms.enums=Ct({defaultValue:{...t.transforms.enums,enabled:!!e.parser.transforms.enums},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.parser.transforms.enums})),e.parser.transforms.readWrite!==void 0&&(t.transforms.readWrite=Ct({defaultValue:{...t.transforms.readWrite,enabled:!!e.parser.transforms.readWrite},mappers:{boolean:r=>({enabled:r}),object:r=>({...r,requests:Ct({defaultValue:t.transforms.readWrite.requests,mappers:{function:s=>({name:s}),string:s=>({name:s})},value:r.requests}),responses:Ct({defaultValue:t.transforms.readWrite.responses,mappers:{function:s=>({name:s}),string:s=>({name:s})},value:r.responses})})},value:e.parser.transforms.readWrite}))),e.parser.validate_EXPERIMENTAL&&(t.validate_EXPERIMENTAL=e.parser.validate_EXPERIMENTAL===true?"warn":e.parser.validate_EXPERIMENTAL)),t};var ke={boolean:e=>({enabled:e}),function:e=>({name:e}),string:e=>({name:e})};var an=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Zt=/^[^$_\p{ID_Start}]+/u,ee=/^-?\d+(\.\d+)?$/,ei=/^(document|history|location|navigator|window)$/g,ti=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,be=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,ri=/^(global|process|Buffer)$/g,ni=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,Pe=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var qc=[be,ni,ti,ri,ei],ve=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(Zt.lastIndex=0,Zt.test(t))return `_${t}`;for(let r of qc){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var tt=e=>(e||e==="")&&(Pe.lastIndex=0,!Pe.test(e))?`'${e}'`:e,Cr=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,z=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>os$1.EOL+r.trim());var Fc=S__default.default.createPrinter({newLine:S__default.default.NewLineKind.LineFeed,removeComments:false}),Mc=e=>S__default.default.createSourceFile("",e,S__default.default.ScriptTarget.ESNext,false,S__default.default.ScriptKind.TS),Lc=Mc(""),Dc=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function oe({node:e,unescape:t=false}){let r=Fc.printNode(S__default.default.EmitHint.Unspecified,e,Lc);if(!t)return r;try{return Dc(r)}catch{return C().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}var A=({text:e})=>S__default.default.factory.createIdentifier(e),si=()=>S__default.default.factory.createThis(),U=({keyword:e})=>{let t=Bs({keyword:e});return S__default.default.factory.createModifier(t)},oi=({initializer:e,modifier:t,name:r,type:s})=>S__default.default.factory.createPropertyDeclaration(t?[U({keyword:t})]:void 0,r,void 0,s,e),ye={boolean:e=>e?S__default.default.factory.createTrue():S__default.default.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let s=A({text:r});if(e){let o=A({text:e});return S__default.default.factory.createExportSpecifier(t,s,o)}return S__default.default.factory.createExportSpecifier(t,void 0,s)},import:({alias:e,asType:t=false,name:r})=>{let s=A({text:r});if(e){let o=A({text:e});return S__default.default.factory.createImportSpecifier(t,s,o)}return S__default.default.factory.createImportSpecifier(t,void 0,s)},number:e=>e<0?S__default.default.factory.createPrefixUnaryExpression(S__default.default.SyntaxKind.MinusToken,S__default.default.factory.createNumericLiteral(Math.abs(e))):S__default.default.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=Cr(r));let s=r.includes("'")&&r.includes('"'),o=r.includes(`
`),i=r.startsWith("`"),p=r.startsWith("\\`")&&r.endsWith("\\`");return (o||s||i)&&!p&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?A({text:r}):jt({text:r})}},Nt=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",yt=e=>e!==void 0,Vc=({commentObject:e,node:t})=>{let r=e.lines.filter(p=>!!p||p==="");if(!r.length)return;if(!e.jsdoc){for(let p of r)S__default.default.addSyntheticLeadingComment(t,S__default.default.SyntaxKind.SingleLineCommentTrivia,` ${p}`,true);return}let s=r.map((p,a)=>{let c=p;return a!==r.length&&(c=`${c}
`),S__default.default.factory.createJSDocText(c)}),o=S__default.default.factory.createJSDocComment(S__default.default.factory.createNodeArray(s),void 0),i=oe({node:o,unescape:true}).replace("/*","").replace("*  */","");S__default.default.addSyntheticLeadingComment(t,S__default.default.SyntaxKind.MultiLineCommentTrivia,i,true);},ie=({comments:e=[],node:t})=>{let r=!!e.find(o=>typeof o=="object"&&o),s=e;r||(s=[{jsdoc:true,lines:e}]);for(let o of s)Vc({commentObject:o,node:t});};var ae=(e,t)=>S__default.default.isTypeNode(e)?e:typeof e=="number"?S__default.default.factory.createLiteralTypeNode(ye.number(e)):Se({typeArguments:t?.map(r=>ae(r)),typeName:S__default.default.isIdentifier(e)?e.text:e}),Ks=({expression:e,name:t})=>S__default.default.factory.createPropertyAccessChain(e,S__default.default.factory.createToken(S__default.default.SyntaxKind.QuestionDotToken),t),qe=({expression:e,isOptional:t,name:r})=>{let s=typeof e=="string"?A({text:e}):e;if(t&&typeof r!="number")return Ks({expression:s,name:r});if(typeof r=="string"){if(Pe.lastIndex=0,!Pe.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let i=A({text:r});return S__default.default.factory.createElementAccessExpression(s,i)}let o=A({text:r});return S__default.default.factory.createPropertyAccessExpression(s,o)}if(typeof r=="number"){let o=S__default.default.factory.createNumericLiteral(r);return S__default.default.factory.createElementAccessExpression(s,o)}return S__default.default.factory.createPropertyAccessExpression(s,r)},Ws=()=>S__default.default.factory.createNull(),we=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:s,value:o})=>{if(o===null)return Ws();if(Array.isArray(o))return zs({elements:o});if(typeof o=="object")return ln({identifiers:e,obj:o,shorthand:r});if(typeof o=="number")return ye.number(o);if(typeof o=="boolean")return ye.boolean(o);if(typeof o=="string"){if(t){let i=o.split(".");return qe({expression:i[0],name:i[1]})}return ye.string(o,s)}},Nr=e=>e.map(t=>{if("destructure"in t)return Ut({name:S__default.default.factory.createObjectBindingPattern(t.destructure.map(s=>"destructure"in s?void 0:S__default.default.factory.createBindingElement(void 0,void 0,A({text:s.name}),void 0)).filter(Boolean)),type:t.type!==void 0?ae(t.type):void 0});let r=t.accessLevel?[U({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(U({keyword:"readonly"})),Ut({initializer:t.default!==void 0?we({value:t.default}):void 0,modifiers:r,name:A({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?ae(t.type):void 0})}),Bs=({keyword:e})=>{switch(e){case "any":return S__default.default.SyntaxKind.AnyKeyword;case "async":return S__default.default.SyntaxKind.AsyncKeyword;case "boolean":return S__default.default.SyntaxKind.BooleanKeyword;case "export":return S__default.default.SyntaxKind.ExportKeyword;case "never":return S__default.default.SyntaxKind.NeverKeyword;case "number":return S__default.default.SyntaxKind.NumberKeyword;case "private":return S__default.default.SyntaxKind.PrivateKeyword;case "protected":return S__default.default.SyntaxKind.ProtectedKeyword;case "public":return S__default.default.SyntaxKind.PublicKeyword;case "readonly":return S__default.default.SyntaxKind.ReadonlyKeyword;case "static":return S__default.default.SyntaxKind.StaticKeyword;case "string":return S__default.default.SyntaxKind.StringKeyword;case "undefined":return S__default.default.SyntaxKind.UndefinedKeyword;case "unknown":return S__default.default.SyntaxKind.UnknownKeyword;case "void":return S__default.default.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},kt=({keyword:e})=>{let t=Bs({keyword:e});return S__default.default.factory.createKeywordTypeNode(t)},jr=e=>e.map(t=>S__default.default.isTypeParameterDeclaration(t)?t:kr({constraint:t.extends?typeof t.extends=="string"?kt({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?Nt(t.default)?t.default:S__default.default.factory.createLiteralTypeNode(t.default?S__default.default.factory.createTrue():S__default.default.factory.createFalse()):void 0,name:t.name})),ii=({operator:e,type:t})=>{let r=e==="keyof"?S__default.default.SyntaxKind.KeyOfKeyword:e==="readonly"?S__default.default.SyntaxKind.ReadonlyKeyword:S__default.default.SyntaxKind.UniqueKeyword;return S__default.default.factory.createTypeOperatorNode(r,t)},kr=({constraint:e,defaultType:t,modifiers:r,name:s})=>S__default.default.factory.createTypeParameterDeclaration(r,s,e,t),cn=({members:e,nameType:t,questionToken:r,readonlyToken:s,type:o,typeParameter:i})=>S__default.default.factory.createMappedTypeNode(s,i,t,r,o,e),ai=({literal:e})=>S__default.default.factory.createLiteralTypeNode(e),mn=({async:e,comment:t,multiLine:r,parameters:s=[],returnType:o,statements:i=[],types:p=[]})=>{let a=S__default.default.factory.createArrowFunction(e?[U({keyword:"async"})]:void 0,p?jr(p):void 0,Nr(s),o?ae(o):void 0,void 0,Array.isArray(i)?he({multiLine:r,statements:i}):i);return ie({comments:t,node:a}),a},pi=({async:e,comment:t,multiLine:r,parameters:s=[],returnType:o,statements:i=[],types:p=[]})=>{let a=S__default.default.factory.createFunctionExpression(e?[U({keyword:"async"})]:void 0,void 0,void 0,p?jr(p):void 0,Nr(s),o?ae(o):void 0,he({multiLine:r,statements:i}));return ie({comments:t,node:a}),a},zs=({elements:e,multiLine:t=false})=>S__default.default.factory.createArrayLiteralExpression(e.map(s=>Nt(s)?s:we({value:s})).filter(yt),t||!Array.isArray(e[0])&&typeof e[0]=="object"),ci=({expression:e})=>S__default.default.factory.createAwaitExpression(e),mi=({parameters:e=[],returnType:t,typeParameters:r})=>S__default.default.factory.createFunctionTypeNode(r,e,t),ln=({comments:e,identifiers:t=[],multiLine:r=true,obj:s,shorthand:o,unescape:i=false})=>{let p=Array.isArray(s)?s.map(c=>{let m=false;if("key"in c){let{key:f}=c;m=f===c.value,(f.match(/^[0-9]/)&&f.match(/\D+/g)||f.match(/\W/g)||f==="")&&!f.startsWith("'")&&!f.endsWith("'")&&(c.key=`'${f}'`);}let l;if("spread"in c){let f=Nt(c.spread)?c.spread:A({text:c.spread});l=S__default.default.factory.createSpreadAssignment(c.assertion?wr({expression:f,type:typeof c.assertion=="string"?kt({keyword:c.assertion}):c.assertion}):f);}else if(c.shorthand||o&&m)l=S__default.default.factory.createShorthandPropertyAssignment(c.value);else {let f=Nt(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?ln({multiLine:r,obj:c.value,shorthand:o,unescape:i}):we({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:o,unescape:i,value:c.value});if(!f)return;t.includes(c.key)&&!S__default.default.isObjectLiteralExpression(f)&&(f=A({text:c.value})),l=pn({initializer:f,name:c.key});}return ie({comments:c.comments,node:l}),l}).filter(yt):Object.entries(s).map(([c,m])=>{let l=we({identifiers:t.includes(c)?Object.keys(m):[],shorthand:o,unescape:i,value:m});if(!l)return;t.includes(c)&&!S__default.default.isObjectLiteralExpression(l)&&(l=A({text:m}));let f=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),o&&f?S__default.default.factory.createShorthandPropertyAssignment(m):pn({initializer:l,name:c})}).filter(yt),a=S__default.default.factory.createObjectLiteralExpression(p,r);return ie({comments:e,node:a}),a},li=({asConst:e,comments:t={},leadingComment:r,name:s,obj:o})=>{let i=Array.isArray(o)?o.map(l=>{let f=Kc({initializer:we({value:l.value}),name:l.key});return ie({comments:l.comments,node:f}),f}):Object.entries(o).map(([l,f])=>{let d=S__default.default.factory.createEnumMember(l,we({unescape:true,value:f}));return ie({comments:t[l],node:d}),d}),p=[U({keyword:"export"})],a=e?[S__default.default.factory.createToken(S__default.default.SyntaxKind.ConstKeyword)]:[],c=[...p,...a],m=S__default.default.factory.createEnumDeclaration(c,typeof s=="string"?A({text:s}):s,i);return ie({comments:r,node:m}),m},Kc=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=jt({isSingleQuote:false,text:r}):r=tt(r)),S__default.default.factory.createEnumMember(r,e)},fi=({name:e,statements:t})=>S__default.default.factory.createModuleDeclaration([U({keyword:"export"})],A({text:e}),S__default.default.factory.createModuleBlock(t),S__default.default.NodeFlags.Namespace),di=({indexType:e,objectType:t})=>S__default.default.factory.createIndexedAccessTypeNode(t,e),ui=({name:e,returnType:t,statements:r})=>S__default.default.factory.createGetAccessorDeclaration(void 0,e,[],t?Se({typeName:t}):void 0,he({statements:r})),jt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),S__default.default.factory.createStringLiteral(t,e)),yi=({condition:e,whenFalse:t,whenTrue:r})=>S__default.default.factory.createConditionalExpression(e,S__default.default.factory.createToken(S__default.default.SyntaxKind.QuestionToken),r,S__default.default.factory.createToken(S__default.default.SyntaxKind.ColonToken),t),hi=({text:e})=>S__default.default.factory.createTypeOfExpression(typeof e=="string"?A({text:e}):e),gi=({comment:e,exportType:t,name:r,type:s,typeParameters:o=[]})=>{let i=S__default.default.factory.createTypeAliasDeclaration(t?[U({keyword:"export"})]:void 0,typeof r=="string"?A({text:r}):r,jr(o),ae(s));return ie({comments:e,node:i}),i},Se=({typeArguments:e,typeName:t})=>S__default.default.factory.createTypeReferenceNode(t,e),xi=({type:e})=>S__default.default.factory.createParenthesizedType(e),Ut=({initializer:e,modifiers:t,name:r,required:s=true,type:o})=>S__default.default.factory.createParameterDeclaration(t,void 0,r,s?void 0:S__default.default.factory.createToken(S__default.default.SyntaxKind.QuestionToken),o,e),vr=({argumentsArray:e,expression:t,typeArguments:r})=>S__default.default.factory.createNewExpression(t,r,e),bi=({awaitModifier:e,expression:t,initializer:r,statement:s})=>S__default.default.factory.createForOfStatement(e,r,t,s),Si=({left:e,right:t})=>S__default.default.factory.createAssignment(e,t),he=({multiLine:e=true,statements:t})=>S__default.default.factory.createBlock(t,e),pn=({initializer:e,name:t})=>S__default.default.factory.createPropertyAssignment(t,e),Oi=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return S__default.default.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},wr=({expression:e,type:t})=>S__default.default.factory.createAsExpression(e,t),Ti=({value:e})=>{let t=[],r="";for(let o of e.slice(0).reverse())if(typeof o=="string")r=`${o}${r}`;else {let i=t.length?S__default.default.factory.createTemplateMiddle(r):S__default.default.factory.createTemplateTail(r),p=S__default.default.factory.createTemplateLiteralTypeSpan(o,i);t.push(p),r="";}return S__default.default.factory.createTemplateLiteralType(S__default.default.factory.createTemplateHead(r),t.reverse())};var Ri=({module:e,shouldAppendJs:t})=>S__default.default.factory.createExportDeclaration(void 0,false,void 0,ye.string(t?`${e}.js`:e)),$e=({functionName:e,parameters:t=[],types:r})=>{let s=typeof e=="string"?A({text:e}):e,o=t.filter(p=>p!==void 0).map(p=>typeof p=="string"?A({text:p}):p);return S__default.default.factory.createCallExpression(s,r,o)},Ii=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],s=r.some(c=>typeof c!="object"||!c.asType),o=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return ye.export({alias:m.alias,asType:s&&m.asType,name:m.name})}),i=S__default.default.factory.createNamedExports(o),p=ye.string(t);return S__default.default.factory.createExportDeclaration(void 0,!s,i,p)},Pi=({assertion:e,comment:t,destructure:r,exportConst:s,expression:o,name:i,typeName:p})=>{let a=e?wr({expression:o,type:typeof e=="string"?Se({typeName:e}):e}):o,c=typeof i=="string"?A({text:i}):i,m=S__default.default.factory.createVariableDeclaration(r?S__default.default.factory.createObjectBindingPattern([S__default.default.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,p?typeof p=="string"?Se({typeName:p}):p:void 0,a),l=S__default.default.factory.createVariableStatement(s?[U({keyword:"export"})]:void 0,S__default.default.factory.createVariableDeclarationList([m],S__default.default.NodeFlags.Const));return ie({comments:t,node:l}),l},Ai=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],s=r.some(l=>typeof l!="object"||!l.asType),o,i=[];r.forEach(l=>{let f=typeof l=="string"?{name:l}:l;f.name==="*"&&f.alias?o=f:i.push(ye.import({alias:f.alias,asType:s&&f.asType,name:f.name}));});let p=o?S__default.default.factory.createNamespaceImport(A({text:o.alias})):S__default.default.factory.createNamedImports(i),a=S__default.default.factory.createImportClause(!s,void 0,p),c=ye.string(t);return S__default.default.factory.createImportDeclaration(void 0,a,c)};var Ei=({accessLevel:e,comment:t,multiLine:r=true,parameters:s=[],statements:o=[]})=>{let i=e?[U({keyword:e})]:void 0,p=S__default.default.factory.createConstructorDeclaration(i,Nr(s),he({multiLine:r,statements:o}));return ie({comments:t,node:p}),p},Ci=({accessLevel:e,comment:t,isStatic:r=false,multiLine:s=true,name:o,parameters:i=[],returnType:p,statements:a=[],types:c=[]})=>{let m=e?[U({keyword:e})]:[];r&&m.push(U({keyword:"static"}));let l=S__default.default.factory.createMethodDeclaration(m,void 0,A({text:o}),void 0,c?jr(c):void 0,Nr(i),p?ae(p):void 0,he({multiLine:s,statements:a}));return ie({comments:t,node:l}),l},Ni=({decorator:e,exportClass:t,extendedClasses:r,name:s,nodes:o})=>{let i=[];t&&i.push(U({keyword:"export"})),e&&i.unshift(S__default.default.factory.createDecorator($e({functionName:e.name,parameters:e.args.map(a=>we({value:a})).filter(yt)})));let p=[];if(r)for(let a of r)p.push(S__default.default.factory.createHeritageClause(S__default.default.SyntaxKind.ExtendsKeyword,[S__default.default.factory.createExpressionWithTypeArguments(A({text:a}),void 0)]));return S__default.default.factory.createClassDeclaration(i,A({text:s}),void 0,p,o)};var wt=({expression:e})=>S__default.default.factory.createExpressionStatement(e);var fn=({expression:e})=>S__default.default.factory.createReturnStatement(e),ki=({args:e=[],name:t,types:r=[]})=>{let s=r.map(a=>Se({typeName:a})),o=e.map(a=>S__default.default.isExpression(a)?a:A({text:a})).filter(yt),i=$e({functionName:t,parameters:o,types:s});return fn({expression:i})},vi=({expression:e})=>fn({expression:typeof e=="string"?A({text:e}):e});var Xt=e=>e.slice(1).reduce((t,r)=>(Pe.lastIndex=0,Pe.test(r)?Ks({expression:t,name:r}):S__default.default.factory.createElementAccessChain(t,S__default.default.factory.createToken(S__default.default.SyntaxKind.QuestionDotToken),A({text:r}))),A({text:e[0]})),dn=e=>e.slice(1).reduce((t,r)=>qe({expression:t,name:r}),A({text:e[0]})),wi=({expressions:e})=>e.reduce((r,s)=>qe({expression:r,name:s})),un=({left:e,operator:t="=",right:r})=>S__default.default.factory.createBinaryExpression(e,t==="="?S__default.default.SyntaxKind.EqualsToken:t==="==="?S__default.default.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?S__default.default.SyntaxKind.QuestionQuestionToken:S__default.default.SyntaxKind.InKeyword,typeof r=="string"?A({text:r}):r),Gt=({elseStatement:e,expression:t,thenStatement:r})=>S__default.default.factory.createIfStatement(t,r,e),qi=({path:e})=>{let t=Xt(e),r=dn(e),s=he({statements:[wt({expression:un({left:r,right:vr({argumentsArray:[r],expression:A({text:"Date"})})})})]});return Gt({expression:t,thenStatement:s})},$i=({path:e,transformerName:t})=>{let r=Xt(e),s=dn(e),o=he({statements:[wt({expression:$e({functionName:t,parameters:[s]})})]});return [Gt({expression:r,thenStatement:o})]},Fi=({path:e,transformerName:t})=>{let r=Xt(e),s=dn(e);return Gt({expression:$e({functionName:qe({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:he({statements:[wt({expression:S__default.default.factory.createCallChain(qe({expression:s,name:"forEach"}),void 0,void 0,[A({text:t})])})]})})},Mi=({parameterName:e})=>{let t=A({text:"Date"});return vr({argumentsArray:[A({text:e})],expression:t})},Li=({path:e,transformExpression:t})=>{let r=Xt(e),s=dn(e);return Gt({expression:$e({functionName:qe({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:he({statements:[wt({expression:un({left:s,right:S__default.default.factory.createCallChain(qe({expression:s,name:"map"}),void 0,void 0,[mn({parameters:[{name:"item"}],statements:t})])})})]})})};var Xc=Se({typeName:"null"}),Jt=({isNullable:e,node:t})=>e?S__default.default.factory.createUnionTypeNode([t,Xc]):t,_s=({indexKey:e,indexProperty:t,isNullable:r,properties:s,useLegacyResolution:o})=>{let p=s.map(m=>{let l=m.isReadOnly?[U({keyword:"readonly"})]:void 0,f=m.isRequired!==false?void 0:S__default.default.factory.createToken(S__default.default.SyntaxKind.QuestionToken),d=ae(m.type);let u=S__default.default.factory.createPropertySignature(l,o||typeof m.name=="string"&&m.name.match(Pe)||typeof m.name!="string"&&S__default.default.isPropertyName(m.name)?m.name:jt({text:m.name}),f,d);return ie({comments:m.comment,node:u}),u}),a=false;if(t)if(!s.length&&e){let m=cn({questionToken:S__default.default.factory.createToken(S__default.default.SyntaxKind.QuestionToken),type:t.type??kt({keyword:"string"}),typeParameter:kr({constraint:e,name:A({text:String(t.name)})})});p.push(m),a=true;}else {let m=t.isReadOnly?[U({keyword:"readonly"})]:void 0,l=S__default.default.factory.createIndexSignature(m,[Ut({name:A({text:String(t.name)}),type:kt({keyword:"string"})})],ae(t.type));p.push(l);}let c=a?p[0]:S__default.default.factory.createTypeLiteralNode(p);return Jt({isNullable:r,node:c})},qr=({isNullable:e,types:t})=>{let r=[];for(let o of t){let i=ae(o);S__default.default.isUnionTypeNode(i)?r.push(...i.types):r.push(i);}let s=S__default.default.factory.createUnionTypeNode(r);return Jt({isNullable:e,node:s})},Di=({isNullable:e,types:t})=>{let r=[];for(let o of t){let i=ae(o);S__default.default.isIntersectionTypeNode(i)?r.push(...i.types):r.push(i);}let s=S__default.default.factory.createIntersectionTypeNode(r);return Jt({isNullable:e,node:s})},Vi=({isNullable:e=false,types:t})=>{let r=t.map(o=>ae(o)),s=S__default.default.factory.createTupleTypeNode(r);return Jt({isNullable:e,node:s})},Bi=(e,t,r=false,s=true)=>{let o=qr({types:e}),i=qr({types:t}),p=_s({properties:[{name:`[key: ${oe({node:o,unescape:true})}]`,type:i}],useLegacyResolution:s});return Jt({isNullable:r,node:p})},Ki=(e,t=false)=>{let r=Se({typeArguments:[Array.isArray(e)?qr({types:e}):e],typeName:"Array"});return Jt({isNullable:t,node:r})};var n={anonymousFunction:pi,arrayLiteralExpression:zs,arrowFunction:mn,asExpression:wr,assignment:Si,awaitExpression:ci,binaryExpression:un,block:he,callExpression:$e,classDeclaration:Ni,conditionalExpression:yi,constVariable:Pi,constructorDeclaration:Ei,enumDeclaration:li,exportAllDeclaration:Ri,exportNamedDeclaration:Ii,expressionToStatement:wt,forOfStatement:bi,functionTypeNode:mi,getAccessorDeclaration:ui,identifier:A,ifStatement:Gt,indexedAccessTypeNode:di,isTsNode:Nt,keywordTypeNode:kt,literalTypeNode:ai,mappedTypeNode:cn,methodDeclaration:Ci,namedImportDeclarations:Ai,namespaceDeclaration:fi,newExpression:vr,nodeToString:oe,null:Ws,objectExpression:ln,ots:ye,parameterDeclaration:Ut,propertyAccessExpression:qe,propertyAccessExpressions:wi,propertyAssignment:pn,propertyDeclaration:oi,regularExpressionLiteral:Oi,returnFunctionCall:ki,returnStatement:fn,returnVariable:vi,safeAccessExpression:Xt,stringLiteral:jt,templateLiteralType:Ti,this:si,transformArrayMap:Li,transformArrayMutation:Fi,transformDateMutation:qi,transformFunctionMutation:$i,transformNewDate:Mi,typeAliasDeclaration:gi,typeArrayNode:Ki,typeInterfaceNode:_s,typeIntersectionNode:Di,typeNode:ae,typeOfExpression:hi,typeOperatorNode:ii,typeParameterDeclaration:kr,typeParenthesizedNode:xi,typeRecordNode:Bi,typeReferenceNode:Se,typeTupleNode:Vi,typeUnionNode:qr,valueToExpression:we};var q=class{id="typescript";ensureValidName(t){return ve(t)}getUniqueName(t,r){let s=2,o=t;for(;r.hasValue(o);)o=`${t}${s}`,s+=1;return o}groupByKey(t,r,s){let o=new Map;for(let i of t[r]){let p=s?.moduleResolution===S__default.default.ModuleResolutionKind.NodeNext,a=typeof i.from=="string"?i.from:`${t.relativePathToFile(i.from)}${p?".js":""}`;o.has(a)||o.set(a,[]),o.get(a).push(i);}return o}renderBody(t){let r=[];for(let o of t.symbols)o.value&&(typeof o.value=="string"?r.push(o.value):o.value instanceof Array?o.value.forEach(i=>{r.push(`${oe({node:i,unescape:true})}
`);}):r.push(`${oe({node:o.value,unescape:true})}
`));let s=r.join(`
`);return s=codegenCore.replaceWrappedIds(s,o=>this.replacerFn({file:t,headless:false,scope:"file",symbolId:o})),s}renderExports(t,r){let s=this.groupByKey(t,"exports",r),o=[];for(let[p,a]of s.entries()){let c=a.every(f=>f.typeDefaultImport||f.typeNamespaceImport||f.names?.every(d=>f.typeNames?.includes(d)));if(a.length===1&&a[0].namespaceImport){let f=typeof a[0].namespaceImport=="string"?S__default.default.factory.createNamespaceExport(n.identifier({text:a[0].namespaceImport})):void 0,d=S__default.default.factory.createExportDeclaration(void 0,false,f,n.stringLiteral({isSingleQuote:true,text:p}));o.push(oe({node:d}));continue}let m=[];for(let f of a)for(let d of f.names??[]){let u=f.aliases?.[d],h=u&&u!==d?S__default.default.factory.createExportSpecifier(false,n.identifier({text:d}),n.identifier({text:u})):S__default.default.factory.createExportSpecifier(false,void 0,n.identifier({text:d}));m.push(h);}let l=S__default.default.factory.createExportDeclaration(void 0,c,S__default.default.factory.createNamedExports(m),n.stringLiteral({isSingleQuote:true,text:p}));o.push(oe({node:l}));}o.length&&o.push("");let i=o.join(`
`);return i=codegenCore.replaceWrappedIds(i,p=>this.replacerFn({file:t,headless:false,scope:"file",symbolId:p})),i}renderHeader(t,r){if(!t.hasContent())return "";let s=[this.renderHeaders(),this.renderImports(t,r)].filter(Boolean).join(`
`);return s.endsWith(`
`)?`${s}
`:`${s}

`}renderHeaders(){return ["// This file is auto-generated by @hey-api/openapi-ts",""].join(`
`)}renderImports(t,r){let s=this.groupByKey(t,"imports",r),o=[];for(let[i,p]of s.entries()){let a=[],c,m,l=false;for(let u of p)if(u.defaultImport&&(c=n.identifier({text:u.defaultImport}),u.typeDefaultImport&&(l=true)),typeof u.namespaceImport=="string"&&(m=codegenCore.replaceWrappedIds(u.namespaceImport,h=>this.replacerFn({file:t,symbolId:h})),u.typeNamespaceImport&&(l=true)),u.names&&u.names.length>0){!l&&u.names.every(h=>u.typeNames?.includes(h))&&(l=true);for(let h of u.names){let g=u.aliases?.[h],b=h,x;g&&g!==b&&(x=b,b=g),b=codegenCore.replaceWrappedIds(b,E=>{let F=this.replacerFn({file:t,symbolId:E}),w=t.project.getFileBySymbolId(E),V=w?w.resolvedNames.get(E):void 0;return V&&V!==F&&(x||(x=V)),F}),x&&(x=codegenCore.replaceWrappedIds(x,E=>this.replacerFn({file:t,symbolId:E})),x===b&&(x=void 0));let P=S__default.default.factory.createImportSpecifier(l?false:u.typeNames?.includes(h)??false,x?n.identifier({text:x}):void 0,n.identifier({text:b}));a.push(P);}}let f=S__default.default.factory.createImportClause(l,c,m?S__default.default.factory.createNamespaceImport(n.identifier({text:m})):a.length?S__default.default.factory.createNamedImports(a):void 0),d=S__default.default.factory.createImportDeclaration(void 0,f,n.stringLiteral({isSingleQuote:true,text:i}));o.push(oe({node:d}));}return o.length&&o.push(""),o.join(`
`)}renderSymbols(t,r){if(!t.hasContent())return "";let s=[this.renderBody(t),this.renderExports(t,r)].filter(Boolean).join(`
`);return s.endsWith(`
`)?s:`${s}
`}replacerFn({file:t,headless:r=true,scope:s="project",symbolId:o}){let i=t.resolvedNames.get(o);if(i)return i;let p=s==="file"?t.getSymbolById(o):t.project.getSymbolById(o);if(!p||!r&&p.value===void 0)return;let a=this.ensureValidName(p.name);return t.resolvedNames.hasValue(a)&&(a=this.getUniqueName(a,t.resolvedNames)),t.resolvedNames.set(o,a),a}};var Wi=/[\p{Lu}]/u,Qs=/[\p{Ll}]/u,_i=/([\p{Alpha}\p{N}_]|$)/u,Yt=/[_.\- `\\[\]{}\\/]+/,Jc=new RegExp(`^${Yt.source}`),Hs=new RegExp(`${Yt.source}${_i.source}`,"gu"),zi=new RegExp(`\\d+${_i.source}`,"gu"),Yc=({case:e,string:t})=>{let r=false,s=false,o=false,i=false,p=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let a=0;a<t.length;a++){let c=t[a];i=a>2?t[a-3]===p:true;let m=a+1,l=t[m];for(Yt.lastIndex=0;l&&Yt.test(l);)m+=1,l=t[m];let f=m!==a+1;if(Qs.lastIndex=0,Wi.lastIndex=0,Wi.test(c)&&(r||l&&!f&&l!=="s"&&Qs.test(l)))t=`${t.slice(0,a)}${p}${t.slice(a)}`,a++,o=s,r=false,s=true;else if(s&&o&&Qs.test(c)&&!i&&!(c==="s"&&(!l||l.toLocaleLowerCase()!==l)))t=`${t.slice(0,a-1)}${p}${t.slice(a-1)}`,o=s,r=true,s=false;else {let d=c.toLocaleLowerCase(),u=c.toLocaleUpperCase();o=s,r=d===c&&u!==c,s=u===c&&d!==c;}}return t},j=({case:e,stripLeadingSeparators:t=true,value:r})=>{let s=r.trim();return s.length?!e||e==="preserve"?s:s.length===1?(Yt.lastIndex=0,Yt.test(s)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?s.toLocaleUpperCase():s.toLocaleLowerCase()):(s!==s.toLocaleLowerCase()&&(s=Yc({case:e,string:s})),(t||s[0]!==r[0])&&(s=s.replace(Jc,"")),s=e==="SCREAMING_SNAKE_CASE"?s.toLocaleUpperCase():s.toLocaleLowerCase(),e==="PascalCase"&&(s=`${s.charAt(0).toLocaleUpperCase()}${s.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(s=s.replaceAll(Hs,(i,p,a)=>a===0&&!t?i:`_${p}`),s[s.length-1]==="_"&&(s=s.slice(0,s.length-1))):(Hs.lastIndex=0,zi.lastIndex=0,s=s.replaceAll(zi,(i,p,a)=>["_","-","."].includes(s.charAt(a+i.length))?i:i.toLocaleUpperCase()),s=s.replaceAll(Hs,(i,p,a)=>a===0&&!t&&i[0]&&r.startsWith(i[0])?i:p.toLocaleUpperCase())),s):""};var O=({config:e,name:t})=>{if(typeof e.name=="function")t=e.name(t);else if(e.name){let r=e.case==="preserve"?"":"-";t=e.name.replace("{{name}}",`${r}${t}${r}`);}return j({case:e.case,value:t})};var Fe=class{_exportFromIndex;_headers=[];_id;_imports=new Map;_items=[];_name;_path;constructor({dir:t,exportFromIndex:r=false,header:s=true,id:o,name:i}){this._exportFromIndex=r,this._id=o,this._name=this._setName(i),this._path=er__default.default.resolve(t,this._name),s&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}get exportFromIndex(){return this._exportFromIndex}get id(){return this._id}import({module:t,...r}){if(!r.name)return {name:void 0};let s=this._imports.get(t);s||(s=new Map,this._imports.set(t,s));let o=s.get(r.name);return o?{...o,name:o.alias||o.name}:(s.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=yn(this._name);return t}relativePathToFile({context:t,id:r}){let s="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let l=t.config.configFile.split("/");m=l.slice(0,l.length-1);}s=er__default.default.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);s=m._path;}let o=this._path.split(er__default.default.sep),i=s.split(er__default.default.sep),p=-1,a="";for(let m of o)if(p+=1,i[p]!==m){let l=Array.from({length:o.length-p}).fill(""),f=i.slice(p),d=f.slice(0,f.length-1);d.length&&d.push(""),a=(l.join("../")||"./")+d.join("/");break}let c=i[i.length-1];return `${a}${yn(c).name}`}remove(t){Bo__default.default.rmSync(this._path,t);}removeNode_LEGACY(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:s}=yn(t);return [s,"gen",r].filter(Boolean).join(".")}_toString(t,r){let s=[];this._headers.length&&s.push(this._headers.join(`
`));let o=r?.options.moduleResolution===S__default.default.ModuleResolutionKind.NodeNext,i=[];for(let[p,a]of this._imports.entries()){let c=Array.from(a.values()),m=p;o&&(m.startsWith("./")||m.startsWith("../"))&&(m==="./client"?m="./client/index.js":m=`${m}.js`);let l=n.namedImportDeclarations({imports:c,module:m});i.push(oe({node:l}));}return i.length&&s.push(i.join(`
`)),s=s.concat(this._items.map(p=>typeof p=="string"?p:oe({node:p,unescape:true}))),s.join(t)}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let s=this._path;if(typeof this._path=="string"){let o=this._path.split(er__default.default.sep);s=o.slice(0,o.length-1).join(er__default.default.sep);}rn(s),Bo__default.default.writeFileSync(this._path,this._toString(t,r));}},yn=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",s=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:s}};var rm=url.fileURLToPath((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (_documentCurrentScript && _documentCurrentScript.tagName.toUpperCase() === 'SCRIPT' && _documentCurrentScript.src || new URL('internal.cjs', document.baseURI).href)));er__default.default.dirname(rm);var nm=e=>{let t=e.split(er__default.default.sep);return t.slice(0,t.length-1).join(er__default.default.sep)},X=({config:e,sourceOutput:t})=>{let r=I(e);if("bundle"in r.config&&r.config.bundle)return _t({moduleOutput:"client",sourceOutput:t});if(er__default.default.isAbsolute(r.name)){let s=nm(r.name),o=er__default.default.resolve(e.output.path);return er__default.default.relative(o,s).replace(/\\/g,"/")}return r.name};var hn=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},ht=e=>{for(let t in e)if(e[t].required)return  true;return  false},Hi=e=>e?!!(ht(e.cookie)||ht(e.header)||ht(e.path)||ht(e.query)):false,Zs=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let s=t.cookie[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:hn({context:e,parameter:s})}}for(let r in t.header){let s=t.header[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:hn({context:e,parameter:s})}}for(let r in t.path){let s=t.path[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:hn({context:e,parameter:s})}}for(let r in t.query){let s=t.query[r];if(s.pagination)return {in:s.location,name:s.pagination===true?s.name:`${s.name}.${s.pagination}`,schema:hn({context:e,parameter:s})}}}};var Q=({detectFormat:e=true,schema:t})=>{if(!t.items)return t;let r=[],s=[];for(let i of t.items){if(!i.type&&i.items||t.type==="tuple"){r.push(i);continue}if(!i.type||i.type==="boolean"||i.type==="integer"||i.type==="null"||i.type==="number"||i.type==="string"||i.type==="unknown"||i.type==="void"){let p=i.const!==void 0?`const-${i.const}`:"",a=i.format!==void 0&&e?`format-${i.format}`:"",c=`${i.$ref??""}${i.type??""}${p}${a}`;s.includes(c)||(s.push(c),r.push(i));continue}r.push(i);}let o={...t};if(o.items=r,o.items.length<=1&&o.type!=="array"&&o.type!=="enum"&&o.type!=="tuple"){let i=o.items[0];delete o.logicalOperator,delete o.items,o={...o,...i};}return o.type==="unknown"?{}:o};var Fr=e=>JSON.parse(JSON.stringify(e)),$=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let s of t)r.add(s);return r.size>e.length?Array.from(r):e};var Us=({items:e,schema:t})=>{for(let r of e)t.accessScopes=$(t.accessScopes,r.accessScopes);t.items=e;},W=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:s})=>e.length?s.type==="tuple"?(Us({items:e,schema:s}),s):e.length!==1?(Us({items:e,schema:s}),s.logicalOperator=t,s):r?(s={...s,...e[0]},s):(Us({items:e,schema:s}),s):s;var rr=e=>!!(Hi(e.parameters)||e.body?.required),D=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,Zi=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return Zs({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let s=r.schema,o=s.$ref?e.resolveIrRef(s.$ref):s,p=("schema"in o?o.schema:o)?.properties?.[r.pagination];return p?{in:"body",name:r.pagination,schema:p}:Zs({context:e,parameters:t.parameters})},Xs=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},Me=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},s={properties:{},type:"object"},o;for(let a in e.responses){let c=e.responses[a];switch(Xs({statusCode:a})){case "1XX":case "3XX":break;case "2XX":s.properties[a]=c.schema;break;case "4XX":case "5XX":r.properties[a]=c.schema;break;case "default":o=c;break}}if(o){let a=false;Object.keys(s.properties).length||(s.properties.default=o.schema,a=true);let c=(o.schema.description??"").toLocaleLowerCase(),m=(o.schema.$ref??"").toLocaleLowerCase();["success"].some(d=>c.includes(d)||m.includes(d))&&(s.properties.default=o.schema,a=true),["error","problem"].some(d=>c.includes(d)||m.includes(d))&&(r.properties.default=o.schema,a=true),a||(r.properties.default=o.schema);}let i=Object.keys(r.properties);if(i.length){r.required=i,t.errors=r;let a=W({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});a=Q({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.error=a);}let p=Object.keys(s.properties);if(p.length){s.required=p,t.responses=s;let a=W({items:Object.values(s.properties),mutateSchemaOneItem:true,schema:{}});a=Q({schema:a}),Object.keys(a).length&&a.type!=="unknown"&&(t.response=a);}return t};var xn=e=>({getVersion:t=>{let r=e[t];try{if(r)return gn__namespace.parse(r)||void 0}catch{}},isInstalled:t=>!!e[t],satisfies:(t,r,s)=>{let o=typeof t=="string"?e[t]:t;return o?gn__namespace.satisfies(o,r,s):false}});var sm=e=>{switch(e.method){case "delete":case "patch":case "post":case "put":return ["mutation"];case "get":return ["query"];default:return []}},bn=class{api;config;context;dependencies=[];gen;handler;name;output;package;constructor(t){this.api=t.api??{},this.config=t.config,this.context=t.context,this.dependencies=t.dependencies,this.gen=t.gen,this.handler=t.handler,this.name=t.name,this.output=t.output,this.package=t.context.package;}createFile(t){return this.context.createFile({exportFromIndex:this.config.exportFromIndex,...t})}forEach(...t){let r=t.slice(0,-1),s=t[t.length-1],o=new Set(r.length?r:["operation","parameter","requestBody","schema","server","webhook"]);if(o.has("server")&&this.context.ir.servers)for(let i of this.context.ir.servers){let p={server:i,type:"server"};try{s(p);}catch(a){this.forEachError(a,p);}}if(o.has("schema")&&this.context.ir.components?.schemas)for(let i in this.context.ir.components.schemas){let p={$ref:`#/components/schemas/${i}`,name:i,schema:this.context.ir.components.schemas[i],type:"schema"};try{s(p);}catch(a){this.forEachError(a,p);}}if(o.has("parameter")&&this.context.ir.components?.parameters)for(let i in this.context.ir.components.parameters){let p={$ref:`#/components/parameters/${i}`,name:i,parameter:this.context.ir.components.parameters[i],type:"parameter"};try{s(p);}catch(a){this.forEachError(a,p);}}if(o.has("requestBody")&&this.context.ir.components?.requestBodies)for(let i in this.context.ir.components.requestBodies){let p={$ref:`#/components/requestBodies/${i}`,name:i,requestBody:this.context.ir.components.requestBodies[i],type:"requestBody"};try{s(p);}catch(a){this.forEachError(a,p);}}if(o.has("operation")&&this.context.ir.paths)for(let i in this.context.ir.paths){let p=this.context.ir.paths[i];for(let a in p){let c=a,m={method:c,operation:p[c],path:i,type:"operation"};try{s(m);}catch(l){this.forEachError(l,m);}}}if(o.has("webhook")&&this.context.ir.webhooks)for(let i in this.context.ir.webhooks){let p=this.context.ir.webhooks[i];for(let a in p){let c=a,m={key:i,method:c,operation:p[c],type:"webhook"};try{s(m);}catch(l){this.forEachError(l,m);}}}}forEachError(t,r){let s=t instanceof Error?t:new Error(String(t));throw new nn({args:[r],error:s,event:r.type,name:"Error",pluginName:this.name})}getPlugin(t){return this.context.plugins[t]}getPluginOrThrow(t){let r=this.getPlugin(t);if(!r)throw new Error(`plugin not found ${t}`);return r}hooks={operation:{isMutation:t=>this.isOperationKind(t,"mutation"),isQuery:t=>this.isOperationKind(t,"query")}};isOperationKind(t,r){let s=r==="query"?"isQuery":"isMutation",o=this.config["~hooks"]?.operations?.[s],i=o?.(t);if(i!==void 0)return i;let p=this.config["~hooks"]?.operations?.getKind,a=p?.(t);if(a!==void 0)return a.includes(r);let c=this.context.config.parser.hooks.operations?.[s],m=c?.(t);if(m!==void 0)return m;let l=this.context.config.parser.hooks.operations?.getKind,f=l?.(t);return f!==void 0?f.includes(r):sm(t).includes(r)}async run(){await this.handler({plugin:this});}};var om=/~1/g,im=/~0/g,M=e=>{let t=Le(e),r=t[t.length-1];return decodeURI(r)},am=e=>String(e).replace(/~/g,"~0").replace(/\//g,"~1"),Le=e=>{let t=e.trim();return t.startsWith("#")&&(t=t.slice(1)),t.startsWith("/")&&(t=t.slice(1)),t?t.split("/").map(r=>r.replace(om,"/").replace(im,"~")):[]},Ui=e=>{let t=e.trim();return t.startsWith("#")||(t=`#${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t=t.replace(/\/+/g,"/"),t},Xi=e=>{let t=e.map(am).join("/");return "#"+(t?`/${t}`:"")},Gs=({$ref:e,spec:t})=>{let r=Le(decodeURI(e)),s=t;for(let o of r){let i=o;if(s[i]===void 0)throw new Error(`Reference not found: ${e}`);s=s[i];}return s};var Sn=class{config;files={};gen;ir={};logger;package;plugins={};spec;constructor({config:t,dependencies:r,logger:s,spec:o}){this.config=t,this.gen=new codegenCore.CodegenProject,this.logger=s,this.package=xn(r),this.spec=o,t.output.indexFile&&this.gen.createFile("index",{extension:".ts",renderer:new q});}createFile(t){let r=t.path.split("/"),s=er__default.default.resolve(this.config.output.path,...r.slice(0,r.length-1)),o=new Fe({dir:s,exportFromIndex:t.exportFromIndex,id:t.id,name:`${r[r.length-1]}.ts`});return this.files[t.id]=o,o}dereference(t){let r=this.resolveRef(t.$ref),s={...t,...r};return delete s.$ref,s}file({id:t}){return this.files[t]}registerPlugin(t){let r=this.config.plugins[t],s=new bn({api:r.api,config:r.config,context:this,dependencies:r.dependencies??[],gen:this.gen,handler:r.handler,name:r.name,output:r.output});return this.plugins[s.name]=s,s}registerPlugins(){return this.config.pluginOrder.map(t=>this.registerPlugin(t))}resolveIrRef(t){return Gs({$ref:t,spec:this.ir})}resolveRef(t){return Gs({$ref:t,spec:this.spec})}};var qt=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return Zt.lastIndex=0,Zt.test(t)?`_${t}`:t},gt=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),Js=e=>{let t=e.replace("[]","Array");return gt(t)};var re=["delete","get","head","options","patch","post","put","trace"],$t=({context:e,count:t=1,id:r,method:s,path:o,state:i})=>{let p,{output:a}=e.config,c=(a!==void 0&&typeof a=="object"&&"case"in a?a.case:void 0)??"camelCase";if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].config.operationId))p=j({case:c,value:gt(r)});else {let m=o.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");p=j({case:c,value:`${s}-${m}`});}return t>1&&(p=`${p}${t}`),i.ids.has(p)?$t({context:e,count:t+1,id:r,method:s,path:o,state:i}):(i.ids.set(p,D({method:s,path:o})),p)};var Gi="/",N=(e,t="")=>`${e}${Gi}${t}`,te=e=>{let t=e.indexOf(Gi);return {name:e.slice(t+1),namespace:e.slice(0,t)}},Ji=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},De=(e,t)=>{let r=[],s=[];if(t)for(let o of t)o.startsWith("/")&&o.endsWith("/")?s.push(new RegExp(o.slice(1,o.length-1))):r.push(N(e,o));return {regexps:s,set:new Set(r)}},mm=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:s,spec:o})=>{if((e.regexps.length||r.regexps.length)&&o.paths)for(let i of Object.entries(o.paths)){let p=i[0],a=i[1];for(let c of re){if(!a[c])continue;let l=D({method:c,path:p});e.regexps.some(f=>f.test(l))&&e.set.add(N("operation",l)),r.regexps.some(f=>f.test(l))&&r.set.add(N("operation",l));}}if(o.definitions&&(t.regexps.length||s.regexps.length))for(let i of Object.keys(o.definitions))t.regexps.some(p=>p.test(i))&&t.set.add(N("schema",i)),s.regexps.some(p=>p.test(i))&&s.set.add(N("schema",i));},lm=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:s,excludeSchemas:o,includeOperations:i,includeParameters:p,includeRequestBodies:a,includeResponses:c,includeSchemas:m,spec:l})=>{if((e.regexps.length||i.regexps.length)&&l.paths)for(let f of Object.entries(l.paths)){let d=f[0],u=f[1];for(let h of re){if(!u[h])continue;let b=D({method:h,path:d});e.regexps.some(x=>x.test(b))&&e.set.add(N("operation",b)),i.regexps.some(x=>x.test(b))&&i.set.add(N("operation",b));}}if(l.components){if((t.regexps.length||p.regexps.length)&&l.components.parameters)for(let f of Object.keys(l.components.parameters))t.regexps.some(d=>d.test(f))&&t.set.add(N("parameter",f)),p.regexps.some(d=>d.test(f))&&p.set.add(N("parameter",f));if((r.regexps.length||a.regexps.length)&&l.components.requestBodies)for(let f of Object.keys(l.components.requestBodies))r.regexps.some(d=>d.test(f))&&r.set.add(N("body",f)),a.regexps.some(d=>d.test(f))&&a.set.add(N("body",f));if((s.regexps.length||c.regexps.length)&&l.components.responses)for(let f of Object.keys(l.components.responses))s.regexps.some(d=>d.test(f))&&s.set.add(N("response",f)),c.regexps.some(d=>d.test(f))&&c.set.add(N("response",f));if((o.regexps.length||m.regexps.length)&&l.components.schemas)for(let f of Object.keys(l.components.schemas))o.regexps.some(d=>d.test(f))&&o.set.add(N("schema",f)),m.regexps.some(d=>d.test(f))&&m.set.add(N("schema",f));}},fm=({spec:e,...t})=>{"swagger"in e?mm({...t,spec:e}):lm({...t,spec:e});},nr=(e,t,r)=>{let s=r.timeEvent("create-filters"),o=De("operation",e?.operations?.exclude),i=De("operation",e?.operations?.include),p=De("parameter",e?.parameters?.exclude),a=De("parameter",e?.parameters?.include),c=De("body",e?.requestBodies?.exclude),m=De("body",e?.requestBodies?.include),l=De("response",e?.responses?.exclude),f=De("response",e?.responses?.include),d=De("schema",e?.schemas?.exclude),u=De("schema",e?.schemas?.include);fm({excludeOperations:o,excludeParameters:p,excludeRequestBodies:c,excludeResponses:l,excludeSchemas:d,includeOperations:i,includeParameters:a,includeRequestBodies:m,includeResponses:f,includeSchemas:u,spec:t});let h={deprecated:e?.deprecated??true,operations:{exclude:o.set,include:i.set},orphans:e?.orphans??false,parameters:{exclude:p.set,include:a.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:c.set,include:m.set},responses:{exclude:l.set,include:f.set},schemas:{exclude:d.set,include:u.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}};return s.timeEnd(),h},sr=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,dm=({filters:e,parameters:t,requestBodies:r,resourceMetadata:s,responses:o,schemas:i})=>{let p=new Set,c=[...e.operations.include.size?e.operations.include:new Set(s.operations.keys())];for(;c.length;){let m=c.pop();if(e.operations.exclude.has(m)||p.has(m))continue;let l=s.operations.get(m);l&&(!e.deprecated&&l.deprecated||e.tags.exclude.size&&l.tags.size&&[...e.tags.exclude].some(f=>l.tags.has(f))||e.tags.include.size&&!new Set([...e.tags.include].filter(f=>l.tags.has(f))).size||[...l.dependencies].some(f=>{let{namespace:d}=te(f);switch(d){case "body":return !r.has(f);case "parameter":return !t.has(f);case "response":return !o.has(f);case "schema":return !i.has(f);default:return  false}})||p.add(m));}return {operations:p}},um=({filters:e,resourceMetadata:t,schemas:r})=>{let s=new Set,i=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;i.length;){let p=i.pop();if(e.parameters.exclude.has(p)||s.has(p))continue;let a=t.parameters.get(p);if(a&&!(!e.deprecated&&a.deprecated)&&(s.add(p),!!a.dependencies.size))for(let c of a.dependencies){let{namespace:m}=te(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?s.delete(p):s.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?s.delete(p):r.has(c)||r.add(c);break}}}}return {parameters:s}},ym=({filters:e,resourceMetadata:t,schemas:r})=>{let s=new Set,i=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;i.length;){let p=i.pop();if(e.requestBodies.exclude.has(p)||s.has(p))continue;let a=t.requestBodies.get(p);if(a&&!(!e.deprecated&&a.deprecated)&&(s.add(p),!!a.dependencies.size))for(let c of a.dependencies){let{namespace:m}=te(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?s.delete(p):s.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?s.delete(p):r.has(c)||r.add(c);break}}}}return {requestBodies:s}},hm=({filters:e,resourceMetadata:t,schemas:r})=>{let s=new Set,i=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;i.length;){let p=i.pop();if(e.responses.exclude.has(p)||s.has(p))continue;let a=t.responses.get(p);if(a&&!(!e.deprecated&&a.deprecated)&&(s.add(p),!!a.dependencies.size))for(let c of a.dependencies){let{namespace:m}=te(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?s.delete(p):s.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?s.delete(p):r.has(c)||r.add(c);break}}}}return {responses:s}},gm=({filters:e,resourceMetadata:t})=>{let r=new Set,o=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;o.length;){let i=o.pop();if(e.schemas.exclude.has(i)||r.has(i))continue;let p=t.schemas.get(i);if(p&&!(!e.deprecated&&p.deprecated)&&(r.add(i),!!p.dependencies.size))for(let a of p.dependencies){let{namespace:c}=te(a);switch(c){case "schema":{!r.has(a)&&!e.schemas.exclude.has(a)&&o.push(a);break}}}}return {schemas:r}},xm=({filters:e,parameters:t,resourceMetadata:r})=>{if(e.parameters.exclude.size)for(let s of t){let o=r.parameters.get(s);if(o?.dependencies.size){for(let i of e.parameters.exclude)if(o.dependencies.has(i)){t.delete(s);break}}}},bm=({filters:e,requestBodies:t,resourceMetadata:r})=>{if(e.requestBodies.exclude.size)for(let s of t){let o=r.requestBodies.get(s);if(o?.dependencies.size){for(let i of e.requestBodies.exclude)if(o.dependencies.has(i)){t.delete(s);break}}}},Sm=({filters:e,resourceMetadata:t,responses:r})=>{if(e.responses.exclude.size)for(let s of r){let o=t.responses.get(s);if(o?.dependencies.size){for(let i of e.responses.exclude)if(o.dependencies.has(i)){r.delete(s);break}}}},Om=({filters:e,resourceMetadata:t,schemas:r})=>{if(e.schemas.exclude.size)for(let s of r){let o=t.schemas.get(s);if(o?.dependencies.size){for(let i of e.schemas.exclude)if(o.dependencies.has(i)){r.delete(s);break}}}},Tm=({operationDependencies:e,parameters:t,requestBodies:r,responses:s,schemas:o})=>{for(let i of o)e.has(i)||o.delete(i);for(let i of t)e.has(i)||t.delete(i);for(let i of r)e.has(i)||r.delete(i);for(let i of s)e.has(i)||s.delete(i);},Rm=({operations:e,resourceMetadata:t})=>{let r=new Set,o=[...new Set([...e].flatMap(i=>[...t.operations.get(i)?.dependencies??[]]))];for(;o.length;){let i=o.pop();if(r.has(i))continue;r.add(i);let{namespace:p}=te(i),a;if(p==="body"?a=t.requestBodies.get(i)?.dependencies:p==="operation"?a=t.operations.get(i)?.dependencies:p==="parameter"?a=t.parameters.get(i)?.dependencies:p==="response"?a=t.responses.get(i)?.dependencies:p==="schema"&&(a=t.schemas.get(i)?.dependencies),!!a?.size)for(let c of a)r.has(c)||o.push(c);}return {operationDependencies:r}},or=({filters:e,logger:t,resourceMetadata:r})=>{let s=t.timeEvent("create-filtered-dependencies"),{schemas:o}=gm({filters:e,resourceMetadata:r}),{parameters:i}=um({filters:e,resourceMetadata:r,schemas:o}),{requestBodies:p}=ym({filters:e,resourceMetadata:r,schemas:o}),{responses:a}=hm({filters:e,resourceMetadata:r,schemas:o});Om({filters:e,resourceMetadata:r,schemas:o}),xm({filters:e,parameters:i,resourceMetadata:r}),bm({filters:e,requestBodies:p,resourceMetadata:r}),Sm({filters:e,resourceMetadata:r,responses:a});let{operations:c}=dm({filters:e,parameters:i,requestBodies:p,resourceMetadata:r,responses:a,schemas:o});if(!e.orphans&&c.size){let{operationDependencies:m}=Rm({operations:c,resourceMetadata:r});Tm({operationDependencies:m,parameters:i,requestBodies:p,responses:a,schemas:o});}return s.timeEnd(),{operations:c,parameters:i,requestBodies:p,responses:a,schemas:o}};var ir=(e,t)=>{let r=t.timeEvent("build-resource-metadata"),s={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},o=i=>{let p=new Set,a=e.allDependencies.get(i);if(a?.size)for(let c of a){let m=Le(c),l=m[m.length-2],f=m[m.length-1];if(l&&f){let d=Ji(l);d==="unknown"&&console.warn(`unsupported type: ${l}`),p.add(N(d,f));}}return p};for(let[i,p]of e.nodes){let a=Le(i);if(a[0]==="components"){if(a.length===3){if(a[1]==="schemas"){let c=a[a.length-1];s.schemas.set(N("schema",c),{dependencies:o(i),deprecated:p.deprecated??false});}else if(a[1]==="parameters"){let c=a[a.length-1];s.parameters.set(N("parameter",c),{dependencies:o(i),deprecated:p.deprecated??false});}else if(a[1]==="requestBodies"){let c=a[a.length-1];s.requestBodies.set(N("body",c),{dependencies:o(i),deprecated:p.deprecated??false});}else if(a[1]==="responses"){let c=a[a.length-1];s.responses.set(N("response",c),{dependencies:o(i),deprecated:p.deprecated??false});}}continue}if(a[0]==="paths"){if(a.length===3&&re.includes(a[2])){let c=a[a.length-1],m=a.slice(1,-1).join("/"),l=D({method:c,path:m});s.operations.set(N("operation",l),{dependencies:o(i),deprecated:p.deprecated??false,tags:p.tags??new Set});}continue}if(a[0]==="definitions"){if(a.length===2){let c=a[a.length-1];s.schemas.set(N("schema",c),{dependencies:o(i),deprecated:p.deprecated??false});}continue}}return r.timeEnd(),{resourceMetadata:s}};var xt=[["additionalProperties","single"],["allOf","array"],["anyOf","array"],["contains","single"],["dependentSchemas","objectMap"],["else","single"],["if","single"],["items","singleOrArray"],["oneOf","array"],["patternProperties","objectMap"],["properties","objectMap"],["propertyNames","single"],["then","single"]];var Mr=e=>{if(On(e))return e.components.schemas;if(Tn(e))return e.definitions},On=e=>typeof e=="object"&&e!==null&&"components"in e&&typeof e.components=="object"&&e.components!==null&&"schemas"in e.components&&typeof e.components.schemas=="object"&&e.components.schemas!==null,Tn=e=>typeof e=="object"&&e!==null&&"definitions"in e&&typeof e.definitions=="object"&&e.definitions!==null;var Yi=(e,t)=>e instanceof Set?e.has(t):e instanceof Array?e.includes(t):t in e,Lr=({base:e,components:t,extraComponents:r})=>{let s=2,o=e;for(;Yi(t,o)||r&&Yi(r,o);)o=`${e}${s}`,s+=1;return o},Rn=e=>e.length===3&&e[0]==="components"&&e[1]==="schemas"||e.length===2&&e[0]==="definitions",ar=e=>{if(e&&typeof e=="object"){if("swagger"in e)return "#/definitions/";if("openapi"in e)return "#/components/schemas/"}return ""};var Ys=e=>{if(!e||typeof e!="object"||!("enum"in e)||!(e.enum instanceof Array))return;let t=("type"in e?e.type:void 0)||"",r=[...e.enum].sort();return JSON.stringify({type:t,values:r})},eo=({key:e,node:t,parent:r,path:s,visitor:o})=>{if(!t||typeof t!="object"||t instanceof Array)return;let i=t;("type"in i||"enum"in i||xt.some(([p])=>p in i))&&o({key:e,node:t,parent:r,path:s});for(let[p,a]of Object.entries(i))typeof a=="object"&&a!==null&&(a instanceof Array?a.forEach((c,m)=>eo({key:m,node:c,parent:a,path:[...s,p,m],visitor:o})):eo({key:p,node:a,parent:t,path:[...s,p],visitor:o}));},Im=({spec:e})=>{let t=Mr(e);if(!t)return;let r=ar(e),s={};for(let[i,p]of Object.entries(t))Ys(p)&&(s[`${r}${i}`]=p);let o=i=>{if(i instanceof Array)i.forEach(o);else if(i&&typeof i=="object")for(let[p,a]of Object.entries(i))p==="$ref"&&typeof a=="string"&&a in s?(Object.assign(i,Fr(s[a])),delete i.$ref):o(a);};o(e);for(let i of Object.keys(s)){let p=Le(i),a=p[p.length-1];a&&delete t[a];}},Pm=({config:e,spec:t})=>{let r=Mr(t);if(!r)return;let s={};for(let[c,m]of Object.entries(r)){let l=Ys(m);l&&(s[l]=c);}let o=[];eo({key:null,node:t,parent:null,path:[],visitor:c=>{if(!Rn(c.path)){let m=Ys(c.node);m&&o.push({...c,signature:m});}}});let i={},p={};for(let{key:c,node:m,signature:l}of o){if(l in i)continue;if(l in s){i[l]=s[l];continue}let f=O({config:e,name:typeof m=="object"&&m&&"title"in m&&typeof m.title=="string"?m.title:String(c)}),d=Lr({base:f,components:r,extraComponents:Object.values(i)});i[l]=d,p[l]=m;}for(let[c,m]of Object.entries(i)){let l=p[c];m&&!(m in r)&&l&&typeof l=="object"&&(r[m]=l);}let a=ar(t);for(let{key:c,parent:m,signature:l}of o){let f=i[l];f&&c!=null&&m&&typeof m=="object"&&(m[c]={$ref:`${a}${f}`});}},ea=({config:e,spec:t})=>{if(e.mode==="inline"){Im({spec:t});return}if(e.mode==="root"){Pm({config:e,spec:t});return}};var to=(e,t)=>{if(e===t)return  true;if(e===null||t===null)return e===t;let r=typeof e;if(r!==typeof t||r!=="object")return  false;if(Array.isArray(e)||Array.isArray(t)){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return  false;for(let c=0;c<e.length;c++)if(!to(e[c],t[c]))return  false;return  true}let o=e,i=t,p=Object.keys(o).sort(),a=Object.keys(i).sort();if(p.length!==a.length)return  false;for(let c=0;c<p.length;c++)if(p[c]!==a[c])return  false;for(let c of p)if(!to(o[c],i[c]))return  false;return  true},ro=to;var Am=e=>{for(let[,t]of e)if(!t.scopes&&t.parentPointer){let r=e.get(t.parentPointer);r?.scopes&&(t.scopes=new Set(r.scopes));}},so=({cache:e,graph:t,pointer:r,visited:s})=>{let o=e.allDependencies.get(r);if(o)return o;if(s.has(r))return new Set;if(s.add(r),!t.nodes.get(r))return new Set;let p=new Set,a=t.dependencies.get(r);if(a)for(let m of a){p.add(m);let l=so({cache:e,graph:t,pointer:m,visited:s});for(let f of l)p.add(f);}let c=e.parentToChildren.get(r);if(c)for(let m of c){let l=e.childDependencies.get(m);l||(l=so({cache:e,graph:t,pointer:m,visited:s}),e.childDependencies.set(m,l));for(let f of l)p.add(f);}return e.allDependencies.set(r,p),p},Em=e=>{let t=new Set(Array.from(e.nodes.entries()).filter(([,o])=>o.scopes&&o.scopes.size>0).map(([o])=>o)),r=(o,i,p)=>{i.parentPointer&&t.add(i.parentPointer);let a=e.reverseDependencies.get(o);if(a)for(let c of a)t.add(c);if(p){let c=p.match(/(.*)\/(allOf|anyOf|oneOf)\/\d+$/);if(c){let m=c[1];m&&t.add(m);}}},s=(o,i,p)=>{if(!i?.scopes)return;let a=e.nodes.get(p);if(!a?.scopes)return;no(a,i)&&r(o,i,p);};for(;t.size>0;){let o=t.values().next().value;t.delete(o);let i=e.nodes.get(o);if(!i)continue;i.scopes||(i.scopes=new Set);let p=i.node;for(let[c,m]of xt){if(!p||typeof p!="object"||!(c in p))continue;let l=p[c];if(m==="array"&&l instanceof Array)for(let f=0;f<l.length;f++){let d=`${o}/${c}/${f}`;s(o,i,d);}else if(m==="objectMap"&&typeof l=="object"&&l!==null&&!(l instanceof Array))for(let f of Object.keys(l)){let d=`${o}/${c}/${f}`;s(o,i,d);}else if(m==="single"&&typeof l=="object"&&l!==null){let f=`${o}/${c}`;s(o,i,f);}else if(m==="singleOrArray"){if(l instanceof Array)for(let f=0;f<l.length;f++){let d=`${o}/${c}/${f}`;s(o,i,d);}else if(typeof l=="object"&&l!==null){let f=`${o}/${c}`;s(o,i,f);}}}let a=e.dependencies.get(o);if(a)for(let c of a){let m=e.nodes.get(c);m?.scopes&&no(m,i)&&r(o,i);}if(i.parentPointer){let c=e.nodes.get(i.parentPointer);c&&no(i,c)&&r(i.parentPointer,c);}}},no=(e,t)=>{if(!e.scopes)return  false;t.scopes||(t.scopes=new Set);let r=false;for(let s of e.scopes)t.scopes.has(s)||(t.scopes.add(s),r=true);return r},Cm=e=>{for(let[t,r]of e){let{node:s}=r;typeof s!="object"||s===null||s instanceof Array||("readOnly"in s&&s.readOnly===true?r.scopes=new Set(["read"]):"writeOnly"in s&&s.writeOnly===true?r.scopes=new Set(["write"]):t.match(/\/properties\/[^/]+$/)&&(r.scopes=new Set(["normal"])));}},bt=(e,t)=>{let r=t.timeEvent("build-graph"),s={allDependencies:new Map,dependencies:new Map,nodes:new Map,reverseDependencies:new Map},o=({key:p,node:a,parentPointer:c,path:m})=>{if(typeof a!="object"||a===null)return;let l=Xi(m),f,d;if(typeof a=="object"&&a!==null){if("deprecated"in a&&typeof a.deprecated=="boolean"&&(f=!!a.deprecated),"$ref"in a&&typeof a.$ref=="string"){let u=Ui(a.$ref);s.dependencies.has(l)||s.dependencies.set(l,new Set),s.dependencies.get(l).add(u);}"tags"in a&&a.tags instanceof Array&&(d=new Set(a.tags.filter(u=>typeof u=="string")));}if(s.nodes.set(l,{deprecated:f,key:p,node:a,parentPointer:c,tags:d}),a instanceof Array)a.forEach((u,h)=>o({key:h,node:u,parentPointer:l,path:[...m,h]}));else for(let[u,h]of Object.entries(a))o({key:u,node:h,parentPointer:l,path:[...m,u]});};o({key:null,node:e,parentPointer:null,path:[]});let i={allDependencies:new Map,childDependencies:new Map,parentToChildren:new Map};for(let[p,a]of s.nodes){let c=a.parentPointer;c&&(i.parentToChildren.has(c)||i.parentToChildren.set(c,[]),i.parentToChildren.get(c).push(p));}for(let[p,a]of s.dependencies)for(let c of a)s.reverseDependencies.has(c)||s.reverseDependencies.set(c,new Set),s.reverseDependencies.get(c).add(p);Cm(s.nodes),Em(s),Am(s.nodes);for(let p of s.nodes.keys()){let a=so({cache:i,graph:s,pointer:p,visited:new Set});s.allDependencies.set(p,a);}return r.timeEnd(),{graph:s}};var Nm=new Set(["additionalProperties","allOf","anyOf","items","not","oneOf","patternProperties","properties","schema"]),jm=e=>{if(e.length===3&&e[0]==="components"){let t=e[1];if(t==="parameters"||t==="requestBodies")return "write";if(t==="responses"||t==="headers")return "read"}if(e.length===2){let t=e[0];if(t==="parameters")return "write";if(t==="responses")return "read"}},km=(e,t)=>{let r=t.timeEvent("capture-original-schemas"),s={};if(On(e))for(let[o,i]of Object.entries(e.components.schemas))s[`#/components/schemas/${o}`]=i;else if(Tn(e))for(let[o,i]of Object.entries(e.definitions))s[`#/definitions/${o}`]=i;return r.timeEnd(),s},vm=({logger:e,spec:t,split:r})=>{let s=e.timeEvent("insert-split-schemas-into-spec");On(t)?Object.assign(t.components.schemas,r.schemas):Tn(t)&&Object.assign(t.definitions,r.schemas),s.timeEnd();},Ft=(e,t,r)=>{if(t&&typeof t=="object"){if("$ref"in t&&typeof t.$ref=="string"){let s=e.nodes.get(t.$ref);if(s?.scopes&&(r==="writeOnly"&&s.scopes.size===1&&s.scopes.has("write")||r==="readOnly"&&s.scopes.size===1&&s.scopes.has("read"))&&(delete t.$ref,!xt.some(([o])=>o in t)))return  true}for(let[s,o]of xt){if(!(s in t))continue;let i=t[s];if(o==="array"&&i instanceof Array){for(let p=i.length-1;p>=0;p--){let a=i[p];(a&&typeof a=="object"&&a[r]===true||Ft(e,a,r))&&i.splice(p,1);}i.length||delete t[s];}else if(o==="objectMap"&&typeof i=="object"&&i!==null&&!(i instanceof Array)){let p=i,a=new Set;for(let c of Object.keys(p)){let m=p[c];(m&&typeof m=="object"&&m[r]===true||Ft(e,m,r))&&(delete p[c],s==="properties"&&a.add(c));}if(a.size>0&&s==="properties"&&"required"in t&&Array.isArray(t.required)){let m=t.required.filter(l=>!a.has(l));m.length===0?delete t.required:t.required=m;}Object.keys(p).length||delete t[s];}else if(o==="single"&&typeof i=="object"&&i!==null)(i[r]===true||Ft(e,i,r))&&delete t[s];else if(o==="singleOrArray")if(i instanceof Array){for(let p=i.length-1;p>=0;p--){let a=i[p];(a&&typeof a=="object"&&a[r]===true||Ft(e,a,r))&&i.splice(p,1);}i.length||delete t[s];}else typeof i=="object"&&i!==null&&(i[r]===true||Ft(e,i,r))&&delete t[s];}if(t.type==="object"&&!xt.some(([s])=>s in t))return  true}return  false},wm=({logger:e,originalSchemas:t,spec:r,split:s})=>{let o=e.timeEvent("remove-original-split-schemas"),i=Mr(r);for(let p of Object.keys(s.mapping)){let a=Le(p),c=a[a.length-1];typeof c=="string"&&i&&Object.prototype.hasOwnProperty.call(i,c)&&i[c]===t[p]&&delete i[c];}o.timeEnd();},qm=({config:e,graph:t,logger:r,spec:s})=>{let o=r.timeEvent("split-schemas"),i=new Set,p={mapping:{},reverseMapping:{},schemas:{}},a=ar(s),c=a.split("/").length-1,m=l=>{if(l.startsWith(a)){let f=Le(l);if(f.length===c)return f[c-1]||""}return ""};for(let l of t.nodes.keys()){let f=m(l);f&&i.add(f);}for(let[l,f]of t.nodes){let d=m(l);if(!d||!(f.scopes?.has("read")||f.scopes?.has("write"))||!f.scopes?.has("normal"))continue;let u=Fr(f.node);Ft(t,u,"writeOnly");let h=O({config:e.responses,name:d}),g=h===d?h:Lr({base:h,components:i});i.add(g),p.schemas[g]=u;let b=`${a}${g}`,x=Fr(f.node);if(Ft(t,x,"readOnly"),ro(u,x)&&ro(u,f.node))continue;let P=O({config:e.requests,name:d}),E=P===d&&P!==g?P:Lr({base:P,components:i});i.add(E),p.schemas[E]=x;let F=`${a}${E}`;p.mapping[l]={read:b,write:F},p.reverseMapping[b]=l,p.reverseMapping[F]=l;}return o.timeEnd(),p},$m=({logger:e,spec:t,split:r})=>{let s=e.timeEvent("update-refs-in-spec"),o=ar(t),i=({context:p,currentPointer:a,inSchema:c,node:m,path:l})=>{if(m instanceof Array)m.forEach((f,d)=>i({context:p,currentPointer:a,inSchema:c,node:f,path:[...l,d]}));else if(m&&typeof m=="object"){let f=a,d=p;if(Rn(l)){let h=l[l.length-1];f=`${o}${h}`;let g=r.reverseMapping[f];if(g){let b=r.mapping[g];b?.read===f?d="read":b?.write===f&&(d="write");}}let u=jm(l);if(u!==void 0){for(let h in m)Object.prototype.hasOwnProperty.call(m,h)&&i({context:u,currentPointer:f,inSchema:false,node:m[h],path:[...l,h]});return}for(let h in m){if(!Object.prototype.hasOwnProperty.call(m,h))continue;let g=m[h];if(!c){if(h==="requestBody"){i({context:"write",currentPointer:f,inSchema:false,node:g,path:[...l,h]});continue}if(h==="responses"){i({context:"read",currentPointer:f,inSchema:false,node:g,path:[...l,h]});continue}if(h==="parameters"&&Array.isArray(g)){g.forEach((b,x)=>{b&&typeof b=="object"&&"schema"in b&&i({context:"write",currentPointer:f,inSchema:true,node:b.schema,path:[...l,h,x,"schema"]}),b&&typeof b=="object"&&"content"in b&&i({context:"write",currentPointer:f,inSchema:false,node:b.content,path:[...l,h,x,"content"]});});continue}if(h==="headers"&&typeof g=="object"&&g!==null){for(let b in g)Object.prototype.hasOwnProperty.call(g,b)&&i({context:"read",currentPointer:f,inSchema:false,node:g[b],path:[...l,h,b]});continue}}if(Nm.has(h))i({context:d,currentPointer:f,inSchema:true,node:g,path:[...l,h]});else if(h==="$ref"&&typeof g=="string"){let b=r.mapping[g];b&&(b.read&&(!d||d==="read")?m[h]=b.read:b.write&&(!d||d==="write")&&(m[h]=b.write));}else i({context:d,currentPointer:f,inSchema:c,node:g,path:[...l,h]});}}};i({context:null,currentPointer:null,inSchema:false,node:t,path:[]}),s.timeEnd();},ta=({config:e,logger:t,spec:r})=>{let{graph:s}=bt(r,t),o=km(r,t),i=qm({config:e,graph:s,logger:t,spec:r});vm({logger:t,spec:r,split:i}),$m({logger:t,spec:r,split:i}),wm({logger:t,originalSchemas:o,spec:r,split:i});};var pr=({context:e})=>{let{logger:t}=e,r=t.timeEvent("transform-openapi-spec");e.config.parser.transforms.enums.enabled&&ea({config:e.config.parser.transforms.enums,spec:e.spec}),e.config.parser.transforms.readWrite.enabled&&ta({config:e.config.parser.transforms.readWrite,logger:t,spec:e.spec}),r.timeEnd();};var k=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var Fm=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),Mm=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:Fm(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),Lm=e=>{let t=Mm(e.path),r=e.severity==="error"?en__default.default.bold.red:en__default.default.bold.yellow,s=e.message.replace(/`([^`]+)`/g,(o,i)=>en__default.default.yellow(`\`${i}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${en__default.default.cyan(t)}: ${s}`},Dm=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,cr=({context:e,result:t})=>{for(let r of t.issues)Dm({context:e,issue:r})&&console.log(Lm(r));t.valid||process.exit(1);};var ra=({logger:e,operations:t,preserveOrder:r,schemas:s,spec:o})=>{let i=e.timeEvent("filter-spec");if(o.definitions){let p={};if(r)for(let[a,c]of Object.entries(o.definitions))s.has(N("schema",a))&&(p[a]=c);else for(let a of s){let{name:c}=te(a),m=o.definitions[c];m&&(p[c]=m);}o.definitions=p;}if(o.paths)for(let p of Object.entries(o.paths)){let a=p[0],c=p[1];for(let m of re){if(!c[m])continue;let f=N("operation",D({method:m,path:a}));t.has(f)||delete c[m];}Object.keys(c).length||delete o.paths[a];}i.timeEnd();};var na=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,sa=/^application\/(.*\+)?json(;.*)?$/i,oa=/^multipart\/form-data(;.*)?$/i,ia=/^text\/[a-z0-9.+-]+(;.*)?$/i,aa=/^application\/x-www-form-urlencoded(;.*)?$/i,pa=/^application\/octet-stream(;.*)?$/i,rt=({mediaType:e})=>(na.lastIndex=0,na.test(e)),mr=({mediaType:e})=>{if(sa.lastIndex=0,sa.test(e))return "json";if(oa.lastIndex=0,oa.test(e))return "form-data";if(ia.lastIndex=0,ia.test(e))return "text";if(aa.lastIndex=0,aa.test(e))return "url-search-params";if(pa.lastIndex=0,pa.test(e))return "octet-stream"};var ca=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&rt({mediaType:t})?{...r,format:"binary"}:r:rt({mediaType:t})?{format:"binary",type:"string"}:void 0},oo=({mimeTypes:e,response:t})=>{let r=[];for(let s of e??[])r.push({mediaType:s,schema:t.schema,type:mr({mediaType:s})});return r};function ge(e){let t=`^(${e.keywords.join("|")})$`;return new RegExp(t)}var Ve=(e,t,r)=>{let s=[];for(let o in t)t[o]===e&&s.push(o);return !s.length&&(!r||r())?[M(e)]:s};var Dr=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Vm=({irSchema:e,schema:t})=>{t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Pn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=$(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=$(e.accessScopes,["both"]));},Bm=({context:e,irSchema:t={},schema:r,state:s})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=xe({context:e,schema:r.items,state:s});if(t.accessScopes=$(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let p=r.items.allOf;p&&p.length>1&&!r.items["x-nullable"]?t={...t,...i}:o.push(i);}}return t=W({items:o,schema:t}),t},Km=({irSchema:e={}})=>(e.type="boolean",e),Wm=({irSchema:e={},schema:t})=>(e.type=t.type,e),zm=({context:e,irSchema:t={},schema:r,state:s})=>{t.type="object";let o={};for(let i in r.properties){let p=r.properties[i];if(typeof p!="boolean"){let a=xe({context:e,schema:p,state:{...s,isProperty:true}});t.accessScopes=$(t.accessScopes,a.accessScopes),o[i]=a;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")s.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=xe({context:e,schema:r.additionalProperties,state:s});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},_m=({irSchema:e={}})=>(e.type="string",e),lr=({schema:e})=>{let t={};return Vm({irSchema:t,schema:e}),t},Qm=({context:e,schema:t,state:r})=>{let s=lr({schema:t}),o=[],i=Dr({schema:t}),p=t.allOf;for(let a of p){let m="$ref"in a?r:{...r,inAllOf:true},l=xe({context:e,schema:a,state:m});if(s.accessScopes=$(s.accessScopes,l.accessScopes),t.required&&(l.required?l.required=[...l.required,...t.required]:l.required=t.required),o.push(l),a.$ref){let f=e.resolveRef(a.$ref);if(f.discriminator&&r.$ref){let u=Ve(r.$ref).map(g=>({const:g,type:"string"})),h={properties:{[f.discriminator]:u.length>1?{items:u,logicalOperator:"or"}:u[0]},type:"object"};f.required?.includes(f.discriminator)&&(h.required=[f.discriminator]),o.push(h);}if(!r.circularReferenceTracker.has(a.$ref)){let d=xe({context:e,schema:f,state:{...r,$ref:a.$ref}});s.accessScopes=$(s.accessScopes,d.accessScopes);}}}if(i==="object"){let a=Vr({context:e,schema:{...t,type:"object"},state:r});if(s.accessScopes=$(s.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let l=m.$ref?e.resolveRef(m.$ref):m;if(Dr({schema:l})==="object"){let f=Vr({context:e,schema:{...l,type:"object"},state:r});if(s.accessScopes=$(s.accessScopes,f.accessScopes),f.properties?.[c]){a.properties[c]=f.properties[c];break}}}o.push(a);}}if(s=W({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:s}),t["x-nullable"]){let a=[{type:"null"}];o.length&&a.unshift(s),s={items:a,logicalOperator:"or"},a[0].deprecated&&(s.deprecated=a[0].deprecated),a[0].description&&(s.description=a[0].description);}return s},Hm=({context:e,schema:t,state:r})=>{let s=lr({schema:t});s.type="enum";let o=[];for(let[i,p]of t.enum.entries()){let a=typeof p,c;if(a==="string"||a==="number"||a==="boolean"?c=a:a==="object"&&Array.isArray(p)?c="array":p===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${p}" for enum`,t.enum),!c)continue;let m=Vr({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=p,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),s.accessScopes=$(s.accessScopes,m.accessScopes),o.push(m);}return s=W({items:o,schema:s}),s},Zm=({context:e,schema:t,state:r})=>{let s={};if(!t.$ref.startsWith("#/definitions/")&&!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref);return xe({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}})}if(s.$ref=decodeURI(t.$ref),s.$ref=s.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref),p=xe({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});s.accessScopes=$(s.accessScopes,p.accessScopes);}return s},Um=({context:e,irSchema:t,schema:r,state:s})=>{t||(t=lr({schema:r}));let o={};Pn({irSchema:o,schema:r,state:s}),o.default===null&&delete o.default;let i=[Vr({context:e,irSchema:o,schema:r,state:s}),{type:"null"}];return t=W({items:i,schema:t}),t},Xm=({context:e,schema:t,state:r})=>{let s=lr({schema:t});Pn({irSchema:s,schema:t,state:r});let o=Dr({schema:t});return o?t["x-nullable"]?Um({context:e,irSchema:s,schema:{...t,type:o},state:r}):Vr({context:e,irSchema:s,schema:{...t,type:o},state:r}):s},Vr=({context:e,irSchema:t,schema:r,state:s})=>{switch(t||(t=lr({schema:r}),Pn({irSchema:t,schema:r,state:s})),r.type){case "array":return Bm({context:e,irSchema:t,schema:r,state:s});case "boolean":return Km({irSchema:t});case "integer":case "number":return Wm({irSchema:t,schema:r});case "object":return zm({context:e,irSchema:t,schema:r,state:s});case "string":return _m({irSchema:t});default:return ma({irSchema:t,schema:r,state:s})}},ma=({irSchema:e,schema:t,state:r})=>(e||(e=lr({schema:t})),e.type="unknown",Pn({irSchema:e,schema:t,state:r}),e),xe=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Zm({context:e,schema:t,state:r}):t.enum?Hm({context:e,schema:t,state:r}):t.allOf?Qm({context:e,schema:t,state:r}):t.type||t.properties?Xm({context:e,schema:t,state:r}):ma({schema:t,state:r})),la=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[M(e)]=xe({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Gm=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",St=({context:e,name:t,schema:r})=>{if(ge(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref??"");if("in"in o&&o.in){let i="schema"in o?o.schema:{...o,in:void 0};return St({context:e,name:t,schema:i})}return St({context:e,name:t,schema:o})}if("in"in r){if(!r.in)return  false;let o="schema"in r?r.schema:{...r,in:void 0};return St({context:e,name:t,schema:o})}for(let o in r.properties)if(ge(e.config.parser.pagination).test(o)){let p=r.properties[o];if(typeof p!="boolean"&&!("$ref"in p)){let a=Dr({schema:p});if(Gm(a))return o}}for(let o of r.allOf??[]){let i=St({context:e,name:t,schema:o});if(i)return i}return  false};var Jm=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Ym=({context:e,method:t,operation:r,path:s,state:o})=>{let i={id:$t({context:e,id:r.operationId,method:t,path:s,state:o}),method:t,path:s};return r.operationId&&(i.operationId=r.operationId),Jm({irOperation:i,operation:r}),i},el=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{let p=Ym({context:e,method:t,operation:r,path:s,state:i});r.parameters&&(p.parameters=r.parameters);let a=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},m=[];for(let l of r.requestBody??[]){let f="$ref"in l?e.resolveRef(l.$ref):l,d=f.in==="body"?f.schema:{...f,format:f.type==="file"?"binary":f.format,required:void 0,type:f.type==="file"?"string":f.type},u=oo({mimeTypes:r.consumes,response:{schema:d}}),h=u.find(g=>g.type==="json")||u[0];if(h){let g=St({context:e,name:"",schema:h.schema&&"$ref"in h.schema?{allOf:[{...h.schema}],description:f.description}:{description:f.description,...h.schema}}),b=xe({context:e,schema:"$ref"in f?{allOf:[{...f,$ref:f.$ref,required:[],type:"string"}],description:f.description}:h.schema&&"$ref"in h.schema?{allOf:[{...h.schema}],description:f.description}:{description:f.description,...h.schema},state:void 0});c.mediaType=h.mediaType,f.in==="body"?c.schema=b:(c.schema.properties[f.name]=b,f.required&&m.push(f.name)),g&&(c.pagination=g),h.type&&(c.type=h.type);}f.required&&(a=true);}c.mediaType&&(m.length&&(c.schema.required=m),p.body=c,a&&(p.body.required=a));for(let l in r.responses){p.responses||(p.responses={});let f=r.responses[l],d="$ref"in f?e.resolveRef(f.$ref):f,u=oo({mimeTypes:r.produces?r.produces:["application/json"],response:d}),h=u.find(g=>g.type==="json")||u[0];h?p.responses[l]={mediaType:h.mediaType,schema:xe({context:e,schema:{description:d.description,...ca({content:h})},state:void 0})}:p.responses[l]={schema:{description:d.description,type:l==="204"?"void":"unknown"}};}if(r.security){let l=new Map;for(let f of r.security)for(let d in f){let u=o.get(d);if(!u)continue;let h;if(u.type==="apiKey"&&(h=u),u.type==="basic"&&(h={description:u.description,scheme:"basic",type:"http"}),u.type==="oauth2")switch(h={description:u.description,flows:{},type:"oauth2"},u.flow){case "accessCode":h.flows.authorizationCode={authorizationUrl:u.authorizationUrl,scopes:u.scopes,tokenUrl:u.tokenUrl};break;case "application":h.flows.clientCredentials={scopes:u.scopes,tokenUrl:u.tokenUrl};break;case "implicit":h.flows.implicit={authorizationUrl:u.authorizationUrl,scopes:u.scopes};break;case "password":h.flows.password={scopes:u.scopes,tokenUrl:u.tokenUrl};break}h&&l.set(d,h);}l.size&&(p.security=Array.from(l.values()));}return p},Ot=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[s]||(e.ir.paths[s]={}),e.ir.paths[s][t]=el({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i});};var tl=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},rl=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},nt=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let s={};for(let o of r){let i="$ref"in o?e.dereference(o):o;if(i.in==="body"||i.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(i);continue}s[i.in]||(s[i.in]={}),s[i.in][i.name.toLocaleLowerCase()]=nl({context:e,parameter:i});}return s},nl=({context:e,parameter:t})=>{let r=t,s=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},o=St({context:e,name:t.name,schema:s}),i=rl(t.in),c={allowReserved:false,explode:tl(t.collectionFormat),location:t.in,name:t.name,schema:xe({context:e,schema:s,state:void 0}),style:i};return t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c};var fa=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,Be=e=>{let t={host:"",path:"",port:"",protocol:""};fa.lastIndex=0;let r=e.match(fa);if(!r)return t;let s=r[5]||"";if(s==="."||s==="..")return t;let o=r[8]||"",i=r[2]||"";return i.length===1?t:{host:s,path:o==="/"?"":o,port:r[7]||"",protocol:i}};var da=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",s=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let i=Be(e.config.input.path);t.length||i.protocol&&(t=[i.protocol]),r||(r=`${i.host}${i.port?`:${i.port}`:""}`);}t.length||(t=[""]);let o=t.map(i=>`${i?`${i}://`:""}${r}${s}`).filter(Boolean);o.length&&(e.ir.servers=o.map(i=>({url:i})));};var ua=(e,t)=>{let r=t.timeEvent("validate"),s=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let p=i[0],a=i[1];for(let c of re){if(c==="trace")continue;let m=a[c];if(!m)continue;let l=D({method:c,path:p});m.operationId&&(o.has(m.operationId)?s.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",p,c,"operationId"],severity:"error"}):o.set(m.operationId,l));}}return r.timeEnd(),{issues:s,valid:!s.some(i=>i.severity==="error")}};var io=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=ua(e.spec,e.logger);cr({context:e,result:o});}if(sr(e.config.parser.filters)){let o=nr(e.config.parser.filters,e.spec,e.logger),{graph:i}=bt(e.spec,e.logger),{resourceMetadata:p}=ir(i,e.logger),a=or({filters:o,logger:e.logger,resourceMetadata:p});ra({...a,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}pr({context:e});let r={ids:new Map},s=new Map;for(let o in e.spec.securityDefinitions){let i=e.spec.securityDefinitions[o];s.set(o,i);}if(e.spec.definitions)for(let o in e.spec.definitions){let i=`#/definitions/${o}`,p=e.spec.definitions[o];la({$ref:i,context:e,schema:p});}da({context:e});for(let o in e.spec.paths){if(o.startsWith("x-"))continue;let i=e.spec.paths[o],p=i.$ref?{...e.resolveRef(i.$ref),...i}:i,a={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},c={context:e,operation:{...a,parameters:nt({context:e,operation:a,parameters:p.parameters})},path:o,securitySchemesMap:s,state:r};if(p.delete){let m=k({source:nt({context:e,operation:p.delete,parameters:p.delete.parameters}),target:c.operation.parameters});Ot({...c,method:"delete",operation:{...c.operation,...p.delete,parameters:m}});}if(p.get){let m=k({source:nt({context:e,operation:p.get,parameters:p.get.parameters}),target:c.operation.parameters});Ot({...c,method:"get",operation:{...c.operation,...p.get,parameters:m}});}if(p.head){let m=k({source:nt({context:e,operation:p.head,parameters:p.head.parameters}),target:c.operation.parameters});Ot({...c,method:"head",operation:{...c.operation,...p.head,parameters:m}});}if(p.options){let m=k({source:nt({context:e,operation:p.options,parameters:p.options.parameters}),target:c.operation.parameters});Ot({...c,method:"options",operation:{...c.operation,...p.options,parameters:m}});}if(p.patch){let m=k({source:nt({context:e,operation:p.patch,parameters:p.patch.parameters}),target:c.operation.parameters});Ot({...c,method:"patch",operation:{...c.operation,...p.patch,parameters:m}});}if(p.post){let m=k({source:nt({context:e,operation:p.post,parameters:p.post.parameters}),target:c.operation.parameters});Ot({...c,method:"post",operation:{...c.operation,...p.post,parameters:m}});}if(p.put){let m=k({source:nt({context:e,operation:p.put,parameters:p.put.parameters}),target:c.operation.parameters});Ot({...c,method:"put",operation:{...c.operation,...p.put,parameters:m}});}}};var ya=({logger:e,operations:t,parameters:r,preserveOrder:s,requestBodies:o,responses:i,schemas:p,spec:a})=>{let c=e.timeEvent("filter-spec");if(a.components){if(a.components.parameters){let m={};if(s)for(let[l,f]of Object.entries(a.components.parameters))r.has(N("parameter",l))&&(m[l]=f);else for(let l of r){let{name:f}=te(l),d=a.components.parameters[f];d&&(m[f]=d);}a.components.parameters=m;}if(a.components.requestBodies){let m={};if(s)for(let[l,f]of Object.entries(a.components.requestBodies))o.has(N("body",l))&&(m[l]=f);else for(let l of o){let{name:f}=te(l),d=a.components.requestBodies[f];d&&(m[f]=d);}a.components.requestBodies=m;}if(a.components.responses){let m={};if(s)for(let[l,f]of Object.entries(a.components.responses))i.has(N("response",l))&&(m[l]=f);else for(let l of i){let{name:f}=te(l),d=a.components.responses[f];d&&(m[f]=d);}a.components.responses=m;}if(a.components.schemas){let m={};if(s)for(let[l,f]of Object.entries(a.components.schemas))p.has(N("schema",l))&&(m[l]=f);else for(let l of p){let{name:f}=te(l),d=a.components.schemas[f];d&&(m[f]=d);}a.components.schemas=m;}}if(a.paths)for(let m of Object.entries(a.paths)){let l=m[0],f=m[1];for(let d of re){if(!f[d])continue;let h=N("operation",D({method:d,path:l}));t.has(h)||delete f[d];}Object.keys(f).length||delete a.paths[l];}c.timeEnd();};var ha=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&rt({mediaType:t})?{...r,format:"binary"}:r:rt({mediaType:t})?{format:"binary",type:"string"}:void 0},st=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:mr({mediaType:r})});return t};var Mt=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},sl=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},An=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=$(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=$(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=$(e.accessScopes,["both"]));},ol=({context:e,irSchema:t={},schema:r,state:s})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=ne({context:e,schema:r.items,state:s});if(t.accessScopes=$(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let p=r.items.allOf||r.items.anyOf||r.items.oneOf;p&&p.length>1&&!r.items.nullable?t={...t,...i}:o.push(i);}}return t=W({items:o,schema:t}),t},il=({irSchema:e={}})=>(e.type="boolean",e),al=({irSchema:e={},schema:t})=>(e.type=t.type,e),pl=({context:e,irSchema:t={},schema:r,state:s})=>{t.type="object";let o={};for(let i in r.properties){let p=r.properties[i];if(typeof p!="boolean"){let a=ne({context:e,schema:p,state:{...s,isProperty:true}});t.accessScopes=$(t.accessScopes,a.accessScopes),o[i]=a;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")s.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=ne({context:e,schema:r.additionalProperties,state:s});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},cl=({irSchema:e={}})=>(e.type="string",e),Tt=({schema:e})=>{let t={};return sl({irSchema:t,schema:e}),t},ml=({context:e,schema:t,state:r})=>{let s=Tt({schema:t}),o=[],i=Mt({schema:t}),p=t.allOf;for(let a of p){let m="$ref"in a?r:{...r,inAllOf:true},l=ne({context:e,schema:a,state:m});if(s.accessScopes=$(s.accessScopes,l.accessScopes),t.required&&(l.required?l.required=[...l.required,...t.required]:l.required=t.required),o.push(l),"$ref"in a){let f=e.resolveRef(a.$ref);if(f.discriminator&&r.$ref){let d=Ve(r.$ref,f.discriminator.mapping,f.oneOf?()=>f.oneOf.some(u=>"$ref"in u&&u.$ref===r.$ref):void 0);if(d.length>0){let u=d.map(g=>({const:g,type:"string"})),h={properties:{[f.discriminator.propertyName]:u.length>1?{items:u,logicalOperator:"or"}:u[0]},type:"object"};f.required?.includes(f.discriminator.propertyName)&&(h.required=[f.discriminator.propertyName]),o.push(h);}}if(!r.circularReferenceTracker.has(a.$ref)){let d=ne({context:e,schema:f,state:{...r,$ref:a.$ref}});s.accessScopes=$(s.accessScopes,d.accessScopes);}}}if(i==="object"){let a=Lt({context:e,schema:{...t,type:"object"},state:r});if(s.accessScopes=$(s.accessScopes,a.accessScopes),a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let l="$ref"in m?e.resolveRef(m.$ref):m;if(Mt({schema:l})==="object"){let f=Lt({context:e,schema:{...l,type:"object"},state:r});if(s.accessScopes=$(s.accessScopes,f.accessScopes),f.properties?.[c]){a.properties[c]=f.properties[c];break}}}o.push(a);}}if(s=W({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:s}),t.nullable){let a=[{type:"null"}];o.length&&a.unshift(s),s={items:a,logicalOperator:"or"},a[0].deprecated&&(s.deprecated=a[0].deprecated),a[0].description&&(s.description=a[0].description);}return s},ll=({context:e,schema:t,state:r})=>{let s=Tt({schema:t}),o=[],i=Mt({schema:t}),p=t.anyOf;for(let a of p){let c=ne({context:e,schema:a,state:r});if(s.accessScopes=$(s.accessScopes,c.accessScopes),t.discriminator&&c.$ref!=null){let l=Ve(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(t.nullable&&o.push({type:"null"}),s=W({items:o,mutateSchemaOneItem:true,schema:s}),i==="object"){let a=Lt({context:e,schema:{...t,type:"object"},state:r});s.accessScopes=$(s.accessScopes,a.accessScopes),a.properties&&(s={items:[s,a],logicalOperator:"and"});}return s},fl=({context:e,schema:t,state:r})=>{let s=Tt({schema:t});s.type="enum";let o=[];for(let[i,p]of t.enum.entries()){let a=typeof p,c;if(a==="string"||a==="number"||a==="boolean"?c=a:a==="object"&&Array.isArray(p)?c="array":p===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${a}" typeof value "${p}" for enum`,t.enum),!c)continue;let m=Lt({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=p,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),s.accessScopes=$(s.accessScopes,m.accessScopes),o.push(m);}return s=W({items:o,schema:s}),s},dl=({context:e,schema:t,state:r})=>{let s=Tt({schema:t}),o=[],i=Mt({schema:t}),p=t.oneOf;for(let a of p){let c=ne({context:e,schema:a,state:r});if(s.accessScopes=$(s.accessScopes,c.accessScopes),t.discriminator&&c.$ref!=null){let l=Ve(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(t.nullable&&o.push({type:"null"}),s=W({items:o,mutateSchemaOneItem:true,schema:s}),i==="object"){let a=Lt({context:e,schema:{...t,type:"object"},state:r});s.accessScopes=$(s.accessScopes,a.accessScopes),a.properties&&(s={items:[s,a],logicalOperator:"and"});}return s},ul=({context:e,schema:t,state:r})=>{if(!t.$ref.startsWith("#/components/")&&!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref);return ne({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}})}let o={};if(o.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref),p=ne({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});o.accessScopes=$(o.accessScopes,p.accessScopes);}return o},yl=({context:e,irSchema:t,schema:r,state:s})=>{t||(t=Tt({schema:r}));let o={};An({irSchema:o,schema:r,state:s}),o.default===null&&delete o.default;let i=[Lt({context:e,irSchema:o,schema:r,state:s}),{type:"null"}];return t=W({items:i,schema:t}),t},hl=({context:e,schema:t,state:r})=>{let s=Tt({schema:t});An({irSchema:s,schema:t,state:r});let o=Mt({schema:t});return o?t.nullable?yl({context:e,irSchema:s,schema:{...t,type:o},state:r}):Lt({context:e,irSchema:s,schema:{...t,type:o},state:r}):s},Lt=({context:e,irSchema:t,schema:r,state:s})=>{switch(t||(t=Tt({schema:r}),An({irSchema:t,schema:r,state:s})),r.type){case "array":return ol({context:e,irSchema:t,schema:r,state:s});case "boolean":return il({irSchema:t});case "integer":case "number":return al({irSchema:t,schema:r});case "object":return pl({context:e,irSchema:t,schema:r,state:s});case "string":return cl({irSchema:t});default:return ga({irSchema:t,schema:r,state:s})}},ga=({irSchema:e,schema:t,state:r})=>(e||(e=Tt({schema:t})),e.type="unknown",An({irSchema:e,schema:t,state:r}),e),ne=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?ul({context:e,schema:t,state:r}):t.enum?fl({context:e,schema:t,state:r}):t.allOf?ml({context:e,schema:t,state:r}):t.anyOf?ll({context:e,schema:t,state:r}):t.oneOf?dl({context:e,schema:t,state:r}):t.type||t.properties?hl({context:e,schema:t,state:r}):ga({schema:t,state:r})),xa=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[M(e)]=ne({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var gl=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Dt=({context:e,name:t,schema:r})=>{if(ge(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let p=st({content:o.content}),a=p.find(c=>c.type==="json")||p[0];a?.schema&&(i=a.schema);}return i?Dt({context:e,name:t,schema:i}):false}return Dt({context:e,name:t,schema:o})}for(let o in r.properties)if(ge(e.config.parser.pagination).test(o)){let p=r.properties[o];if(typeof p!="boolean"&&!("$ref"in p)){let a=Mt({schema:p});if(gl(a))return o}}for(let o of r.allOf??[]){let i=Dt({context:e,name:t,schema:o});if(i)return i}return  false};var xl=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},bl=({context:e,method:t,operation:r,path:s,state:o})=>{let i={id:$t({context:e,id:r.operationId,method:t,path:s,state:o}),method:t,path:s};return r.operationId&&(i.operationId=r.operationId),xl({irOperation:i,operation:r}),i},Sl=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{let p=bl({context:e,method:t,operation:r,path:s,state:i});if(r.parameters&&(p.parameters=r.parameters),r.requestBody){let a="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=st({content:a.content}),m=c.find(l=>l.type==="json")||c[0];if(m){let l=Dt({context:e,name:"",schema:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:a.description}:{description:a.description,...m.schema}});p.body={mediaType:m.mediaType,schema:ne({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:a.description}:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:a.description}:{description:a.description,...m.schema},state:void 0})},l&&(p.body.pagination=l),a.required&&(p.body.required=a.required),m.type&&(p.body.type=m.type);}}for(let a in r.responses){p.responses||(p.responses={});let c=r.responses[a],m="$ref"in c?e.resolveRef(c.$ref):c,l=st({content:m.content}),f=l.find(d=>d.type==="json")||l[0];f?p.responses[a]={mediaType:f.mediaType,schema:ne({context:e,schema:{description:m.description,...ha({content:f})},state:void 0})}:p.responses[a]={schema:{description:m.description,type:a==="204"?"void":"unknown"}};}if(r.security){let a=new Map;for(let c of r.security)for(let m in c){let l=o.get(m);l&&a.set(m,l);}a.size&&(p.security=Array.from(a.values()));}return p},ot=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[s]||(e.ir.paths[s]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[s][t]=Sl({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i});};var Ol=e=>{switch(e){case "query":return  false;default:return}},Tl=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Rl=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Ke=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let s of t){let o="$ref"in s?e.dereference(s):s;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=ba({context:e,parameter:o});}return r},ba=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=st({content:t.content}),l=m.find(f=>f.type==="json")||m[0];l&&(r=l.schema);}let s=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},o=Dt({context:e,name:t.name,schema:s}),i=t.style||Rl(t.in),p=t.explode!==void 0?t.explode:Tl(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Ol(t.in),explode:p,location:t.in,name:t.name,schema:ne({context:e,schema:s,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},Sa=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[M(e)]=ba({context:t,parameter:r});};var Il=({context:e,requestBody:t})=>{let r=st({content:t.content}),s=r.find(a=>a.type==="json")||r[0],o=s?s.schema:void 0,i={description:t.description,...o},p={schema:ne({context:e,schema:i,state:void 0})};return t.description&&(p.description=t.description),t.required&&(p.required=t.required),p},Oa=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[M(e)]=Il({context:t,requestBody:r});};var Ta=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Be(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Ra=(e,t)=>{let r=t.timeEvent("validate"),s=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let p=i[0],a=i[1];for(let c of re){let m=a[c];if(!m)continue;let l=D({method:c,path:p});m.operationId&&(o.has(m.operationId)?s.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",p,c,"operationId"],severity:"error"}):o.set(m.operationId,l));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&s.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let p=e.servers[i];!p||typeof p!="object"?s.push({code:"invalid_type",context:{actual:typeof p,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):p.url||s.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return r.timeEnd(),{issues:s,valid:!s.some(i=>i.severity==="error")}};var ao=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=Ra(e.spec,e.logger);cr({context:e,result:o});}if(sr(e.config.parser.filters)){let o=nr(e.config.parser.filters,e.spec,e.logger),{graph:i}=bt(e.spec,e.logger),{resourceMetadata:p}=ir(i,e.logger),a=or({filters:o,logger:e.logger,resourceMetadata:p});ya({...a,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}pr({context:e});let r={ids:new Map},s=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],p="$ref"in i?e.resolveRef(i.$ref):i;s.set(o,p);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,p=e.spec.components.parameters[o],a="$ref"in p?e.resolveRef(p.$ref):p;Sa({$ref:i,context:e,parameter:a});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,p=e.spec.components.requestBodies[o],a="$ref"in p?e.resolveRef(p.$ref):p;Oa({$ref:i,context:e,requestBody:a});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,p=e.spec.components.schemas[o];xa({$ref:i,context:e,schema:p});}}Ta({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],p=i.$ref?{...e.resolveRef(i.$ref),...i}:i,a={context:e,operation:{description:p.description,parameters:Ke({context:e,parameters:p.parameters}),security:e.spec.security,servers:p.servers,summary:p.summary},path:o,securitySchemesMap:s,state:r};p.delete&&ot({...a,method:"delete",operation:{...a.operation,...p.delete,parameters:k({source:Ke({context:e,parameters:p.delete.parameters}),target:a.operation.parameters})}}),p.get&&ot({...a,method:"get",operation:{...a.operation,...p.get,parameters:k({source:Ke({context:e,parameters:p.get.parameters}),target:a.operation.parameters})}}),p.head&&ot({...a,method:"head",operation:{...a.operation,...p.head,parameters:k({source:Ke({context:e,parameters:p.head.parameters}),target:a.operation.parameters})}}),p.options&&ot({...a,method:"options",operation:{...a.operation,...p.options,parameters:k({source:Ke({context:e,parameters:p.options.parameters}),target:a.operation.parameters})}}),p.patch&&ot({...a,method:"patch",operation:{...a.operation,...p.patch,parameters:k({source:Ke({context:e,parameters:p.patch.parameters}),target:a.operation.parameters})}}),p.post&&ot({...a,method:"post",operation:{...a.operation,...p.post,parameters:k({source:Ke({context:e,parameters:p.post.parameters}),target:a.operation.parameters})}}),p.put&&ot({...a,method:"put",operation:{...a.operation,...p.put,parameters:k({source:Ke({context:e,parameters:p.put.parameters}),target:a.operation.parameters})}}),p.trace&&ot({...a,method:"trace",operation:{...a.operation,...p.trace,parameters:k({source:Ke({context:e,parameters:p.trace.parameters}),target:a.operation.parameters})}});}};var Ia=({logger:e,operations:t,parameters:r,preserveOrder:s,requestBodies:o,responses:i,schemas:p,spec:a})=>{let c=e.timeEvent("filter-spec");if(a.components){if(a.components.parameters){let m={};if(s)for(let[l,f]of Object.entries(a.components.parameters))r.has(N("parameter",l))&&(m[l]=f);else for(let l of r){let{name:f}=te(l),d=a.components.parameters[f];d&&(m[f]=d);}a.components.parameters=m;}if(a.components.requestBodies){let m={};if(s)for(let[l,f]of Object.entries(a.components.requestBodies))o.has(N("body",l))&&(m[l]=f);else for(let l of o){let{name:f}=te(l),d=a.components.requestBodies[f];d&&(m[f]=d);}a.components.requestBodies=m;}if(a.components.responses){let m={};if(s)for(let[l,f]of Object.entries(a.components.responses))i.has(N("response",l))&&(m[l]=f);else for(let l of i){let{name:f}=te(l),d=a.components.responses[f];d&&(m[f]=d);}a.components.responses=m;}if(a.components.schemas){let m={};if(s)for(let[l,f]of Object.entries(a.components.schemas))p.has(N("schema",l))&&(m[l]=f);else for(let l of p){let{name:f}=te(l),d=a.components.schemas[f];d&&(m[f]=d);}a.components.schemas=m;}}if(a.paths)for(let m of Object.entries(a.paths)){let l=m[0],f=m[1];for(let d of re){if(!f[d])continue;let h=N("operation",D({method:d,path:l}));t.has(h)||delete f[d];}Object.keys(f).length||delete a.paths[l];}c.timeEnd();};var Pa=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&rt({mediaType:t})?{...r,format:"binary"}:r:rt({mediaType:t})?{format:"binary",type:"string"}:void 0},it=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:mr({mediaType:r})});return t};var We=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],Pl=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},En=({irSchema:e,schema:t})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?e.accessScope="read":t.writeOnly&&(e.accessScope="write");},Al=({context:e,irSchema:t={},schema:r,state:s})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let o=[];for(let i of r.prefixItems??[]){let p=H({context:e,schema:i,state:s});o.push(p);}if(r.items){let i=H({context:e,schema:r.items,state:s});if(!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else {let p=r.items.allOf||r.items.anyOf||r.items.oneOf;p&&p.length>1&&!We({schema:r.items}).includes("null")?t={...t,...i}:o.push(i);}}return t=W({items:o,schema:t}),t},El=({irSchema:e={}})=>(e.type="boolean",e),Cl=({irSchema:e={}})=>(e.type="null",e),Nl=({irSchema:e={},schema:t})=>(e.type=t.type,e),jl=({context:e,irSchema:t={},schema:r,state:s})=>{t.type="object";let o={};for(let i in r.properties){let p=r.properties[i];if(typeof p!="boolean"){let a=H({context:e,schema:p,state:{...s,isProperty:true}});o[i]=a;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")s.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)&&(!r.patternProperties||Object.keys(r.patternProperties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=H({context:e,schema:r.additionalProperties,state:s});t.additionalProperties=i;}if(r.patternProperties){let i={};for(let p in r.patternProperties){let a=r.patternProperties[p],c=H({context:e,schema:a,state:s});i[p]=c;}Object.keys(i).length&&(t.patternProperties=i);}return r.propertyNames&&(t.propertyNames=H({context:e,schema:r.propertyNames,state:s})),r.required&&(t.required=r.required),t},kl=({irSchema:e={}})=>(e.type="string",e),at=({schema:e})=>{let t={};return Pl({irSchema:t,schema:e}),t},vl=({context:e,schema:t,state:r})=>{let s=at({schema:t}),o=[],i=We({schema:t}),p=t.allOf;for(let a of p){let m="$ref"in a?r:{...r,inAllOf:true},l=H({context:e,schema:a,state:m});if(t.required&&(l.required?l.required=[...l.required,...t.required]:l.required=t.required),o.push(l),a.$ref){let f=e.resolveRef(a.$ref);if(f.discriminator&&r.$ref){let d=Ve(r.$ref,f.discriminator.mapping,f.oneOf?()=>f.oneOf.some(u=>"$ref"in u&&u.$ref===r.$ref):void 0);if(d.length>0){let u=d.map(g=>({const:g,type:"string"})),h={properties:{[f.discriminator.propertyName]:u.length>1?{items:u,logicalOperator:"or"}:u[0]},type:"object"};f.required?.includes(f.discriminator.propertyName)&&(h.required=[f.discriminator.propertyName]),o.push(h);}}r.circularReferenceTracker.has(a.$ref)||H({context:e,schema:f,state:{...r,$ref:a.$ref}});}}if(i.includes("object")){let a=Vt({context:e,schema:{...t,type:"object"},state:r});if(a.properties){for(let c of a.required??[])if(!a.properties[c])for(let m of p){let l=m.$ref?e.resolveRef(m.$ref):m;if(We({schema:l}).includes("object")){let f=Vt({context:e,schema:{...l,type:"object"},state:r});if(f.properties?.[c]){a.properties[c]=f.properties[c];break}}}o.push(a);}}if(s=W({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:s}),i.includes("null")){let a=[{type:"null"}];o.length&&a.unshift(s),s={items:a,logicalOperator:"or"};}return s},wl=({context:e,schema:t,state:r})=>{let s=at({schema:t}),o=[],i=We({schema:t}),p=t.anyOf;for(let a of p){let c=H({context:e,schema:a,state:r});if(t.discriminator&&c.$ref!=null){let l=Ve(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(i.includes("null")&&o.push({type:"null"}),s=W({items:o,mutateSchemaOneItem:true,schema:s}),i.includes("object")){let a=Vt({context:e,schema:{...t,type:"object"},state:r});a.properties&&(s={items:[s,a],logicalOperator:"and"});}return s},ql=({context:e,schema:t,state:r})=>{let s=at({schema:t});s.type="enum";let o=[],i=We({schema:t});for(let[p,a]of t.enum.entries()){let c=typeof a,m;if(c==="string"||c==="number"||c==="boolean"?m=c:c==="object"&&Array.isArray(a)?m="array":a===null?i.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${a}" for enum`,t.enum),!m)continue;let l=Vt({context:e,schema:{const:a,description:t["x-enum-descriptions"]?.[p],title:t["x-enum-varnames"]?.[p]??t["x-enumNames"]?.[p],type:m},state:r});o.push(l);}return s=W({items:o,schema:s}),s},$l=({context:e,schema:t,state:r})=>{let s=at({schema:t}),o=[],i=We({schema:t}),p=t.oneOf;for(let a of p){let c=H({context:e,schema:a,state:r});if(t.discriminator&&c.$ref!=null){let l=Ve(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(i.includes("null")&&o.push({type:"null"}),s=W({items:o,mutateSchemaOneItem:true,schema:s}),i.includes("object")){let a=Vt({context:e,schema:{...t,type:"object"},state:r});a.properties&&(s={items:[s,a],logicalOperator:"and"});}return s},Fl=({context:e,schema:t,state:r})=>{if(!t.$ref.startsWith("#/components/")&&!r.circularReferenceTracker.has(t.$ref)){let a=e.resolveRef(t.$ref);return H({context:e,schema:a,state:{...r,$ref:t.$ref,isProperty:false}})}let o=at({schema:t}),i={};if(i.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let a=e.resolveRef(t.$ref);H({context:e,schema:a,state:{...r,$ref:t.$ref,isProperty:false}});}let p=[];return p.push(i),t.type&&typeof t.type!="string"&&t.type.includes("null")&&p.push({type:"null"}),o=W({items:p,mutateSchemaOneItem:true,schema:o}),o},Vt=({context:e,irSchema:t,schema:r,state:s})=>{switch(t||(t=at({schema:r}),En({irSchema:t,schema:r})),r.type){case "array":return Al({context:e,irSchema:t,schema:r,state:s});case "boolean":return El({irSchema:t});case "integer":case "number":return Nl({irSchema:t,schema:r});case "null":return Cl({irSchema:t});case "object":return jl({context:e,irSchema:t,schema:r,state:s});case "string":return kl({irSchema:t});default:return Aa({irSchema:t,schema:r})}},Ml=({context:e,irSchema:t,schema:r,state:s})=>{t||(t=at({schema:r}));let o={};En({irSchema:o,schema:r}),r.type.includes("null")&&o.default===null&&delete o.default;let i=[];for(let p of r.type)if(p==="null")i.push({type:"null"});else {let a=Vt({context:e,irSchema:{...o},schema:{...r,type:p},state:s});i.push(a);}return t=W({items:i,schema:t}),t},Ll=({context:e,schema:t,state:r})=>{let s=at({schema:t});En({irSchema:s,schema:t});let o=We({schema:t});return o.length===1?Vt({context:e,irSchema:s,schema:{...t,type:o[0]},state:r}):Ml({context:e,irSchema:s,schema:{...t,type:o},state:r})},Aa=({irSchema:e,schema:t})=>(e||(e=at({schema:t})),e.type="unknown",En({irSchema:e,schema:t}),e),H=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Fl({context:e,schema:t,state:r}):t.enum?ql({context:e,schema:t,state:r}):t.allOf?vl({context:e,schema:t,state:r}):t.anyOf?wl({context:e,schema:t,state:r}):t.oneOf?$l({context:e,schema:t,state:r}):t.type||t.properties?Ll({context:e,schema:t,state:r}):Aa({schema:t})),Ea=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[M(e)]=H({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Ca=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),Bt=({context:e,name:t,schema:r})=>{if(ge(e.config.parser.pagination).test(t))return  true;if(r.$ref){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let p=it({content:o.content}),a=p.find(c=>c.type==="json")||p[0];a?.schema&&(i=a.schema);}return i?Bt({context:e,name:t,schema:i}):false}return Bt({context:e,name:t,schema:o})}for(let o in r.properties)if(ge(e.config.parser.pagination).test(o)){let p=r.properties[o];if(typeof p!="boolean"){let a=We({schema:p});if(!a.length){let m=(p.anyOf??p.oneOf??[]).filter(l=>l.type!=="null");if(m.length===1){let l=We({schema:m[0]});if(Ca(l))return o}}if(Ca(a))return o}}for(let o of r.allOf??[]){let i=Bt({context:e,name:t,schema:o});if(i)return i}return  false};var Dl=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Vl=({context:e,method:t,operation:r,path:s,state:o})=>{let i={id:$t({context:e,id:r.operationId,method:t,path:s,state:o}),method:t,path:s};return r.operationId&&(i.operationId=r.operationId),Dl({irOperation:i,operation:r}),i},Bl=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>{let p=Vl({context:e,method:t,operation:r,path:s,state:i});if(r.parameters&&(p.parameters=r.parameters),r.requestBody){let a="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=it({content:a.content}),m=c.find(l=>l.type==="json")||c[0];if(m){let l=Bt({context:e,name:"",schema:{description:a.description,...m.schema}});p.body={mediaType:m.mediaType,schema:H({context:e,schema:{description:a.description,..."$ref"in r.requestBody?r.requestBody:m.schema},state:void 0})},l&&(p.body.pagination=l),a.required&&(p.body.required=a.required),m.type&&(p.body.type=m.type);}}for(let a in r.responses){p.responses||(p.responses={});let c=r.responses[a],m="$ref"in c?e.resolveRef(c.$ref):c,l=it({content:m.content}),f=l.find(d=>d.type==="json")||l[0];f?p.responses[a]={mediaType:f.mediaType,schema:H({context:e,schema:{description:m.description,...Pa({content:f})},state:void 0})}:p.responses[a]={schema:{description:m.description,type:a==="204"?"void":"unknown"}};}if(r.security){let a=new Map;for(let c of r.security)for(let m in c){let l=o.get(m);l&&a.set(m,l);}a.size&&(p.security=Array.from(a.values()));}return p},Na=({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})=>(r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),{parsed:Bl({context:e,method:t,operation:r,path:s,securitySchemesMap:o,state:i})}),pt=({context:e,method:t,path:r,...s})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[r]||(e.ir.paths[r]={});let{parsed:o}=Na({context:e,method:t,path:r,...s});e.ir.paths[r][t]=o;},ct=({context:e,key:t,method:r,...s})=>{e.ir.webhooks||(e.ir.webhooks={}),e.ir.webhooks[t]||(e.ir.webhooks[t]={});let{parsed:o}=Na({context:e,method:r,path:t,...s});e.ir.webhooks[t][r]=o;};var Kl=e=>{switch(e){case "query":return  false;default:return}},Wl=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},zl=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Z=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let s of t){let o="$ref"in s?e.dereference(s):s;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=ja({context:e,parameter:o});}return r},ja=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=it({content:t.content}),l=m.find(f=>f.type==="json")||m[0];l&&(r=l.schema);}let s={deprecated:t.deprecated,description:t.description,...r},o=Bt({context:e,name:t.name,schema:s}),i=t.style||zl(t.in),p=t.explode!==void 0?t.explode:Wl(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Kl(t.in),explode:p,location:t.in,name:t.name,schema:H({context:e,schema:s,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},ka=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[M(e)]=ja({context:t,parameter:r});};var _l=({context:e,requestBody:t})=>{let r=it({content:t.content}),s=r.find(a=>a.type==="json")||r[0],o=s?s.schema:void 0,i={description:t.description,...o},p={schema:H({context:e,schema:i,state:void 0})};return t.description&&(p.description=t.description),t.required&&(p.required=t.required),p},va=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[M(e)]=_l({context:t,requestBody:r});};var wa=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Be(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var qa=(e,t)=>{let r=t.timeEvent("validate"),s=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let p=i[0],a=i[1];for(let c of re){let m=a[c];if(!m)continue;let l=D({method:c,path:p});m.operationId&&(o.has(m.operationId)?s.push({code:"duplicate_key",context:{key:"operationId",value:m.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",p,c,"operationId"],severity:"error"}):o.set(m.operationId,l));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&s.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let p=e.servers[i];!p||typeof p!="object"?s.push({code:"invalid_type",context:{actual:typeof p,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):p.url||s.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return r.timeEnd(),{issues:s,valid:!s.some(i=>i.severity==="error")}};var $a=({context:e,securitySchemesMap:t})=>{let r={ids:new Map};for(let s in e.spec.webhooks){let o=e.spec.webhooks[s],i="$ref"in o?{...e.resolveRef(o.$ref),...o}:o,p={context:e,key:s,operation:{description:i.description,parameters:Z({context:e,parameters:i.parameters}),security:e.spec.security,servers:i.servers,summary:i.summary},securitySchemesMap:t,state:r};i.delete&&ct({...p,method:"delete",operation:{...p.operation,...i.delete,parameters:k({source:Z({context:e,parameters:i.delete.parameters}),target:p.operation.parameters})}}),i.get&&ct({...p,method:"get",operation:{...p.operation,...i.get,parameters:k({source:Z({context:e,parameters:i.get.parameters}),target:p.operation.parameters})}}),i.head&&ct({...p,method:"head",operation:{...p.operation,...i.head,parameters:k({source:Z({context:e,parameters:i.head.parameters}),target:p.operation.parameters})}}),i.options&&ct({...p,method:"options",operation:{...p.operation,...i.options,parameters:k({source:Z({context:e,parameters:i.options.parameters}),target:p.operation.parameters})}}),i.patch&&ct({...p,method:"patch",operation:{...p.operation,...i.patch,parameters:k({source:Z({context:e,parameters:i.patch.parameters}),target:p.operation.parameters})}}),i.post&&ct({...p,method:"post",operation:{...p.operation,...i.post,parameters:k({source:Z({context:e,parameters:i.post.parameters}),target:p.operation.parameters})}}),i.put&&ct({...p,method:"put",operation:{...p.operation,...i.put,parameters:k({source:Z({context:e,parameters:i.put.parameters}),target:p.operation.parameters})}}),i.trace&&ct({...p,method:"trace",operation:{...p.operation,...i.trace,parameters:k({source:Z({context:e,parameters:i.trace.parameters}),target:p.operation.parameters})}});}};var po=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=qa(e.spec,e.logger);cr({context:e,result:o});}if(sr(e.config.parser.filters)){let o=nr(e.config.parser.filters,e.spec,e.logger),{graph:i}=bt(e.spec,e.logger),{resourceMetadata:p}=ir(i,e.logger),a=or({filters:o,logger:e.logger,resourceMetadata:p});Ia({...a,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}pr({context:e});let r={ids:new Map},s=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],p="$ref"in i?e.resolveRef(i.$ref):i;s.set(o,p);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,p=e.spec.components.parameters[o],a="$ref"in p?e.resolveRef(p.$ref):p;ka({$ref:i,context:e,parameter:a});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,p=e.spec.components.requestBodies[o],a="$ref"in p?e.resolveRef(p.$ref):p;va({$ref:i,context:e,requestBody:a});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,p=e.spec.components.schemas[o];Ea({$ref:i,context:e,schema:p});}}wa({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],p=i.$ref?{...e.resolveRef(i.$ref),...i}:i,a={context:e,operation:{description:p.description,parameters:Z({context:e,parameters:p.parameters}),security:e.spec.security,servers:p.servers,summary:p.summary},path:o,securitySchemesMap:s,state:r};p.delete&&pt({...a,method:"delete",operation:{...a.operation,...p.delete,parameters:k({source:Z({context:e,parameters:p.delete.parameters}),target:a.operation.parameters})}}),p.get&&pt({...a,method:"get",operation:{...a.operation,...p.get,parameters:k({source:Z({context:e,parameters:p.get.parameters}),target:a.operation.parameters})}}),p.head&&pt({...a,method:"head",operation:{...a.operation,...p.head,parameters:k({source:Z({context:e,parameters:p.head.parameters}),target:a.operation.parameters})}}),p.options&&pt({...a,method:"options",operation:{...a.operation,...p.options,parameters:k({source:Z({context:e,parameters:p.options.parameters}),target:a.operation.parameters})}}),p.patch&&pt({...a,method:"patch",operation:{...a.operation,...p.patch,parameters:k({source:Z({context:e,parameters:p.patch.parameters}),target:a.operation.parameters})}}),p.post&&pt({...a,method:"post",operation:{...a.operation,...p.post,parameters:k({source:Z({context:e,parameters:p.post.parameters}),target:a.operation.parameters})}}),p.put&&pt({...a,method:"put",operation:{...a.operation,...p.put,parameters:k({source:Z({context:e,parameters:p.put.parameters}),target:a.operation.parameters})}}),p.trace&&pt({...a,method:"trace",operation:{...a.operation,...p.trace,parameters:k({source:Z({context:e,parameters:p.trace.parameters}),target:a.operation.parameters})}});}$a({context:e,securitySchemesMap:s});};var Cn="#/components/schemas/";var fr=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.config.classNameBuilder){let s="";return typeof r.config.classNameBuilder=="function"?s=r.config.classNameBuilder(t):s=r.config.classNameBuilder.replace("{{name}}",t),s}return t},Fa=e=>C().plugins["@hey-api/typescript"]?.config.style==="PascalCase"?j({case:"PascalCase",value:e}):e,Ma=e=>{let t=Fa(e);return qt(t).replace(be,"_$1")};function Rt(e,t,r){return r.indexOf(e)===t}function Ba(e,t){let r=e.toLocaleLowerCase(),s=t.toLocaleLowerCase();return r.localeCompare(s,"en")}var Br=(e,t)=>Ba(e.name,t.name);function Ka(e){return e.sort(Br)}var Zl=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},Wa=e=>e.map(t=>Nn(t.value,true)).filter(Rt).join(" | "),Nn=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,co=e=>{let t=Zl(e.value,e.customName),r=Nn(e.value);return {key:t,value:r}};var mo=e=>{let t=Ma(e);return {$ref:Cn+e,name:t}};var Kr=e=>e.format==="date"||e.format==="date-time",lo=e=>{let t=C();return e.base==="binary"?n.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.config.dates&&Kr(e)?n.typeNode("Date"):n.typeNode(e.base)},Ul=e=>{let t=e.base==="null"?false:e.isNullable,r=lo(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(Cn)){let o=mo(e.base);r=n.typeNode(o.name);}return n.typeUnionNode({isNullable:t,types:[r]})},Xl=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(s=>Re(s));return n.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(Re(e.link));return n.typeTupleNode({isNullable:e.isNullable,types:t})}return n.typeArrayNode([Re(e.link)],e.isNullable)}return n.typeArrayNode([lo(e)],e.isNullable)},Gl=e=>{let t=e.enum.map(r=>Nn(r.value));return n.typeUnionNode({isNullable:e.isNullable,types:t})},Jl=e=>{let t=e.link&&!Array.isArray(e.link)?Re(e.link):lo(e);return n.typeRecordNode(["string"],[t],e.isNullable,true)},za=({model:e,style:t})=>{let r=e.properties.map(o=>n.nodeToString({node:Re(o),unescape:true})).filter(Rt),s=t==="union"?n.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(o=>o.isNullable),types:r}):n.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?s:n.typeParenthesizedNode({type:s})},Yl=e=>{if(!e.properties.length)return n.typeNode("unknown");let t=C(),r=Y(t),s=e.properties.map(o=>{let i=o.isRequired?"":"?",p=Re(o),a=r?/^\dXX$/.test(o.name)?tt(o.name):o.name:tt(Cr(Qa(o.name)));return o.name==="[key: string]"&&(a=o.name,i&&(i="",p=n.typeUnionNode({types:[p,"undefined"]}))),{comment:[o.description&&z(o.description),o.deprecated&&"@deprecated"],isReadOnly:o.isReadOnly,isRequired:i==="",name:a,type:p}});return n.typeInterfaceNode({isNullable:e.isNullable,properties:s,useLegacyResolution:true})},Re=e=>{switch(e.export){case "all-of":return za({model:e,style:"intersection"});case "any-of":case "one-of":return za({model:e,style:"union"});case "array":return Xl(e);case "dictionary":return Jl(e);case "enum":return Gl(e);case "interface":return Yl(e);case "const":case "generic":case "reference":default:return Ul(e)}},Ie=({client:e,count:t=1,create:r=false,meta:s,nameTransformer:o})=>{let i={created:false,name:""},p=s.name;o&&(p=o(p)),t>1&&(p=`${p}${t}`);let a=e.types[p];return a?a.$ref===s.$ref?i={created:false,name:p}:i=Ie({client:e,count:t+1,create:r,meta:s,nameTransformer:o}):r&&(e.types[p]=s,i={created:true,name:p}),i},_a=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},Qa=e=>{let t=C();return Y(t)?j({case:"camelCase",value:Js(e)}).replace(be,"_$1"):e};var _e=e=>e.some(r=>r.isRequired);var bf=({config:e,dependencies:t,logger:r,spec:s})=>{let o=new Sn({config:e,dependencies:t,logger:r,spec:s});if("swagger"in o.spec)return io(o),o;switch(o.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return ao(o),o;case "3.1.0":case "3.1.1":return po(o),o;}throw new Error("Unsupported OpenAPI specification")};var Sf=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Za=({operation:e,plugin:t})=>{if(!e.security||!t.config.auth)return [];let r=[];for(let s of e.security){let o=Sf({securitySchemeObject:s});o?r.push(o):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(s,null,2)}`);}return r};var dr="TComposable",Qe="DefaultT",yo="ResT";var Ua=({operation:e,plugin:t})=>{if(!t.config.validator.request)return;let r=t.getPluginOrThrow(t.config.validator.request);if(r.api.createRequestValidator)return r.api.createRequestValidator({file:t.gen.ensureFile(t.output),operation:e,plugin:r})},Xa=({operation:e,plugin:t})=>{if(!t.config.validator.response)return;let r=t.getPluginOrThrow(t.config.validator.response);if(r.api.createResponseValidator)return r.api.createResponseValidator({file:t.gen.ensureFile(t.output),operation:e,plugin:r})};var Ga=({context:e,value:t})=>{let r=j({case:"PascalCase",value:gt(t)});return fr({config:e.config,name:r})},Of=({operation:e,plugin:t})=>t.config.methodNameBuilder?t.config.methodNameBuilder(e):!t.config.asClass&&e.id.match(be)?`${e.id}_`:e.id,Ee=({context:e,operation:t,plugin:r})=>{let s=new Map,o,i,p=[];if(r.config.classStructure==="auto"&&t.operationId&&(p=t.operationId.split(/[./]/).filter(Boolean),p.length>1)){let c=p.pop();i=j({case:"camelCase",value:gt(c)}),o=p.pop();}let a=r.config.instance?[r.config.instance]:t.tags??["default"];for(let c of a){let m=Ga({context:e,value:o||c}),l=[c];o&&(p.includes(c)||c===o?l=[...p,o]:l=[c,...p,o]),s.set(c,{className:m,methodName:i||Of({operation:t,plugin:r}),path:l.map(f=>Ga({context:e,value:f}))});}return s},Wr=({file:e,operation:t,plugin:r,throwOnError:s})=>{let i=I(r.context.config).name==="@hey-api/client-nuxt",p=r.getPluginOrThrow("@hey-api/typescript"),a=r.gen.selectSymbolFirst(p.api.getSelector("data",t.id));a&&e.addImport({from:a.file,typeNames:[a.placeholder]});let c=a?.placeholder||"unknown",m=r.gen.selectSymbolFirstOrThrow(r.api.getSelector("Options"));if(i){let l=r.gen.selectSymbolFirst(p.api.getSelector("response",t.id));l&&e.addImport({from:l.file,typeNames:[l.placeholder]});let f=l?.placeholder||"unknown";return `${m.placeholder}<${dr}, ${c}, ${f}, ${Qe}>`}return s?`${m.placeholder}<${c}, ${s}>`:a?`${m.placeholder}<${a.placeholder}>`:m.placeholder},ho=({file:e,isRequiredOptions:t,operation:r,plugin:s})=>{let o={argNames:[],fields:[],parameters:[]},i=s.getPluginOrThrow("@hey-api/typescript"),p={usedTypeIDs:new Set},c=I(s.context.config).name==="@hey-api/client-nuxt";if(s.config.params_EXPERIMENTAL==="experiment"){if(r.parameters?.path)for(let m in r.parameters.path){let l=r.parameters.path[m],f=ve(l.name);o.argNames.push(f),o.fields.push({in:"path",key:f}),o.parameters.push({isRequired:l.required,name:f,type:i.api.schemaToType({onRef:d=>{e.addImport({from:d.file,typeNames:[d.placeholder]});},plugin:i,schema:l.schema,state:p})});}if(r.parameters?.query)for(let m in r.parameters.query){let l=r.parameters.query[m],f=ve(l.name);o.argNames.push(f),o.fields.push({in:"path",key:f}),o.parameters.push({isRequired:l.required,name:f,type:i.api.schemaToType({onRef:d=>{e.addImport({from:d.file,typeNames:[d.placeholder]});},plugin:i,schema:l.schema,state:p})});}if(r.body){let m="body";o.argNames.push(m),o.fields.push({in:"body"}),o.parameters.push({isRequired:r.body.required,name:m,type:i.api.schemaToType({onRef:l=>{e.addImport({from:l.file,typeNames:[l.placeholder]});},plugin:i,schema:r.body.schema,state:p})});}}return o.parameters.push({isRequired:t,name:"options",type:Wr({file:e,operation:r,plugin:s,throwOnError:c?void 0:"ThrowOnError"})}),o},Tf=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},go=({isRequiredOptions:e,opParameters:t,operation:r,plugin:s})=>{let o=s.gen.ensureFile(s.output),i=I(s.context.config),p=i.name==="@hey-api/client-nuxt",a=s.getPluginOrThrow("@hey-api/typescript"),c=s.gen.selectSymbolFirst(a.api.getSelector(p?"response":"responses",r.id));c&&o.addImport({from:c.file,typeNames:[c.placeholder]});let m=c?.placeholder||"unknown",l=s.gen.selectSymbolFirst(a.api.getSelector(p?"error":"errors",r.id));l&&o.addImport({from:l.file,typeNames:[l.placeholder]});let f=l?.placeholder||"unknown",d=[];if(r.body)switch(r.body.type){case "form-data":{let v=o.ensureSymbol({name:"formDataBodySerializer",selector:s.api.getSelector("formDataBodySerializer")});o.addImport({from:X({config:s.context.config,sourceOutput:o.path}),names:[v.name]}),d.push({spread:v.placeholder});break}case "json":break;case "text":case "octet-stream":d.push({key:"bodySerializer",value:null});break;case "url-search-params":{let v=o.ensureSymbol({name:"urlSearchParamsBodySerializer",selector:s.api.getSelector("urlSearchParamsBodySerializer")});o.addImport({from:X({config:s.context.config,sourceOutput:o.path}),names:[v.name]}),d.push({spread:v.placeholder});break}}for(let v in r.parameters?.query){let B=r.parameters.query[v];if((B.schema.type==="array"||B.schema.type==="tuple")&&(B.style!=="form"||!B.explode)){d.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}let u=Ua({operation:r,plugin:s});if(u&&d.push({key:"requestValidator",value:u}),s.config.transformer==="@hey-api/transformers"){let v=s.getPluginOrThrow(s.config.transformer),B=s.gen.selectSymbolFirst(v.api.getSelector("response",r.id));B?.value&&(o.addImport({from:B.file,names:[B.placeholder]}),d.push({key:"responseTransformer",value:B.placeholder}));}let h=false,g;for(let v in r.responses){let B=r.responses[v];!g&&i.name==="@hey-api/client-axios"&&Xs({statusCode:v})==="2XX"&&(g=Tf(B.mediaType),g&&d.push({key:"responseType",value:g})),B.mediaType==="text/event-stream"&&(h=true);}let b=Xa({operation:r,plugin:s});b&&d.push({key:"responseValidator",value:b}),s.config.responseStyle==="data"&&d.push({key:"responseStyle",value:s.config.responseStyle});let x=Za({context:s.context,operation:r,plugin:s});x.length&&d.push({key:"security",value:n.arrayLiteralExpression({elements:x})}),d.push({key:"url",value:r.path}),d.push({spread:"options"});let P=[],E=t.argNames.length;if(E){let v=[],B=[];for(let je of t.argNames)v.push(n.identifier({text:je}));for(let je of t.fields){let zt=[];"in"in je&&(zt.push({key:"in",value:je.in}),je.key&&zt.push({key:"key",value:je.key}),je.map&&zt.push({key:"map",value:je.map})),B.push(n.objectExpression({obj:zt}));}let et=o.ensureSymbol({name:"buildClientParams",selector:s.api.getSelector("buildClientParams")});o.addImport({aliases:{buildClientParams:et.placeholder},from:X({config:s.context.config,sourceOutput:o.path}),names:["buildClientParams"]}),P.push(n.constVariable({expression:n.callExpression({functionName:et.placeholder,parameters:[n.arrayLiteralExpression({elements:v}),n.arrayLiteralExpression({elements:B})]}),name:"params"})),d.push({spread:"params"});}if(r.body){let v=r.parameters?.header?.["content-type"];if(!!!v?.required){let et=[{key:v?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:!e,name:"headers"})}];E&&et.push({spread:n.propertyAccessExpression({expression:n.identifier({text:"params"}),name:"headers"})}),d.push({key:"headers",value:et});}}let F;s.config.client&&i.api&&"getSelector"in i.api&&(F=s.gen.selectSymbolFirst(i.api.getSelector("client")),F&&o.addImport({from:F.file,names:[F.placeholder]}));let w=n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:!e,name:"client"}),V;s.config.instance?V=n.binaryExpression({left:w,operator:"??",right:n.propertyAccessExpression({expression:n.this(),name:"_client"})}):F?V=n.binaryExpression({left:w,operator:"??",right:F.placeholder}):V=w;let K=[];p?K.push(dr,`${m} | ${Qe}`,f,Qe):K.push(m,f,"ThrowOnError"),s.config.responseStyle==="data"&&K.push(n.stringLiteral({text:s.config.responseStyle}));let J=h?n.propertyAccessExpression({expression:V,name:n.identifier({text:"sse"})}):V;return J=n.propertyAccessExpression({expression:J,name:n.identifier({text:r.method})}),P.push(n.returnFunctionCall({args:[n.objectExpression({identifiers:["responseTransformer"],obj:d})],name:J,types:K})),P};var _=({operation:e})=>{let t=[];return e.summary&&t.push(z(e.summary)),e.description&&t.push(z(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},se=({context:e,operation:t})=>{let s=I(e.config).name==="@hey-api/client-nuxt",o=e.config.plugins["@hey-api/sdk"];return o&&!o.config.client&&!o.config.instance||s||rr(t)},ur=({operation:e})=>{for(let t in e.responses)if(e.responses[t].mediaType==="text/event-stream")return  true;return  false};var yr="/http/requests",Rf=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${yr}`),r=new Map,s=new Set,o=e.getPluginOrThrow("@hey-api/sdk");e.forEach("operation",({operation:p})=>{let a=se({context:e.context,operation:p}),c=Ee({context:e.context,operation:p,plugin:o});for(let m of c.values())m.path.forEach((l,f)=>{r.has(l)||r.set(l,{className:l,classes:new Set,methods:new Set,nodes:[],root:!f});let d=m.path[f-1];if(d&&d!==l){let x=r.get(d);x.classes.add(l),r.set(d,x);}if(!(m.path.length===f+1))return;let h=r.get(l),g=e.config.httpRequests.methodNameBuilder(p);if(h.methods.has(g))return;let b=Pf({isRequiredOptions:a,methodName:g,operation:p,plugin:e});h.nodes.length?h.nodes.push(n.identifier({text:`
`}),b):h.nodes.push(b),h.methods.add(g),r.set(l,h);});});let i=p=>{if(s.has(p.className))return;if(p.classes.size)for(let l of p.classes){let f=r.get(l);i(f),p.nodes.push(n.propertyDeclaration({initializer:n.newExpression({argumentsArray:[],expression:n.identifier({text:O({config:{case:"preserve",name:e.config.httpRequests.classNameBuilder},name:f.className})})}),name:j({case:"camelCase",value:f.className})}));}let a=t.ensureSymbol({selector:e.api.getSelector("Injectable")}).update({name:"Injectable"});t.addImport({from:"@angular/core",names:[a.placeholder]});let c=t.addSymbol({name:O({config:{case:"preserve",name:e.config.httpRequests.classNameBuilder},name:p.className}),selector:e.api.getSelector("class",p.className)}),m=n.classDeclaration({decorator:p.root?{args:[{providedIn:"root"}],name:a.placeholder}:void 0,exportClass:p.root,name:c.placeholder,nodes:p.nodes});c.update({value:m}),s.add(p.className);};for(let p of r.values())i(p);},If=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${yr}`);e.forEach("operation",({operation:r})=>{let s=se({context:e.context,operation:r}),o=t.addSymbol({name:e.config.httpRequests.methodNameBuilder(r),selector:e.api.getSelector("httpRequest",r.id)}),i=Af({isRequiredOptions:s,operation:r,plugin:e,symbol:o});o.update({value:i});});},Ja=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(`${t.output}${yr}`),s,o=I(t.context.config);o.api&&"getSelector"in o.api&&(s=t.gen.selectSymbolFirst(o.api.getSelector("client")),s&&r.addImport({from:s.file,names:[s.placeholder]}));let i=n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:"client"}),p;return s?p=n.binaryExpression({left:i,operator:"??",right:s.placeholder}):p=i,n.callExpression({functionName:n.propertyAccessExpression({expression:p,name:"requestOptions"}),parameters:[n.objectExpression({obj:[{key:"responseStyle",value:n.identifier({text:"'data'"})},{key:"method",value:n.identifier({text:`'${e.method.toUpperCase()}'`})},{key:"url",value:n.identifier({text:`'${e.path}'`})},{spread:"options"}]})]})},Pf=({isRequiredOptions:e,methodName:t,operation:r,plugin:s})=>{let o=s.gen.ensureFile(`${s.output}${yr}`),i=s.getPluginOrThrow("@hey-api/typescript"),p=o.ensureSymbol({selector:s.api.getSelector("HttpRequest")}).update({name:"HttpRequest"});o.addImport({from:"@angular/common/http",typeNames:[p.placeholder]});let a=s.getPluginOrThrow("@hey-api/sdk"),c=s.gen.selectSymbolFirstOrThrow(a.api.getSelector("Options"));o.addImport({from:c.file,typeNames:[c.placeholder]});let m=s.gen.selectSymbolFirst(i.api.getSelector("data",r.id));m&&o.addImport({from:m.file,typeNames:[m.placeholder]});let l=m?.placeholder||"unknown";return n.methodDeclaration({accessLevel:"public",comment:_({operation:r}),name:t,parameters:[{isRequired:e,name:"options",type:`${c.placeholder}<${l}, ThrowOnError>`}],returnType:`${p.placeholder}<unknown>`,statements:[n.returnStatement({expression:Ja({operation:r,plugin:s})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]})},Af=({isRequiredOptions:e,operation:t,plugin:r,symbol:s})=>{let o=r.gen.ensureFile(`${r.output}${yr}`),i=r.getPluginOrThrow("@hey-api/typescript"),p=o.ensureSymbol({selector:r.api.getSelector("HttpRequest")}).update({name:"HttpRequest"});o.addImport({from:"@angular/common/http",typeNames:[p.placeholder]});let a=r.getPluginOrThrow("@hey-api/sdk"),c=r.gen.selectSymbolFirstOrThrow(a.api.getSelector("Options"));o.addImport({from:c.file,typeNames:[c.placeholder]});let m=r.gen.selectSymbolFirst(i.api.getSelector("data",t.id));m&&o.addImport({from:m.file,typeNames:[m.placeholder]});let l=m?.placeholder||"unknown";return n.constVariable({comment:_({operation:t}),exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:e,name:"options",type:`${c.placeholder}<${l}, ThrowOnError>`}],returnType:`${p.placeholder}<unknown>`,statements:[n.returnStatement({expression:Ja({operation:t,plugin:r})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]}),name:s.placeholder})},Ya=({plugin:e})=>{let t=e.gen.createFile(`${e.output}${yr}`,{extension:".ts",path:"{{path}}.gen",renderer:new q});e.config.httpRequests.asClass?Rf({plugin:e}):If({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var hr="/http/resources",Ef=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${hr}`),r=new Map,s=new Set,o=e.getPluginOrThrow("@hey-api/sdk");e.forEach("operation",({operation:p})=>{let a=se({context:e.context,operation:p}),c=Ee({context:e.context,operation:p,plugin:o});for(let m of c.values())m.path.forEach((l,f)=>{r.has(l)||r.set(l,{className:l,classes:new Set,methods:new Set,nodes:[],root:!f});let d=m.path[f-1];if(d&&d!==l){let x=r.get(d);x.classes.add(l),r.set(d,x);}if(!(m.path.length===f+1))return;let h=r.get(l),g=e.config.httpResources.methodNameBuilder(p);if(h.methods.has(g))return;let b=Nf({isRequiredOptions:a,methodName:g,operation:p,plugin:e});h.nodes.length?h.nodes.push(n.identifier({text:`
`}),b):h.nodes.push(b),h.methods.add(g),r.set(l,h);});});let i=p=>{if(s.has(p.className))return;if(p.classes.size)for(let l of p.classes){let f=r.get(l);i(f),p.nodes.push(n.propertyDeclaration({initializer:n.newExpression({argumentsArray:[],expression:n.identifier({text:O({config:{case:"preserve",name:e.config.httpResources.classNameBuilder},name:f.className})})}),name:j({case:"camelCase",value:f.className})}));}let a=t.ensureSymbol({selector:e.api.getSelector("Injectable")}).update({name:"Injectable"});t.addImport({from:"@angular/core",names:[a.placeholder]});let c=t.addSymbol({name:O({config:{case:"preserve",name:e.config.httpResources.classNameBuilder},name:p.className})}),m=n.classDeclaration({decorator:p.root?{args:[{providedIn:"root"}],name:a.placeholder}:void 0,exportClass:p.root,name:c.placeholder,nodes:p.nodes});c.update({value:m}),s.add(p.className);};for(let p of r.values())i(p);},Cf=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${hr}`);e.forEach("operation",({operation:r})=>{let s=se({context:e.context,operation:r}),o=t.addSymbol({name:e.config.httpResources.methodNameBuilder(r)}),i=jf({isRequiredOptions:s,operation:r,plugin:e,symbol:o});o.update({value:i});});},ep=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(`${t.output}${hr}`),s=t.getPluginOrThrow("@hey-api/sdk"),o=t.getPluginOrThrow("@hey-api/typescript"),i=r.ensureSymbol({selector:t.api.getSelector("httpResource")}).update({name:"httpResource"});r.addImport({from:"@angular/common/http",names:[i.placeholder]});let p=t.gen.selectSymbolFirst(o.api.getSelector("response",e.id));p&&r.addImport({from:p.file,typeNames:[p.placeholder]});let a=p?.placeholder||"unknown";if(t.config.httpRequests.asClass){let c=Ee({context:t.context,operation:e,plugin:s}),m=Array.from(c.values())[0];if(m){let l=m.path[0],f=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("class",l));r.addImport({from:f.file,names:[f.placeholder]});let d=r.ensureSymbol({selector:t.api.getSelector("inject")}).update({name:"inject"});r.addImport({from:"@angular/core",names:[d.placeholder]});let u=n.callExpression({functionName:d.placeholder,parameters:[n.identifier({text:f.placeholder})]});for(let h=1;h<m.path.length;h++){let g=m.path[h];g&&(u=n.propertyAccessExpression({expression:u,name:j({case:"camelCase",value:g})}));}return u=n.propertyAccessExpression({expression:u,name:t.config.httpRequests.methodNameBuilder(e)}),n.callExpression({functionName:i.placeholder,parameters:[n.arrowFunction({parameters:[],statements:[n.constVariable({expression:n.conditionalExpression({condition:n.identifier({text:"options"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:"options",parameters:[]})}),name:"opts"}),n.returnStatement({expression:n.conditionalExpression({condition:n.identifier({text:"opts"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:u,parameters:[n.identifier({text:"opts"})]})})})]})],types:[n.typeNode(a)]})}}else {let c=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("httpRequest",e.id));return r.addImport({from:c.file,names:[c.placeholder]}),n.callExpression({functionName:i.placeholder,parameters:[n.arrowFunction({parameters:[],statements:[n.constVariable({expression:n.conditionalExpression({condition:n.identifier({text:"options"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:"options",parameters:[]})}),name:"opts"}),n.returnStatement({expression:n.conditionalExpression({condition:n.identifier({text:"opts"}),whenFalse:n.identifier({text:"undefined"}),whenTrue:n.callExpression({functionName:c.placeholder,parameters:[n.identifier({text:"opts"})]})})})]})],types:[n.typeNode(a)]})}return n.callExpression({functionName:i.placeholder,parameters:[n.arrowFunction({parameters:[],statements:[n.returnStatement({expression:n.identifier({text:"undefined"})})]})],types:[n.typeNode(a)]})},Nf=({isRequiredOptions:e,methodName:t,operation:r,plugin:s})=>{let o=s.gen.ensureFile(`${s.output}${hr}`),i=s.getPluginOrThrow("@hey-api/typescript"),p=s.getPluginOrThrow("@hey-api/sdk"),a=s.gen.selectSymbolFirstOrThrow(p.api.getSelector("Options"));o.addImport({from:a.file,typeNames:[a.placeholder]});let c=s.gen.selectSymbolFirst(i.api.getSelector("data",r.id));c&&o.addImport({from:c.file,typeNames:[c.placeholder]});let m=c?.placeholder||"unknown";return n.methodDeclaration({accessLevel:"public",comment:_({operation:r}),name:t,parameters:[{isRequired:e,name:"options",type:`() => ${a.placeholder}<${m}, ThrowOnError> | undefined`}],returnType:void 0,statements:[n.returnStatement({expression:ep({operation:r,plugin:s})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]})},jf=({isRequiredOptions:e,operation:t,plugin:r,symbol:s})=>{let o=r.gen.ensureFile(`${r.output}${hr}`),i=r.getPluginOrThrow("@hey-api/typescript"),p=r.getPluginOrThrow("@hey-api/sdk"),a=r.gen.selectSymbolFirstOrThrow(p.api.getSelector("Options"));o.addImport({from:a.file,typeNames:[a.placeholder]});let c=r.gen.selectSymbolFirst(i.api.getSelector("data",t.id));c&&o.addImport({from:c.file,typeNames:[c.placeholder]});let m=c?.placeholder||"unknown";return n.constVariable({comment:_({operation:t}),exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:e,name:"options",type:`() => ${a.placeholder}<${m}, ThrowOnError> | undefined`}],statements:[n.returnStatement({expression:ep({operation:t,plugin:r})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]}),name:s.placeholder})},tp=({plugin:e})=>{let t=e.gen.createFile(`${e.output}${hr}`,{extension:".ts",path:"{{path}}.gen",renderer:new q});e.config.httpResources.asClass?Ef({plugin:e}):Cf({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var rp=({plugin:e})=>{e.config.httpRequests.enabled&&Ya({plugin:e}),e.config.httpResources.enabled&&tp({plugin:e});};var jn={api:new an({name:"@angular/common"}),config:{exportFromIndex:false},dependencies:["@hey-api/client-angular","@hey-api/sdk"],handler:rp,name:"@angular/common",output:"@angular/common",resolveConfig:(e,t)=>{if(e.config.httpRequests=t.valueToObject({defaultValue:{asClass:false,classNameBuilder:"{{name}}Requests",enabled:true},mappers:{boolean:r=>({enabled:r})},value:e.config.httpRequests}),!e.config.httpRequests.methodNameBuilder){let{asClass:r}=e.config.httpRequests;e.config.httpRequests.methodNameBuilder=s=>r?String(s.id):`${String(s.id)}Request`;}if(e.config.httpResources=t.valueToObject({defaultValue:{asClass:false,classNameBuilder:"{{name}}Resources",enabled:true},mappers:{boolean:r=>({enabled:r})},value:e.config.httpResources}),!e.config.httpResources.methodNameBuilder){let{asClass:r}=e.config.httpResources;e.config.httpResources.methodNameBuilder=s=>r?String(s.id):`${String(s.id)}Resource`;}}};var He={baseUrl:true,bundle:true,exportFromIndex:false},Ze={dependencies:["@hey-api/typescript"],output:"client",tags:["client"]};var vf=({plugin:e})=>{let{baseUrl:t}=e.config;if(t===false)return;if(typeof t=="string")return t;let{servers:r}=e.context.ir;if(r)return r[typeof t=="number"?t:0]?.url},np=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=X({config:e.context.config,sourceOutput:t.path}),s=t.addSymbol({name:"createClient"});t.addImport({aliases:{[s.name]:s.placeholder},from:r,names:[s.name]});let o=t.addSymbol({name:"createConfig"});t.addImport({aliases:{[o.name]:o.placeholder},from:r,names:[o.name]});let i=e.getPluginOrThrow("@hey-api/typescript"),p=e.gen.selectSymbolFirstOrThrow(i.api.getSelector("ClientOptions"));t.addImport({from:p.file,typeNames:[p.placeholder]});let a;e.config.runtimeConfigPath&&(a=t.addSymbol({name:"createClientConfig"}),t.addImport({from:t.relativePathToFile({path:e.config.runtimeConfigPath}),names:[a.placeholder]}));let c=[],m=vf({plugin:e});if(m){let u=Be(m);if(u.protocol&&u.host&&!m.includes("{"))c.push({key:me(e.context.config),value:m});else if(m!=="/"&&m.startsWith("/")){let h=m.endsWith("/")?m.slice(0,-1):m;c.push({key:me(e.context.config),value:h});}}"throwOnError"in e.config&&e.config.throwOnError&&c.push({key:"throwOnError",value:true});let l=[n.callExpression({functionName:o.placeholder,parameters:c.length?[n.objectExpression({obj:c})]:void 0,types:[n.typeReferenceNode({typeName:p.placeholder})]})],f=t.addSymbol({name:"client",selector:e.api.getSelector("client")}),d=n.constVariable({exportConst:true,expression:n.callExpression({functionName:s.placeholder,parameters:a?[n.callExpression({functionName:a.placeholder,parameters:l})]:l}),name:f.placeholder});f.update({value:d});};var sp=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=X({config:e.context.config,sourceOutput:t.path}),s=e.getPluginOrThrow("@hey-api/typescript"),o=e.gen.selectSymbolFirstOrThrow(s.api.getSelector("ClientOptions"));t.addImport({from:o.file,typeNames:[o.placeholder]});let i=t.addSymbol({name:"Config"}),p=t.addSymbol({name:"DefaultClientOptions"});t.addImport({aliases:{ClientOptions:p.placeholder,[i.name]:i.placeholder},from:r,typeNames:["ClientOptions",i.name]});let a=n.typeReferenceNode({typeName:p.placeholder}),c=n.typeReferenceNode({typeName:"T"}),m=t.addSymbol({name:"CreateClientConfig"}),l=n.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:m.placeholder,type:n.functionTypeNode({parameters:[n.parameterDeclaration({name:"override",required:false,type:n.typeReferenceNode({typeArguments:[n.typeIntersectionNode({types:[a,c]})],typeName:i.placeholder})})],returnType:n.typeReferenceNode({typeArguments:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeArguments:[a],typeName:"Required"}),c]})],typeName:i.placeholder})}),typeParameters:[{default:n.typeReferenceNode({typeName:o.placeholder}),extends:a,name:"T"}]});m.update({value:l});};var Ue=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q});sp({plugin:e}),np({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var kn=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var vn={...Ze,api:new kn({name:"@hey-api/client-angular"}),config:{...He,throwOnError:false},handler:Ue,name:"@hey-api/client-angular"};var wn=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var qn={...Ze,api:new wn({name:"@hey-api/client-axios"}),config:{...He,throwOnError:false},handler:Ue,name:"@hey-api/client-axios"};var $n=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Fn={...Ze,api:new $n({name:"@hey-api/client-fetch"}),config:{...He,throwOnError:false},handler:Ue,name:"@hey-api/client-fetch"};var Mn=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Ln={...Ze,api:new Mn({name:"@hey-api/client-next"}),config:{...He,throwOnError:false},handler:Ue,name:"@hey-api/client-next"};var Dn=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Vn={...Ze,api:new Dn({name:"@hey-api/client-nuxt"}),config:He,handler:Ue,name:"@hey-api/client-nuxt"};var Bn={config:{},handler:()=>{},name:"legacy/angular",output:"client",tags:["client"]};var Kn={config:{},handler:()=>{},name:"legacy/axios",output:"client",tags:["client"]};var Wn={config:{},handler:()=>{},name:"legacy/fetch",output:"client",tags:["client"]};var zn={config:{},handler:()=>{},name:"legacy/node",output:"client",tags:["client"]};var _n={config:{},handler:()=>{},name:"legacy/xhr",output:"client",tags:["client"]};var Qn=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var xo=({plugin:e,schema:t})=>{e.config.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},gr=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>gr({context:e,plugin:t,schema:o}));let s=structuredClone(r);if(s.$ref)return s.$ref=decodeURI(s.$ref),s;if(xo({plugin:t,schema:s}),s.additionalProperties&&typeof s.additionalProperties!="boolean"&&(s.additionalProperties=gr({context:e,plugin:t,schema:s.additionalProperties})),s.allOf&&(s.allOf=s.allOf.map(o=>gr({context:e,plugin:t,schema:o}))),s.items&&(s.items=gr({context:e,plugin:t,schema:s.items})),s.properties)for(let o in s.properties){let i=s.properties[o];typeof i!="boolean"&&(s.properties[o]=gr({context:e,plugin:t,schema:i}));}return s},Pt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>Pt({context:e,plugin:t,schema:o}));let s=structuredClone(r);if("$ref"in s)return s.$ref=decodeURI(s.$ref),s;if(xo({plugin:t,schema:s}),s.additionalProperties&&typeof s.additionalProperties!="boolean"&&(s.additionalProperties=Pt({context:e,plugin:t,schema:s.additionalProperties})),s.allOf&&(s.allOf=s.allOf.map(o=>Pt({context:e,plugin:t,schema:o}))),s.anyOf&&(s.anyOf=s.anyOf.map(o=>Pt({context:e,plugin:t,schema:o}))),s.items&&(s.items=Pt({context:e,plugin:t,schema:s.items})),s.oneOf&&(s.oneOf=s.oneOf.map(o=>Pt({context:e,plugin:t,schema:o}))),s.properties)for(let o in s.properties){let i=s.properties[o];typeof i!="boolean"&&(s.properties[o]=Pt({context:e,plugin:t,schema:i}));}return s},mt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>mt({context:e,plugin:t,schema:o}));let s=structuredClone(r);if(xo({plugin:t,schema:s}),s.$ref&&(s.$ref=decodeURI(s.$ref)),s.additionalProperties&&typeof s.additionalProperties!="boolean"&&(s.additionalProperties=mt({context:e,plugin:t,schema:s.additionalProperties})),s.allOf&&(s.allOf=s.allOf.map(o=>mt({context:e,plugin:t,schema:o}))),s.anyOf&&(s.anyOf=s.anyOf.map(o=>mt({context:e,plugin:t,schema:o}))),s.items&&(s.items=mt({context:e,plugin:t,schema:s.items})),s.oneOf&&(s.oneOf=s.oneOf.map(o=>mt({context:e,plugin:t,schema:o}))),s.prefixItems&&(s.prefixItems=s.prefixItems.map(o=>mt({context:e,plugin:t,schema:o}))),s.properties)for(let o in s.properties){let i=s.properties[o];typeof i!="boolean"&&(s.properties[o]=mt({context:e,plugin:t,schema:i}));}return s},bo=({name:e,plugin:t,schema:r})=>{let s="";return t.config.nameBuilder&&(typeof t.config.nameBuilder=="function"?s=t.config.nameBuilder(e,r):s=t.config.nameBuilder.replace("{{name}}",e)),s||(s=`${e}Schema`),ve(s)},Wf=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let s=e.spec.definitions[r],i=t.gen.ensureFile(t.output).ensureSymbol({name:bo({name:r,plugin:t,schema:s}),selector:t.api.getSelector("ref",r)}),p=gr({context:e,plugin:t,schema:s}),a=n.constVariable({assertion:"const",exportConst:true,expression:n.objectExpression({obj:p}),name:i.placeholder});i.update({value:a});}},zf=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let s=e.spec.components.schemas[r],i=t.gen.ensureFile(t.output).ensureSymbol({name:bo({name:r,plugin:t,schema:s}),selector:t.api.getSelector("ref",r)}),p=Pt({context:e,plugin:t,schema:s}),a=n.constVariable({assertion:"const",exportConst:true,expression:n.objectExpression({obj:p}),name:i.placeholder});i.update({value:a});}},_f=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let s=e.spec.components.schemas[r],i=t.gen.ensureFile(t.output).ensureSymbol({name:bo({name:r,plugin:t,schema:s}),selector:t.api.getSelector("ref",r)}),p=mt({context:e,plugin:t,schema:s}),a=n.constVariable({assertion:"const",exportConst:true,expression:n.objectExpression({obj:p}),name:i.placeholder});i.update({value:a});}},op=({plugin:e})=>{if(e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),"swagger"in e.context.spec){Wf({context:e.context,plugin:e});return}switch(e.context.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":zf({context:e.context,plugin:e});break;case "3.1.0":case "3.1.1":_f({context:e.context,plugin:e});break;default:throw new Error("Unsupported OpenAPI specification")}};var So=(e,t)=>{let r=C();if(Array.isArray(e))return e.map(o=>So(o));if(typeof e!="object"||e===null)return e;let s={...e};return Object.entries(s).forEach(([o,i])=>{if(r.plugins["@hey-api/schemas"]?.config.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(o)&&t!=="properties"){delete s[o];return}o==="$ref"&&typeof i=="string"&&(s[o]=decodeURIComponent(i)),i&&typeof i=="object"&&(s[o]=So(i,o));}),s},Qf=(e,t)=>{let r=C(),s=qt(e),o=r.plugins["@hey-api/schemas"];return o?.config.nameBuilder?typeof o.config.nameBuilder=="function"?o.config.nameBuilder(s,t):o.config.nameBuilder.replace("{{name}}",s):`${s}Schema`},ip=({files:e,openApi:t,plugin:r})=>{let s=C();e.schemas=new Fe({dir:s.output.path,exportFromIndex:r.config.exportFromIndex,id:"schemas",name:"schemas.ts"});let o=(i,p)=>{let a=So(p),c=n.objectExpression({obj:a}),m=n.constVariable({assertion:"const",exportConst:true,expression:c,name:Qf(i,p)});e.schemas.add(m);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([i,p])=>{o(i,p);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([i,p])=>{o(i,p);});};var Hn={api:new Qn({name:"@hey-api/schemas"}),config:{exportFromIndex:false,nameBuilder:e=>`${e}Schema`,type:"json"},handler:op,handlerLegacy:ip,name:"@hey-api/schemas",output:"schemas"};var Zn=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Kt=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:s,name:o}=Ie({meta:e,...r});return o&&t(o),{created:s,name:o}},lp=e=>`${e}ModelResponseTransformer`,Wt=e=>`${j({case:"PascalCase",value:e})}Data`,xr=e=>`${j({case:"PascalCase",value:e})}Error`,Oo=e=>`${e}Transformer`,Xe=e=>`${j({case:"PascalCase",value:e})}Response`,To=({importedType:e,throwOnError:t})=>{let r="OptionsLegacyParser";return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},ap=(e,t)=>{let r=C(),{name:s}=Ie({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Wt}),o=_e(t.parameters);if(!Y(r))return [{isRequired:o,name:"options",type:To({importedType:s,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let i=p=>{if(p.default!==void 0)return JSON.stringify(p.default,null,4)};return r.useOptions?[{default:o?void 0:{},name:"data",type:s}]:t.parameters.map(p=>{let a=`${s}['${p.name}']`;return {default:p?.default,isRequired:(!p.isRequired&&!i(p)?"?":"")=="",name:p.name,type:a}})},pp=(e,t)=>{let r=C(),s=n.typeNode("void");if(t.responses.filter(p=>p.responseTypes.includes("success")).length){let{name:p}=Ie({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Xe});s=n.typeUnionNode({types:[p]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.config.response==="response"&&(s=n.typeNode("ApiResult",[s])),I(r).name==="legacy/angular"?s=n.typeNode("Observable",[s]):s=n.typeNode("CancelablePromise",[s]),s},cp=e=>{let t=C();if(!Y(t))return [e.deprecated&&"@deprecated",e.summary&&z(e.summary),e.description&&z(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(i=>`@param data.${i.name} ${i.description?z(i.description):""}`)]:r=e.parameters.map(i=>`@param ${i.name} ${i.description?z(i.description):""}`));let s=e.responses.filter(i=>i.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&z(e.summary),e.description&&z(e.description),...r,...s.map(i=>`@returns ${i.type} ${i.description?z(i.description):""}`),"@throws ApiError"]},Zf=({client:e,onClientImport:t,onImport:r,operation:s})=>{let o=C(),i=Xe(s.name),{name:p}=Ie({client:e,meta:{$ref:`transformers/${i}`,name:i},nameTransformer:Oo});if(p&&r(p),!Y(o)){let l=[{spread:"options"}],d=s.parameters.filter(u=>u.in==="body"||u.in==="formData").map(u=>u.mediaType||(u.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(Rt);return d.length===1&&(d[0]==="multipart/form-data"&&(l=[...l,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),d[0]==="application/x-www-form-urlencoded"&&(l=[...l,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:d[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),l=[...l,{key:"url",value:s.path}],p&&(l=[...l,{key:"responseTransformer",value:p}]),n.objectExpression({identifiers:["responseTransformer"],obj:l})}let a=l=>l.reduce((f,d)=>{let u=d.prop,h=o.useOptions?`data.${d.name}`:d.name;return u===h?f[u]=u:tt(u)===u?f[u]=h:f[`'${u}'`]=h,f},{}),c={method:s.method,url:s.path};s.parametersPath.length&&(c.path=a(s.parametersPath)),s.parametersCookie.length&&(c.cookies=a(s.parametersCookie)),s.parametersHeader.length&&(c.headers=a(s.parametersHeader)),s.parametersQuery.length&&(c.query=a(s.parametersQuery)),s.parametersForm.length&&(c.formData=a(s.parametersForm)),s.parametersBody&&(s.parametersBody.in==="formData"&&(o.useOptions?c.formData=`data.${s.parametersBody.name}`:c.formData=s.parametersBody.name),s.parametersBody.in==="body"&&(o.useOptions?c.body=`data.${s.parametersBody.name}`:c.body=s.parametersBody.name)),s.parametersBody?.mediaType&&(c.mediaType=s.parametersBody?.mediaType),s.responseHeader&&(c.responseHeader=s.responseHeader),p&&(c.responseTransformer=p);let m=s.responses.filter(l=>l.responseTypes.includes("error"));if(m.length>0){let l={};m.forEach(f=>{l[f.code]=f.description??"";}),c.errors=l;}return n.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},de=({config:e,handleIllegal:t,id:r,operation:s})=>e.plugins["@hey-api/sdk"]?.config.methodNameBuilder?e.plugins["@hey-api/sdk"].config.methodNameBuilder(s):t&&r.match(be)?`${r}_`:r,mp=({client:e,onClientImport:t,onImport:r,operation:s})=>{let o=C(),i=Zf({client:e,onClientImport:t,onImport:r,operation:s});if(!Y(o)){let a=Ie({client:e,meta:{$ref:s.name,name:s.name},nameTransformer:xr}).name,m=s.responses.filter(l=>l.responseTypes.includes("success")).length?Ie({client:e,meta:{$ref:s.name,name:s.name},nameTransformer:Xe}).name:"void";return [n.returnFunctionCall({args:[i],name:`(options?.client ?? client).${s.method.toLocaleLowerCase()}`,types:a&&m?[m,a,"ThrowOnError"]:a?["unknown",a,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return Et(o)?[n.returnFunctionCall({args:[i],name:"this.httpRequest.request"})]:I(o).name==="legacy/angular"?[n.returnFunctionCall({args:["OpenAPI","this.http",i],name:"__request"})]:[n.returnFunctionCall({args:["OpenAPI",i],name:"__request"})]},Uf=({client:e,onClientImport:t,onImport:r,onNode:s,service:o})=>{let i=C(),p=I(i),a=Y(i);for(let d of o.operations)d.parameters.length&&Kt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:Wt,onImport:r}),a||Kt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:xr,onImport:r}),d.responses.filter(h=>h.responseTypes.includes("success")).length&&Kt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:Xe,onImport:r});let c={default:("throwOnError"in p.config?p.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!i.plugins["@hey-api/sdk"]?.config.asClass&&!Et(i)){for(let d of o.operations){let u={parameters:ap(e,d),returnType:a?pp(e,d):void 0,statements:mp({client:e,onClientImport:t,onImport:r,operation:d}),types:a?void 0:[c]},h=p.name==="legacy/angular"?n.anonymousFunction(u):n.arrowFunction(u),g=n.constVariable({comment:cp(d),exportConst:true,expression:h,name:de({config:i,handleIllegal:true,id:d.name,operation:d})});s(g);}return}let m=o.operations.map(d=>n.methodDeclaration({accessLevel:"public",comment:cp(d),isStatic:Et(i)===void 0&&p.name!=="legacy/angular",name:de({config:i,id:d.name,operation:d}),parameters:ap(e,d),returnType:a?pp(e,d):void 0,statements:mp({client:e,onClientImport:t,onImport:r,operation:d}),types:a?void 0:[c]}));if(!m.length)return;Et(i)?m=[n.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:p.name==="legacy/angular"&&(m=[n.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let l=[];m.forEach((d,u)=>{u&&l.push(n.identifier({text:`
`})),l.push(d);});let f=n.classDeclaration({decorator:p.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:fr({config:i,name:o.name}),nodes:l});s(f);},fp=({client:e,files:t,plugin:r})=>{let s=C(),o=Y(s),i="sdk";if(t.sdk=new Fe({dir:s.output.path,exportFromIndex:r.config.exportFromIndex,id:"sdk",name:`${i}.ts`}),!o)t.sdk.import({module:X({config:s,sourceOutput:i}),name:"createClient"}),t.sdk.import({module:X({config:s,sourceOutput:i}),name:"createConfig"}),t.sdk.import({asType:true,module:X({config:s,sourceOutput:i}),name:"OptionsLegacyParser"});else if(I(s).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),Et(s)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),s.plugins["@hey-api/sdk"]?.config.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),Et(s)){let a=I(s);t.sdk.import({asType:a.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!o){let p=I(s),a=n.constVariable({exportConst:true,expression:n.callExpression({functionName:"createClient",parameters:[n.callExpression({functionName:"createConfig",parameters:["throwOnError"in p&&p.throwOnError?n.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(a);}for(let p of e.services)Uf({client:e,onClientImport:a=>{t.sdk.import({module:X({config:s,sourceOutput:i}),name:a});},onImport:a=>{t.sdk.import({asType:!a.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:a});},onNode:a=>{t.sdk.add(a);},service:p});};var dp=({plugin:e,symbolClientOptions:t})=>{let r=e.gen.ensureFile(e.output),o=I(e.context.config).name==="@hey-api/client-nuxt",i=X({config:e.context.config,sourceOutput:r.path}),p=r.addSymbol({name:"TDataShape"}),a=r.ensureSymbol({name:"Client",selector:e.api.getSelector("Client")});r.addImport({from:i,typeNames:[a.name,p.name]});let c=r.ensureSymbol({selector:e.api.getSelector("Options")}).update({name:"Options"}),m=n.typeAliasDeclaration({exportType:true,name:c.placeholder,type:n.typeIntersectionNode({types:[n.typeReferenceNode({typeArguments:o?[n.typeReferenceNode({typeName:"TComposable"}),n.typeReferenceNode({typeName:"TData"}),n.typeReferenceNode({typeName:yo}),n.typeReferenceNode({typeName:Qe})]:[n.typeReferenceNode({typeName:"TData"}),n.typeReferenceNode({typeName:"ThrowOnError"})],typeName:t.placeholder}),n.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!e.config.client,name:"client",type:n.typeReferenceNode({typeName:a.placeholder})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:n.typeReferenceNode({typeArguments:[n.keywordTypeNode({keyword:"string"}),n.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:o?[n.typeParameterDeclaration({constraint:n.typeReferenceNode({typeName:"Composable"}),defaultType:n.typeNode("'$fetch'"),name:"TComposable"}),n.typeParameterDeclaration({constraint:n.typeReferenceNode({typeName:p.placeholder}),defaultType:n.typeReferenceNode({typeName:p.placeholder}),name:"TData"}),n.typeParameterDeclaration({defaultType:n.keywordTypeNode({keyword:"unknown"}),name:yo}),n.typeParameterDeclaration({defaultType:n.keywordTypeNode({keyword:"undefined"}),name:Qe})]:[n.typeParameterDeclaration({constraint:n.typeReferenceNode({typeName:p.placeholder}),defaultType:n.typeReferenceNode({typeName:p.placeholder}),name:"TData"}),n.typeParameterDeclaration({constraint:n.keywordTypeNode({keyword:"boolean"}),defaultType:n.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});c.update({value:m});};var Xf=({plugin:e})=>{let t=n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:n.this(),name:"_client"}),operator:"=",right:n.propertyAccessExpression({expression:n.identifier({text:"args"}),name:"client"})})}),s=e.gen.ensureFile(e.output).ensureSymbol({selector:e.api.getSelector("Client")}),o=I(e.context.config),i;return o.api&&"getSelector"in o.api&&(i=e.gen.selectSymbolFirst(o.api.getSelector("client"))),[n.propertyDeclaration({initializer:i?n.identifier({text:i.placeholder}):void 0,modifier:"protected",name:"_client",type:n.typeReferenceNode({typeName:s.placeholder})}),n.identifier({text:`
`}),n.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.config.client,name:"args",type:n.typeInterfaceNode({properties:[{isRequired:!e.config.client,name:"client",type:s.placeholder}],useLegacyResolution:false})}],statements:[e.config.client?n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:n.block({statements:[t]})}):t]})]},Gf=({plugin:e})=>{let t=I(e.context.config),r=t.name==="@hey-api/client-angular",s=t.name==="@hey-api/client-nuxt",o=e.gen.ensureFile(e.output),i=new Map,p=new Set,a=e.config.instance?Xf({plugin:e}):[];e.forEach("operation",({operation:l})=>{let f=se({context:e.context,operation:l}),d=e.getPluginOrThrow("@hey-api/typescript"),u;s&&(u=e.gen.selectSymbolFirst(d.api.getSelector("response",l.id)),u&&o.addImport({from:u.file,typeNames:[u.placeholder]}));let h=Ee({context:e.context,operation:l,plugin:e});for(let g of h.values())g.path.forEach((b,x)=>{let P=o.ensureSymbol({name:b,selector:e.api.getSelector("class",b)});i.has(P.id)||i.set(P.id,{className:P.name,classes:new Set,id:P.id,methods:new Set,nodes:[],root:!x});let E=g.path[x-1];if(E){let v=o.ensureSymbol({name:E,selector:e.api.getSelector("class",E)});if(v.placeholder!==P.placeholder){let B=i.get(v.id);B.classes.add(P.id),i.set(v.id,B);}}if(!(g.path.length===x+1))return;let w=i.get(P.id);if(w.methods.has(g.methodName))return;let V=ho({file:o,isRequiredOptions:f,operation:l,plugin:e}),K=go({isRequiredOptions:f,opParameters:V,operation:l,plugin:e}),J=n.methodDeclaration({accessLevel:"public",comment:_({operation:l}),isStatic:r?false:!e.config.instance,name:g.methodName,parameters:V.parameters,returnType:void 0,statements:K,types:s?[{default:n.ots.string("$fetch"),extends:n.typeNode("Composable"),name:dr},{default:u?n.typeReferenceNode({typeName:u.placeholder}):n.typeNode("undefined"),extends:u?n.typeReferenceNode({typeName:u.placeholder}):void 0,name:Qe}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});w.nodes.length?w.nodes.push(n.identifier({text:`
`}),J):w.nodes.push(J),w.methods.add(g.methodName),i.set(P.id,w);});});let c=o.addSymbol({name:"_HeyApiClient"}),m=l=>{if(p.has(l.id))return;if(l.classes.size)for(let u of l.classes){let h=i.get(u);m(h),l.nodes.push(n.propertyDeclaration({initializer:e.config.instance?n.newExpression({argumentsArray:e.config.instance?[n.objectExpression({multiLine:false,obj:[{key:"client",value:n.propertyAccessExpression({expression:n.this(),name:"_client"})}]})]:[],expression:n.identifier({text:o.getSymbolById(h.id).placeholder})}):n.identifier({text:o.getSymbolById(h.id).placeholder}),modifier:e.config.instance?void 0:"static",name:j({case:"camelCase",value:h.className})}));}let f=o.ensureSymbol({name:l.className,selector:e.api.getSelector("class",l.className)}),d=n.classDeclaration({decorator:l.root&&r?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:l.root,extendedClasses:e.config.instance?[c.placeholder]:void 0,name:f.placeholder,nodes:l.nodes});f.update({value:d}),p.add(f.id);};if(a.length){let l=n.classDeclaration({exportClass:false,name:c.placeholder,nodes:a});c.update({value:l});}for(let l of i.values())m(l);},Jf=({plugin:e})=>{let t=I(e.context.config),r=t.name==="@hey-api/client-nuxt",s=e.gen.ensureFile(e.output);e.forEach("operation",({operation:o})=>{let i=se({context:e.context,operation:o}),p=e.getPluginOrThrow("@hey-api/typescript"),a;r&&(a=e.gen.selectSymbolFirst(p.api.getSelector("response",o.id)),a&&s.addImport({from:a.file,typeNames:[a.placeholder]}));let c=ho({file:s,isRequiredOptions:i,operation:o,plugin:e}),m=go({isRequiredOptions:i,opParameters:c,operation:o,plugin:e}),l=s.addSymbol({name:de({config:e.context.config,handleIllegal:true,id:o.id,operation:o}),selector:e.api.getSelector("function",o.id)}),f=n.constVariable({comment:_({operation:o}),exportConst:true,expression:n.arrowFunction({parameters:c.parameters,returnType:void 0,statements:m,types:r?[{default:n.ots.string("$fetch"),extends:n.typeNode("Composable"),name:dr},{default:a?n.typeReferenceNode({typeName:a.placeholder}):n.typeNode("undefined"),extends:a?n.typeReferenceNode({typeName:a.placeholder}):void 0,name:Qe}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:l.placeholder});l.update({value:f});});},up=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r=X({config:e.context.config,sourceOutput:t.path}),s=t.addSymbol({name:"ClientOptions"});t.addImport({aliases:{Options:s.placeholder},from:r,typeNames:["Options"]});let o=I(e.context.config),i=o.name==="@hey-api/client-angular";o.name==="@hey-api/client-nuxt"&&t.addImport({from:r,typeNames:["Composable"]}),i&&e.config.asClass&&t.addImport({from:"@angular/core",names:["Injectable"]}),dp({plugin:e,symbolClientOptions:s}),e.config.asClass?Gf({plugin:e}):Jf({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var Un={api:new Zn({name:"@hey-api/sdk"}),config:{asClass:false,auth:true,classNameBuilder:"{{name}}",classStructure:"auto",client:true,exportFromIndex:true,instance:false,operationId:true,params_EXPERIMENTAL:"default",response:"body",responseStyle:"fields",transformer:false,validator:false},dependencies:["@hey-api/typescript"],handler:up,handlerLegacy:fp,name:"@hey-api/sdk",output:"sdk",resolveConfig:(e,t)=>{e.config.client?(typeof e.config.client=="boolean"&&(e.config.client=t.pluginByTag("client",{defaultPlugin:"@hey-api/client-fetch"})),e.dependencies.add(e.config.client)):e.config.client=false,e.config.transformer?(typeof e.config.transformer=="boolean"&&(e.config.transformer=t.pluginByTag("transformer")),e.dependencies.add(e.config.transformer)):e.config.transformer=false,typeof e.config.validator!="object"&&(e.config.validator={request:e.config.validator,response:e.config.validator}),e.config.validator.request?(typeof e.config.validator.request=="boolean"&&(e.config.validator.request=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.request)):e.config.validator.request=false,e.config.validator.response?(typeof e.config.validator.response=="boolean"&&(e.config.validator.response=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.response)):e.config.validator.response=false,e.config.instance?(typeof e.config.instance!="string"&&(e.config.instance="Sdk"),e.config.asClass=true):e.config.instance=false,e.config.classNameBuilder==="{{name}}"&&e.config.client==="@hey-api/client-angular"&&(e.config.classNameBuilder="{{name}}Service");}};var Xn=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var yp=({dataExpression:e,schema:t})=>{if(t.type!=="integer"||t.format!=="int64")return;let r=e!==void 0?n.callExpression({functionName:"BigInt",parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(r){if(typeof e=="string")return [r];if(e)return [n.assignment({left:e,right:r})]}},hp=({dataExpression:e,schema:t})=>{if(t.type!=="string"||!(t.format==="date"||t.format==="date-time"))return;let r=n.identifier({text:"Date"});if(typeof e=="string")return [n.newExpression({argumentsArray:[n.identifier({text:e})],expression:r})];if(e)return [n.assignment({left:e,right:n.newExpression({argumentsArray:[e],expression:r})})]};var Gn="data",zr=e=>e.map(t=>S__default.default.isStatement(t)?t:n.expressionToStatement({expression:t})),xp=({node:e})=>e.kind===S__default.default.SyntaxKind.ReturnStatement,bp=({plugin:e,schema:t})=>{let r=n.identifier({text:Gn}),s=_r({dataExpression:r,plugin:e,schema:t});return s.length&&!xp({node:s[s.length-1]})&&s.push(n.returnStatement({expression:r})),s},_r=({dataExpression:e,plugin:t,schema:r})=>{let s=t.gen.ensureFile(t.output);if(r.$ref){let o=t.api.getSelector("response-ref",r.$ref),i=s.selectSymbolFirst(o);if(!i){i=s.addSymbol({name:O({config:{case:"camelCase",name:"{{name}}SchemaResponseTransformer"},name:M(r.$ref)}),selector:o});let p=t.context.resolveIrRef(r.$ref),a=bp({plugin:t,schema:p});if(a.length){let c=n.constVariable({expression:n.arrowFunction({async:false,multiLine:true,parameters:[{name:Gn,type:n.keywordTypeNode({keyword:"any"})}],statements:zr(a)}),name:i.placeholder});i.update({value:c});}else i.update({value:null});}if(i=s.selectSymbolFirst(o),i?.value){let p=n.callExpression({functionName:i.placeholder,parameters:[e]});if(e)return typeof e=="string"&&e==="item"?[n.returnStatement({expression:p})]:[typeof e=="string"?p:n.assignment({left:e,right:p})]}return []}if(r.type==="array"){if(!e||typeof e=="string")return [];let o=r.items?_r({dataExpression:"item",plugin:t,schema:r.items?.[0]?r.items[0]:{...r,type:void 0}}):[];if(!o.length)return [];let i=zr(o);return i.some(a=>xp({node:a}))||i.push(n.returnStatement({expression:n.identifier({text:"item"})})),[n.assignment({left:e,right:n.callExpression({functionName:n.propertyAccessExpression({expression:e,name:"map"}),parameters:[n.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:i})]})})]}if(r.type==="object"){let o=[],i=r.required??[];for(let p in r.properties){let a=r.properties[p],c=n.propertyAccessExpression({expression:e||Gn,name:p}),m=_r({dataExpression:c,plugin:t,schema:a});if(!m.length)continue;let l=!a.items?.find(d=>d.type==="null");i.includes(p)&&l?o=o.concat(m):o.push(n.ifStatement({expression:c,thenStatement:n.block({statements:zr(m)})}));}return o}if(r.items){if(r.items.length===1)return _r({dataExpression:"item",plugin:t,schema:r.items[0]});let o=[];if(r.logicalOperator==="and"||r.items.length===2&&r.items.find(i=>i.type==="null"||i.type==="void")){for(let i of r.items){let p=_r({dataExpression:e||"item",plugin:t,schema:i});if(p.length)if(e)o=o.concat(p);else {let a=n.identifier({text:"item"});o.push(n.ifStatement({expression:a,thenStatement:n.block({statements:zr(p)})}),n.returnStatement({expression:a}));}}return o}r.type!=="enum"&&((r.items??[]).every(i=>["boolean","integer","null","number","string"].includes(i.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(r)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}for(let o of t.config.transformers){let i=o({config:t.config,dataExpression:e,file:s,schema:r});if(i)return i}return []},Sp=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q});e.forEach("operation",({operation:r})=>{let{response:s}=Me(r);if(!s)return;if(s.items&&s.items.length>1){e.context.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${D(r)} has ${s.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let o=e.getPluginOrThrow("@hey-api/typescript"),i=e.gen.selectSymbolFirst(o.api.getSelector("response",r.id));if(!i)return;let p=t.addSymbol({name:O({config:{case:"camelCase",name:"{{name}}ResponseTransformer"},name:r.id}),selector:e.api.getSelector("response",r.id)}),a=bp({plugin:e,schema:s});if(a.length){t.addImport({from:i.file,typeNames:[i.placeholder]});let c=n.constVariable({exportConst:true,expression:n.arrowFunction({async:true,multiLine:true,parameters:[{name:Gn,type:n.keywordTypeNode({keyword:"any"})}],returnType:n.typeReferenceNode({typeArguments:[n.typeReferenceNode({typeName:i.placeholder})],typeName:"Promise"}),statements:zr(a)}),name:p.placeholder});p.update({value:c});}else p.update({value:null});});};var ed="$OpenApiTs",pe={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},td=({comments:e,leadingComment:t,meta:r,obj:s,onNode:o,...i})=>{if(!r)return;let{created:p,name:a}=Ie({create:true,meta:r,...i});if(p){let m=C().plugins["@hey-api/typescript"],l=n.enumDeclaration({asConst:typeof m?.config.enums=="object"&&m.config.enums.mode==="typescript-const",comments:e,leadingComment:t,name:a,obj:s});o(l);}},lt=({comment:e,meta:t,onCreated:r,onNode:s,type:o,...i})=>{if(!t)return {created:false,name:""};let p=Ie({create:true,meta:t,...i}),{created:a,name:c}=p;if(a){let m=n.typeAliasDeclaration({comment:e,exportType:true,name:c,type:o});s(m),r?.(c);}return p},rd=e=>{let t=[];Op(e),e.model.enums.forEach(r=>sd({...e,model:r,onNode:s=>{t.push(s);}})),t.length&&e.onNode(n.namespaceDeclaration({name:e.model.name,statements:t}));},nd=({client:e,model:t,onNode:r})=>{let s=C(),o={},i={};t.enum.forEach(c=>{let{key:m,value:l}=co(c);o[m]=l;let f=c.customDescription||c.description;f&&(i[m]=[z(f)]);});let p=[t.description&&z(t.description),t.deprecated&&"@deprecated"],a=s.plugins["@hey-api/typescript"];if(a?.config&&typeof a.config.enums=="object"&&a.config.enums.enabled&&(a.config.enums.mode==="typescript"||a.config.enums.mode==="typescript-const")){td({asConst:a.config.enums.mode==="typescript-const",client:e,comments:i,leadingComment:p,meta:t.meta,obj:o,onNode:r});return}lt({client:e,comment:p,meta:t.meta,onCreated:c=>{let m=s.plugins["@hey-api/typescript"];if(m?.config&&typeof m.config.enums=="object"&&m.config.enums.enabled&&m.config.enums.mode==="javascript"){let l=n.objectExpression({multiLine:true,obj:Object.entries(o).map(([d,u])=>({comments:i[d],key:d,value:u})),unescape:true}),f=n.constVariable({assertion:"const",comment:p,exportConst:true,expression:l,name:c});r(f);}},onNode:r,type:Wa(t.enum)});},sd=({model:e,onNode:t})=>{let r={},s={};e.enum.forEach(p=>{let{key:a,value:c}=co(p);r[a]=c;let m=p.customDescription||p.description;m&&(s[a]=[z(m)]);});let i=C().plugins["@hey-api/typescript"];t(n.enumDeclaration({asConst:typeof i?.config.enums=="object"&&i.config.enums.mode==="typescript-const",comments:s,leadingComment:[e.description&&z(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},Op=({client:e,model:t,onNode:r})=>{lt({client:e,comment:[t.description&&z(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:Re(t)});},od=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return rd(e);case "enum":return nd(e);default:return Op(e)}},id=({client:e,onNode:t})=>{let r={},s=C();if(!s.plugins["@hey-api/sdk"]&&!s.plugins["@hey-api/typescript"]?.config.tree)return;let o=Y(s);for(let p of e.services)for(let a of p.operations){if(!a.parameters.length&&!a.responses.length)continue;r[a.path]||(r[a.path]={});let c=r[a.path];c[a.method]||(c[a.method]={});let m=c[a.method];if(m.$ref=a.name,a.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;a.responses.forEach(f=>{m.res[f.code]=f;});}if(a.parameters.length>0){let f={mediaType:null,...pe,in:"body",name:"body",prop:"body"},d=a.parameters.filter(x=>x.in==="body");d.length||(d=a.parameters.filter(x=>x.in==="formData")),d.length===1?f={...pe,...d[0],in:"body",isRequired:d[0].isRequired,name:"body",prop:"body"}:d.length>1&&(f={...pe,in:"body",isRequired:d.some(x=>x.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:d});let u={...pe,in:"header",isRequired:_e(a.parameters.filter(x=>x.in==="header")),mediaType:null,name:o?"header":"headers",prop:o?"header":"headers",properties:a.parameters.filter(x=>x.in==="header").sort(Br)},h={...pe,in:"path",isRequired:_e(a.parameters.filter(x=>x.in==="path")),mediaType:null,name:"path",prop:"path",properties:a.parameters.filter(x=>x.in==="path").sort(Br)},g={...pe,in:"query",isRequired:_e(a.parameters.filter(x=>x.in==="query")),mediaType:null,name:"query",prop:"query",properties:a.parameters.filter(x=>x.in==="query").sort(Br)},b=o?Ka([...a.parameters]):[f,u,h,g].filter(x=>x.properties.length||x.$refs.length||x.mediaType);m.req=b,lt({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Wt,onNode:t,type:Re({...pe,properties:b})});}let l=a.responses.filter(f=>f.responseTypes.includes("success"));if(l.length>0){lt({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:Xe,onNode:t,type:Re({...pe,export:"any-of",properties:l})});let f=a.responses.filter(d=>d.responseTypes.includes("error"));o||lt({client:e,meta:{$ref:a.name,name:a.name},nameTransformer:xr,onNode:t,type:Re(f.length?{...pe,export:"one-of",properties:f}:{...pe,base:"unknown"})});}}let i=Object.entries(r).map(([p,a])=>{let c=Object.entries(a).map(([l,f])=>{let d=l,u=[];if(f.req){let g=f.$ref,{name:b}=Ie({client:e,meta:{$ref:g,name:g},nameTransformer:Wt}),x={...pe,base:b,export:"reference",isRequired:true,name:"req",properties:[],type:b};u=[...u,x];}if(f.res){let g=Object.entries(f.res).map(([x,P])=>({...pe,...P,isRequired:true,name:String(x)})),b={...pe,isRequired:true,name:"res",properties:g};u=[...u,b];}return {...pe,isRequired:true,name:d.toLocaleLowerCase(),properties:u}}).filter(Boolean);return {...pe,isRequired:true,name:`'${p}'`,properties:c}});s.plugins["@hey-api/typescript"]?.config.tree&&lt({client:e,meta:{$ref:"@hey-api/openapi-ts",name:ed},onNode:t,type:Re({...pe,properties:i})});},Tp=({client:e,files:t,plugin:r})=>{let s=C();t.types=new Fe({dir:s.output.path,exportFromIndex:r.config.exportFromIndex,id:"types",name:"types.ts"});let o=i=>{t.types?.add(i);};for(let i of e.models)od({client:e,model:i,onNode:o});id({client:e,onNode:o});};var At="data",ad=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",Rp=({client:e,model:t})=>t.$refs.map(s=>{let o=e.models.find(i=>i.meta?.$ref===s);if(!o)throw new Error(`Ref ${s} could not be found. Transformers cannot be generated without having access to all refs.`);return o}),Ip=e=>{let t=e.model.meta.name,{name:r}=lt({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:lp,onCreated:o=>{let i=Jn({...e,meta:{$ref:`transformers/${t}`,name:o},path:[At]});Pp({...e,async:false,name:o,statements:i});},type:`(${At}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},pd=e=>{let{model:t}=e,r=Rp(e);if(r.length===1){let{created:s,name:o}=Ip({...e,model:r[0]});return s?[n.transformArrayMutation({path:e.path,transformerName:o})]:[]}return Kr(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(s=>Kr(s))?[n.transformArrayMap({path:e.path,transformExpression:n.conditionalExpression({condition:n.identifier({text:"item"}),whenFalse:n.identifier({text:"item"}),whenTrue:n.transformNewDate({parameterName:"item"})})})]:[]},cd=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&Kr(t)?[n.transformDateMutation({path:r})]:Jn({...e,model:t,path:r})},Jn=e=>{let{model:t}=e;switch(t.export){case "array":return pd(e);case "interface":return t.properties.flatMap(r=>cd({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=Rp(e),{created:s,name:o}=Ip({...e,model:r[0]});return s?t.in==="response"?[n.expressionToStatement({expression:n.callExpression({functionName:o,parameters:[At]})})]:n.transformFunctionMutation({path:e.path,transformerName:o}):[]}default:return []}},Pp=({async:e,client:t,name:r,onNode:s,onRemoveNode:o,statements:i})=>{let p={created:false,name:r};if(!i.length)return _a({client:t,name:r}),o?.(),p;let a=n.arrowFunction({async:e,multiLine:true,parameters:[{name:At}],statements:[...i,n.returnVariable({expression:At})]}),c=n.constVariable({exportConst:true,expression:a,name:r,typeName:r});return s(c),{created:true,name:r}},Ap=({client:e,files:t})=>{let r=C(),s=i=>{t.types?.add(i);},o=()=>{t.types?.removeNode_LEGACY();};for(let i of e.services)for(let p of i.operations){let a=p.responses.filter(l=>l.responseTypes.includes("success"));if(!a.length)continue;let c=a.filter(l=>!ad(l));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${D(p)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=Xe(p.name);lt({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:Oo,onCreated:l=>{let f=a.length>1?a.flatMap(d=>{let u=Jn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:d,onNode:s,onRemoveNode:o,path:[At]});return u.length?[n.ifStatement({expression:n.safeAccessExpression(["data"]),thenStatement:n.block({statements:u})})]:[]}):Jn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:a[0],onNode:s,onRemoveNode:o,path:[At]});Pp({async:true,client:e,name:l,onNode:s,onRemoveNode:o,statements:f});},onNode:s,type:`(${At}: any) => Promise<${m}>`});}};var Yn={api:new Xn({name:"@hey-api/transformers"}),config:{bigInt:true,dates:true,exportFromIndex:false,transformers:[],typeTransformers:[]},dependencies:["@hey-api/typescript"],handler:Sp,handlerLegacy:Ap,name:"@hey-api/transformers",output:"transformers",resolveConfig:e=>{e.config.transformers||(e.config.transformers=[]),e.config.dates&&(e.config.transformers=[...e.config.transformers,hp]),e.config.bigInt&&(e.config.transformers=[...e.config.transformers,yp]);},tags:["transformer"]};var Cp=({context:e,name:t})=>(ee.lastIndex=0,ee.test(t)?t.startsWith("-")?S__default.default.factory.createStringLiteral(t):S__default.default.factory.createNumericLiteral(t):j({case:e.config.output.case,value:t}));var ue=({schema:e})=>{let t=[];return e.title&&t.push(z(e.title)),e.description&&t.push(z(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var es=n.keywordTypeNode({keyword:"string"}),fd=({server:e})=>{let t=Be(e.url);return t.protocol&&t.host?n.literalTypeNode({literal:n.stringLiteral({text:e.url})}):n.templateLiteralType({value:[t.protocol||es,"://",t.host||es,t.port?`:${t.port}`:"",t.path||""]})},Np=({plugin:e,servers:t,symbolClientOptions:r})=>{let s=I(e.context.config),o=t.map(a=>fd({server:a}));t.length?"strictBaseUrl"in s.config&&s.config.strictBaseUrl||o.push(n.typeIntersectionNode({types:[es,S__default.default.factory.createTypeLiteralNode([])]})):o.push(es);let i=n.typeInterfaceNode({properties:[{name:me(e.context.config),type:n.typeUnionNode({types:o})}],useLegacyResolution:false}),p=n.typeAliasDeclaration({exportType:true,name:r.placeholder,type:i});r.update({value:p});};var dd=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((o,i)=>{let p=typeof o.const;r.includes(p)||r.push(p);let a;return o.title?a=o.title:p==="number"||p==="string"?a=`${o.const}`:p==="boolean"?a=o.const?"true":"false":o.const===null?a="null":a=`${i}`,a&&(a=j({case:e.config.enums.case,stripLeadingSeparators:false,value:a}),ee.lastIndex=0,ee.test(a)&&e.config.enums.enabled&&(e.config.enums.mode==="typescript"||e.config.enums.mode==="typescript-const")&&(a=`_${a}`)),{comments:ue({schema:o}),key:a,value:o.const}}),typeofItems:r}},jp=({plugin:e,schema:t,symbol:r,type:s})=>{if(t.type==="enum"&&e.config.enums.enabled){let i=dd({plugin:e,schema:t});if(e.config.enums.mode==="javascript"){e.config.enums.constantsIgnoreNull&&i.typeofItems.includes("object")&&(i.obj=i.obj.filter(m=>m.value!==null));let p=n.constVariable({assertion:"const",comment:ue({schema:t}),exportConst:true,expression:n.objectExpression({multiLine:true,obj:i.obj}),name:r.placeholder}),a=n.typeOfExpression({text:r.placeholder}),c=n.typeAliasDeclaration({comment:ue({schema:t}),exportType:true,name:r.placeholder,type:n.indexedAccessTypeNode({indexType:n.typeOperatorNode({operator:"keyof",type:a}),objectType:a})});r.update({value:[p,c]});return}else if((e.config.enums.mode==="typescript"||e.config.enums.mode==="typescript-const")&&!i.typeofItems.some(a=>a!=="number"&&a!=="string")){let a=n.enumDeclaration({asConst:e.config.enums.mode==="typescript-const",leadingComment:ue({schema:t}),name:r.placeholder,obj:i.obj});r.update({value:a});return}}let o=n.typeAliasDeclaration({comment:ue({schema:t}),exportType:true,name:r.placeholder,type:s});r.update({value:o});};var Ro=({parameters:e})=>{let t={type:"object"};if(e){let r={},s=[];for(let o in e){let i=e[o];r[i.name]=Q({detectFormat:false,schema:i.schema}),i.required&&s.push(i.name);}t.properties=r,s.length&&(t.required=s);}return t},ud=({operation:e,plugin:t,state:r})=>{let s={type:"object"},o=[];s.properties||(s.properties={}),e.body?(s.properties.body=e.body.schema,e.body.required&&o.push("body")):s.properties.body={type:"never"},e.parameters?.header&&(s.properties.headers=Ro({parameters:e.parameters.header}),s.properties.headers.required&&o.push("headers")),e.parameters?.path?(s.properties.path=Ro({parameters:e.parameters.path}),s.properties.path.required&&o.push("path")):s.properties.path={type:"never"},e.parameters?.query?(s.properties.query=Ro({parameters:e.parameters.query}),s.properties.query.required&&o.push("query")):s.properties.query={type:"never"},s.properties.url={const:e.path,type:"string"},o.push("url"),s.required=o;let p=t.gen.ensureFile(t.output).addSymbol({name:O({config:t.config.requests,name:e.id}),selector:t.api.getSelector("data",e.id)}),a=G({onRef:void 0,plugin:t,schema:s,state:r}),c=n.typeAliasDeclaration({exportType:true,name:p.placeholder,type:a});p.update({value:c});},kp=({operation:e,plugin:t,state:r})=>{ud({operation:e,plugin:t,state:r});let s=t.gen.ensureFile(t.output),{error:o,errors:i,response:p,responses:a}=Me(e);if(i){let c=s.addSymbol({name:O({config:t.config.errors,name:e.id}),selector:t.api.getSelector("errors",e.id)}),m=G({onRef:void 0,plugin:t,schema:i,state:r}),l=n.typeAliasDeclaration({exportType:true,name:c.placeholder,type:m});if(c.update({value:l}),o){let f=s.addSymbol({name:O({config:{case:t.config.errors.case,name:t.config.errors.error},name:e.id}),selector:t.api.getSelector("error",e.id)}),d=n.indexedAccessTypeNode({indexType:n.typeOperatorNode({operator:"keyof",type:n.typeReferenceNode({typeName:c.placeholder})}),objectType:n.typeReferenceNode({typeName:c.placeholder})}),u=n.typeAliasDeclaration({exportType:true,name:f.placeholder,type:d});f.update({value:u});}}if(a){let c=s.addSymbol({name:O({config:t.config.responses,name:e.id}),selector:t.api.getSelector("responses",e.id)}),m=G({onRef:void 0,plugin:t,schema:a,state:r}),l=n.typeAliasDeclaration({exportType:true,name:c.placeholder,type:m});if(c.update({value:l}),p){let f=s.addSymbol({name:O({config:{case:t.config.responses.case,name:t.config.responses.response},name:e.id}),selector:t.api.getSelector("response",e.id)}),d=n.indexedAccessTypeNode({indexType:n.typeOperatorNode({operator:"keyof",type:n.typeReferenceNode({typeName:c.placeholder})}),objectType:n.typeReferenceNode({typeName:c.placeholder})}),u=n.typeAliasDeclaration({exportType:true,name:f.placeholder,type:d});f.update({value:u});}}};var yd=({operation:e,plugin:t,state:r})=>{let s=t.gen.ensureFile(t.output),o={type:"object"},i=[];if(o.properties||(o.properties={}),e.body){let m=s.ensureSymbol({selector:t.api.getSelector("webhook-payload",e.id)}).update({name:O({config:{case:t.config.webhooks.case,name:t.config.webhooks.payload},name:e.id})}),l=G({onRef:void 0,plugin:t,schema:e.body.schema,state:r}),f=n.typeAliasDeclaration({comment:ue({schema:e.body.schema}),exportType:true,name:m.placeholder,type:l});m.update({value:f}),s.ensureSymbol({selector:t.api.getSelector("ref",m.placeholder)}).update({name:m.name,placeholder:m.placeholder}),o.properties.body={$ref:m.placeholder},i.push("body");}else o.properties.body={type:"never"};o.properties.key={const:e.path,type:"string"},i.push("key"),o.properties.path={type:"never"},o.properties.query={type:"never"},o.required=i;let p=s.addSymbol({name:O({config:t.config.webhooks,name:e.id}),selector:t.api.getSelector("webhook-request",e.id)}),a=G({onRef:void 0,plugin:t,schema:o,state:r}),c=n.typeAliasDeclaration({exportType:true,name:p.placeholder,type:a});return p.update({value:c}),p.placeholder},vp=({operation:e,plugin:t,state:r})=>yd({operation:e,plugin:t,state:r});var wp=({symbolWebhooks:e,webhookNames:t})=>{if(!t.length)return;let r=n.typeUnionNode({types:t.map(o=>n.typeReferenceNode({typeName:o}))}),s=n.typeAliasDeclaration({exportType:true,name:e.placeholder,type:r});e.update({value:s});};var hd=({onRef:e,plugin:t,schema:r,state:s})=>{if(!r.items)return n.typeArrayNode(n.keywordTypeNode({keyword:t.config.topType}));r=Q({detectFormat:true,schema:r});let o=[];for(let i of r.items){let p=G({onRef:e,plugin:t,schema:i,state:s});o.push(p);}return o.length===1?n.typeArrayNode(o[0]):r.logicalOperator==="and"?n.typeArrayNode(n.typeIntersectionNode({types:o})):n.typeArrayNode(n.typeUnionNode({types:o}))},gd=({schema:e})=>e.const!==void 0?n.literalTypeNode({literal:n.ots.boolean(e.const)}):n.keywordTypeNode({keyword:"boolean"}),xd=({onRef:e,plugin:t,schema:r,state:s})=>G({onRef:e,plugin:t,schema:{...r,type:void 0},state:s}),bd=({plugin:e,schema:t})=>t.const!==void 0?n.literalTypeNode({literal:n.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.getPlugin("@hey-api/transformers")?.config.bigInt?n.typeReferenceNode({typeName:"bigint"}):n.keywordTypeNode({keyword:"number"}),Sd=({onRef:e,plugin:t,schema:r,state:s})=>{let o,i,p=[],a=[],c=r.required??[],m=false;for(let h in r.properties){let g=r.properties[h],b=G({onRef:e,plugin:t,schema:g,state:s}),x=c.includes(h);p.push({comment:ue({schema:g}),isReadOnly:g.accessScope==="read",isRequired:x,name:Cp({context:t.context,name:h}),type:b}),a.push(g),x||(m=true);}if(r.patternProperties)for(let h in r.patternProperties){let g=r.patternProperties[h];a.unshift(g);}let l=!!r.patternProperties&&Object.keys(r.patternProperties).length>0,f=r.additionalProperties,d=f!==false&&f?f:void 0;if(l||!!d&&(d.type!=="never"||!a.length)){let h=d;h&&h.type!=="never"?a.unshift(h):!l&&!a.length&&h&&h.type==="never"&&(a=[h]),m&&a.push({type:"undefined"}),i={isRequired:!r.propertyNames,name:"key",type:a.length===1?G({onRef:e,plugin:t,schema:a[0],state:s}):G({onRef:e,plugin:t,schema:{items:a,logicalOperator:"or"},state:s})},r.propertyNames?.$ref&&(o=G({onRef:e,plugin:t,schema:{$ref:r.propertyNames.$ref},state:s}));}return n.typeInterfaceNode({indexKey:o,indexProperty:i,properties:p,useLegacyResolution:false})},Od=({plugin:e,schema:t,state:r})=>{if(t.const!==void 0)return n.literalTypeNode({literal:n.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return n.typeUnionNode({types:[n.typeReferenceNode({typeName:"Blob"}),n.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.getPlugin("@hey-api/transformers")?.config.dates)return n.typeReferenceNode({typeName:"Date"});if(t.format==="typeid"&&typeof t.example=="string"){let s=String(t.example).split("_");s.pop();let o=s.join("_");r.usedTypeIDs.add(o);let i=ve(j({case:e.config.case,value:o+"_id"}));return n.typeReferenceNode({typeName:i})}}return n.keywordTypeNode({keyword:"string"})},Td=({onRef:e,plugin:t,schema:r,state:s})=>{let o=[];if(r.const&&Array.isArray(r.const))o=r.const.map(i=>n.valueToExpression({value:i})??n.identifier({text:t.config.topType}));else if(r.items)for(let i of r.items){let p=G({onRef:e,plugin:t,schema:i,state:s});o.push(p);}return n.typeTupleNode({types:o})},qp=({onRef:e,plugin:t,schema:r,state:s})=>{let o=t.getPlugin("@hey-api/transformers");if(o?.config.typeTransformers)for(let i of o.config.typeTransformers){let p=t.gen.ensureFile(t.output),a=i({file:p,schema:r});if(a)return a}switch(r.type){case "array":return hd({onRef:e,plugin:t,schema:r,state:s});case "boolean":return gd({schema:r});case "enum":return xd({onRef:e,plugin:t,schema:r,state:s});case "integer":case "number":return bd({plugin:t,schema:r});case "never":return n.keywordTypeNode({keyword:"never"});case "null":return n.literalTypeNode({literal:n.null()});case "object":return Sd({onRef:e,plugin:t,schema:r,state:s});case "string":return Od({plugin:t,schema:r,state:s});case "tuple":return Td({onRef:e,plugin:t,schema:r,state:s});case "undefined":return n.keywordTypeNode({keyword:"undefined"});case "unknown":return n.keywordTypeNode({keyword:t.config.topType});case "void":return n.keywordTypeNode({keyword:"void"})}},G=({onRef:e,plugin:t,schema:r,state:s})=>{let o=t.gen.ensureFile(t.output);if(r.$ref){let i=o.ensureSymbol({selector:t.api.getSelector("ref",r.$ref)});return e&&e(i),n.typeReferenceNode({typeName:i.placeholder})}if(r.type)return qp({onRef:e,plugin:t,schema:r,state:s});if(r.items){if(r=Q({detectFormat:false,schema:r}),r.items){let i=[];for(let p of r.items){let a=G({onRef:e,plugin:t,schema:p,state:s});i.push(a);}return r.logicalOperator==="and"?n.typeIntersectionNode({types:i}):n.typeUnionNode({types:i})}return G({onRef:e,plugin:t,schema:r,state:s})}return qp({onRef:e,plugin:t,schema:{type:"unknown"},state:s})},Io=({id:e,plugin:t,schema:r,state:s})=>{let o=G({onRef:void 0,plugin:t,schema:r,state:s}),p=t.gen.ensureFile(t.output).ensureSymbol({selector:t.api.getSelector("ref",e)}).update({name:O({config:t.config.definitions,name:M(e)})});jp({plugin:t,schema:r,symbol:p,type:o});},$p=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r=t.addSymbol({name:O({config:{case:e.config.case},name:"ClientOptions"}),selector:e.api.getSelector("ClientOptions")}),s=t.addSymbol({name:O({config:{case:e.config.case},name:"Webhooks"}),selector:e.api.getSelector("Webhooks")}),o=[],i={usedTypeIDs:new Set},p=[];if(e.forEach("operation","parameter","requestBody","schema","server","webhook",a=>{switch(a.type){case "operation":kp({operation:a.operation,plugin:e,state:i});break;case "parameter":Io({id:a.$ref,plugin:e,schema:a.parameter.schema,state:i});break;case "requestBody":Io({id:a.$ref,plugin:e,schema:a.requestBody.schema,state:i});break;case "schema":Io({id:a.$ref,plugin:e,schema:a.schema,state:i});break;case "server":o.push(a.server);break;case "webhook":p.push(vp({operation:a.operation,plugin:e,state:i}));break}}),i.usedTypeIDs.size){let a=n.typeParameterDeclaration({constraint:n.keywordTypeNode({keyword:"string"}),name:"T"}),c=t.addSymbol({name:"TypeID"}),m=n.typeAliasDeclaration({exportType:true,name:c.placeholder,type:n.templateLiteralType({value:[n.typeReferenceNode({typeName:"T"}),"_",n.keywordTypeNode({keyword:"string"})]}),typeParameters:[a]});c.update({value:m});for(let l of i.usedTypeIDs.values()){let f=t.addSymbol({name:ve(j({case:e.config.case,value:`${l}_id`}))}),d=n.typeAliasDeclaration({exportType:true,name:f.placeholder,type:n.typeReferenceNode({typeArguments:[n.literalTypeNode({literal:n.stringLiteral({text:l})})],typeName:c.placeholder})});f.update({value:d});}}Np({plugin:e,servers:o,symbolClientOptions:r}),wp({symbolWebhooks:s,webhookNames:p}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var ts=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}schemaToType(t){return G({onRef:void 0,...t})}};var rs={api:new ts({name:"@hey-api/typescript"}),config:{case:"PascalCase",exportFromIndex:true,style:"preserve",topType:"unknown",tree:false},handler:$p,handlerLegacy:Tp,name:"@hey-api/typescript",output:"types",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.enums=t.valueToObject({defaultValue:{case:"SCREAMING_SNAKE_CASE",constantsIgnoreNull:false,enabled:!!e.config.enums,mode:"javascript"},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.config.enums}),e.config.errors=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",error:"{{name}}Error",name:"{{name}}Errors"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.errors}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Data"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Responses",response:"{{name}}Response"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}WebhookRequest",payload:"{{name}}WebhookPayload"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.webhooks});}};var ns=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var ss=(e,t,r)=>{let s=e.config[r].meta;if(!s)return;let o=s(t);if(Object.keys(o).length)return n.valueToExpression({value:o})};var br=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),s=t.getPluginOrThrow("@hey-api/sdk");return Wr({file:r,operation:e,plugin:s})},os=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),s=I(t.context.config),o=t.getPluginOrThrow("@hey-api/typescript"),i=t.gen.selectSymbolFirst(o.api.getSelector("error",e.id));i&&r.addImport({from:i.file,typeNames:[i.placeholder]});let p=i?.placeholder;if(p||(p="Error"),s.name==="@hey-api/client-axios"){let a=r.ensureSymbol({selector:t.api.getSelector("AxiosError")}).update({name:"AxiosError"});r.addImport({from:"axios",typeNames:[a.placeholder]}),p=`${a.placeholder}<${p}>`;}return p},is=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),s=t.getPluginOrThrow("@hey-api/typescript"),o=t.gen.selectSymbolFirst(s.api.getSelector("response",e.id));return o&&r.addImport({from:o.file,typeNames:[o.placeholder]}),o?.placeholder||"unknown"};var Sr=({plugin:e,typeData:t})=>{let s=I(e.context.config).name==="@hey-api/client-nuxt",o=s?`Omit<${t}, 'composable'>`:t;return {isNuxtClient:s,strippedTypeData:o}};var Fp=({operation:e,plugin:t,queryFn:r,state:s})=>{let o=t.gen.ensureFile(t.output);s.hasMutations||(s.hasMutations=true);let i=o.ensureSymbol({name:"UseMutationOptions",selector:t.api.getSelector("UseMutationOptions")});o.addImport({from:t.name,typeNames:[i.name]}),s.hasUsedQueryFn=true;let p=br({operation:e,plugin:t}),a=os({operation:e,plugin:t}),c=is({operation:e,plugin:t}),{isNuxtClient:m,strippedTypeData:l}=Sr({plugin:t,typeData:p}),f=m?`${i.placeholder}<${c}, ${l}, ${a}>`:`${i.placeholder}<${c}, ${p}, ${a}>`,d="fnOptions",u=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:d},{key:"throwOnError",value:true}]})]})}),h=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?h.push(n.returnVariable({expression:u})):h.push(n.constVariable({destructure:true,expression:u,name:"data"}),n.returnVariable({expression:"data"}));let g=[{key:"mutation",value:n.arrowFunction({async:true,multiLine:true,parameters:[m?{name:d,type:`Partial<${l}>`}:{name:d}],statements:h})}],b=ss(t,e,"mutationOptions");b&&g.push({key:"meta",value:b});let x=o.addSymbol({name:O({config:t.config.mutationOptions,name:e.id})}),P=n.constVariable({comment:t.config.comments?_({operation:e}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${l}>`}],returnType:f,statements:[n.returnStatement({expression:n.objectExpression({obj:g})})]}),name:x.placeholder});x.update({value:P});};var Qr="TOptions",as=n.identifier({text:"options"}),Mp=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=t.ensureSymbol({selector:e.api.getSelector("createQueryKey")}).update({name:O({config:{case:e.config.case},name:"createQueryKey"})}),s=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}),o=n.indexedAccessTypeNode({indexType:n.literalTypeNode({literal:n.ots.number(0)}),objectType:n.typeReferenceNode({typeArguments:[n.typeReferenceNode({typeName:Qr})],typeName:s.placeholder})}),i=me(e.context.config),p=e.getPluginOrThrow("@hey-api/sdk"),a=e.gen.selectSymbolFirstOrThrow(p.api.getSelector("Options")),c=I(e.context.config),m;c.api&&"getSelector"in c.api&&(m=e.gen.selectSymbolFirst(c.api.getSelector("client")));let l=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"id",type:n.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:n.typeReferenceNode({typeName:Qr})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],returnType:n.typeTupleNode({types:[o]}),statements:[n.constVariable({assertion:o,expression:n.objectExpression({multiLine:false,obj:[{key:"_id",value:n.identifier({text:"id"})},{key:i,value:n.identifier({text:`options?.${i} || (options?.client ?? ${m?.placeholder}).getConfig().${i}`})}]}),name:"params",typeName:o}),n.ifStatement({expression:n.identifier({text:"tags"}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"tags"}),right:n.asExpression({expression:n.asExpression({expression:n.identifier({text:"tags"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:n.keywordTypeNode({keyword:"undefined"})})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:as,isOptional:true,name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.propertyAccessExpression({expression:"options",name:"body"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:as,isOptional:true,name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.asExpression({expression:n.asExpression({expression:n.propertyAccessExpression({expression:"options",name:"headers"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:n.keywordTypeNode({keyword:"undefined"})})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:as,isOptional:true,name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.propertyAccessExpression({expression:"options",name:"path"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:as,isOptional:true,name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.asExpression({expression:n.asExpression({expression:n.propertyAccessExpression({expression:"options",name:"query"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:n.keywordTypeNode({keyword:"undefined"})})})})]})}),n.returnStatement({expression:n.arrayLiteralExpression({elements:[n.identifier({text:"params"})]})})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:a.placeholder})}),name:Qr}]}),name:r.placeholder});r.update({value:l});},Id=({id:e,operation:t,plugin:r})=>{let s=r.gen.ensureFile(r.output),o=r.config.queryKeys,i;o.tags&&t.tags&&t.tags.length>0&&(i=n.arrayLiteralExpression({elements:t.tags.map(c=>n.stringLiteral({text:c}))}));let p=s.ensureSymbol({selector:r.api.getSelector("createQueryKey")});return n.callExpression({functionName:p.placeholder,parameters:[n.ots.string(e),"options",i]})},Lp=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=t.ensureSymbol({selector:e.api.getSelector("_JSONValue")}).update({name:"_JSONValue"});t.addImport({from:e.name,typeNames:[r.placeholder]});let s=[{name:"_id",type:n.keywordTypeNode({keyword:"string"})},{isRequired:false,name:me(e.context.config),type:n.typeReferenceNode({typeName:r.placeholder})},{isRequired:false,name:"headers",type:n.typeReferenceNode({typeName:r.placeholder})},{isRequired:false,name:"query",type:n.typeReferenceNode({typeName:r.placeholder})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:r.placeholder})}],o=e.getPluginOrThrow("@hey-api/sdk"),i=e.gen.selectSymbolFirstOrThrow(o.api.getSelector("Options")),p=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}).update({name:"QueryKey"}),a=n.typeAliasDeclaration({exportType:true,name:p.placeholder,type:n.typeTupleNode({types:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeName:`Pick<${Qr}, 'body' | 'path'>`}),n.typeInterfaceNode({properties:s,useLegacyResolution:true})]})]}),typeParameters:[{extends:n.typeReferenceNode({typeName:n.identifier({text:i.placeholder})}),name:Qr}]});p.update({value:a});},Dp=({operation:e,plugin:t,symbol:r})=>{let s=br({operation:e,plugin:t}),{strippedTypeData:o}=Sr({plugin:t,typeData:s});return n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:rr(e),name:"options",type:o}],statements:Id({id:e.id,operation:e,plugin:t})}),name:r.placeholder})};var Po="context",Ao="options",Vp=({operation:e,plugin:t,queryFn:r,state:s})=>{if(ur({operation:e}))return;let o=t.gen.ensureFile(t.output),i=se({context:t.context,operation:e});s.hasQueries||(s.hasQueries=true,s.hasCreateQueryKeyParamsFunction||(Lp({plugin:t}),Mp({plugin:t}),s.hasCreateQueryKeyParamsFunction=true));let p=o.ensureSymbol({name:"UseQueryOptions",selector:t.api.getSelector("UseQueryOptions")});o.addImport({from:t.name,typeNames:[p.name]}),s.hasUsedQueryFn=true;let a=o.addSymbol({name:O({config:t.config.queryKeys,name:e.id})}),c=Dp({operation:e,plugin:t,symbol:a});a.update({value:c});let m=br({operation:e,plugin:t}),l=os({operation:e,plugin:t}),f=is({operation:e,plugin:t}),{isNuxtClient:d,strippedTypeData:u}=Sr({plugin:t,typeData:m}),h=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:Ao},{spread:Po},{key:"throwOnError",value:true}]})]})}),g=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?g.push(n.returnVariable({expression:h})):g.push(n.constVariable({destructure:true,expression:h,name:"data"}),n.returnVariable({expression:"data"}));let b=[{key:"key",value:n.callExpression({functionName:a.placeholder,parameters:[Ao]})},{key:"query",value:n.arrowFunction({async:true,multiLine:true,parameters:[d?{name:Po,type:u}:{name:Po}],statements:g})}],x=ss(t,e,"queryOptions");x&&b.push({key:"meta",value:x});let P=o.ensureSymbol({selector:t.api.getSelector("queryOptionsFn",e.id)}).update({name:O({config:t.config.queryOptions,name:e.id})}),E=n.constVariable({comment:t.config.comments?_({operation:e}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:i,name:Ao,type:u}],returnType:d?`${p.placeholder}<${f}, ${u}, ${l}>`:`${p.placeholder}<${f}, ${l}>`,statements:[n.returnStatement({expression:n.objectExpression({obj:b})})]}),name:P.placeholder});P.update({value:E});};var Bp=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r={hasCreateQueryKeyParamsFunction:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false},s=e.getPluginOrThrow("@hey-api/sdk"),o=e.gen.selectSymbolFirst(s.api.getSelector("Options"));if(o&&t.addImport({from:o.file,typeNames:[o.placeholder]}),e.forEach("operation",({operation:i})=>{r.hasUsedQueryFn=false;let p=s.config.asClass?Ee({context:e.context,operation:i,plugin:s}):void 0,a=p?p.values().next().value:void 0,c=(a?[a.path[0],...a.path.slice(1).map(m=>j({case:"camelCase",value:m})),a.methodName].filter(Boolean):[de({config:e.context.config,handleIllegal:true,id:i.id,operation:i})]).join(".");if(e.hooks.operation.isQuery(i)&&e.config.queryOptions.enabled&&Vp({operation:i,plugin:e,queryFn:c,state:r}),e.hooks.operation.isMutation(i)&&e.config.mutationOptions.enabled&&Fp({operation:i,plugin:e,queryFn:c,state:r}),r.hasUsedQueryFn){let m=e.gen.selectSymbolFirst(a?s.api.getSelector("class",a.path[0]):s.api.getSelector("function",i.id));m&&t.addImport({from:m.file,names:[m.placeholder]});}}),r.hasQueries){let i,p=I(e.context.config);p.api&&"getSelector"in p.api&&(i=e.gen.selectSymbolFirst(p.api.getSelector("client")),i&&t.addImport({from:i.file,names:[i.placeholder]}));}e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var ps={api:new ns({name:"@pinia/colada"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/typescript","@hey-api/sdk"],handler:Bp,name:"@pinia/colada",output:"@pinia/colada",resolveConfig:(e,t)=>{e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Query"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var Or=(e,t,r)=>{let s=e.config[r].meta;if(!s)return;let o=s(t);if(Object.keys(o).length)return n.valueToExpression({value:o})};var Ge=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),s=t.getPluginOrThrow("@hey-api/sdk");return Wr({file:r,operation:e,plugin:s})},cs=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),s=I(t.context.config),o=t.getPluginOrThrow("@hey-api/typescript"),i=t.gen.selectSymbolFirst(o.api.getSelector("error",e.id));i&&r.addImport({from:i.file,typeNames:[i.placeholder]});let p=i?.placeholder;if(!p){let a=r.ensureSymbol({selector:t.api.getSelector("DefaultError")}).update({name:"DefaultError"});r.addImport({from:t.name,typeNames:[a.placeholder]}),p=a.placeholder;}if(s.name==="@hey-api/client-axios"){let a=r.ensureSymbol({selector:t.api.getSelector("AxiosError")}).update({name:"AxiosError"});r.addImport({from:"axios",typeNames:[a.placeholder]}),p=`${a.placeholder}<${p}>`;}return p},ms=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),s=t.getPluginOrThrow("@hey-api/typescript"),o=t.gen.selectSymbolFirst(s.api.getSelector("response",e.id));return o&&r.addImport({from:o.file,typeNames:[o.placeholder]}),o?.placeholder||"unknown"};var Hr="TOptions",Kp=n.identifier({text:"infinite"}),ls=n.identifier({text:"options"}),fs=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=t.ensureSymbol({selector:e.api.getSelector("createQueryKey")}).update({name:O({config:{case:e.config.case},name:"createQueryKey"})}),s=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}),o=n.indexedAccessTypeNode({indexType:n.literalTypeNode({literal:n.ots.number(0)}),objectType:n.typeReferenceNode({typeArguments:[n.typeReferenceNode({typeName:Hr})],typeName:s.placeholder})}),i=me(e.context.config),p=I(e.context.config),a;p.api&&"getSelector"in p.api&&(a=e.gen.selectSymbolFirst(p.api.getSelector("client")));let c=e.getPluginOrThrow("@hey-api/sdk"),m=e.gen.selectSymbolFirstOrThrow(c.api.getSelector("Options")),l=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"id",type:n.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:n.typeReferenceNode({typeName:Hr})},{isRequired:false,name:"infinite",type:n.typeReferenceNode({typeName:"boolean"})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],returnType:n.typeTupleNode({types:[o]}),statements:[n.constVariable({assertion:o,expression:n.objectExpression({multiLine:false,obj:[{key:"_id",value:n.identifier({text:"id"})},{key:i,value:n.identifier({text:`options?.${i} || (options?.client ?? ${a?.placeholder}).getConfig().${i}`})}]}),name:"params",typeName:o}),n.ifStatement({expression:Kp,thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"_infinite"}),right:Kp})})]})}),n.ifStatement({expression:n.identifier({text:"tags"}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"tags"}),right:n.identifier({text:"tags"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ls,isOptional:true,name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.propertyAccessExpression({expression:"options",name:"body"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ls,isOptional:true,name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ls,isOptional:true,name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.propertyAccessExpression({expression:"options",name:"path"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:ls,isOptional:true,name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.propertyAccessExpression({expression:"options",name:"query"})})})]})}),n.returnStatement({expression:n.arrayLiteralExpression({elements:[n.identifier({text:"params"})]})})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:m.placeholder})}),name:Hr}]}),name:r.placeholder});r.update({value:l});},Ad=({id:e,isInfinite:t,operation:r,plugin:s})=>{let o=s.gen.ensureFile(s.output),i=t?s.config.infiniteQueryKeys:s.config.queryKeys,p;i.tags&&r.tags&&r.tags.length>0&&(p=n.arrayLiteralExpression({elements:r.tags.map(m=>n.stringLiteral({text:m}))}));let a=o.ensureSymbol({selector:s.api.getSelector("createQueryKey")});return n.callExpression({functionName:a.placeholder,parameters:[n.ots.string(e),"options",t||p?n.ots.boolean(!!t):void 0,p]})},ds=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=[{name:"_id",type:n.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:n.keywordTypeNode({keyword:"boolean"})},{isRequired:false,name:"tags",type:n.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],s=e.getPluginOrThrow("@hey-api/sdk"),o=e.gen.selectSymbolFirstOrThrow(s.api.getSelector("Options")),i=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}).update({name:"QueryKey"}),p=n.typeAliasDeclaration({exportType:true,name:i.placeholder,type:n.typeTupleNode({types:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeName:`Pick<${Hr}, '${me(e.context.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),n.typeInterfaceNode({properties:r,useLegacyResolution:true})]})]}),typeParameters:[{extends:n.typeReferenceNode({typeName:n.identifier({text:o.placeholder})}),name:Hr}]});i.update({value:p});},us=({isInfinite:e,operation:t,plugin:r,symbol:s,typeQueryKey:o})=>{let i=Ge({operation:t,plugin:r});return n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:rr(t),name:"options",type:i}],returnType:e?o:void 0,statements:Ad({id:t.id,isInfinite:e,operation:t,plugin:r})}),name:s.placeholder})};var Cd=({plugin:e})=>{let r=e.gen.ensureFile(e.output).ensureSymbol({selector:e.api.getSelector("createInfiniteParams")}).update({name:O({config:{case:e.config.case},name:"createInfiniteParams"})}),s=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:n.typeReferenceNode({typeName:"QueryKey<Options>"})},{name:"page",type:n.typeReferenceNode({typeName:"K"})}],statements:[n.constVariable({expression:n.objectExpression({obj:[{spread:n.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),n.returnVariable({expression:n.asExpression({expression:n.asExpression({expression:n.identifier({text:"params"}),type:n.keywordTypeNode({keyword:"unknown"})}),type:S__default.default.factory.createTypeQueryNode(n.identifier({text:"page"}))})})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:"Pick<QueryKey<Options>[0], 'body' | 'headers' | 'path' | 'query'>"})}),name:"K"}]}),name:r.placeholder});r.update({value:s});},Wp=({operation:e,plugin:t,queryFn:r,state:s})=>{let o=Zi({context:t.context,operation:e});if(!o)return;let i=t.gen.ensureFile(t.output),p=se({context:t.context,operation:e});s.hasInfiniteQueries||(s.hasInfiniteQueries=true,s.hasCreateQueryKeyParamsFunction||(ds({plugin:t}),fs({plugin:t}),s.hasCreateQueryKeyParamsFunction=true),s.hasCreateInfiniteParamsFunction||(Cd({plugin:t}),s.hasCreateInfiniteParamsFunction=true));let a=i.ensureSymbol({selector:t.api.getSelector("infiniteQueryOptions")}).update({name:"infiniteQueryOptions"}),c=i.ensureSymbol({selector:t.api.getSelector("InfiniteData")}).update({name:"InfiniteData"});i.addImport({from:t.name,names:[a.name],typeNames:[c.name]}),s.hasUsedQueryFn=true;let m=Ge({operation:e,plugin:t}),l=cs({operation:e,plugin:t}),f=ms({operation:e,plugin:t}),u=`${i.ensureSymbol({selector:t.api.getSelector("QueryKey")}).placeholder}<${m}>`,h=`Pick<${u}[0], 'body' | 'headers' | 'path' | 'query'>`,g=t.getPluginOrThrow("@hey-api/typescript"),b={usedTypeIDs:new Set},x=g.api.schemaToType({plugin:g,schema:o.schema,state:b}),P=`${oe({node:x,unescape:true})} | ${h}`,E=i.addSymbol({name:O({config:t.config.infiniteQueryKeys,name:e.id})}),F=us({isInfinite:true,operation:e,plugin:t,symbol:E,typeQueryKey:u});E.update({value:F});let w=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),V=i.ensureSymbol({selector:t.api.getSelector("createInfiniteParams")}),K=[n.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:n.conditionalExpression({condition:n.binaryExpression({left:n.typeOfExpression({text:"pageParam"}),operator:"===",right:n.ots.string("object")}),whenFalse:n.objectExpression({multiLine:true,obj:[{key:o.in,value:n.objectExpression({multiLine:true,obj:[{key:o.name,value:n.identifier({text:"pageParam"})}]})}]}),whenTrue:n.identifier({text:"pageParam"})}),name:"page",typeName:h}),n.constVariable({expression:n.callExpression({functionName:V.placeholder,parameters:["queryKey","page"]}),name:"params"})];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?K.push(n.returnVariable({expression:w})):K.push(n.constVariable({destructure:true,expression:w,name:"data"}),n.returnVariable({expression:"data"}));let J=[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:K})},{key:"queryKey",value:n.callExpression({functionName:E.placeholder,parameters:["options"]})}],v=Or(t,e,"infiniteQueryOptions");v&&J.push({key:"meta",value:v});let B=i.addSymbol({name:O({config:t.config.infiniteQueryOptions,name:e.id})}),et=n.constVariable({comment:t.config.comments?_({operation:e}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:p,name:"options",type:m}],statements:[n.returnFunctionCall({args:[n.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:J})],name:a.placeholder,types:[f,l||"unknown",`${c.placeholder}<${f}>`,u,P]})]}),name:B.placeholder});B.update({value:et});};var zp=({operation:e,plugin:t,queryFn:r,state:s})=>{let o=t.name==="@tanstack/angular-query-experimental"||t.name==="@tanstack/svelte-query"||t.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",i=t.gen.ensureFile(t.output);s.hasMutations||(s.hasMutations=true);let p=i.ensureSymbol({name:o,selector:t.api.getSelector("MutationOptions")});i.addImport({from:t.name,typeNames:[p.name]}),s.hasUsedQueryFn=true;let a=Ge({operation:e,plugin:t}),c=cs({operation:e,plugin:t}),m=ms({operation:e,plugin:t}),l=`${p.placeholder}<${m}, ${c}, ${a}>`,f="fnOptions",d=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:f},{key:"throwOnError",value:true}]})]})}),u=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?u.push(n.returnVariable({expression:d})):u.push(n.constVariable({destructure:true,expression:d,name:"data"}),n.returnVariable({expression:"data"}));let h=[{key:"mutationFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{name:f}],statements:u})}],g=Or(t,e,"mutationOptions");g&&h.push({key:"meta",value:g});let b="mutationOptions",x=n.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${a}>`}],returnType:l,statements:[n.constVariable({expression:n.objectExpression({obj:h}),name:b,typeName:l}),n.returnVariable({expression:b})]}),P=i.addSymbol({name:O({config:t.config.mutationOptions,name:e.id})}),E=n.constVariable({comment:t.config.comments?_({operation:e}):void 0,exportConst:true,expression:x,name:P.placeholder});P.update({value:E});};var Eo="options",_p=({operation:e,plugin:t,queryFn:r,state:s})=>{if(ur({operation:e}))return;let o=t.gen.ensureFile(t.output),i=se({context:t.context,operation:e});s.hasQueries||(s.hasQueries=true,s.hasCreateQueryKeyParamsFunction||(ds({plugin:t}),fs({plugin:t}),s.hasCreateQueryKeyParamsFunction=true));let p=o.ensureSymbol({name:"queryOptions",selector:t.api.getSelector("queryOptions")});o.addImport({from:t.name,names:[p.name]}),s.hasUsedQueryFn=true;let a=o.addSymbol({name:O({config:t.config.queryKeys,name:e.id})}),c=us({isInfinite:false,operation:e,plugin:t,symbol:a});a.update({value:c});let m=Ge({operation:e,plugin:t}),l=n.awaitExpression({expression:n.callExpression({functionName:r,parameters:[n.objectExpression({multiLine:true,obj:[{spread:Eo},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),f=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?f.push(n.returnVariable({expression:l})):f.push(n.constVariable({destructure:true,expression:l,name:"data"}),n.returnVariable({expression:"data"}));let d=[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:f})},{key:"queryKey",value:n.callExpression({functionName:a.placeholder,parameters:[Eo]})}],u=Or(t,e,"queryOptions");u&&d.push({key:"meta",value:u});let h=o.ensureSymbol({selector:t.api.getSelector("queryOptionsFn",e.id)}).update({name:O({config:t.config.queryOptions,name:e.id})}),g=n.constVariable({comment:t.config.comments?_({operation:e}):void 0,exportConst:t.config.queryOptions.exported,expression:n.arrowFunction({parameters:[{isRequired:i,name:Eo,type:m}],statements:[n.returnFunctionCall({args:[n.objectExpression({obj:d})],name:p.placeholder})]}),name:h.placeholder});h.update({value:g});};var Qp="options",Hp=({operation:e,plugin:t,state:r})=>{if(ur({operation:e})||!("useQuery"in t.config))return;let s=t.gen.ensureFile(t.output),o=s.addSymbol({name:O({config:t.config.useQuery,name:e.id})});r.hasUseQuery||(r.hasUseQuery=true);let i=s.ensureSymbol({name:"useQuery",selector:t.api.getSelector("useQuery")});s.addImport({from:t.name,names:[i.name]});let p=se({context:t.context,operation:e}),a=Ge({operation:e,plugin:t}),c=s.ensureSymbol({selector:t.api.getSelector("queryOptionsFn",e.id)}),m=n.constVariable({comment:t.config.comments?_({operation:e}):void 0,exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:p,name:Qp,type:a}],statements:[n.returnStatement({expression:n.callExpression({functionName:i.placeholder,parameters:[n.callExpression({functionName:c.placeholder,parameters:[Qp]})]})})]}),name:o.placeholder});o.update({value:m});};var Je=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false},s=e.getPluginOrThrow("@hey-api/sdk"),o=e.gen.selectSymbolFirst(s.api.getSelector("Options"));if(o&&t.addImport({from:o.file,typeNames:[o.placeholder]}),e.forEach("operation",({operation:i})=>{r.hasUsedQueryFn=false;let p=s.config.asClass?Ee({context:e.context,operation:i,plugin:s}):void 0,a=p?p.values().next().value:void 0,c=(a?[a.path[0],...a.path.slice(1).map(m=>j({case:"camelCase",value:m})),a.methodName].filter(Boolean):[de({config:e.context.config,handleIllegal:true,id:i.id,operation:i})]).join(".");if(e.hooks.operation.isQuery(i)&&(e.config.queryOptions.enabled&&_p({operation:i,plugin:e,queryFn:c,state:r}),e.config.infiniteQueryOptions.enabled&&Wp({operation:i,plugin:e,queryFn:c,state:r}),"useQuery"in e.config&&e.config.useQuery.enabled&&Hp({operation:i,plugin:e,state:r})),e.hooks.operation.isMutation(i)&&e.config.mutationOptions.enabled&&zp({operation:i,plugin:e,queryFn:c,state:r}),r.hasUsedQueryFn){let m=e.gen.selectSymbolFirst(a?s.api.getSelector("class",a.path[0]):s.api.getSelector("function",i.id));m&&t.addImport({from:m.file,names:[m.placeholder]});}}),r.hasQueries||r.hasInfiniteQueries){let i,p=I(e.context.config);p.api&&"getSelector"in p.api&&(i=e.gen.selectSymbolFirst(p.api.getSelector("client")),i&&t.addImport({from:i.file,names:[i.placeholder]}));}e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var Nd=e=>`${de({config:C(),id:e.name,operation:e})}InfiniteOptions`,jd=e=>`${de({config:C(),id:e.name,operation:e})}Mutation`,kd=({config:e,id:t,operation:r})=>`${de({config:e,id:t,operation:r})}Options`,ys=({config:e,id:t,isInfinite:r,operation:s})=>`${de({config:e,id:t,operation:s})}${r?"Infinite":""}QueryKey`,vd=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},wd="createInfiniteParams",rc="createQueryKey",Zp="infiniteQueryOptions",Up="mutationOptions",No="QueryKey",Xp="queryOptions",Ur="TOptions",qd=({file:e})=>{let t=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:n.typeNode("QueryKey<OptionsLegacyParser>")},{name:"page",type:n.typeNode("K")}],statements:[n.constVariable({expression:n.identifier({text:"queryKey[0]"}),name:"params"}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"page"}),name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),n.returnVariable({expression:S__default.default.factory.createAsExpression(S__default.default.factory.createAsExpression(n.identifier({text:"params"}),S__default.default.factory.createKeywordTypeNode(S__default.default.SyntaxKind.UnknownKeyword)),S__default.default.factory.createTypeQueryNode(n.identifier({text:"page"})))})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:"Pick<QueryKey<OptionsLegacyParser>[0], 'body' | 'headers' | 'path' | 'query'>"})}),name:"K"}]}),name:wd});e.add(t);},Gp=({file:e})=>{let t=n.indexedAccessTypeNode({indexType:n.typeNode(0),objectType:n.typeNode(No,[n.typeNode(Ur)])}),r=n.identifier({text:"infinite"}),s=me(C()),o=n.constVariable({expression:n.arrowFunction({multiLine:true,parameters:[{name:"id",type:n.typeNode("string")},{isRequired:false,name:"options",type:n.typeNode(Ur)},{isRequired:false,name:"infinite",type:n.typeNode("boolean")}],returnType:t,statements:[n.constVariable({assertion:t,expression:n.objectExpression({multiLine:false,obj:[{key:"_id",value:n.identifier({text:"id"})},{key:s,value:n.identifier({text:`options?.${s} || (options?.client ?? _heyApiClient).getConfig().${s}`})}]}),name:"params",typeName:t}),n.ifStatement({expression:r,thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"body"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"body"}),right:n.propertyAccessExpression({expression:"options",name:"body"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"headers"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"headers"}),right:n.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"path"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"path"}),right:n.propertyAccessExpression({expression:"options",name:"path"})})})]})}),n.ifStatement({expression:n.propertyAccessExpression({expression:n.identifier({text:"options"}),isOptional:true,name:n.identifier({text:"query"})}),thenStatement:n.block({statements:[n.expressionToStatement({expression:n.binaryExpression({left:n.propertyAccessExpression({expression:"params",name:"query"}),right:n.propertyAccessExpression({expression:"options",name:"query"})})})]})}),n.returnVariable({expression:"params"})],types:[{extends:n.typeReferenceNode({typeName:n.identifier({text:"OptionsLegacyParser"})}),name:Ur}]}),name:rc});e.add(o);},Jp=({file:e})=>{let t=[{name:"_id",type:n.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:n.keywordTypeNode({keyword:"boolean"})}],r=n.typeAliasDeclaration({name:No,type:n.typeTupleNode({types:[n.typeIntersectionNode({types:[n.typeReferenceNode({typeName:`Pick<${Ur}, '${me(C())}' | 'body' | 'headers' | 'path' | 'query'>`}),n.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:n.typeReferenceNode({typeName:n.identifier({text:"OptionsLegacyParser"})}),name:Ur}]});e.add(r);},Co=({client:e,file:t,operation:r,typesModulePath:s})=>{let{name:o}=Kt({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Wt,onImport:p=>{t.import({asType:true,module:s,name:p});}});return {typeData:To({importedType:o})}},Yp=({client:e,file:t,operation:r,pluginName:s,typesModulePath:o})=>{let i=C(),{name:p}=Kt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:xr,onImport:m=>{t.import({asType:true,module:o,name:m});}}),a={asType:true,name:p};if(a.name||(a=t.import({asType:true,module:s,name:"DefaultError"})),I(i).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});a={...m,name:`${m.name}<${a.name}>`};}return {typeError:a}},ec=({client:e,file:t,operation:r,typesModulePath:s})=>{let{name:o}=Kt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Xe,onImport:p=>{t.import({asType:true,module:s,name:p});}});return {typeResponse:o||"void"}},tc=({id:e,isInfinite:t})=>n.arrayLiteralExpression({elements:[n.callExpression({functionName:rc,parameters:[n.ots.string(e),"options",t?n.ots.boolean(true):void 0]})],multiLine:false}),Ye=({client:e,files:t,plugin:r})=>{let s=C();if(Y(s))throw new Error("TanStack Query plugin does not support legacy clients");let o=t[r.name];o.import({asType:true,module:X({config:s,sourceOutput:r.output}),name:"OptionsLegacyParser"});let i=_t({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),p=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",a,c=false,m=false,l=false,f=false,d=false,u=new Map;for(let h of e.services)for(let g of h.operations){let b=D(g);if(u.has(b))continue;u.set(b,true);let x=[s.plugins["@hey-api/sdk"]?.config.asClass&&fr({config:s,name:h.name}),de({config:s,handleIllegal:!s.plugins["@hey-api/sdk"]?.config.asClass,id:g.name,operation:g})].filter(Boolean).join("."),P=false;if(r.config.queryOptions.enabled&&["GET","POST"].includes(g.method)){d||(d=true,m||(Jp({file:o}),Gp({file:o}),m=true),o.import({module:r.name,name:Xp})),P=true;let{typeData:E}=Co({client:e,file:o,operation:g,typesModulePath:i}),F=_e(g.parameters),w=n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:F,name:"options",type:E}],statements:tc({id:g.name})}),name:ys({config:s,id:g.name,operation:g})});o.add(w);let V=n.constVariable({comment:[],exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:F,name:"options",type:E}],statements:[n.returnFunctionCall({args:[n.objectExpression({obj:[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[n.constVariable({destructure:true,expression:n.awaitExpression({expression:n.callExpression({functionName:x,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),n.returnVariable({expression:"data"})]})},{key:"queryKey",value:n.callExpression({functionName:ys({config:s,id:g.name,operation:g}),parameters:["options"]})}]})],name:Xp})]}),name:kd({config:s,id:g.name,operation:g})});o.add(V);}if(r.config.infiniteQueryOptions&&["GET","POST"].includes(g.method)){let E,F=g.parameters.find(w=>{if(ge(s.parser.pagination).test(w.name))return E=w,true;if(w.in==="body"){if(w.export==="reference"){let K=w.$refs[0];return e.models.find(v=>v.meta?.$ref===K)?.properties.find(v=>{if(ge(s.parser.pagination).test(v.name))return E=v,true})}return w.properties.find(K=>{if(ge(s.parser.pagination).test(K.name))return E=K,true})}});if(F&&E){l||(l=true,m||(Jp({file:o}),Gp({file:o}),m=true),c||(qd({file:o}),c=true),o.import({module:r.name,name:Zp}),a=o.import({asType:true,module:r.name,name:"InfiniteData"})),P=true;let{typeData:w}=Co({client:e,file:o,operation:g,typesModulePath:i}),{typeError:V}=Yp({client:e,file:o,operation:g,pluginName:r.name,typesModulePath:i}),{typeResponse:K}=ec({client:e,file:o,operation:g,typesModulePath:i}),J=_e(g.parameters),v=`${No}<${w}>`,B=`Pick<${v}[0], 'body' | 'headers' | 'path' | 'query'>`,et=`${E.base} | ${B}`,je=n.constVariable({exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:J,name:"options",type:w}],returnType:v,statements:tc({id:g.name,isInfinite:true})}),name:ys({config:s,id:g.name,isInfinite:true,operation:g})});o.add(je);let zt=n.constVariable({comment:[],exportConst:true,expression:n.arrowFunction({parameters:[{isRequired:J,name:"options",type:w}],statements:[n.returnFunctionCall({args:[n.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[n.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:n.conditionalExpression({condition:n.binaryExpression({left:n.typeOfExpression({text:"pageParam"}),operator:"===",right:n.ots.string("object")}),whenFalse:n.objectExpression({multiLine:true,obj:[{key:vd(F),value:n.objectExpression({multiLine:true,obj:[{key:E.name,value:n.identifier({text:"pageParam"})}]})}]}),whenTrue:n.identifier({text:"pageParam"})}),name:"page",typeName:B}),n.constVariable({expression:n.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),n.constVariable({destructure:true,expression:n.awaitExpression({expression:n.callExpression({functionName:x,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:n.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),n.returnVariable({expression:"data"})]})},{key:"queryKey",value:n.callExpression({functionName:ys({config:s,id:g.name,isInfinite:true,operation:g}),parameters:["options"]})}]})],name:Zp,types:[K,V.name,`${typeof a=="string"?a:a.name}<${K}>`,v,et]})]}),name:Nd(g)});o.add(zt);}}if(r.config.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(g.method)){f||(f=true,o.import({asType:true,module:r.name,name:p})),P=true;let{typeData:E}=Co({client:e,file:o,operation:g,typesModulePath:i}),{typeError:F}=Yp({client:e,file:o,operation:g,pluginName:r.name,typesModulePath:i}),{typeResponse:w}=ec({client:e,file:o,operation:g,typesModulePath:i}),V="fnOptions",K=n.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${E}>`}],statements:[n.constVariable({expression:n.objectExpression({obj:[{key:"mutationFn",value:n.arrowFunction({async:true,multiLine:true,parameters:[{name:V}],statements:[n.constVariable({destructure:true,expression:n.awaitExpression({expression:n.callExpression({functionName:x,parameters:[n.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:V},{key:"throwOnError",value:true}]})]})}),name:"data"}),n.returnVariable({expression:"data"})]})}]}),name:Up,typeName:`${p}<${w}, ${F.name}, ${E}>`}),n.returnVariable({expression:Up})]}),J=n.constVariable({comment:[],exportConst:true,expression:K,name:jd(g)});o.add(J);}(d||l)&&o.import({alias:"_heyApiClient",module:_t({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),P&&o.import({module:_t({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:x.split(".")[0]});}};var hs=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var gs={api:new hs({name:"@tanstack/angular-query-experimental"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Je,handlerLegacy:Ye,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var xs=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var bs={api:new xs({name:"@tanstack/react-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Je,handlerLegacy:Ye,name:"@tanstack/react-query",output:"@tanstack/react-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions}),e.config.useQuery=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:false,name:"use{{name}}Query"},mappers:{boolean:r=>({enabled:r}),function:r=>({enabled:true,name:r}),object:r=>({enabled:true,...r}),string:r=>({enabled:true,name:r})},value:e.config.useQuery}),e.config.useQuery.enabled&&(e.config.queryOptions.enabled||(e.config.queryOptions.enabled=true,e.config.queryOptions.exported=false));}};var Ss=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Os={api:new Ss({name:"@tanstack/solid-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Je,handlerLegacy:Ye,name:"@tanstack/solid-query",output:"@tanstack/solid-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var Ts=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Rs={api:new Ts({name:"@tanstack/svelte-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Je,handlerLegacy:Ye,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var Is=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Ps={api:new Is({name:"@tanstack/vue-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Je,handlerLegacy:Ye,name:"@tanstack/vue-query",output:"@tanstack/vue-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var As=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Vd=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),s=[],o=t.getPluginOrThrow("@hey-api/typescript"),i=t.gen.selectSymbolFirst(o.api.getSelector("data",e.id));i&&(e.body&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),s.push({isRequired:e.body.required,name:"Body",type:`${i.placeholder}['body']`})),e.parameters&&(e.parameters.header&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),s.push({isRequired:ht(e.parameters.header),name:"Headers",type:`${i.placeholder}['headers']`})),e.parameters.path&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),s.push({isRequired:ht(e.parameters.path),name:"Params",type:`${i.placeholder}['path']`})),e.parameters.query&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),s.push({isRequired:ht(e.parameters.query),name:"Querystring",type:`${i.placeholder}['query']`}))));let{errors:p,responses:a}=Me(e),c,m=t.gen.selectSymbolFirst(o.api.getSelector("errors",e.id));if(m&&p&&p.properties){let g=Object.keys(p.properties);if(g.length){if(!g.includes("default"))r.addImport({from:m.file,typeNames:[m.placeholder]}),c=n.typeReferenceNode({typeName:m.placeholder});else if(g.length>1){r.addImport({from:m.file,typeNames:[m.placeholder]});let x=n.typeReferenceNode({typeName:m.placeholder}),P=n.literalTypeNode({literal:n.stringLiteral({text:"default"})});c=n.typeReferenceNode({typeArguments:[x,P],typeName:"Omit"});}}}let l,f=t.gen.selectSymbolFirst(o.api.getSelector("responses",e.id));if(f&&a&&a.properties){let g=Object.keys(a.properties);if(g.length){if(!g.includes("default"))r.addImport({from:f.file,typeNames:[f.placeholder]}),l=n.typeReferenceNode({typeName:f.placeholder});else if(g.length>1){r.addImport({from:f.file,typeNames:[f.placeholder]});let x=n.typeReferenceNode({typeName:f.placeholder}),P=n.literalTypeNode({literal:n.stringLiteral({text:"default"})});l=n.typeReferenceNode({typeArguments:[x,P],typeName:"Omit"});}}}let d=[c,l].filter(Boolean);if(d.length&&s.push({name:"Reply",type:n.typeIntersectionNode({types:d})}),!s.length)return;let u=r.ensureSymbol({selector:t.api.getSelector("RouteHandler")});return {name:e.id,type:n.typeReferenceNode({typeArguments:[n.typeInterfaceNode({properties:s,useLegacyResolution:false})],typeName:u.placeholder})}},nc=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r=[];e.forEach("operation",({operation:i})=>{let p=Vd({operation:i,plugin:e});p&&r.push(p);});let s=t.addSymbol({name:"RouteHandlers"});if(r.length){let i=t.ensureSymbol({selector:e.api.getSelector("RouteHandler")}).update({name:"RouteHandler"});t.addImport({from:"fastify",typeNames:[i.name]});}let o=n.typeAliasDeclaration({exportType:true,name:s.placeholder,type:n.typeInterfaceNode({properties:r,useLegacyResolution:false})});s.update({value:o});};var Es={api:new As({name:"fastify"}),config:{exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:nc,name:"fastify",output:"fastify"};var T={actions:{args:n.identifier({text:"args"}),base64:n.identifier({text:"base64"}),bic:n.identifier({text:"bic"}),brand:n.identifier({text:"brand"}),bytes:n.identifier({text:"bytes"}),check:n.identifier({text:"check"}),checkItems:n.identifier({text:"checkItems"}),creditCard:n.identifier({text:"creditCard"}),cuid2:n.identifier({text:"cuid2"}),decimal:n.identifier({text:"decimal"}),description:n.identifier({text:"description"}),digits:n.identifier({text:"digits"}),email:n.identifier({text:"email"}),emoji:n.identifier({text:"emoji"}),empty:n.identifier({text:"empty"}),endsWith:n.identifier({text:"endsWith"}),entries:n.identifier({text:"entries"}),everyItem:n.identifier({text:"everyItem"}),excludes:n.identifier({text:"excludes"}),filterItems:n.identifier({text:"filterItems"}),findItem:n.identifier({text:"findItem"}),finite:n.identifier({text:"finite"}),flavor:n.identifier({text:"flavor"}),graphemes:n.identifier({text:"graphemes"}),gtValue:n.identifier({text:"gtValue"}),hash:n.identifier({text:"hash"}),hexColor:n.identifier({text:"hexColor"}),hexadecimal:n.identifier({text:"hexadecimal"}),imei:n.identifier({text:"imei"}),includes:n.identifier({text:"includes"}),integer:n.identifier({text:"integer"}),ip:n.identifier({text:"ip"}),ipv4:n.identifier({text:"ipv4"}),ipv6:n.identifier({text:"ipv6"}),isoDate:n.identifier({text:"isoDate"}),isoDateTime:n.identifier({text:"isoDateTime"}),isoTime:n.identifier({text:"isoTime"}),isoTimeSecond:n.identifier({text:"isoTimeSecond"}),isoTimestamp:n.identifier({text:"isoTimestamp"}),isoWeek:n.identifier({text:"isoWeek"}),length:n.identifier({text:"length"}),ltValue:n.identifier({text:"ltValue"}),mac:n.identifier({text:"mac"}),mac48:n.identifier({text:"mac48"}),mac64:n.identifier({text:"mac64"}),mapItems:n.identifier({text:"mapItems"}),maxBytes:n.identifier({text:"maxBytes"}),maxEntries:n.identifier({text:"maxEntries"}),maxGraphemes:n.identifier({text:"maxGraphemes"}),maxLength:n.identifier({text:"maxLength"}),maxSize:n.identifier({text:"maxSize"}),maxValue:n.identifier({text:"maxValue"}),maxWords:n.identifier({text:"maxWords"}),metadata:n.identifier({text:"metadata"}),mimeType:n.identifier({text:"mimeType"}),minBytes:n.identifier({text:"minBytes"}),minEntries:n.identifier({text:"minEntries"}),minGraphemes:n.identifier({text:"minGraphemes"}),minLength:n.identifier({text:"minLength"}),minSize:n.identifier({text:"minSize"}),minValue:n.identifier({text:"minValue"}),minWords:n.identifier({text:"minWords"}),multipleOf:n.identifier({text:"multipleOf"}),nanoid:n.identifier({text:"nanoid"}),nonEmpty:n.identifier({text:"nonEmpty"}),normalize:n.identifier({text:"normalize"}),notBytes:n.identifier({text:"notBytes"}),notEntries:n.identifier({text:"notEntries"}),notGraphemes:n.identifier({text:"notGraphemes"}),notLength:n.identifier({text:"notLength"}),notSize:n.identifier({text:"notSize"}),notValue:n.identifier({text:"notValue"}),notValues:n.identifier({text:"notValues"}),notWords:n.identifier({text:"notWords"}),octal:n.identifier({text:"octal"}),parseJson:n.identifier({text:"parseJson"}),partialCheck:n.identifier({text:"partialCheck"}),rawCheck:n.identifier({text:"rawCheck"}),rawTransform:n.identifier({text:"rawTransform"}),readonly:n.identifier({text:"readonly"}),reduceItems:n.identifier({text:"reduceItems"}),regex:n.identifier({text:"regex"}),returns:n.identifier({text:"returns"}),rfcEmail:n.identifier({text:"rfcEmail"}),safeInteger:n.identifier({text:"safeInteger"}),size:n.identifier({text:"size"}),slug:n.identifier({text:"slug"}),someItem:n.identifier({text:"someItem"}),sortItems:n.identifier({text:"sortItems"}),startsWith:n.identifier({text:"startsWith"}),stringifyJson:n.identifier({text:"stringifyJson"}),title:n.identifier({text:"title"}),toLowerCase:n.identifier({text:"toLowerCase"}),toMaxValue:n.identifier({text:"toMaxValue"}),toMinValue:n.identifier({text:"toMinValue"}),toUpperCase:n.identifier({text:"toUpperCase"}),transform:n.identifier({text:"transform"}),trim:n.identifier({text:"trim"}),trimEnd:n.identifier({text:"trimEnd"}),trimStart:n.identifier({text:"trimStart"}),ulid:n.identifier({text:"ulid"}),url:n.identifier({text:"url"}),uuid:n.identifier({text:"uuid"}),value:n.identifier({text:"value"}),values:n.identifier({text:"values"}),words:n.identifier({text:"words"})},async:{argsAsync:n.identifier({text:"argsAsync"}),arrayAsync:n.identifier({text:"arrayAsync"}),awaitAsync:n.identifier({text:"awaitAsync"}),checkAsync:n.identifier({text:"checkAsync"}),checkItemsAsync:n.identifier({text:"checkItemsAsync"}),customAsync:n.identifier({text:"customAsync"}),exactOptionalAsync:n.identifier({text:"exactOptionalAsync"}),fallbackAsync:n.identifier({text:"fallbackAsync"}),forwardAsync:n.identifier({text:"forwardAsync"}),getDefaultsAsync:n.identifier({text:"getDefaultsAsync"}),getFallbacksAsync:n.identifier({text:"getFallbacksAsync"}),intersectAsync:n.identifier({text:"intersectAsync"}),lazyAsync:n.identifier({text:"lazyAsync"}),looseObjectAsync:n.identifier({text:"looseObjectAsync"}),looseTupleAsync:n.identifier({text:"looseTupleAsync"}),mapAsync:n.identifier({text:"mapAsync"}),nonNullableAsync:n.identifier({text:"nonNullableAsync"}),nonNullishAsync:n.identifier({text:"nonNullishAsync"}),nonOptionalAsync:n.identifier({text:"nonOptionalAsync"}),nullableAsync:n.identifier({text:"nullableAsync"}),nullishAsync:n.identifier({text:"nullishAsync"}),objectAsync:n.identifier({text:"objectAsync"}),objectWithRestAsync:n.identifier({text:"objectWithRestAsync"}),optionalAsync:n.identifier({text:"optionalAsync"}),parseAsync:n.identifier({text:"parseAsync"}),parserAsync:n.identifier({text:"parserAsync"}),partialAsync:n.identifier({text:"partialAsync"}),partialCheckAsync:n.identifier({text:"partialCheckAsync"}),pipeAsync:n.identifier({text:"pipeAsync"}),rawCheckAsync:n.identifier({text:"rawCheckAsync"}),rawTransformAsync:n.identifier({text:"rawTransformAsync"}),recordAsync:n.identifier({text:"recordAsync"}),requiredAsync:n.identifier({text:"requiredAsync"}),returnsAsync:n.identifier({text:"returnsAsync"}),safeParseAsync:n.identifier({text:"safeParseAsync"}),safeParserAsync:n.identifier({text:"safeParserAsync"}),setAsync:n.identifier({text:"setAsync"}),strictObjectAsync:n.identifier({text:"strictObjectAsync"}),strictTupleAsync:n.identifier({text:"strictTupleAsync"}),transformAsync:n.identifier({text:"transformAsync"}),tupleAsync:n.identifier({text:"tupleAsync"}),tupleWithRestAsync:n.identifier({text:"tupleWithRestAsync"}),undefinedableAsync:n.identifier({text:"undefinedableAsync"}),unionAsync:n.identifier({text:"unionAsync"}),variantAsync:n.identifier({text:"variantAsync"})},methods:{assert:n.identifier({text:"assert"}),config:n.identifier({text:"config"}),fallback:n.identifier({text:"fallback"}),flatten:n.identifier({text:"flatten"}),forward:n.identifier({text:"forward"}),getDefault:n.identifier({text:"getDefault"}),getDefaults:n.identifier({text:"getDefaults"}),getDescription:n.identifier({text:"getDescription"}),getFallback:n.identifier({text:"getFallback"}),getFallbacks:n.identifier({text:"getFallbacks"}),getMetadata:n.identifier({text:"getMetadata"}),getTitle:n.identifier({text:"getTitle"}),is:n.identifier({text:"is"}),keyof:n.identifier({text:"keyof"}),message:n.identifier({text:"message"}),omit:n.identifier({text:"omit"}),parse:n.identifier({text:"parse"}),parser:n.identifier({text:"parser"}),partial:n.identifier({text:"partial"}),pick:n.identifier({text:"pick"}),pipe:n.identifier({text:"pipe"}),required:n.identifier({text:"required"}),safeParse:n.identifier({text:"safeParse"}),safeParser:n.identifier({text:"safeParser"}),summarize:n.identifier({text:"summarize"}),unwrap:n.identifier({text:"unwrap"})},schemas:{any:n.identifier({text:"any"}),array:n.identifier({text:"array"}),bigInt:n.identifier({text:"bigint"}),blob:n.identifier({text:"blob"}),boolean:n.identifier({text:"boolean"}),custom:n.identifier({text:"custom"}),date:n.identifier({text:"date"}),enum:n.identifier({text:"enum"}),exactOptional:n.identifier({text:"exactOptional"}),file:n.identifier({text:"file"}),function:n.identifier({text:"function"}),instance:n.identifier({text:"instance"}),intersect:n.identifier({text:"intersect"}),lazy:n.identifier({text:"lazy"}),literal:n.identifier({text:"literal"}),looseObject:n.identifier({text:"looseObject"}),looseTuple:n.identifier({text:"looseTuple"}),map:n.identifier({text:"map"}),nan:n.identifier({text:"nan"}),never:n.identifier({text:"never"}),nonNullable:n.identifier({text:"nonNullable"}),nonNullish:n.identifier({text:"nonNullish"}),nonOptional:n.identifier({text:"nonOptional"}),null:n.identifier({text:"null"}),nullable:n.identifier({text:"nullable"}),nullish:n.identifier({text:"nullish"}),number:n.identifier({text:"number"}),object:n.identifier({text:"object"}),objectWithRest:n.identifier({text:"objectWithRest"}),optional:n.identifier({text:"optional"}),picklist:n.identifier({text:"picklist"}),promise:n.identifier({text:"promise"}),record:n.identifier({text:"record"}),set:n.identifier({text:"set"}),strictObject:n.identifier({text:"strictObject"}),strictTuple:n.identifier({text:"strictTuple"}),string:n.identifier({text:"string"}),symbol:n.identifier({text:"symbol"}),tuple:n.identifier({text:"tuple"}),tupleWithRest:n.identifier({text:"tupleWithRest"}),undefined:n.identifier({text:"undefined"}),undefinedable:n.identifier({text:"undefinedable"}),union:n.identifier({text:"union"}),unknown:n.identifier({text:"unknown"}),variant:n.identifier({text:"variant"}),void:n.identifier({text:"void"})},types:{GenericSchema:n.identifier({text:"GenericSchema"})}};var Cs=class{constructor(t){this.meta=t;}createRequestValidator({file:t,operation:r,plugin:s}){let o=s.gen.selectSymbolFirst(s.api.getSelector("data",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i=t.ensureSymbol({name:"v",selector:s.api.getSelector("import","valibot")});t.addImport({from:"valibot",namespaceImport:i.placeholder});let p="data";return n.arrowFunction({async:true,parameters:[{name:p}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:i.placeholder,name:T.async.parseAsync}),parameters:[n.identifier({text:o.placeholder}),n.identifier({text:p})]})})})]})}createResponseValidator({file:t,operation:r,plugin:s}){let o=s.gen.selectSymbolFirst(s.api.getSelector("responses",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i=t.ensureSymbol({name:"v",selector:s.api.getSelector("import","valibot")});t.addImport({from:"valibot",namespaceImport:i.placeholder});let p="data";return n.arrowFunction({async:true,parameters:[{name:p}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:i.placeholder,name:T.async.parseAsync}),parameters:[n.identifier({text:o.placeholder}),n.identifier({text:p})]})})})]})}getSelector(...t){return [this.meta.name,...t]}};var Ns={int16:{max:32767,maxError:"Invalid value: Expected int16 to be <= 2^15-1",min:-32768,minError:"Invalid value: Expected int16 to be >= -2^15",needsBigInt:false},int32:{max:2147483647,maxError:"Invalid value: Expected int32 to be <= 2^31-1",min:-2147483648,minError:"Invalid value: Expected int32 to be >= -2^31",needsBigInt:false},int64:{max:"9223372036854775807",maxError:"Invalid value: Expected int64 to be <= 2^63-1",min:"-9223372036854775808",minError:"Invalid value: Expected int64 to be >= -2^63",needsBigInt:true},int8:{max:127,maxError:"Invalid value: Expected int8 to be <= 2^7-1",min:-128,minError:"Invalid value: Expected int8 to be >= -2^7",needsBigInt:false},uint16:{max:65535,maxError:"Invalid value: Expected uint16 to be <= 2^16-1",min:0,minError:"Invalid value: Expected uint16 to be >= 0",needsBigInt:false},uint32:{max:4294967295,maxError:"Invalid value: Expected uint32 to be <= 2^32-1",min:0,minError:"Invalid value: Expected uint32 to be >= 0",needsBigInt:false},uint64:{max:"18446744073709551615",maxError:"Invalid value: Expected uint64 to be <= 2^64-1",min:"0",minError:"Invalid value: Expected uint64 to be >= 0",needsBigInt:true},uint8:{max:255,maxError:"Invalid value: Expected uint8 to be <= 2^8-1",min:0,minError:"Invalid value: Expected uint8 to be >= 0",needsBigInt:false}},jo=e=>e!==void 0&&e in Ns,sc=e=>jo(e)&&Ns[e].needsBigInt,Tr=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r};var oc=({operation:e,plugin:t,state:r})=>{if(t.config.requests.enabled){let s=new Set,o={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let a={},c=[];for(let m in e.parameters.header){let l=e.parameters.header[m];a[l.name]=l.schema,l.required&&(c.push(l.name),s.add("headers"));}Object.keys(a).length&&(o.properties.headers={properties:a,required:c,type:"object"});}if(e.parameters.path){let a={},c=[];for(let m in e.parameters.path){let l=e.parameters.path[m];a[l.name]=l.schema,l.required&&(c.push(l.name),s.add("path"));}Object.keys(a).length&&(o.properties.path={properties:a,required:c,type:"object"});}if(e.parameters.query){let a={},c=[];for(let m in e.parameters.query){let l=e.parameters.query[m];a[l.name]=l.schema,l.required&&(c.push(l.name),s.add("query"));}Object.keys(a).length&&(o.properties.query={properties:a,required:c,type:"object"});}}e.body&&(o.properties.body=e.body.schema,e.body.required&&s.add("body")),o.required=[...s];let p=t.gen.ensureFile(t.output).addSymbol({name:O({config:t.config.requests,name:e.id}),selector:t.api.getSelector("data",e.id)});ce({$ref:`#/valibot-data/${e.id}`,plugin:t,schema:o,state:r,symbol:p});}if(t.config.responses.enabled&&e.responses){let{response:s}=Me(e);if(s){let i=t.gen.ensureFile(t.output).addSymbol({name:O({config:t.config.responses,name:e.id}),selector:t.api.getSelector("responses",e.id)});ce({$ref:`#/valibot-response/${e.id}`,plugin:t,schema:s,state:r,symbol:i});}}};var ic=({operation:e,plugin:t,state:r})=>{if(t.config.webhooks.enabled){let s=new Set,o={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let m={},l=[];for(let f in e.parameters.header){let d=e.parameters.header[f];m[d.name]=d.schema,d.required&&(l.push(d.name),s.add("headers"));}Object.keys(m).length&&(o.properties.headers={properties:m,required:l,type:"object"});}if(e.parameters.path){let m={},l=[];for(let f in e.parameters.path){let d=e.parameters.path[f];m[d.name]=d.schema,d.required&&(l.push(d.name),s.add("path"));}Object.keys(m).length&&(o.properties.path={properties:m,required:l,type:"object"});}if(e.parameters.query){let m={},l=[];for(let f in e.parameters.query){let d=e.parameters.query[f];m[d.name]=d.schema,d.required&&(l.push(d.name),s.add("query"));}Object.keys(m).length&&(o.properties.query={properties:m,required:l,type:"object"});}}e.body&&(o.properties.body=e.body.schema,e.body.required&&s.add("body")),o.required=[...s];let i=t.api.getSelector("webhook-request",e.id),p=O({config:t.config.webhooks,name:e.id}),c=t.gen.ensureFile(t.output).addSymbol({name:p,selector:i});ce({$ref:`#/valibot-webhook/${e.id}`,plugin:t,schema:o,state:r,symbol:c});}};var Ce=({pipes:e,plugin:t})=>{if(e.length===1)return e[0];let r=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","valibot"));return n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.methods.pipe}),parameters:e})},Kd=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot")),o=n.propertyAccessExpression({expression:s.placeholder,name:T.schemas.array}),i=[];if(t.items){t=Q({schema:t});let p=t.items.map(a=>{let c=ce({plugin:e,schema:a,state:r});return Ce({pipes:c,plugin:e})});if(p.length===1){let a=n.callExpression({functionName:o,parameters:p});i.push(a);}else {t.logicalOperator;let a=n.callExpression({functionName:o,parameters:[Xr({plugin:e})]});i.push(a);}}else {let p=n.callExpression({functionName:o,parameters:[Xr({plugin:e})]});i.push(p);}if(t.minItems===t.maxItems&&t.minItems!==void 0){let p=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:T.actions.length}),parameters:[n.valueToExpression({value:t.minItems})]});i.push(p);}else {if(t.minItems!==void 0){let p=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:T.actions.minLength}),parameters:[n.valueToExpression({value:t.minItems})]});i.push(p);}if(t.maxItems!==void 0){let p=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:T.actions.maxLength}),parameters:[n.valueToExpression({value:t.maxItems})]});i.push(p);}}return Ce({pipes:i,plugin:e})},Wd=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return typeof t.const=="boolean"?n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.schemas.literal}),parameters:[n.ots.boolean(t.const)]}):n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.schemas.boolean})})},zd=({plugin:e,schema:t})=>{let r=[],s=false;for(let p of t.items??[])p.type==="string"&&typeof p.const=="string"?r.push(n.stringLiteral({text:p.const})):(p.type==="null"||p.const===null)&&(s=true);if(!r.length)return Xr({plugin:e});let o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot")),i=n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:T.schemas.picklist}),parameters:[n.arrayLiteralExpression({elements:r,multiLine:false})]});return s&&(i=n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:T.schemas.nullable}),parameters:[i]})),i},_d=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:T.schemas.never})})},Qd=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:T.schemas.null})})},ac=({plugin:e,schema:t})=>{let r=t.format,s=t.type==="integer",o=sc(r),i=jo(r)?Ns[r]:null,p=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(t.const!==void 0&&t.const!==null){let c=t.const,m;if(typeof c=="number"&&!r)m=n.ots.number(c);else if(typeof c=="number"&&r)o?m=n.callExpression({functionName:"BigInt",parameters:[n.ots.string(c.toString())]}):m=n.ots.number(c);else if(typeof c=="string"&&o){let l=c.endsWith("n")?c.slice(0,-1):c;m=n.callExpression({functionName:"BigInt",parameters:[n.ots.string(l)]});}else if(typeof c=="bigint"){let l=c.toString(),f=l.endsWith("n")?l.slice(0,-1):l;m=n.callExpression({functionName:"BigInt",parameters:[n.ots.string(f)]});}else m=n.valueToExpression({value:c});return n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.schemas.literal}),parameters:[m]})}let a=[];if(o){let c=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.schemas.union}),parameters:[n.arrayLiteralExpression({elements:[n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.schemas.number})}),n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.schemas.string})}),n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.schemas.bigInt})})],multiLine:false})]});a.push(c);let m=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.transform}),parameters:[n.arrowFunction({parameters:[{name:"x"}],statements:n.callExpression({functionName:"BigInt",parameters:[n.identifier({text:"x"})]})})]});a.push(m);}else {let c=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.schemas.number})});a.push(c);}if(!o&&s){let c=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.integer})});a.push(c);}if(i){let c=i.min,m=i.max,l=i.minError,f=i.maxError,d=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.minValue}),parameters:[o?n.callExpression({functionName:"BigInt",parameters:[n.ots.string(c.toString())]}):n.ots.number(c),n.ots.string(l)]});a.push(d);let u=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.maxValue}),parameters:[o?n.callExpression({functionName:"BigInt",parameters:[n.ots.string(m.toString())]}):n.ots.number(m),n.ots.string(f)]});a.push(u);}if(t.exclusiveMinimum!==void 0){let c=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.gtValue}),parameters:[Tr({isBigInt:o,value:t.exclusiveMinimum})]});a.push(c);}else if(t.minimum!==void 0){let c=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.minValue}),parameters:[Tr({isBigInt:o,value:t.minimum})]});a.push(c);}if(t.exclusiveMaximum!==void 0){let c=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.ltValue}),parameters:[Tr({isBigInt:o,value:t.exclusiveMaximum})]});a.push(c);}else if(t.maximum!==void 0){let c=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:T.actions.maxValue}),parameters:[Tr({isBigInt:o,value:t.maximum})]});a.push(c);}return Ce({pipes:a,plugin:e})},Hd=({plugin:e,schema:t,state:r})=>{let s=[],o=t.required??[];for(let a in t.properties){let c=t.properties[a],m=o.includes(a),l=ce({optional:!m,plugin:e,schema:c,state:r});ee.lastIndex=0;let f;ee.test(a)?f=a.startsWith("-")?S__default.default.factory.createStringLiteral(a):S__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),s.push(n.propertyAssignment({initializer:Ce({pipes:l,plugin:e}),name:f}));}let i=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(s).length){let a=ce({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:n.callExpression({functionName:n.propertyAccessExpression({expression:i.placeholder,name:T.schemas.record}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:i.placeholder,name:T.schemas.string}),parameters:[]}),Ce({pipes:a,plugin:e})]})}}let p=n.callExpression({functionName:n.propertyAccessExpression({expression:i.placeholder,name:T.schemas.object}),parameters:[S__default.default.factory.createObjectLiteralExpression(s,true)]});return {anyType:T.types.GenericSchema.text,expression:p}},Zd=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(typeof t.const=="string")return n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.schemas.literal}),parameters:[n.ots.string(t.const)]});let s=[],o=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.schemas.string})});if(s.push(o),t.format)switch(t.format){case "date":s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.isoDate})}));break;case "date-time":s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.isoTimestamp})}));break;case "ipv4":case "ipv6":s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.ip})}));break;case "uri":s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.url})}));break;case "email":case "time":case "uuid":s.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:n.identifier({text:t.format})})}));break}if(t.minLength===t.maxLength&&t.minLength!==void 0){let i=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.length}),parameters:[n.valueToExpression({value:t.minLength})]});s.push(i);}else {if(t.minLength!==void 0){let i=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.minLength}),parameters:[n.valueToExpression({value:t.minLength})]});s.push(i);}if(t.maxLength!==void 0){let i=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.maxLength}),parameters:[n.valueToExpression({value:t.maxLength})]});s.push(i);}}if(t.pattern){let i=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:T.actions.regex}),parameters:[n.regularExpressionLiteral({text:t.pattern})]});s.push(i);}return Ce({pipes:s,plugin:e})},Ud=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(t.const&&Array.isArray(t.const)){let o=t.const.map(p=>n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:T.schemas.literal}),parameters:[n.valueToExpression({value:p})]}));return n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:T.schemas.tuple}),parameters:[n.arrayLiteralExpression({elements:o})]})}if(t.items){let o=t.items.map(p=>{let a=ce({plugin:e,schema:p,state:r});return Ce({pipes:a,plugin:e})});return n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:T.schemas.tuple}),parameters:[n.arrayLiteralExpression({elements:o})]})}return Xr({plugin:e})},Xd=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:T.schemas.undefined})})},Xr=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:T.schemas.unknown})})},Gd=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:T.schemas.void})})},pc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:Kd({plugin:e,schema:t,state:r})};case "boolean":return {expression:Wd({plugin:e,schema:t})};case "enum":return {expression:zd({plugin:e,schema:t})};case "integer":case "number":return {expression:ac({plugin:e,schema:t})};case "never":return {expression:_d({plugin:e})};case "null":return {expression:Qd({plugin:e})};case "object":return Hd({plugin:e,schema:t,state:r});case "string":return t.format==="int64"||t.format==="uint64"?{expression:ac({plugin:e,schema:t})}:{expression:Zd({plugin:e,schema:t})};case "tuple":return {expression:Ud({plugin:e,schema:t,state:r})};case "undefined":return {expression:Xd({plugin:e})};case "unknown":return {expression:Xr({plugin:e})};case "void":return {expression:Gd({plugin:e})}}},ce=({$ref:e,optional:t,plugin:r,schema:s,state:o,symbol:i})=>{let p=r.gen.ensureFile(r.output),a,c=[];if(e&&(o.circularReferenceTracker.add(e),!i)){let l=r.api.getSelector("ref",e);r.gen.selectSymbolFirst(l)||(i=p.ensureSymbol({name:O({config:{case:o.nameCase,name:o.nameTransformer},name:M(e)}),selector:l}));}let m=r.gen.selectSymbolFirstOrThrow(r.api.getSelector("import","valibot"));if(s.$ref){let l=o.circularReferenceTracker.has(s.$ref),f=r.api.getSelector("ref",s.$ref),d=r.gen.selectSymbolFirst(f);if(!d){let u=r.context.resolveIrRef(s.$ref),h=ce({$ref:s.$ref,plugin:r,schema:u,state:o});c.push(...h),d=r.gen.selectSymbolFirst(f);}if(d){let u=n.identifier({text:d.placeholder});if(l){let h=n.callExpression({functionName:n.propertyAccessExpression({expression:m.placeholder,name:T.schemas.lazy}),parameters:[n.arrowFunction({statements:[n.returnStatement({expression:u})]})]});c.push(h),o.hasCircularReference=true;}else c.push(u);}}else if(s.type){let l=pc({plugin:r,schema:s,state:o});if(a=l.anyType,c.push(l.expression),r.config.metadata&&s.description){let f=n.callExpression({functionName:n.propertyAccessExpression({expression:m.placeholder,name:T.actions.metadata}),parameters:[n.objectExpression({obj:[{key:"description",value:n.stringLiteral({text:s.description})}]})]});c.push(f);}}else if(s.items)if(s=Q({schema:s}),s.items){let l=s.items.map(f=>{let d=ce({plugin:r,schema:f,state:o});return Ce({pipes:d,plugin:r})});if(s.logicalOperator==="and"){let f=n.callExpression({functionName:n.propertyAccessExpression({expression:m.placeholder,name:T.schemas.intersect}),parameters:[n.arrayLiteralExpression({elements:l})]});c.push(f);}else {let f=n.callExpression({functionName:n.propertyAccessExpression({expression:m.placeholder,name:T.schemas.union}),parameters:[n.arrayLiteralExpression({elements:l})]});c.push(f);}}else {let l=ce({plugin:r,schema:s,state:o});c.push(...l);}else {let l=pc({plugin:r,schema:{type:"unknown"},state:o});a=l.anyType,c.push(l.expression);}if(e&&o.circularReferenceTracker.delete(e),c.length&&s.accessScope==="read"){let l=n.callExpression({functionName:n.propertyAccessExpression({expression:m.placeholder,name:T.actions.readonly})});c.push(l);}if(c.length){let l;if(s.default!==void 0){let f=s.type==="integer"&&s.format==="int64";l=Tr({isBigInt:f,value:s.default}),l&&(c=[n.callExpression({functionName:n.propertyAccessExpression({expression:m.placeholder,name:T.schemas.optional}),parameters:[Ce({pipes:c,plugin:r}),l]})]);}t&&!l&&(c=[n.callExpression({functionName:n.propertyAccessExpression({expression:m.placeholder,name:T.schemas.optional}),parameters:[Ce({pipes:c,plugin:r})]})]);}if(i){let l=n.constVariable({comment:r.config.comments?ue({schema:s}):void 0,exportConst:true,expression:Ce({pipes:c,plugin:r}),name:i.placeholder,typeName:o.hasCircularReference?n.propertyAccessExpression({expression:m.placeholder,name:a||T.types.GenericSchema.text}):void 0});return i.update({value:l}),[]}return c},cc=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r=t.ensureSymbol({name:"v",selector:e.api.getSelector("import","valibot")});t.addImport({from:"valibot",namespaceImport:r.placeholder}),e.forEach("operation","parameter","requestBody","schema","webhook",s=>{let o={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};switch(s.type){case "operation":oc({operation:s.operation,plugin:e,state:o});break;case "parameter":ce({$ref:s.$ref,plugin:e,schema:s.parameter.schema,state:o});break;case "requestBody":ce({$ref:s.$ref,plugin:e,schema:s.requestBody.schema,state:o});break;case "schema":ce({$ref:s.$ref,plugin:e,schema:s.schema,state:o});break;case "webhook":ic({operation:s.operation,plugin:e,state:o});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var js={api:new Cs({name:"valibot"}),config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:cc,name:"valibot",output:"valibot",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Data"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Response"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}WebhookRequest"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.webhooks});},tags:["validator"]};var y={ZodMiniOptional:n.identifier({text:"ZodMiniOptional"}),ZodOptional:n.identifier({text:"ZodOptional"}),_default:n.identifier({text:"_default"}),and:n.identifier({text:"and"}),array:n.identifier({text:"array"}),bigint:n.identifier({text:"bigint"}),boolean:n.identifier({text:"boolean"}),check:n.identifier({text:"check"}),coerce:n.identifier({text:"coerce"}),date:n.identifier({text:"date"}),datetime:n.identifier({text:"datetime"}),default:n.identifier({text:"default"}),describe:n.identifier({text:"describe"}),email:n.identifier({text:"email"}),enum:n.identifier({text:"enum"}),globalRegistry:n.identifier({text:"globalRegistry"}),gt:n.identifier({text:"gt"}),gte:n.identifier({text:"gte"}),infer:n.identifier({text:"infer"}),int:n.identifier({text:"int"}),intersection:n.identifier({text:"intersection"}),ip:n.identifier({text:"ip"}),ipv4:n.identifier({text:"ipv4"}),ipv6:n.identifier({text:"ipv6"}),iso:n.identifier({text:"iso"}),lazy:n.identifier({text:"lazy"}),length:n.identifier({text:"length"}),literal:n.identifier({text:"literal"}),lt:n.identifier({text:"lt"}),lte:n.identifier({text:"lte"}),max:n.identifier({text:"max"}),maxLength:n.identifier({text:"maxLength"}),min:n.identifier({text:"min"}),minLength:n.identifier({text:"minLength"}),never:n.identifier({text:"never"}),null:n.identifier({text:"null"}),nullable:n.identifier({text:"nullable"}),number:n.identifier({text:"number"}),object:n.identifier({text:"object"}),optional:n.identifier({text:"optional"}),parseAsync:n.identifier({text:"parseAsync"}),readonly:n.identifier({text:"readonly"}),record:n.identifier({text:"record"}),regex:n.identifier({text:"regex"}),register:n.identifier({text:"register"}),string:n.identifier({text:"string"}),time:n.identifier({text:"time"}),tuple:n.identifier({text:"tuple"}),undefined:n.identifier({text:"undefined"}),union:n.identifier({text:"union"}),unknown:n.identifier({text:"unknown"}),url:n.identifier({text:"url"}),uuid:n.identifier({text:"uuid"}),void:n.identifier({text:"void"})};var ks=class{constructor(t){this.meta=t;}createRequestValidator({file:t,operation:r,plugin:s}){let o=s.gen.selectSymbolFirst(s.api.getSelector("data",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i="data";return n.arrowFunction({async:true,parameters:[{name:i}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.parseAsync}),parameters:[n.identifier({text:i})]})})})]})}createResponseValidator({file:t,operation:r,plugin:s}){let o=s.gen.selectSymbolFirst(s.api.getSelector("responses",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i="data";return n.arrowFunction({async:true,parameters:[{name:i}],statements:[n.returnStatement({expression:n.awaitExpression({expression:n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.parseAsync}),parameters:[n.identifier({text:i})]})})})]})}getSelector(...t){return [this.meta.name,...t]}};var Ne=({plugin:e,schema:t,symbol:r,typeInferSymbol:s,zodSchema:o})=>{let i=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),p=n.constVariable({comment:e.config.comments?ue({schema:t}):void 0,exportConst:true,expression:o.expression,name:r.placeholder,typeName:o.typeName?n.propertyAccessExpression({expression:i.placeholder,name:o.typeName}):void 0});if(r.update({value:p}),s){let a=n.typeAliasDeclaration({exportType:true,name:s.placeholder,type:n.typeReferenceNode({typeArguments:[n.typeOfExpression({text:r.placeholder})],typeName:n.propertyAccessExpression({expression:i.placeholder,name:y.infer})})});s.update({value:a});}};var Rr=({plugin:e})=>{let t=e.package.getVersion("zod");if(t&&e.package.satisfies(t,"<4.0.0"))switch(e.config.compatibilityVersion){case 3:default:return "zod";case 4:return "zod/v4";case "mini":return "zod/v4-mini"}switch(e.config.compatibilityVersion){case 3:return "zod/v3";case 4:default:return "zod";case "mini":return "zod/mini"}};var Ir=({getZodSchema:e,operation:t,plugin:r})=>{let s=r.gen.ensureFile(r.output);if(r.config.requests.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(t.parameters){if(t.parameters.header){let m={},l=[];for(let f in t.parameters.header){let d=t.parameters.header[f];m[d.name]=d.schema,d.required&&(l.push(d.name),o.add("headers"));}Object.keys(m).length&&(i.properties.headers={properties:m,required:l,type:"object"});}if(t.parameters.path){let m={},l=[];for(let f in t.parameters.path){let d=t.parameters.path[f];m[d.name]=d.schema,d.required&&(l.push(d.name),o.add("path"));}Object.keys(m).length&&(i.properties.path={properties:m,required:l,type:"object"});}if(t.parameters.query){let m={},l=[];for(let f in t.parameters.query){let d=t.parameters.query[f];m[d.name]=d.schema,d.required&&(l.push(d.name),o.add("query"));}Object.keys(m).length&&(i.properties.query={properties:m,required:l,type:"object"});}}t.body&&(i.properties.body=t.body.schema,t.body.required&&o.add("body")),i.required=[...o];let p=e(i),a=s.addSymbol({name:O({config:r.config.requests,name:t.id}),selector:r.api.getSelector("data",t.id)}),c=r.config.requests.types.infer.enabled?s.addSymbol({name:O({config:r.config.requests.types.infer,name:t.id}),selector:r.api.getSelector("type-infer-data",t.id)}):void 0;Ne({plugin:r,schema:i,symbol:a,typeInferSymbol:c,zodSchema:p});}if(r.config.responses.enabled&&t.responses){let{response:o}=Me(t);if(o){let i=e(o),p=s.addSymbol({name:O({config:r.config.responses,name:t.id}),selector:r.api.getSelector("responses",t.id)}),a=r.config.responses.types.infer.enabled?s.addSymbol({name:O({config:r.config.responses.types.infer,name:t.id}),selector:r.api.getSelector("type-infer-responses",t.id)}):void 0;Ne({plugin:r,schema:o,symbol:p,typeInferSymbol:a,zodSchema:i});}}};var Pr=({getZodSchema:e,operation:t,plugin:r})=>{let s=r.gen.ensureFile(r.output);if(r.config.webhooks.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(t.parameters){if(t.parameters.header){let m={},l=[];for(let f in t.parameters.header){let d=t.parameters.header[f];m[d.name]=d.schema,d.required&&(l.push(d.name),o.add("headers"));}Object.keys(m).length&&(i.properties.headers={properties:m,required:l,type:"object"});}if(t.parameters.path){let m={},l=[];for(let f in t.parameters.path){let d=t.parameters.path[f];m[d.name]=d.schema,d.required&&(l.push(d.name),o.add("path"));}Object.keys(m).length&&(i.properties.path={properties:m,required:l,type:"object"});}if(t.parameters.query){let m={},l=[];for(let f in t.parameters.query){let d=t.parameters.query[f];m[d.name]=d.schema,d.required&&(l.push(d.name),o.add("query"));}Object.keys(m).length&&(i.properties.query={properties:m,required:l,type:"object"});}}t.body&&(i.properties.body=t.body.schema,t.body.required&&o.add("body")),i.required=[...o];let p=e(i),a=s.addSymbol({name:O({config:r.config.webhooks,name:t.id}),selector:r.api.getSelector("webhook-request",t.id)}),c=r.config.webhooks.types.infer.enabled?s.addSymbol({name:O({config:r.config.webhooks.types.infer,name:t.id}),selector:r.api.getSelector("type-infer-webhook-request",t.id)}):void 0;Ne({plugin:r,schema:i,symbol:a,typeInferSymbol:c,zodSchema:p});}};var Yd=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o={},i=n.propertyAccessExpression({expression:s.placeholder,name:y.array});if(!t.items)o.expression=n.callExpression({functionName:i,parameters:[wo({plugin:e}).expression]});else {t=Q({schema:t});let a=t.items.map(c=>{let m=ft({plugin:e,schema:c,state:r});return m.hasCircularReference&&(o.hasCircularReference=true),m.expression});a.length===1?o.expression=n.callExpression({functionName:i,parameters:a}):(t.logicalOperator,o.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.array}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.union}),parameters:[n.arrayLiteralExpression({elements:a})]})]}));}let p=[];return t.minItems===t.maxItems&&t.minItems!==void 0?p.push(n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.length}),parameters:[n.valueToExpression({value:t.minItems})]})):(t.minItems!==void 0&&p.push(n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.minLength}),parameters:[n.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&p.push(n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.maxLength}),parameters:[n.valueToExpression({value:t.maxItems})]}))),p.length&&(o.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:o.expression,name:y.check}),parameters:p})),o},eu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),s={};return typeof t.const=="boolean"?(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.literal}),parameters:[n.ots.boolean(t.const)]}),s):(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.boolean})}),s)},tu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),s={},o=[],i=false;for(let p of t.items??[])p.type==="string"&&typeof p.const=="string"?o.push(n.stringLiteral({text:p.const})):(p.type==="null"||p.const===null)&&(i=true);return o.length?(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.enum}),parameters:[n.arrayLiteralExpression({elements:o,multiLine:false})]}),i&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.nullable}),parameters:[s.expression]})),s):wo({plugin:e})},ru=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.never})}),r},nu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.null})}),r},Gr=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r},su=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),s={},o=t.type==="integer"&&t.format==="int64";if(typeof t.const=="number")return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.literal}),parameters:[n.ots.number(t.const)]}),s;s.expression=n.callExpression({functionName:o?n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:r.placeholder,name:y.coerce}),name:y.bigint}):n.propertyAccessExpression({expression:r.placeholder,name:y.number})}),!o&&t.type==="integer"&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.int})}));let i=[];return t.exclusiveMinimum!==void 0?i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.gt}),parameters:[Gr({isBigInt:o,value:t.exclusiveMinimum})]})):t.minimum!==void 0&&i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.gte}),parameters:[Gr({isBigInt:o,value:t.minimum})]})),t.exclusiveMaximum!==void 0?i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.lt}),parameters:[Gr({isBigInt:o,value:t.exclusiveMaximum})]})):t.maximum!==void 0&&i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.lte}),parameters:[Gr({isBigInt:o,value:t.maximum})]})),i.length&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:y.check}),parameters:i})),s},ou=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o={},i=[],p=t.required??[];for(let a in t.properties){let c=t.properties[a],m=p.includes(a),l=ft({optional:!m,plugin:e,schema:c,state:r});l.hasCircularReference&&(o.hasCircularReference=true),ee.lastIndex=0;let f;ee.test(a)?f=a.startsWith("-")?S__default.default.factory.createStringLiteral(a):S__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),l.hasCircularReference?i.push(n.getAccessorDeclaration({name:f,returnType:l.typeName?n.propertyAccessExpression({expression:s.placeholder,name:l.typeName}):void 0,statements:[n.returnStatement({expression:l.expression})]})):i.push(n.propertyAssignment({initializer:l.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let a=ft({plugin:e,schema:t.additionalProperties,state:r});return o.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.record}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.string}),parameters:[]}),a.expression]}),a.hasCircularReference&&(o.hasCircularReference=true),o}return o.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.object}),parameters:[S__default.default.factory.createObjectLiteralExpression(i,true)]}),o},iu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),s={};if(typeof t.const=="string")return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.literal}),parameters:[n.ots.string(t.const)]}),s;s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.string})});let o=[];if(e.config.dates.offset&&o.push({key:"offset",value:true}),e.config.dates.local&&o.push({key:"local",value:true}),t.format)switch(t.format){case "date":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:r.placeholder,name:y.iso}),name:y.date})});break;case "date-time":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:r.placeholder,name:y.iso}),name:y.datetime}),parameters:o.length>0?[n.objectExpression({obj:o})]:[]});break;case "email":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.email})});break;case "ipv4":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.ipv4})});break;case "ipv6":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.ipv6})});break;case "time":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:r.placeholder,name:y.iso}),name:y.time})});break;case "uri":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.url})});break;case "uuid":s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.uuid})});break}let i=[];return t.minLength===t.maxLength&&t.minLength!==void 0?i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.length}),parameters:[n.valueToExpression({value:t.minLength})]})):(t.minLength!==void 0&&i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.minLength}),parameters:[n.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.maxLength}),parameters:[n.valueToExpression({value:t.maxLength})]}))),t.pattern&&i.push(n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.regex}),parameters:[n.regularExpressionLiteral({text:t.pattern})]})),i.length&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:y.check}),parameters:i})),s},au=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o={};if(t.const&&Array.isArray(t.const)){let p=t.const.map(a=>n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.literal}),parameters:[n.valueToExpression({value:a})]}));return o.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.tuple}),parameters:[n.arrayLiteralExpression({elements:p})]}),o}let i=[];for(let p of t.items??[]){let a=ft({plugin:e,schema:p,state:r});i.push(a.expression),a.hasCircularReference&&(o.hasCircularReference=true);}return o.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.tuple}),parameters:[n.arrayLiteralExpression({elements:i})]}),o},pu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.undefined})}),r},wo=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.unknown})}),r},cu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.void})}),r},mc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return Yd({plugin:e,schema:t,state:r});case "boolean":return eu({plugin:e,schema:t});case "enum":return tu({plugin:e,schema:t});case "integer":case "number":return su({plugin:e,schema:t});case "never":return ru({plugin:e});case "null":return nu({plugin:e});case "object":return ou({plugin:e,schema:t,state:r});case "string":return iu({plugin:e,schema:t});case "tuple":return au({plugin:e,schema:t,state:r});case "undefined":return pu({plugin:e});case "unknown":return wo({plugin:e});case "void":return cu({plugin:e})}},ft=({optional:e,plugin:t,schema:r,state:s})=>{let o=t.gen.ensureFile(t.output),i={},p=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","zod"));if(r.$ref){let a=s.circularReferenceTracker.includes(r.$ref),c=s.currentReferenceTracker.includes(r.$ref);s.circularReferenceTracker.push(r.$ref),s.currentReferenceTracker.push(r.$ref);let m=t.api.getSelector("ref",r.$ref),l=t.gen.selectSymbolFirst(m);if(a)l||(l=o.ensureSymbol({selector:m})),c?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.lazy}),parameters:[n.arrowFunction({returnType:n.keywordTypeNode({keyword:"any"}),statements:[n.returnStatement({expression:n.identifier({text:l.placeholder})})]})]}):i.expression=n.identifier({text:l.placeholder}),i.hasCircularReference=true;else if(!l){let f=t.context.resolveIrRef(r.$ref);vs({id:r.$ref,plugin:t,schema:f,state:s});}if(!a){let f=t.gen.selectSymbolFirstOrThrow(m);i.expression=n.identifier({text:f.placeholder});}s.circularReferenceTracker.pop(),s.currentReferenceTracker.pop();}else if(r.type){let a=mc({plugin:t,schema:r,state:s});i.expression=a.expression,i.hasCircularReference=a.hasCircularReference,t.config.metadata&&r.description&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.register}),parameters:[n.propertyAccessExpression({expression:p.placeholder,name:y.globalRegistry}),n.objectExpression({obj:[{key:"description",value:n.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=Q({schema:r}),r.items){let a=r.items.map(c=>ft({plugin:t,schema:c,state:s}).expression);if(r.logicalOperator==="and"){let c=r.items[0];c.logicalOperator==="or"||c.type&&c.type!=="object"?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.intersection}),parameters:a}):(i.expression=a[0],a.slice(1).forEach(m=>{i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.intersection}),parameters:[i.expression,m]});}));}else i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.union}),parameters:[n.arrayLiteralExpression({elements:a})]});}else i=ft({plugin:t,schema:r,state:s});else {let a=mc({plugin:t,schema:{type:"unknown"},state:s});i.expression=a.expression;}if(i.expression&&(r.accessScope==="read"&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.readonly}),parameters:[i.expression]})),e&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.optional}),parameters:[i.expression]}),i.typeName=y.ZodMiniOptional),r.default!==void 0)){let a=r.type==="integer"&&r.format==="int64",c=Gr({isBigInt:a,value:r.default});c&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y._default}),parameters:[i.expression,c]}));}return i},vs=({id:e,plugin:t,schema:r,state:s})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...s,currentReferenceTracker:[e]},i=t.api.getSelector("ref",e),p=t.gen.selectSymbolFirst(i);if(p&&!p.headless)return;let a=ft({plugin:t,schema:r,state:o}),c=t.gen.ensureFile(t.output),m=M(e);p=c.ensureSymbol({selector:i}),p=p.update({name:O({config:t.config.definitions,name:m})});let l=t.config.definitions.types.infer.enabled?c.addSymbol({name:O({config:t.config.definitions.types.infer,name:m}),selector:t.api.getSelector("type-infer-ref",e)}):void 0;Ne({plugin:t,schema:r,symbol:p,typeInferSymbol:l,zodSchema:a});},lc=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r=t.ensureSymbol({name:"z",selector:e.api.getSelector("import","zod")});t.addImport({from:Rr({plugin:e}),namespaceImport:r.placeholder}),e.forEach("operation","parameter","requestBody","schema","webhook",s=>{switch(s.type){case "operation":Ir({getZodSchema:o=>ft({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:s.operation,plugin:e});break;case "parameter":vs({id:s.$ref,plugin:e,schema:s.parameter.schema});break;case "requestBody":vs({id:s.$ref,plugin:e,schema:s.requestBody.schema});break;case "schema":vs({id:s.$ref,plugin:e,schema:s.schema});break;case "webhook":Pr({getZodSchema:o=>ft({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:s.operation,plugin:e});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var mu=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o=n.propertyAccessExpression({expression:s.placeholder,name:y.array}),i;if(!t.items)i=n.callExpression({functionName:o,parameters:[$o({plugin:e})]});else {t=Q({schema:t});let p=t.items.map(a=>dt({plugin:e,schema:a,state:r}).expression);p.length===1?i=n.callExpression({functionName:o,parameters:p}):(t.logicalOperator,i=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.array}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.union}),parameters:[n.arrayLiteralExpression({elements:p})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?i=n.callExpression({functionName:n.propertyAccessExpression({expression:i,name:y.length}),parameters:[n.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(i=n.callExpression({functionName:n.propertyAccessExpression({expression:i,name:y.min}),parameters:[n.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(i=n.callExpression({functionName:n.propertyAccessExpression({expression:i,name:y.max}),parameters:[n.valueToExpression({value:t.maxItems})]}))),i},lu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return typeof t.const=="boolean"?n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.literal}),parameters:[n.ots.boolean(t.const)]}):n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.boolean})})},fu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),s=[],o=false;for(let p of t.items??[])p.type==="string"&&typeof p.const=="string"?s.push(n.stringLiteral({text:p.const})):(p.type==="null"||p.const===null)&&(o=true);if(!s.length)return $o({plugin:e});let i=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.enum}),parameters:[n.arrayLiteralExpression({elements:s,multiLine:false})]});return o&&(i=n.callExpression({functionName:n.propertyAccessExpression({expression:i,name:y.nullable})})),i},du=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.never})})},uu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.null})})},Jr=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r},yu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),s=t.type==="integer"&&t.format==="int64";if(typeof t.const=="number")return n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.literal}),parameters:[n.ots.number(t.const)]});let o=n.callExpression({functionName:s?n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:r.placeholder,name:y.coerce}),name:y.bigint}):n.propertyAccessExpression({expression:r.placeholder,name:y.number})});return !s&&t.type==="integer"&&(o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:y.int})})),t.exclusiveMinimum!==void 0?o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:y.gt}),parameters:[Jr({isBigInt:s,value:t.exclusiveMinimum})]}):t.minimum!==void 0&&(o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:y.gte}),parameters:[Jr({isBigInt:s,value:t.minimum})]})),t.exclusiveMaximum!==void 0?o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:y.lt}),parameters:[Jr({isBigInt:s,value:t.exclusiveMaximum})]}):t.maximum!==void 0&&(o=n.callExpression({functionName:n.propertyAccessExpression({expression:o,name:y.lte}),parameters:[Jr({isBigInt:s,value:t.maximum})]})),o},hu=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o=[],i=t.required??[];for(let a in t.properties){let c=t.properties[a],m=i.includes(a),l=dt({optional:!m,plugin:e,schema:c,state:r}).expression;ee.lastIndex=0;let f;ee.test(a)?f=a.startsWith("-")?S__default.default.factory.createStringLiteral(a):S__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),o.push(n.propertyAssignment({initializer:l,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let a=dt({plugin:e,schema:t.additionalProperties,state:r}).expression;return {anyType:"AnyZodObject",expression:n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.record}),parameters:[a]})}}return {anyType:"AnyZodObject",expression:n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.object}),parameters:[S__default.default.factory.createObjectLiteralExpression(o,true)]})}},gu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(typeof t.const=="string")return n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.literal}),parameters:[n.ots.string(t.const)]});let s=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.string})}),o=[];if(e.config.dates.offset&&o.push({key:"offset",value:true}),e.config.dates.local&&o.push({key:"local",value:true}),t.format)switch(t.format){case "date":s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.date})});break;case "date-time":s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.datetime}),parameters:o.length>0?[n.objectExpression({obj:o})]:[]});break;case "email":s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.email})});break;case "ipv4":case "ipv6":s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.ip})});break;case "time":s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.time})});break;case "uri":s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.url})});break;case "uuid":s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.length}),parameters:[n.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.min}),parameters:[n.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.max}),parameters:[n.valueToExpression({value:t.maxLength})]}))),t.pattern&&(s=n.callExpression({functionName:n.propertyAccessExpression({expression:s,name:y.regex}),parameters:[n.regularExpressionLiteral({text:t.pattern})]})),s},xu=({plugin:e,schema:t,state:r})=>{let s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(t.const&&Array.isArray(t.const)){let p=t.const.map(c=>n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.literal}),parameters:[n.valueToExpression({value:c})]}));return n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.tuple}),parameters:[n.arrayLiteralExpression({elements:p})]})}let o=[];for(let p of t.items??[])o.push(dt({plugin:e,schema:p,state:r}).expression);return n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.tuple}),parameters:[n.arrayLiteralExpression({elements:o})]})},bu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.undefined})})},$o=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.unknown})})},Su=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return n.callExpression({functionName:n.propertyAccessExpression({expression:t.placeholder,name:y.void})})},fc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:mu({plugin:e,schema:t,state:r})};case "boolean":return {expression:lu({plugin:e,schema:t})};case "enum":return {expression:fu({plugin:e,schema:t})};case "integer":case "number":return {expression:yu({plugin:e,schema:t})};case "never":return {expression:du({plugin:e})};case "null":return {expression:uu({plugin:e})};case "object":return hu({plugin:e,schema:t,state:r});case "string":return {expression:gu({plugin:e,schema:t})};case "tuple":return {expression:xu({plugin:e,schema:t,state:r})};case "undefined":return {expression:bu({plugin:e})};case "unknown":return {expression:$o({plugin:e})};case "void":return {expression:Su({plugin:e})}}},dt=({optional:e,plugin:t,schema:r,state:s})=>{let o=t.gen.ensureFile(t.output),i={},p=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","zod"));if(r.$ref){let a=s.circularReferenceTracker.includes(r.$ref);s.circularReferenceTracker.push(r.$ref),s.currentReferenceTracker.push(r.$ref);let c=t.api.getSelector("ref",r.$ref),m=t.gen.selectSymbolFirst(c);if(a)m||(m=o.ensureSymbol({selector:c})),i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.lazy}),parameters:[n.arrowFunction({statements:[n.returnStatement({expression:n.identifier({text:m.placeholder})})]})]}),s.hasCircularReference=true;else if(!m){let l=t.context.resolveIrRef(r.$ref);ws({id:r.$ref,plugin:t,schema:l,state:s});}if(!a){let l=t.gen.selectSymbolFirstOrThrow(c);i.expression=n.identifier({text:l.placeholder});}s.circularReferenceTracker.pop(),s.currentReferenceTracker.pop();}else if(r.type){let a=fc({plugin:t,schema:r,state:s});i.expression=a.expression,i.typeName=a.anyType,t.config.metadata&&r.description&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.describe}),parameters:[n.stringLiteral({text:r.description})]}));}else if(r.items)if(r=Q({schema:r}),r.items){let a=r.items.map(c=>dt({plugin:t,schema:c,state:s}).expression);if(r.logicalOperator==="and"){let c=r.items[0];c.logicalOperator==="or"||c.type&&c.type!=="object"?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.intersection}),parameters:a}):(i.expression=a[0],a.slice(1).forEach(m=>{i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.and}),parameters:[m]});}));}else i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.union}),parameters:[n.arrayLiteralExpression({elements:a})]});}else i=dt({plugin:t,schema:r,state:s});else {let a=fc({plugin:t,schema:{type:"unknown"},state:s});i.expression=a.expression,i.typeName=a.anyType;}if(i.expression&&(r.accessScope==="read"&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.readonly})})),e&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.optional})})),r.default!==void 0)){let a=r.type==="integer"&&r.format==="int64",c=Jr({isBigInt:a,value:r.default});c&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.default}),parameters:[c]}));}return s.hasCircularReference?i.typeName||(i.typeName="ZodTypeAny"):i.typeName=void 0,i},ws=({id:e,plugin:t,schema:r,state:s})=>{s||(s={circularReferenceTracker:[e],currentReferenceTracker:[e],hasCircularReference:false});let o=t.api.getSelector("ref",e),i=t.gen.selectSymbolFirst(o);if(i&&!i.headless)return;let p=dt({plugin:t,schema:r,state:s}),a=t.gen.ensureFile(t.output),c=M(e);i=a.ensureSymbol({selector:o}),i=i.update({name:O({config:t.config.definitions,name:c})});let m=t.config.definitions.types.infer.enabled?a.addSymbol({name:O({config:t.config.definitions.types.infer,name:c}),selector:t.api.getSelector("type-infer-ref",e)}):void 0;Ne({plugin:t,schema:r,symbol:i,typeInferSymbol:m,zodSchema:p});},dc=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r=t.ensureSymbol({name:"z",selector:e.api.getSelector("import","zod")});t.addImport({aliases:{[r.name]:r.placeholder},from:Rr({plugin:e}),names:[r.name]}),e.forEach("operation","parameter","requestBody","schema","webhook",s=>{switch(s.type){case "operation":Ir({getZodSchema:o=>dt({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:s.operation,plugin:e});break;case "parameter":ws({id:s.$ref,plugin:e,schema:s.parameter.schema});break;case "requestBody":ws({id:s.$ref,plugin:e,schema:s.requestBody.schema});break;case "schema":ws({id:s.$ref,plugin:e,schema:s.schema});break;case "webhook":Pr({getZodSchema:o=>dt({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:s.operation,plugin:e});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var Ou=({plugin:e,schema:t,state:r})=>{let s={},o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),i=n.propertyAccessExpression({expression:o.placeholder,name:y.array});if(!t.items)s.expression=n.callExpression({functionName:i,parameters:[Mo({plugin:e}).expression]});else {t=Q({schema:t});let p=t.items.map(a=>{let c=ut({plugin:e,schema:a,state:r});return c.hasCircularReference&&(s.hasCircularReference=true),c.expression});p.length===1?s.expression=n.callExpression({functionName:i,parameters:p}):(t.logicalOperator,s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.array}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.union}),parameters:[n.arrayLiteralExpression({elements:p})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:y.length}),parameters:[n.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:y.min}),parameters:[n.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.expression,name:y.max}),parameters:[n.valueToExpression({value:t.maxItems})]}))),s},Tu=({plugin:e,schema:t})=>{let r={},s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return typeof t.const=="boolean"?(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.literal}),parameters:[n.ots.boolean(t.const)]}),r):(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.boolean})}),r)},Ru=({plugin:e,schema:t})=>{let r={},s=[],o=false;for(let p of t.items??[])p.type==="string"&&typeof p.const=="string"?s.push(n.stringLiteral({text:p.const})):(p.type==="null"||p.const===null)&&(o=true);if(!s.length)return Mo({plugin:e});let i=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.placeholder,name:y.enum}),parameters:[n.arrayLiteralExpression({elements:s,multiLine:false})]}),o&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.placeholder,name:y.nullable}),parameters:[r.expression]})),r},Iu=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.never})}),t},Pu=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.null})}),t},Yr=({isBigInt:e,value:t})=>{let r=n.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?n.callExpression({functionName:"BigInt",parameters:[r]}):r},Au=({plugin:e,schema:t})=>{let r={},s=t.type==="integer"&&t.format==="int64",o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return typeof t.const=="number"?(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.literal}),parameters:[n.ots.number(t.const)]}),r):(r.expression=n.callExpression({functionName:s?n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:o.placeholder,name:y.coerce}),name:y.bigint}):n.propertyAccessExpression({expression:o.placeholder,name:y.number})}),!s&&t.type==="integer"&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.int})})),t.exclusiveMinimum!==void 0?r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.gt}),parameters:[Yr({isBigInt:s,value:t.exclusiveMinimum})]}):t.minimum!==void 0&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.gte}),parameters:[Yr({isBigInt:s,value:t.minimum})]})),t.exclusiveMaximum!==void 0?r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.lt}),parameters:[Yr({isBigInt:s,value:t.exclusiveMaximum})]}):t.maximum!==void 0&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.lte}),parameters:[Yr({isBigInt:s,value:t.maximum})]})),r)},Eu=({plugin:e,schema:t,state:r})=>{let s={},o=[],i=t.required??[],p=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));for(let a in t.properties){let c=t.properties[a],m=i.includes(a),l=ut({optional:!m,plugin:e,schema:c,state:r});l.hasCircularReference&&(s.hasCircularReference=true),ee.lastIndex=0;let f;ee.test(a)?f=a.startsWith("-")?S__default.default.factory.createStringLiteral(a):S__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),l.hasCircularReference?o.push(n.getAccessorDeclaration({name:f,returnType:l.typeName?n.propertyAccessExpression({expression:p.placeholder,name:l.typeName}):void 0,statements:[n.returnStatement({expression:l.expression})]})):o.push(n.propertyAssignment({initializer:l.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let a=ut({plugin:e,schema:t.additionalProperties,state:r});return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.record}),parameters:[n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.string}),parameters:[]}),a.expression]}),a.hasCircularReference&&(s.hasCircularReference=true),s.hasCircularReference?{...s,typeName:"ZodType"}:s}return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.object}),parameters:[S__default.default.factory.createObjectLiteralExpression(o,true)]}),s.hasCircularReference?{...s,typeName:"ZodType"}:s},Cu=({plugin:e,schema:t})=>{let r={},s=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(typeof t.const=="string")return r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.literal}),parameters:[n.ots.string(t.const)]}),r;r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.string})});let o=[];if(e.config.dates.offset&&o.push({key:"offset",value:true}),e.config.dates.local&&o.push({key:"local",value:true}),t.format)switch(t.format){case "date":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:s.placeholder,name:y.iso}),name:y.date})});break;case "date-time":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:s.placeholder,name:y.iso}),name:y.datetime}),parameters:o.length>0?[n.objectExpression({obj:o})]:[]});break;case "email":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.email})});break;case "ipv4":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.ipv4})});break;case "ipv6":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.ipv6})});break;case "time":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:n.propertyAccessExpression({expression:s.placeholder,name:y.iso}),name:y.time})});break;case "uri":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.url})});break;case "uuid":r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:s.placeholder,name:y.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.length}),parameters:[n.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.min}),parameters:[n.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.max}),parameters:[n.valueToExpression({value:t.maxLength})]}))),t.pattern&&(r.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.expression,name:y.regex}),parameters:[n.regularExpressionLiteral({text:t.pattern})]})),r},Nu=({plugin:e,schema:t,state:r})=>{let s={},o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(t.const&&Array.isArray(t.const)){let p=t.const.map(a=>n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.literal}),parameters:[n.valueToExpression({value:a})]}));return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.tuple}),parameters:[n.arrayLiteralExpression({elements:p})]}),s}let i=[];for(let p of t.items??[]){let a=ut({plugin:e,schema:p,state:r});i.push(a.expression),a.hasCircularReference&&(s.hasCircularReference=true);}return s.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:o.placeholder,name:y.tuple}),parameters:[n.arrayLiteralExpression({elements:i})]}),s},ju=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.undefined})}),t},Mo=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.unknown})}),t},ku=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:r.placeholder,name:y.void})}),t},uc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return Ou({plugin:e,schema:t,state:r});case "boolean":return Tu({plugin:e,schema:t});case "enum":return Ru({plugin:e,schema:t});case "integer":case "number":return Au({plugin:e,schema:t});case "never":return Iu({plugin:e});case "null":return Pu({plugin:e});case "object":return Eu({plugin:e,schema:t,state:r});case "string":return Cu({plugin:e,schema:t});case "tuple":return Nu({plugin:e,schema:t,state:r});case "undefined":return ju({plugin:e});case "unknown":return Mo({plugin:e});case "void":return ku({plugin:e})}},ut=({optional:e,plugin:t,schema:r,state:s})=>{let o=t.gen.ensureFile(t.output),i={},p=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","zod"));if(r.$ref){let a=s.circularReferenceTracker.includes(r.$ref),c=s.currentReferenceTracker.includes(r.$ref);s.circularReferenceTracker.push(r.$ref),s.currentReferenceTracker.push(r.$ref);let m=t.api.getSelector("ref",r.$ref),l=t.gen.selectSymbolFirst(m);if(a)l||(l=o.ensureSymbol({selector:m})),c?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.lazy}),parameters:[n.arrowFunction({returnType:n.keywordTypeNode({keyword:"any"}),statements:[n.returnStatement({expression:n.identifier({text:l.placeholder})})]})]}):i.expression=n.identifier({text:l.placeholder}),i.hasCircularReference=true;else if(!l){let f=t.context.resolveIrRef(r.$ref);qs({id:r.$ref,plugin:t,schema:f,state:s});}if(!a){let f=t.gen.selectSymbolFirstOrThrow(m);i.expression=n.identifier({text:f.placeholder});}s.circularReferenceTracker.pop(),s.currentReferenceTracker.pop();}else if(r.type){let a=uc({plugin:t,schema:r,state:s});i.expression=a.expression,i.hasCircularReference=a.hasCircularReference,t.config.metadata&&r.description&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.register}),parameters:[n.propertyAccessExpression({expression:p.placeholder,name:y.globalRegistry}),n.objectExpression({obj:[{key:"description",value:n.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=Q({schema:r}),r.items){let a=r.items.map(c=>ut({plugin:t,schema:c,state:s}).expression);if(r.logicalOperator==="and"){let c=r.items[0];c.logicalOperator==="or"||c.type&&c.type!=="object"?i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.intersection}),parameters:a}):(i.expression=a[0],a.slice(1).forEach(m=>{i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.and}),parameters:[m]});}));}else i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.union}),parameters:[n.arrayLiteralExpression({elements:a})]});}else i=ut({plugin:t,schema:r,state:s});else {let a=uc({plugin:t,schema:{type:"unknown"},state:s});i.expression=a.expression;}if(i.expression&&(r.accessScope==="read"&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.readonly})})),e&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:p.placeholder,name:y.optional}),parameters:[i.expression]}),i.typeName=y.ZodOptional),r.default!==void 0)){let a=r.type==="integer"&&r.format==="int64",c=Yr({isBigInt:a,value:r.default});c&&(i.expression=n.callExpression({functionName:n.propertyAccessExpression({expression:i.expression,name:y.default}),parameters:[c]}));}return i},qs=({id:e,plugin:t,schema:r,state:s})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...s,currentReferenceTracker:[e]},i=t.api.getSelector("ref",e),p=t.gen.selectSymbolFirst(i);if(p&&!p.headless)return;let a=ut({plugin:t,schema:r,state:o}),c=t.gen.ensureFile(t.output),m=M(e);p=c.ensureSymbol({selector:i}),p=p.update({name:O({config:t.config.definitions,name:m})});let l=t.config.definitions.types.infer.enabled?c.addSymbol({name:O({config:t.config.definitions.types.infer,name:m}),selector:t.api.getSelector("type-infer-ref",e)}):void 0;Ne({plugin:t,schema:r,symbol:p,typeInferSymbol:l,zodSchema:a});},Lo=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new q}),r=t.ensureSymbol({name:"z",selector:e.api.getSelector("import","zod")});t.addImport({aliases:{[r.name]:r.placeholder},from:Rr({plugin:e}),names:[r.name]}),e.forEach("operation","parameter","requestBody","schema","webhook",s=>{switch(s.type){case "operation":Ir({getZodSchema:o=>ut({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:s.operation,plugin:e});break;case "parameter":qs({id:s.$ref,plugin:e,schema:s.parameter.schema});break;case "requestBody":qs({id:s.$ref,plugin:e,schema:s.requestBody.schema});break;case "schema":qs({id:s.$ref,plugin:e,schema:s.schema});break;case "webhook":Pr({getZodSchema:o=>ut({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:s.operation,plugin:e});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var yc=e=>{let{plugin:t}=e;switch(t.config.compatibilityVersion){case 3:return dc(e);case 4:return Lo(e);case "mini":return lc(e);default:return Lo(e)}};var $s={api:new ks({name:"zod"}),config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:yc,name:"zod",output:"zod",resolveConfig:(e,t)=>{let s=t.package.getVersion("zod"),o=()=>s&&(s.major===4||s.major===3)?s.major:4,i=p=>{if(!p)return o();if(!s)return p;if((p===4||p===3||p==="mini")&&!t.package.satisfies(s,">=3.25.0 <5.0.0")){let a=o();return console.warn(`\u{1F50C} ${en__default.default.yellow("Warning:")} Installed ${en__default.default.cyan("zod")} ${en__default.default.cyan(`v${s.version}`)} does not support compatibility version ${en__default.default.yellow(String(p))}, using ${en__default.default.yellow(String(a))}.`),a}return p};e.config.compatibilityVersion=i(e.config.compatibilityVersion),e.config.dates=t.valueToObject({defaultValue:{local:false,offset:false},value:e.config.dates}),e.config.types=t.valueToObject({defaultValue:{infer:{case:"PascalCase",enabled:false}},mappers:{object:(p,a)=>({...p,infer:t.valueToObject({defaultValue:{...a.infer,enabled:p.infer!==void 0?!!p.infer:a.infer.enabled},mappers:ke,value:p.infer})})},value:e.config.types}),e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ZodType"}}},mappers:{...ke,object:(p,a)=>({...p,types:t.valueToObject({defaultValue:a.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:ke,value:c.infer})})},value:p.types})})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Data",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}DataZodType"}}},mappers:{...ke,object:(p,a)=>({...p,types:t.valueToObject({defaultValue:a.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:ke,value:c.infer})})},value:p.types})})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Response",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ResponseZodType"}}},mappers:{...ke,object:(p,a)=>({...p,types:t.valueToObject({defaultValue:a.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:ke,value:c.infer})})},value:p.types})})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}WebhookRequest",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}WebhookRequestZodType"}}},mappers:{...ke,object:(p,a)=>({...p,types:t.valueToObject({defaultValue:a.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:ke,value:c.infer})})},value:p.types})})},value:e.config.webhooks});},tags:["validator"]};var Fs={"@angular/common":jn,"@hey-api/client-angular":vn,"@hey-api/client-axios":qn,"@hey-api/client-fetch":Fn,"@hey-api/client-next":Ln,"@hey-api/client-nuxt":Vn,"@hey-api/schemas":Hn,"@hey-api/sdk":Un,"@hey-api/transformers":Yn,"@hey-api/typescript":rs,"@pinia/colada":ps,"@tanstack/angular-query-experimental":gs,"@tanstack/react-query":bs,"@tanstack/solid-query":Os,"@tanstack/svelte-query":Rs,"@tanstack/vue-query":Ps,fastify:Es,"legacy/angular":Bn,"legacy/axios":Kn,"legacy/fetch":Wn,"legacy/node":zn,"legacy/xhr":_n,valibot:js,zod:$s};var hc=["@hey-api/typescript","@hey-api/sdk"],wu=({dependencies:e,userPlugins:t,userPluginsConfig:r})=>{let s=new Set,o=new Set,i={},p=a=>{if(s.has(a))throw new Error(`Circular reference detected at '${a}'`);if(o.has(a))return;s.add(a);let c=Fs[a],m=r[a];if(!c&&!m)throw new Error(`unknown plugin dependency "${a}" - do you need to register a custom plugin with this name?`);let l={...c,...m,config:{...c?.config,...m?.config},dependencies:new Set([...c?.dependencies||[],...m?.dependencies||[]])};if(l.resolveConfig){let f={package:xn(e),pluginByTag:(d,u={})=>{let{defaultPlugin:h,errorMessage:g}=u;for(let b of t){let x=Fs[b]||r[b];if(x&&x.tags?.includes(d)&&b!==a)return b}if(h){let b=Fs[h]||r[h];if(b&&b.tags?.includes(d)&&h!==a)return h}throw new Error(g||`missing plugin - no plugin with tag "${d}" found`)},valueToObject:Ct};l.resolveConfig(l,f);}for(let f of l.dependencies)p(f);s.delete(a),o.add(a),i[a]=l;};for(let a of t)p(a);return {pluginOrder:Array.from(o),plugins:i}},qu=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e.tags&&e.tags.includes("client"),gc=({dependencies:e,userConfig:t})=>{let r={},s=hc;t.plugins&&(t.plugins=t.plugins.filter(i=>typeof i=="string"&&i||typeof i!="string"&&i.name),t.plugins.length===1&&qu(t.plugins[0])?s=[...hc,...t.plugins]:s=t.plugins);let o=s.map(i=>{if(typeof i=="string")return i;let p=i.name;return p&&(i.handler?r[p]=i:(r[p]={config:{...i}},delete r[p].config.name)),p}).filter(Boolean);return wu({dependencies:e,userPlugins:o,userPluginsConfig:r})};var Mu=async e=>{let t;if(e?.configFile){let a=e.configFile.split(".");t=a.slice(0,a.length-1).join(".");}let{config:r,configFile:s}=await c12.loadConfig({configFile:t,name:"openapi-ts"}),o=Jo(Object.keys(r).length?s:void 0),i=Array.isArray(e)?e:Array.isArray(r)?r.map(a=>Vs(a,e)):[Vs(r,e)],p=[];for(let a of i){let{base:c,configFile:m="",dryRun:l=false,experimentalParser:f=true,exportCore:d=true,interactive:u=false,name:h,request:g,useOptions:b=true}=a,x=[],P=Uo(a);P.level==="debug"&&console.warn("userConfig:",a);let E=Zo(a),F=Xo(a),w=Yo(a);E.path||x.push(new Ar("missing input - which OpenAPI specification should we use to generate your output?")),F.path||x.push(new Ar("missing output - where should we generate your output?")),b||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),F.path=er__default.default.resolve(process.cwd(),F.path);let V;try{V=gc({dependencies:o,userConfig:a});}catch(J){x.push(J),V={pluginOrder:[],plugins:{}};}let K=Wo({...V,base:c,configFile:m,dryRun:l,experimentalParser:f,exportCore:false,input:E,interactive:u,logs:P,name:h,output:F,parser:w,request:g,useOptions:b});K.exportCore=Y(K)?d:false,P.level==="debug"&&console.warn("config:",K),p.push({config:K,errors:x});}return {dependencies:o,results:p}};var zu=e=>{let t=[];return e.forEach((r,s)=>{t.push([s,r]);}),t},Ms=(...e)=>{let t=new Headers;for(let r of e){if(!r)continue;let s=r instanceof Headers?zu(r):Object.entries(r);for(let[o,i]of s)if(i===null)t.delete(o);else if(Array.isArray(i))for(let p of i)t.append(o,p);else i!==void 0&&t.set(o,typeof i=="object"?JSON.stringify(i):i);}return t};var Zu=async({fetchOptions:e,inputPath:t,timeout:r,watch:s})=>{let o=new jsonSchemaRefParser.$RefParser,i=jsonSchemaRefParser.getResolvedInput({pathOrUrlOrSchema:t}),p,a,c;if(i.type==="url"){if(s.lastValue&&s.isHeadMethodSupported!==false){try{let l=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"HEAD",...e,headers:Ms(e?.headers,s.headers)},timeout:r,url:i.path});if(l.response.status>=300)return {error:"not-ok",response:l.response};c=l.response;}catch(l){return {error:"not-ok",response:new Response(l.message)}}if(!c.ok&&s.isHeadMethodSupported)return {error:"not-ok",response:c};if(s.isHeadMethodSupported===void 0&&(s.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(a===void 0){let l=c.headers.get("ETag");l&&(a=l!==s.headers.get("If-None-Match"),a&&s.headers.set("If-None-Match",l));}if(a===void 0){let l=c.headers.get("Last-Modified");l&&(a=l!==s.headers.get("If-Modified-Since"),a&&s.headers.set("If-Modified-Since",l));}if(a===false)return {error:"not-modified",response:c}}try{let l=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:i.path});if(l.response.status>=300)return {error:"not-ok",response:l.response};c=l.response;}catch(l){return {error:"not-ok",response:new Response(l.message)}}if(!c.ok)return {error:"not-ok",response:c};if(p=c.body?await c.arrayBuffer():new ArrayBuffer(0),a===void 0){let l=new TextDecoder().decode(p);a=l!==s.lastValue,s.lastValue=l;}}else s.lastValue?a=false:s.lastValue=i.type;return a===false?{error:"not-modified",response:c}:{data:await o.bundle({arrayBuffer:p,pathOrUrlOrSchema:void 0,resolvedInput:i})}};
exports.getSpec=Zu;exports.initConfigs=Mu;exports.parseOpenApiSpec=bf;//# sourceMappingURL=internal.cjs.map
//# sourceMappingURL=internal.cjs.map