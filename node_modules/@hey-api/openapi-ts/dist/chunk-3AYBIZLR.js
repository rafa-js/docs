import {createRequire}from'module';import ke from'node:fs';import Z from'node:path';import At from'ansi-colors';import {fileURLToPath}from'node:url';import S from'typescript';import {EOL}from'os';import {CodegenProject,replaceWrappedIds}from'@hey-api/codegen-core';import*as Cn from'semver';import {loadConfig}from'c12';import {$RefParser,getResolvedInput,sendRequest}from'@hey-api/json-schema-ref-parser';const require = createRequire(import.meta.url);
var km=Object.create;var Ei=Object.defineProperty;var vm=Object.getOwnPropertyDescriptor;var wm=Object.getOwnPropertyNames;var qm=Object.getPrototypeOf,$m=Object.prototype.hasOwnProperty;var Ci=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Yy=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Fm=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of wm(t))!$m.call(e,o)&&o!==r&&Ei(e,o,{get:()=>t[o],enumerable:!(n=vm(t,o))||n.enumerable});return e};var eh=(e,t,r)=>(r=e!=null?km(qm(e)):{},Fm(t||!e||!e.__esModule?Ei(r,"default",{value:e,enumerable:true}):r,e));var Lm=fileURLToPath(import.meta.url),To=Z.dirname(Lm),Ro=()=>{let e=To;for(;e!==Z.dirname(e);){let r=ke.readdirSync(e).filter(n=>n==="package.json");if(r[0]){let n=Z.join(e,r[0]);return JSON.parse(ke.readFileSync(n,{encoding:"utf8"}))}e=Z.dirname(e);}},ih=e=>{if(e==="off")return null;if(e){let r=Z.isAbsolute(e)?e:Z.resolve(To,e);return ke.existsSync(r)?r:null}let t=To;for(;t!==Z.dirname(t);){let n=ke.readdirSync(t).filter(o=>o.startsWith("tsconfig")&&o.endsWith(".json")).sort(o=>o==="tsconfig.json"?-1:1);if(n[0])return Z.join(t,n[0]);t=Z.dirname(t);}return null},ah=e=>{if(!e)return null;let t=S.readConfigFile(e,S.sys.readFile);if(t.error)throw new Error(`Couldn't read tsconfig from path: ${e}`);return S.parseJsonConfigFileContent(t.config,S.sys,Z.dirname(e))};var lt=e=>{ke.existsSync(e)||ke.mkdirSync(e,{recursive:true});},mh=e=>{ke.existsSync(e)&&ke.rmSync(e,{force:true,recursive:true});},tr=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var Mt=class extends Error{},rr=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:n,name:o,pluginName:i}){let a=r instanceof Error?r.message:"Unknown error";super(a),this.args=t,this.cause=r.cause,this.event=n,this.name=o||r.name,this.pluginName=i,this.stack=r.stack;}},gh=(e,t)=>{if(e instanceof Mt)return;let r=`openapi-ts-error-${Date.now()}.log`,n=Z.resolve(process.cwd(),t);lt(n);let o=Z.resolve(n,r),i=`[${new Date().toISOString()}] `;e instanceof rr&&(i+=`${e.name} during event "${e.event}"
`,e.pluginName&&(i+=`Plugin: ${e.pluginName}
`),i+=`Arguments: ${JSON.stringify(e.args,null,2)}

`);let a=e instanceof Error?e.message:String(e),p=e instanceof Error?e.stack:void 0;return i+=`Error: ${a}
`,p&&(i+=`Stack:
${p}
`),ke.writeFileSync(o,i),o},xh=async e=>{let t="";e instanceof rr&&(e.pluginName&&(t+=`**Plugin**: \`${e.pluginName}\`
`),t+=`**Event**: \`${e.event}\`
`,t+=`**Arguments**:
\`\`\`ts
${JSON.stringify(e.args,null,2)}
\`\`\`

`);let r=e instanceof Error?e.message:String(e),n=e instanceof Error?e.stack:void 0;t+=`**Error**: \`${r}\`
`,n&&(t+=`
**Stack Trace**:
\`\`\`
${n}
\`\`\``);let o=new URLSearchParams({body:t,labels:"bug \u{1F525}",title:"Crash Report"}),i=Ro(),a;if(i&&typeof i=="object"&&"bugs"in i&&i.bugs&&typeof i.bugs=="object"&&"url"in i.bugs&&typeof i.bugs.url=="string"&&(a=i.bugs.url,a&&!a.endsWith("/")&&(a+="/")),a){let p=`${a}new?${o.toString()}`,c=(await import('open')).default;await c(p);}},bh=({error:e,logPath:t})=>{let r=Ro(),n;r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&(n=r.name),process.stderr.write(`
\u{1F6D1} ${At.cyan(n||"")} ${At.red("encountered an error.")}

${At.red("\u2757\uFE0F Error:")} ${At.white(typeof e=="string"?e:e instanceof Error?e.message:"Unknown error")}`+(t?`

${At.cyan("\u{1F4C4} Crash log saved to:")} ${At.gray(t)}`:"")+`
`);},Sh=async({error:e,isInteractive:t})=>!t||e instanceof Mt?false:new Promise(r=>{process.stdout.write(`${At.yellow(`
\u{1F4E2} Open a GitHub issue with crash details?`)} ${At.yellow("(y/N):")}`),process.stdin.setEncoding("utf8"),process.stdin.once("data",n=>{r(n.trim().toLowerCase()==="y");});});var ji=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var Vm=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)&&typeof e!="function",nr=(e,t)=>{for(let[r,n]of Object.entries(t))n!==void 0&&n!==""&&(e[r]=n);return e},Lt=({defaultValue:e,mappers:t,value:r})=>{let n={...e};switch(typeof r){case "boolean":if(t&&"boolean"in t){let o=t.boolean;n=nr(n,o(r));}break;case "function":if(t&&"function"in t){let o=t.function;n=nr(n,o(r));}break;case "number":if(t&&"number"in t){let o=t.number;n=nr(n,o(r));}break;case "string":if(t&&"string"in t){let o=t.string;n=nr(n,o(r));}break;case "object":if(Vm(r))if(t&&"object"in t&&typeof t.object=="function"){let o=t.object;n=nr(n,o(r,e));}else n=nr(n,r);break}return n};var Bm=["after","before","cursor","offset","page","start"],ki=e=>{let t={...e.parser,hooks:{},pagination:{keywords:Bm},transforms:{enums:{case:"PascalCase",enabled:false,mode:"root",name:"{{name}}Enum"},readWrite:{enabled:true,requests:{case:"preserve",name:"{{name}}Writable"},responses:{case:"preserve",name:"{{name}}"}}},validate_EXPERIMENTAL:false};return e.parser&&(e.parser.hooks&&(t.hooks=e.parser.hooks),e.parser.pagination?.keywords&&(t.pagination.keywords=e.parser.pagination.keywords),e.parser.transforms&&(e.parser.transforms.enums!==void 0&&(t.transforms.enums=Lt({defaultValue:{...t.transforms.enums,enabled:!!e.parser.transforms.enums},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.parser.transforms.enums})),e.parser.transforms.readWrite!==void 0&&(t.transforms.readWrite=Lt({defaultValue:{...t.transforms.readWrite,enabled:!!e.parser.transforms.readWrite},mappers:{boolean:r=>({enabled:r}),object:r=>({...r,requests:Lt({defaultValue:t.transforms.readWrite.requests,mappers:{function:n=>({name:n}),string:n=>({name:n})},value:r.requests}),responses:Lt({defaultValue:t.transforms.readWrite.responses,mappers:{function:n=>({name:n}),string:n=>({name:n})},value:r.responses})})},value:e.parser.transforms.readWrite}))),e.parser.validate_EXPERIMENTAL&&(t.validate_EXPERIMENTAL=e.parser.validate_EXPERIMENTAL===true?"warn":e.parser.validate_EXPERIMENTAL)),t};var R=e=>t=>({...e,config:{...e.config,...t}}),Ve={boolean:e=>({enabled:e}),function:e=>({name:e}),string:e=>({name:e})};var sr=/^[^$_\p{ID_Start}]+/u,oe=/^-?\d+(\.\d+)?$/,vi=/^(document|history|location|navigator|window)$/g,wi=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,he=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,qi=/^(global|process|Buffer)$/g,$i=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,ve=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var Ae=e=>(e||e==="")&&(ve.lastIndex=0,!ve.test(e))?`'${e}'`:e,or=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,_=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>EOL+r.trim());var ge=e=>{let t=A(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},A=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?.tags?.includes("client"))return r}return {config:{name:""},name:""}};var Fi,I=()=>{let e=Fi,t=A(e);return e.client=t,e},Mi=e=>(Fi=e,I()),U=e=>A(e).name.startsWith("legacy/"),Dt=e=>{if(U(e))return e.name};var Wm=S.createPrinter({newLine:S.NewLineKind.LineFeed,removeComments:false}),zm=e=>S.createSourceFile("",e,S.ScriptTarget.ESNext,false,S.ScriptKind.TS),_m=zm(""),Qm=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function me({node:e,unescape:t=false}){let r=Wm.printNode(S.EmitHint.Unspecified,e,_m);if(!t)return r;try{return Qm(r)}catch{return I().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}var E=({text:e})=>S.factory.createIdentifier(e),Li=()=>S.factory.createThis(),ee=({keyword:e})=>{let t=Io({keyword:e});return S.factory.createModifier(t)},Di=({initializer:e,modifier:t,name:r,type:n})=>S.factory.createPropertyDeclaration(t?[ee({keyword:t})]:void 0,r,void 0,n,e),Te={boolean:e=>e?S.factory.createTrue():S.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=E({text:r});if(e){let o=E({text:e});return S.factory.createExportSpecifier(t,n,o)}return S.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=E({text:r});if(e){let o=E({text:e});return S.factory.createImportSpecifier(t,n,o)}return S.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?S.factory.createPrefixUnaryExpression(S.SyntaxKind.MinusToken,S.factory.createNumericLiteral(Math.abs(e))):S.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=or(r));let n=r.includes("'")&&r.includes('"'),o=r.includes(`
`),i=r.startsWith("`"),a=r.startsWith("\\`")&&r.endsWith("\\`");return (o||n||i)&&!a&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?E({text:r}):Bt({text:r})}},Vt=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",Et=e=>e!==void 0,Hm=({commentObject:e,node:t})=>{let r=e.lines.filter(a=>!!a||a==="");if(!r.length)return;if(!e.jsdoc){for(let a of r)S.addSyntheticLeadingComment(t,S.SyntaxKind.SingleLineCommentTrivia,` ${a}`,true);return}let n=r.map((a,p)=>{let c=a;return p!==r.length&&(c=`${c}
`),S.factory.createJSDocText(c)}),o=S.factory.createJSDocComment(S.factory.createNodeArray(n),void 0),i=me({node:o,unescape:true}).replace("/*","").replace("*  */","");S.addSyntheticLeadingComment(t,S.SyntaxKind.MultiLineCommentTrivia,i,true);},le=({comments:e=[],node:t})=>{let r=!!e.find(o=>typeof o=="object"&&o),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let o of n)Hm({commentObject:o,node:t});};var fe=(e,t)=>S.isTypeNode(e)?e:typeof e=="number"?S.factory.createLiteralTypeNode(Te.number(e)):Ee({typeArguments:t?.map(r=>fe(r)),typeName:S.isIdentifier(e)?e.text:e}),Po=({expression:e,name:t})=>S.factory.createPropertyAccessChain(e,S.factory.createToken(S.SyntaxKind.QuestionDotToken),t),Ke=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?E({text:e}):e;if(t&&typeof r!="number")return Po({expression:n,name:r});if(typeof r=="string"){if(ve.lastIndex=0,!ve.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let i=E({text:r});return S.factory.createElementAccessExpression(n,i)}let o=E({text:r});return S.factory.createPropertyAccessExpression(n,o)}if(typeof r=="number"){let o=S.factory.createNumericLiteral(r);return S.factory.createElementAccessExpression(n,o)}return S.factory.createPropertyAccessExpression(n,r)},Ao=()=>S.factory.createNull(),Be=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:o})=>{if(o===null)return Ao();if(Array.isArray(o))return Eo({elements:o});if(typeof o=="object")return In({identifiers:e,obj:o,shorthand:r});if(typeof o=="number")return Te.number(o);if(typeof o=="boolean")return Te.boolean(o);if(typeof o=="string"){if(t){let i=o.split(".");return Ke({expression:i[0],name:i[1]})}return Te.string(o,n)}},Br=e=>e.map(t=>{if("destructure"in t)return ir({name:S.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:S.factory.createBindingElement(void 0,void 0,E({text:n.name}),void 0)).filter(Boolean)),type:t.type!==void 0?fe(t.type):void 0});let r=t.accessLevel?[ee({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(ee({keyword:"readonly"})),ir({initializer:t.default!==void 0?Be({value:t.default}):void 0,modifiers:r,name:E({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?fe(t.type):void 0})}),Io=({keyword:e})=>{switch(e){case "any":return S.SyntaxKind.AnyKeyword;case "async":return S.SyntaxKind.AsyncKeyword;case "boolean":return S.SyntaxKind.BooleanKeyword;case "export":return S.SyntaxKind.ExportKeyword;case "never":return S.SyntaxKind.NeverKeyword;case "number":return S.SyntaxKind.NumberKeyword;case "private":return S.SyntaxKind.PrivateKeyword;case "protected":return S.SyntaxKind.ProtectedKeyword;case "public":return S.SyntaxKind.PublicKeyword;case "readonly":return S.SyntaxKind.ReadonlyKeyword;case "static":return S.SyntaxKind.StaticKeyword;case "string":return S.SyntaxKind.StringKeyword;case "undefined":return S.SyntaxKind.UndefinedKeyword;case "unknown":return S.SyntaxKind.UnknownKeyword;case "void":return S.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},Kt=({keyword:e})=>{let t=Io({keyword:e});return S.factory.createKeywordTypeNode(t)},Kr=e=>e.map(t=>S.isTypeParameterDeclaration(t)?t:Wr({constraint:t.extends?typeof t.extends=="string"?Kt({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?Vt(t.default)?t.default:S.factory.createLiteralTypeNode(t.default?S.factory.createTrue():S.factory.createFalse()):void 0,name:t.name})),Vi=({operator:e,type:t})=>{let r=e==="keyof"?S.SyntaxKind.KeyOfKeyword:e==="readonly"?S.SyntaxKind.ReadonlyKeyword:S.SyntaxKind.UniqueKeyword;return S.factory.createTypeOperatorNode(r,t)},Wr=({constraint:e,defaultType:t,modifiers:r,name:n})=>S.factory.createTypeParameterDeclaration(r,n,e,t),Tn=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:o,typeParameter:i})=>S.factory.createMappedTypeNode(n,i,t,r,o,e),Bi=({literal:e})=>S.factory.createLiteralTypeNode(e),Rn=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:o,statements:i=[],types:a=[]})=>{let p=S.factory.createArrowFunction(e?[ee({keyword:"async"})]:void 0,a?Kr(a):void 0,Br(n),o?fe(o):void 0,void 0,Array.isArray(i)?Re({multiLine:r,statements:i}):i);return le({comments:t,node:p}),p},Ki=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:o,statements:i=[],types:a=[]})=>{let p=S.factory.createFunctionExpression(e?[ee({keyword:"async"})]:void 0,void 0,void 0,a?Kr(a):void 0,Br(n),o?fe(o):void 0,Re({multiLine:r,statements:i}));return le({comments:t,node:p}),p},Eo=({elements:e,multiLine:t=false})=>S.factory.createArrayLiteralExpression(e.map(n=>Vt(n)?n:Be({value:n})).filter(Et),t||!Array.isArray(e[0])&&typeof e[0]=="object"),Wi=({expression:e})=>S.factory.createAwaitExpression(e),zi=({parameters:e=[],returnType:t,typeParameters:r})=>S.factory.createFunctionTypeNode(r,e,t),In=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:o,unescape:i=false})=>{let a=Array.isArray(n)?n.map(c=>{let l=false;if("key"in c){let{key:f}=c;l=f===c.value,(f.match(/^[0-9]/)&&f.match(/\D+/g)||f.match(/\W/g)||f==="")&&!f.startsWith("'")&&!f.endsWith("'")&&(c.key=`'${f}'`);}let m;if("spread"in c){let f=Vt(c.spread)?c.spread:E({text:c.spread});m=S.factory.createSpreadAssignment(c.assertion?_r({expression:f,type:typeof c.assertion=="string"?Kt({keyword:c.assertion}):c.assertion}):f);}else if(c.shorthand||o&&l)m=S.factory.createShorthandPropertyAssignment(c.value);else {let f=Vt(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?In({multiLine:r,obj:c.value,shorthand:o,unescape:i}):Be({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:o,unescape:i,value:c.value});if(!f)return;t.includes(c.key)&&!S.isObjectLiteralExpression(f)&&(f=E({text:c.value})),m=On({initializer:f,name:c.key});}return le({comments:c.comments,node:m}),m}).filter(Et):Object.entries(n).map(([c,l])=>{let m=Be({identifiers:t.includes(c)?Object.keys(l):[],shorthand:o,unescape:i,value:l});if(!m)return;t.includes(c)&&!S.isObjectLiteralExpression(m)&&(m=E({text:l}));let f=c===l;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),o&&f?S.factory.createShorthandPropertyAssignment(l):On({initializer:m,name:c})}).filter(Et),p=S.factory.createObjectLiteralExpression(a,r);return le({comments:e,node:p}),p},_i=({asConst:e,comments:t={},leadingComment:r,name:n,obj:o})=>{let i=Array.isArray(o)?o.map(m=>{let f=Um({initializer:Be({value:m.value}),name:m.key});return le({comments:m.comments,node:f}),f}):Object.entries(o).map(([m,f])=>{let d=S.factory.createEnumMember(m,Be({unescape:true,value:f}));return le({comments:t[m],node:d}),d}),a=[ee({keyword:"export"})],p=e?[S.factory.createToken(S.SyntaxKind.ConstKeyword)]:[],c=[...a,...p],l=S.factory.createEnumDeclaration(c,typeof n=="string"?E({text:n}):n,i);return le({comments:r,node:l}),l},Um=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=Bt({isSingleQuote:false,text:r}):r=Ae(r)),S.factory.createEnumMember(r,e)},Qi=({name:e,statements:t})=>S.factory.createModuleDeclaration([ee({keyword:"export"})],E({text:e}),S.factory.createModuleBlock(t),S.NodeFlags.Namespace),Hi=({indexType:e,objectType:t})=>S.factory.createIndexedAccessTypeNode(t,e),Zi=({name:e,returnType:t,statements:r})=>S.factory.createGetAccessorDeclaration(void 0,e,[],t?Ee({typeName:t}):void 0,Re({statements:r})),Bt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),S.factory.createStringLiteral(t,e)),Ui=({condition:e,whenFalse:t,whenTrue:r})=>S.factory.createConditionalExpression(e,S.factory.createToken(S.SyntaxKind.QuestionToken),r,S.factory.createToken(S.SyntaxKind.ColonToken),t),Xi=({text:e})=>S.factory.createTypeOfExpression(typeof e=="string"?E({text:e}):e),Gi=({comment:e,exportType:t,name:r,type:n,typeParameters:o=[]})=>{let i=S.factory.createTypeAliasDeclaration(t?[ee({keyword:"export"})]:void 0,typeof r=="string"?E({text:r}):r,Kr(o),fe(n));return le({comments:e,node:i}),i},Ee=({typeArguments:e,typeName:t})=>S.factory.createTypeReferenceNode(t,e),Ji=({type:e})=>S.factory.createParenthesizedType(e),ir=({initializer:e,modifiers:t,name:r,required:n=true,type:o})=>S.factory.createParameterDeclaration(t,void 0,r,n?void 0:S.factory.createToken(S.SyntaxKind.QuestionToken),o,e),zr=({argumentsArray:e,expression:t,typeArguments:r})=>S.factory.createNewExpression(t,r,e),Yi=({awaitModifier:e,expression:t,initializer:r,statement:n})=>S.factory.createForOfStatement(e,r,t,n),ea=({left:e,right:t})=>S.factory.createAssignment(e,t),Re=({multiLine:e=true,statements:t})=>S.factory.createBlock(t,e),On=({initializer:e,name:t})=>S.factory.createPropertyAssignment(t,e),ta=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return S.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},_r=({expression:e,type:t})=>S.factory.createAsExpression(e,t),ra=({value:e})=>{let t=[],r="";for(let o of e.slice(0).reverse())if(typeof o=="string")r=`${o}${r}`;else {let i=t.length?S.factory.createTemplateMiddle(r):S.factory.createTemplateTail(r),a=S.factory.createTemplateLiteralTypeSpan(o,i);t.push(a),r="";}return S.factory.createTemplateLiteralType(S.factory.createTemplateHead(r),t.reverse())};var na=({module:e,shouldAppendJs:t})=>S.factory.createExportDeclaration(void 0,false,void 0,Te.string(t?`${e}.js`:e)),We=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?E({text:e}):e,o=t.filter(a=>a!==void 0).map(a=>typeof a=="string"?E({text:a}):a);return S.factory.createCallExpression(n,r,o)},sa=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),o=r.map(c=>{let l=typeof c=="string"?{name:c}:c;return Te.export({alias:l.alias,asType:n&&l.asType,name:l.name})}),i=S.factory.createNamedExports(o),a=Te.string(t);return S.factory.createExportDeclaration(void 0,!n,i,a)},oa=({assertion:e,comment:t,destructure:r,exportConst:n,expression:o,name:i,typeName:a})=>{let p=e?_r({expression:o,type:typeof e=="string"?Ee({typeName:e}):e}):o,c=typeof i=="string"?E({text:i}):i,l=S.factory.createVariableDeclaration(r?S.factory.createObjectBindingPattern([S.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,a?typeof a=="string"?Ee({typeName:a}):a:void 0,p),m=S.factory.createVariableStatement(n?[ee({keyword:"export"})]:void 0,S.factory.createVariableDeclarationList([l],S.NodeFlags.Const));return le({comments:t,node:m}),m},ia=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(m=>typeof m!="object"||!m.asType),o,i=[];r.forEach(m=>{let f=typeof m=="string"?{name:m}:m;f.name==="*"&&f.alias?o=f:i.push(Te.import({alias:f.alias,asType:n&&f.asType,name:f.name}));});let a=o?S.factory.createNamespaceImport(E({text:o.alias})):S.factory.createNamedImports(i),p=S.factory.createImportClause(!n,void 0,a),c=Te.string(t);return S.factory.createImportDeclaration(void 0,p,c)};var aa=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:o=[]})=>{let i=e?[ee({keyword:e})]:void 0,a=S.factory.createConstructorDeclaration(i,Br(n),Re({multiLine:r,statements:o}));return le({comments:t,node:a}),a},pa=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:o,parameters:i=[],returnType:a,statements:p=[],types:c=[]})=>{let l=e?[ee({keyword:e})]:[];r&&l.push(ee({keyword:"static"}));let m=S.factory.createMethodDeclaration(l,void 0,E({text:o}),void 0,c?Kr(c):void 0,Br(i),a?fe(a):void 0,Re({multiLine:n,statements:p}));return le({comments:t,node:m}),m},ca=({decorator:e,exportClass:t,extendedClasses:r,name:n,nodes:o})=>{let i=[];t&&i.push(ee({keyword:"export"})),e&&i.unshift(S.factory.createDecorator(We({functionName:e.name,parameters:e.args.map(p=>Be({value:p})).filter(Et)})));let a=[];if(r)for(let p of r)a.push(S.factory.createHeritageClause(S.SyntaxKind.ExtendsKeyword,[S.factory.createExpressionWithTypeArguments(E({text:p}),void 0)]));return S.factory.createClassDeclaration(i,E({text:n}),void 0,a,o)};var zt=({expression:e})=>S.factory.createExpressionStatement(e);var Pn=({expression:e})=>S.factory.createReturnStatement(e),la=({args:e=[],name:t,types:r=[]})=>{let n=r.map(p=>Ee({typeName:p})),o=e.map(p=>S.isExpression(p)?p:E({text:p})).filter(Et),i=We({functionName:t,parameters:o,types:n});return Pn({expression:i})},fa=({expression:e})=>Pn({expression:typeof e=="string"?E({text:e}):e});var ar=e=>e.slice(1).reduce((t,r)=>(ve.lastIndex=0,ve.test(r)?Po({expression:t,name:r}):S.factory.createElementAccessChain(t,S.factory.createToken(S.SyntaxKind.QuestionDotToken),E({text:r}))),E({text:e[0]})),An=e=>e.slice(1).reduce((t,r)=>Ke({expression:t,name:r}),E({text:e[0]})),da=({expressions:e})=>e.reduce((r,n)=>Ke({expression:r,name:n})),En=({left:e,operator:t="=",right:r})=>S.factory.createBinaryExpression(e,t==="="?S.SyntaxKind.EqualsToken:t==="==="?S.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?S.SyntaxKind.QuestionQuestionToken:S.SyntaxKind.InKeyword,typeof r=="string"?E({text:r}):r),pr=({elseStatement:e,expression:t,thenStatement:r})=>S.factory.createIfStatement(t,r,e),ua=({path:e})=>{let t=ar(e),r=An(e),n=Re({statements:[zt({expression:En({left:r,right:zr({argumentsArray:[r],expression:E({text:"Date"})})})})]});return pr({expression:t,thenStatement:n})},ya=({path:e,transformerName:t})=>{let r=ar(e),n=An(e),o=Re({statements:[zt({expression:We({functionName:t,parameters:[n]})})]});return [pr({expression:r,thenStatement:o})]},ha=({path:e,transformerName:t})=>{let r=ar(e),n=An(e);return pr({expression:We({functionName:Ke({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:Re({statements:[zt({expression:S.factory.createCallChain(Ke({expression:n,name:"forEach"}),void 0,void 0,[E({text:t})])})]})})},ga=({parameterName:e})=>{let t=E({text:"Date"});return zr({argumentsArray:[E({text:e})],expression:t})},xa=({path:e,transformExpression:t})=>{let r=ar(e),n=An(e);return pr({expression:We({functionName:Ke({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:Re({statements:[zt({expression:En({left:n,right:S.factory.createCallChain(Ke({expression:n,name:"map"}),void 0,void 0,[Rn({parameters:[{name:"item"}],statements:t})])})})]})})};var nl=Ee({typeName:"null"}),cr=({isNullable:e,node:t})=>e?S.factory.createUnionTypeNode([t,nl]):t,Co=({indexKey:e,indexProperty:t,isNullable:r,properties:n,useLegacyResolution:o})=>{let a=n.map(l=>{let m=l.isReadOnly?[ee({keyword:"readonly"})]:void 0,f=l.isRequired!==false?void 0:S.factory.createToken(S.SyntaxKind.QuestionToken),d=fe(l.type);let u=S.factory.createPropertySignature(m,o||typeof l.name=="string"&&l.name.match(ve)||typeof l.name!="string"&&S.isPropertyName(l.name)?l.name:Bt({text:l.name}),f,d);return le({comments:l.comment,node:u}),u}),p=false;if(t)if(!n.length&&e){let l=Tn({questionToken:S.factory.createToken(S.SyntaxKind.QuestionToken),type:t.type??Kt({keyword:"string"}),typeParameter:Wr({constraint:e,name:E({text:String(t.name)})})});a.push(l),p=true;}else {let l=t.isReadOnly?[ee({keyword:"readonly"})]:void 0,m=S.factory.createIndexSignature(l,[ir({name:E({text:String(t.name)}),type:Kt({keyword:"string"})})],fe(t.type));a.push(m);}let c=p?a[0]:S.factory.createTypeLiteralNode(a);return cr({isNullable:r,node:c})},Qr=({isNullable:e,types:t})=>{let r=[];for(let o of t){let i=fe(o);S.isUnionTypeNode(i)?r.push(...i.types):r.push(i);}let n=S.factory.createUnionTypeNode(r);return cr({isNullable:e,node:n})},ba=({isNullable:e,types:t})=>{let r=[];for(let o of t){let i=fe(o);S.isIntersectionTypeNode(i)?r.push(...i.types):r.push(i);}let n=S.factory.createIntersectionTypeNode(r);return cr({isNullable:e,node:n})},Sa=({isNullable:e=false,types:t})=>{let r=t.map(o=>fe(o)),n=S.factory.createTupleTypeNode(r);return cr({isNullable:e,node:n})},Oa=(e,t,r=false,n=true)=>{let o=Qr({types:e}),i=Qr({types:t}),a=Co({properties:[{name:`[key: ${me({node:o,unescape:true})}]`,type:i}],useLegacyResolution:n});return cr({isNullable:r,node:a})},Ta=(e,t=false)=>{let r=Ee({typeArguments:[Array.isArray(e)?Qr({types:e}):e],typeName:"Array"});return cr({isNullable:t,node:r})};var s={anonymousFunction:Ki,arrayLiteralExpression:Eo,arrowFunction:Rn,asExpression:_r,assignment:ea,awaitExpression:Wi,binaryExpression:En,block:Re,callExpression:We,classDeclaration:ca,conditionalExpression:Ui,constVariable:oa,constructorDeclaration:aa,enumDeclaration:_i,exportAllDeclaration:na,exportNamedDeclaration:sa,expressionToStatement:zt,forOfStatement:Yi,functionTypeNode:zi,getAccessorDeclaration:Zi,identifier:E,ifStatement:pr,indexedAccessTypeNode:Hi,isTsNode:Vt,keywordTypeNode:Kt,literalTypeNode:Bi,mappedTypeNode:Tn,methodDeclaration:pa,namedImportDeclarations:ia,namespaceDeclaration:Qi,newExpression:zr,nodeToString:me,null:Ao,objectExpression:In,ots:Te,parameterDeclaration:ir,propertyAccessExpression:Ke,propertyAccessExpressions:da,propertyAssignment:On,propertyDeclaration:Di,regularExpressionLiteral:ta,returnFunctionCall:la,returnStatement:Pn,returnVariable:fa,safeAccessExpression:ar,stringLiteral:Bt,templateLiteralType:ra,this:Li,transformArrayMap:xa,transformArrayMutation:ha,transformDateMutation:ua,transformFunctionMutation:ya,transformNewDate:ga,typeAliasDeclaration:Gi,typeArrayNode:Ta,typeInterfaceNode:Co,typeIntersectionNode:ba,typeNode:fe,typeOfExpression:Xi,typeOperatorNode:Vi,typeParameterDeclaration:Wr,typeParenthesizedNode:Ji,typeRecordNode:Oa,typeReferenceNode:Ee,typeTupleNode:Sa,typeUnionNode:Qr,valueToExpression:Be},mg=s;var Nn=e=>({getVersion:t=>{let r=e[t];try{if(r)return Cn.parse(r)||void 0}catch{}},isInstalled:t=>!!e[t],satisfies:(t,r,n)=>{let o=typeof t=="string"?e[t]:t;return o?Cn.satisfies(o,r,n):false}});var ze=class{_exportFromIndex;_headers=[];_id;_imports=new Map;_items=[];_name;_path;constructor({dir:t,exportFromIndex:r=false,header:n=true,id:o,name:i}){this._exportFromIndex=r,this._id=o,this._name=this._setName(i),this._path=Z.resolve(t,this._name),n&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}get exportFromIndex(){return this._exportFromIndex}get id(){return this._id}import({module:t,...r}){if(!r.name)return {name:void 0};let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let o=n.get(r.name);return o?{...o,name:o.alias||o.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=Hr(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let l=[];if(t.config.configFile){let m=t.config.configFile.split("/");l=m.slice(0,m.length-1);}n=Z.resolve(process.cwd(),...l,r);}else {let l=t.file({id:r});if(!l)throw new Error(`File with id ${r} does not exist`);n=l._path;}let o=this._path.split(Z.sep),i=n.split(Z.sep),a=-1,p="";for(let l of o)if(a+=1,i[a]!==l){let m=Array.from({length:o.length-a}).fill(""),f=i.slice(a),d=f.slice(0,f.length-1);d.length&&d.push(""),p=(m.join("../")||"./")+d.join("/");break}let c=i[i.length-1];return `${p}${Hr(c).name}`}remove(t){ke.rmSync(this._path,t);}removeNode_LEGACY(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=Hr(t);return [n,"gen",r].filter(Boolean).join(".")}_toString(t,r){let n=[];this._headers.length&&n.push(this._headers.join(`
`));let o=r?.options.moduleResolution===S.ModuleResolutionKind.NodeNext,i=[];for(let[a,p]of this._imports.entries()){let c=Array.from(p.values()),l=a;o&&(l.startsWith("./")||l.startsWith("../"))&&(l==="./client"?l="./client/index.js":l=`${l}.js`);let m=s.namedImportDeclarations({imports:c,module:l});i.push(me({node:m}));}return i.length&&n.push(i.join(`
`)),n=n.concat(this._items.map(a=>typeof a=="string"?a:me({node:a,unescape:true}))),n.join(t)}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let n=this._path;if(typeof this._path=="string"){let o=this._path.split(Z.sep);n=o.slice(0,o.length-1).join(Z.sep);}lt(n),ke.writeFileSync(this._path,this._toString(t,r));}},Hr=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var il=[he,$i,wi,qi,vi],_e=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(sr.lastIndex=0,sr.test(t))return `_${t}`;for(let r of il){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var F=class{id="typescript";ensureValidName(t){return _e(t)}getUniqueName(t,r){let n=2,o=t;for(;r.hasValue(o);)o=`${t}${n}`,n+=1;return o}groupByKey(t,r,n){let o=new Map;for(let i of t[r]){let a=n?.moduleResolution===S.ModuleResolutionKind.NodeNext,p=typeof i.from=="string"?i.from:`${t.relativePathToFile(i.from)}${a?".js":""}`;o.has(p)||o.set(p,[]),o.get(p).push(i);}return o}renderBody(t){let r=[];for(let o of t.symbols)o.value&&(typeof o.value=="string"?r.push(o.value):o.value instanceof Array?o.value.forEach(i=>{r.push(`${me({node:i,unescape:true})}
`);}):r.push(`${me({node:o.value,unescape:true})}
`));let n=r.join(`
`);return n=replaceWrappedIds(n,o=>this.replacerFn({file:t,headless:false,scope:"file",symbolId:o})),n}renderExports(t,r){let n=this.groupByKey(t,"exports",r),o=[];for(let[a,p]of n.entries()){let c=p.every(f=>f.typeDefaultImport||f.typeNamespaceImport||f.names?.every(d=>f.typeNames?.includes(d)));if(p.length===1&&p[0].namespaceImport){let f=typeof p[0].namespaceImport=="string"?S.factory.createNamespaceExport(s.identifier({text:p[0].namespaceImport})):void 0,d=S.factory.createExportDeclaration(void 0,false,f,s.stringLiteral({isSingleQuote:true,text:a}));o.push(me({node:d}));continue}let l=[];for(let f of p)for(let d of f.names??[]){let u=f.aliases?.[d],y=u&&u!==d?S.factory.createExportSpecifier(false,s.identifier({text:d}),s.identifier({text:u})):S.factory.createExportSpecifier(false,void 0,s.identifier({text:d}));l.push(y);}let m=S.factory.createExportDeclaration(void 0,c,S.factory.createNamedExports(l),s.stringLiteral({isSingleQuote:true,text:a}));o.push(me({node:m}));}o.length&&o.push("");let i=o.join(`
`);return i=replaceWrappedIds(i,a=>this.replacerFn({file:t,headless:false,scope:"file",symbolId:a})),i}renderHeader(t,r){if(!t.hasContent())return "";let n=[this.renderHeaders(),this.renderImports(t,r)].filter(Boolean).join(`
`);return n.endsWith(`
`)?`${n}
`:`${n}

`}renderHeaders(){return ["// This file is auto-generated by @hey-api/openapi-ts",""].join(`
`)}renderImports(t,r){let n=this.groupByKey(t,"imports",r),o=[];for(let[i,a]of n.entries()){let p=[],c,l,m=false;for(let u of a)if(u.defaultImport&&(c=s.identifier({text:u.defaultImport}),u.typeDefaultImport&&(m=true)),typeof u.namespaceImport=="string"&&(l=replaceWrappedIds(u.namespaceImport,y=>this.replacerFn({file:t,symbolId:y})),u.typeNamespaceImport&&(m=true)),u.names&&u.names.length>0){!m&&u.names.every(y=>u.typeNames?.includes(y))&&(m=true);for(let y of u.names){let g=u.aliases?.[y],x=y,b;g&&g!==x&&(b=x,x=g),x=replaceWrappedIds(x,C=>{let $=this.replacerFn({file:t,symbolId:C}),q=t.project.getFileBySymbolId(C),B=q?q.resolvedNames.get(C):void 0;return B&&B!==$&&(b||(b=B)),$}),b&&(b=replaceWrappedIds(b,C=>this.replacerFn({file:t,symbolId:C})),b===x&&(b=void 0));let P=S.factory.createImportSpecifier(m?false:u.typeNames?.includes(y)??false,b?s.identifier({text:b}):void 0,s.identifier({text:x}));p.push(P);}}let f=S.factory.createImportClause(m,c,l?S.factory.createNamespaceImport(s.identifier({text:l})):p.length?S.factory.createNamedImports(p):void 0),d=S.factory.createImportDeclaration(void 0,f,s.stringLiteral({isSingleQuote:true,text:i}));o.push(me({node:d}));}return o.length&&o.push(""),o.join(`
`)}renderSymbols(t,r){if(!t.hasContent())return "";let n=[this.renderBody(t),this.renderExports(t,r)].filter(Boolean).join(`
`);return n.endsWith(`
`)?n:`${n}
`}replacerFn({file:t,headless:r=true,scope:n="project",symbolId:o}){let i=t.resolvedNames.get(o);if(i)return i;let a=n==="file"?t.getSymbolById(o):t.project.getSymbolById(o);if(!a||!r&&a.value===void 0)return;let p=this.ensureValidName(a.name);return t.resolvedNames.hasValue(p)&&(p=this.getUniqueName(p,t.resolvedNames)),t.resolvedNames.set(o,p),p}};var al=e=>{switch(e.method){case "delete":case "patch":case "post":case "put":return ["mutation"];case "get":return ["query"];default:return []}},jn=class{api;config;context;dependencies=[];gen;handler;name;output;package;constructor(t){this.api=t.api??{},this.config=t.config,this.context=t.context,this.dependencies=t.dependencies,this.gen=t.gen,this.handler=t.handler,this.name=t.name,this.output=t.output,this.package=t.context.package;}createFile(t){return this.context.createFile({exportFromIndex:this.config.exportFromIndex,...t})}forEach(...t){let r=t.slice(0,-1),n=t[t.length-1],o=new Set(r.length?r:["operation","parameter","requestBody","schema","server","webhook"]);if(o.has("server")&&this.context.ir.servers)for(let i of this.context.ir.servers){let a={server:i,type:"server"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("schema")&&this.context.ir.components?.schemas)for(let i in this.context.ir.components.schemas){let a={$ref:`#/components/schemas/${i}`,name:i,schema:this.context.ir.components.schemas[i],type:"schema"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("parameter")&&this.context.ir.components?.parameters)for(let i in this.context.ir.components.parameters){let a={$ref:`#/components/parameters/${i}`,name:i,parameter:this.context.ir.components.parameters[i],type:"parameter"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("requestBody")&&this.context.ir.components?.requestBodies)for(let i in this.context.ir.components.requestBodies){let a={$ref:`#/components/requestBodies/${i}`,name:i,requestBody:this.context.ir.components.requestBodies[i],type:"requestBody"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("operation")&&this.context.ir.paths)for(let i in this.context.ir.paths){let a=this.context.ir.paths[i];for(let p in a){let c=p,l={method:c,operation:a[c],path:i,type:"operation"};try{n(l);}catch(m){this.forEachError(m,l);}}}if(o.has("webhook")&&this.context.ir.webhooks)for(let i in this.context.ir.webhooks){let a=this.context.ir.webhooks[i];for(let p in a){let c=p,l={key:i,method:c,operation:a[c],type:"webhook"};try{n(l);}catch(m){this.forEachError(m,l);}}}}forEachError(t,r){let n=t instanceof Error?t:new Error(String(t));throw new rr({args:[r],error:n,event:r.type,name:"Error",pluginName:this.name})}getPlugin(t){return this.context.plugins[t]}getPluginOrThrow(t){let r=this.getPlugin(t);if(!r)throw new Error(`plugin not found ${t}`);return r}hooks={operation:{isMutation:t=>this.isOperationKind(t,"mutation"),isQuery:t=>this.isOperationKind(t,"query")}};isOperationKind(t,r){let n=r==="query"?"isQuery":"isMutation",o=this.config["~hooks"]?.operations?.[n],i=o?.(t);if(i!==void 0)return i;let a=this.config["~hooks"]?.operations?.getKind,p=a?.(t);if(p!==void 0)return p.includes(r);let c=this.context.config.parser.hooks.operations?.[n],l=c?.(t);if(l!==void 0)return l;let m=this.context.config.parser.hooks.operations?.getKind,f=m?.(t);return f!==void 0?f.includes(r):al(t).includes(r)}async run(){await this.handler({plugin:this});}};var pl=/~1/g,cl=/~0/g,D=e=>{let t=Qe(e),r=t[t.length-1];return decodeURI(r)},ml=e=>String(e).replace(/~/g,"~0").replace(/\//g,"~1"),Qe=e=>{let t=e.trim();return t.startsWith("#")&&(t=t.slice(1)),t.startsWith("/")&&(t=t.slice(1)),t?t.split("/").map(r=>r.replace(pl,"/").replace(cl,"~")):[]},Ia=e=>{let t=e.trim();return t.startsWith("#")||(t=`#${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t=t.replace(/\/+/g,"/"),t},Pa=e=>{let t=e.map(ml).join("/");return "#"+(t?`/${t}`:"")},No=({$ref:e,spec:t})=>{let r=Qe(decodeURI(e)),n=t;for(let o of r){let i=o;if(n[i]===void 0)throw new Error(`Reference not found: ${e}`);n=n[i];}return n};var kn=class{config;files={};gen;ir={};logger;package;plugins={};spec;constructor({config:t,dependencies:r,logger:n,spec:o}){this.config=t,this.gen=new CodegenProject,this.logger=n,this.package=Nn(r),this.spec=o,t.output.indexFile&&this.gen.createFile("index",{extension:".ts",renderer:new F});}createFile(t){let r=t.path.split("/"),n=Z.resolve(this.config.output.path,...r.slice(0,r.length-1)),o=new ze({dir:n,exportFromIndex:t.exportFromIndex,id:t.id,name:`${r[r.length-1]}.ts`});return this.files[t.id]=o,o}dereference(t){let r=this.resolveRef(t.$ref),n={...t,...r};return delete n.$ref,n}file({id:t}){return this.files[t]}registerPlugin(t){let r=this.config.plugins[t],n=new jn({api:r.api,config:r.config,context:this,dependencies:r.dependencies??[],gen:this.gen,handler:r.handler,name:r.name,output:r.output});return this.plugins[n.name]=n,n}registerPlugins(){return this.config.pluginOrder.map(t=>this.registerPlugin(t))}resolveIrRef(t){return No({$ref:t,spec:this.ir})}resolveRef(t){return No({$ref:t,spec:this.spec})}};var vn=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},Ct=e=>{for(let t in e)if(e[t].required)return  true;return  false},Aa=e=>e?!!(Ct(e.cookie)||Ct(e.header)||Ct(e.path)||Ct(e.query)):false,jo=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let n=t.cookie[r];if(n.pagination)return {in:n.location,name:n.pagination===true?n.name:`${n.name}.${n.pagination}`,schema:vn({context:e,parameter:n})}}for(let r in t.header){let n=t.header[r];if(n.pagination)return {in:n.location,name:n.pagination===true?n.name:`${n.name}.${n.pagination}`,schema:vn({context:e,parameter:n})}}for(let r in t.path){let n=t.path[r];if(n.pagination)return {in:n.location,name:n.pagination===true?n.name:`${n.name}.${n.pagination}`,schema:vn({context:e,parameter:n})}}for(let r in t.query){let n=t.query[r];if(n.pagination)return {in:n.location,name:n.pagination===true?n.name:`${n.name}.${n.pagination}`,schema:vn({context:e,parameter:n})}}}};var G=({detectFormat:e=true,schema:t})=>{if(!t.items)return t;let r=[],n=[];for(let i of t.items){if(!i.type&&i.items||t.type==="tuple"){r.push(i);continue}if(!i.type||i.type==="boolean"||i.type==="integer"||i.type==="null"||i.type==="number"||i.type==="string"||i.type==="unknown"||i.type==="void"){let a=i.const!==void 0?`const-${i.const}`:"",p=i.format!==void 0&&e?`format-${i.format}`:"",c=`${i.$ref??""}${i.type??""}${a}${p}`;n.includes(c)||(n.push(c),r.push(i));continue}r.push(i);}let o={...t};if(o.items=r,o.items.length<=1&&o.type!=="array"&&o.type!=="enum"&&o.type!=="tuple"){let i=o.items[0];delete o.logicalOperator,delete o.items,o={...o,...i};}return o.type==="unknown"?{}:o};var Ur=e=>JSON.parse(JSON.stringify(e)),M=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var ko=({items:e,schema:t})=>{for(let r of e)t.accessScopes=M(t.accessScopes,r.accessScopes);t.items=e;},z=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(ko({items:e,schema:n}),n):e.length!==1?(ko({items:e,schema:n}),n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(ko({items:e,schema:n}),n):n;var lr=e=>!!(Aa(e.parameters)||e.body?.required),L=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,Ea=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return jo({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,o=n.$ref?e.resolveIrRef(n.$ref):n,a=("schema"in o?o.schema:o)?.properties?.[r.pagination];return a?{in:"body",name:r.pagination,schema:a}:jo({context:e,parameters:t.parameters})},vo=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},He=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},o;for(let p in e.responses){let c=e.responses[p];switch(vo({statusCode:p})){case "1XX":case "3XX":break;case "2XX":n.properties[p]=c.schema;break;case "4XX":case "5XX":r.properties[p]=c.schema;break;case "default":o=c;break}}if(o){let p=false;Object.keys(n.properties).length||(n.properties.default=o.schema,p=true);let c=(o.schema.description??"").toLocaleLowerCase(),l=(o.schema.$ref??"").toLocaleLowerCase();["success"].some(d=>c.includes(d)||l.includes(d))&&(n.properties.default=o.schema,p=true),["error","problem"].some(d=>c.includes(d)||l.includes(d))&&(r.properties.default=o.schema,p=true),p||(r.properties.default=o.schema);}let i=Object.keys(r.properties);if(i.length){r.required=i,t.errors=r;let p=z({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});p=G({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.error=p);}let a=Object.keys(n.properties);if(a.length){n.required=a,t.responses=n;let p=z({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});p=G({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.response=p);}return t};var Ca=/[\p{Lu}]/u,wo=/[\p{Ll}]/u,ja=/([\p{Alpha}\p{N}_]|$)/u,fr=/[_.\- `\\[\]{}\\/]+/,dl=new RegExp(`^${fr.source}`),qo=new RegExp(`${fr.source}${ja.source}`,"gu"),Na=new RegExp(`\\d+${ja.source}`,"gu"),ul=({case:e,string:t})=>{let r=false,n=false,o=false,i=false,a=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let p=0;p<t.length;p++){let c=t[p];i=p>2?t[p-3]===a:true;let l=p+1,m=t[l];for(fr.lastIndex=0;m&&fr.test(m);)l+=1,m=t[l];let f=l!==p+1;if(wo.lastIndex=0,Ca.lastIndex=0,Ca.test(c)&&(r||m&&!f&&m!=="s"&&wo.test(m)))t=`${t.slice(0,p)}${a}${t.slice(p)}`,p++,o=n,r=false,n=true;else if(n&&o&&wo.test(c)&&!i&&!(c==="s"&&(!m||m.toLocaleLowerCase()!==m)))t=`${t.slice(0,p-1)}${a}${t.slice(p-1)}`,o=n,r=true,n=false;else {let d=c.toLocaleLowerCase(),u=c.toLocaleUpperCase();o=n,r=d===c&&u!==c,n=u===c&&d!==c;}}return t},k=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(fr.lastIndex=0,fr.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=ul({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace(dl,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(qo,(i,a,p)=>p===0&&!t?i:`_${a}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(qo.lastIndex=0,Na.lastIndex=0,n=n.replaceAll(Na,(i,a,p)=>["_","-","."].includes(n.charAt(p+i.length))?i:i.toLocaleUpperCase()),n=n.replaceAll(qo,(i,a,p)=>p===0&&!t&&i[0]&&r.startsWith(i[0])?i:a.toLocaleUpperCase())),n):""};var qe=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return sr.lastIndex=0,sr.test(t)?`_${t}`:t},ft=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),$o=e=>{let t=e.replace("[]","Array");return ft(t)};var ae=["delete","get","head","options","patch","post","put","trace"],_t=({context:e,count:t=1,id:r,method:n,path:o,state:i})=>{let a,{output:p}=e.config,c=(p!==void 0&&typeof p=="object"&&"case"in p?p.case:void 0)??"camelCase";if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].config.operationId))a=k({case:c,value:ft(r)});else {let l=o.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");a=k({case:c,value:`${n}-${l}`});}return t>1&&(a=`${a}${t}`),i.ids.has(a)?_t({context:e,count:t+1,id:r,method:n,path:o,state:i}):(i.ids.set(a,L({method:n,path:o})),a)};var ka="/",j=(e,t="")=>`${e}${ka}${t}`,ie=e=>{let t=e.indexOf(ka);return {name:e.slice(t+1),namespace:e.slice(0,t)}},va=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},Ze=(e,t)=>{let r=[],n=[];if(t)for(let o of t)o.startsWith("/")&&o.endsWith("/")?n.push(new RegExp(o.slice(1,o.length-1))):r.push(j(e,o));return {regexps:n,set:new Set(r)}},yl=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:n,spec:o})=>{if((e.regexps.length||r.regexps.length)&&o.paths)for(let i of Object.entries(o.paths)){let a=i[0],p=i[1];for(let c of ae){if(!p[c])continue;let m=L({method:c,path:a});e.regexps.some(f=>f.test(m))&&e.set.add(j("operation",m)),r.regexps.some(f=>f.test(m))&&r.set.add(j("operation",m));}}if(o.definitions&&(t.regexps.length||n.regexps.length))for(let i of Object.keys(o.definitions))t.regexps.some(a=>a.test(i))&&t.set.add(j("schema",i)),n.regexps.some(a=>a.test(i))&&n.set.add(j("schema",i));},hl=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:n,excludeSchemas:o,includeOperations:i,includeParameters:a,includeRequestBodies:p,includeResponses:c,includeSchemas:l,spec:m})=>{if((e.regexps.length||i.regexps.length)&&m.paths)for(let f of Object.entries(m.paths)){let d=f[0],u=f[1];for(let y of ae){if(!u[y])continue;let x=L({method:y,path:d});e.regexps.some(b=>b.test(x))&&e.set.add(j("operation",x)),i.regexps.some(b=>b.test(x))&&i.set.add(j("operation",x));}}if(m.components){if((t.regexps.length||a.regexps.length)&&m.components.parameters)for(let f of Object.keys(m.components.parameters))t.regexps.some(d=>d.test(f))&&t.set.add(j("parameter",f)),a.regexps.some(d=>d.test(f))&&a.set.add(j("parameter",f));if((r.regexps.length||p.regexps.length)&&m.components.requestBodies)for(let f of Object.keys(m.components.requestBodies))r.regexps.some(d=>d.test(f))&&r.set.add(j("body",f)),p.regexps.some(d=>d.test(f))&&p.set.add(j("body",f));if((n.regexps.length||c.regexps.length)&&m.components.responses)for(let f of Object.keys(m.components.responses))n.regexps.some(d=>d.test(f))&&n.set.add(j("response",f)),c.regexps.some(d=>d.test(f))&&c.set.add(j("response",f));if((o.regexps.length||l.regexps.length)&&m.components.schemas)for(let f of Object.keys(m.components.schemas))o.regexps.some(d=>d.test(f))&&o.set.add(j("schema",f)),l.regexps.some(d=>d.test(f))&&l.set.add(j("schema",f));}},gl=({spec:e,...t})=>{"swagger"in e?yl({...t,spec:e}):hl({...t,spec:e});},dr=(e,t,r)=>{let n=r.timeEvent("create-filters"),o=Ze("operation",e?.operations?.exclude),i=Ze("operation",e?.operations?.include),a=Ze("parameter",e?.parameters?.exclude),p=Ze("parameter",e?.parameters?.include),c=Ze("body",e?.requestBodies?.exclude),l=Ze("body",e?.requestBodies?.include),m=Ze("response",e?.responses?.exclude),f=Ze("response",e?.responses?.include),d=Ze("schema",e?.schemas?.exclude),u=Ze("schema",e?.schemas?.include);gl({excludeOperations:o,excludeParameters:a,excludeRequestBodies:c,excludeResponses:m,excludeSchemas:d,includeOperations:i,includeParameters:p,includeRequestBodies:l,includeResponses:f,includeSchemas:u,spec:t});let y={deprecated:e?.deprecated??true,operations:{exclude:o.set,include:i.set},orphans:e?.orphans??false,parameters:{exclude:a.set,include:p.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:c.set,include:l.set},responses:{exclude:m.set,include:f.set},schemas:{exclude:d.set,include:u.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}};return n.timeEnd(),y},ur=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,xl=({filters:e,parameters:t,requestBodies:r,resourceMetadata:n,responses:o,schemas:i})=>{let a=new Set,c=[...e.operations.include.size?e.operations.include:new Set(n.operations.keys())];for(;c.length;){let l=c.pop();if(e.operations.exclude.has(l)||a.has(l))continue;let m=n.operations.get(l);m&&(!e.deprecated&&m.deprecated||e.tags.exclude.size&&m.tags.size&&[...e.tags.exclude].some(f=>m.tags.has(f))||e.tags.include.size&&!new Set([...e.tags.include].filter(f=>m.tags.has(f))).size||[...m.dependencies].some(f=>{let{namespace:d}=ie(f);switch(d){case "body":return !r.has(f);case "parameter":return !t.has(f);case "response":return !o.has(f);case "schema":return !i.has(f);default:return  false}})||a.add(l));}return {operations:a}},bl=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,i=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;i.length;){let a=i.pop();if(e.parameters.exclude.has(a)||n.has(a))continue;let p=t.parameters.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:l}=ie(c);switch(l){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {parameters:n}},Sl=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,i=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;i.length;){let a=i.pop();if(e.requestBodies.exclude.has(a)||n.has(a))continue;let p=t.requestBodies.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:l}=ie(c);switch(l){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {requestBodies:n}},Ol=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,i=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;i.length;){let a=i.pop();if(e.responses.exclude.has(a)||n.has(a))continue;let p=t.responses.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:l}=ie(c);switch(l){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {responses:n}},Tl=({filters:e,resourceMetadata:t})=>{let r=new Set,o=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;o.length;){let i=o.pop();if(e.schemas.exclude.has(i)||r.has(i))continue;let a=t.schemas.get(i);if(a&&!(!e.deprecated&&a.deprecated)&&(r.add(i),!!a.dependencies.size))for(let p of a.dependencies){let{namespace:c}=ie(p);switch(c){case "schema":{!r.has(p)&&!e.schemas.exclude.has(p)&&o.push(p);break}}}}return {schemas:r}},Rl=({filters:e,parameters:t,resourceMetadata:r})=>{if(e.parameters.exclude.size)for(let n of t){let o=r.parameters.get(n);if(o?.dependencies.size){for(let i of e.parameters.exclude)if(o.dependencies.has(i)){t.delete(n);break}}}},Il=({filters:e,requestBodies:t,resourceMetadata:r})=>{if(e.requestBodies.exclude.size)for(let n of t){let o=r.requestBodies.get(n);if(o?.dependencies.size){for(let i of e.requestBodies.exclude)if(o.dependencies.has(i)){t.delete(n);break}}}},Pl=({filters:e,resourceMetadata:t,responses:r})=>{if(e.responses.exclude.size)for(let n of r){let o=t.responses.get(n);if(o?.dependencies.size){for(let i of e.responses.exclude)if(o.dependencies.has(i)){r.delete(n);break}}}},Al=({filters:e,resourceMetadata:t,schemas:r})=>{if(e.schemas.exclude.size)for(let n of r){let o=t.schemas.get(n);if(o?.dependencies.size){for(let i of e.schemas.exclude)if(o.dependencies.has(i)){r.delete(n);break}}}},El=({operationDependencies:e,parameters:t,requestBodies:r,responses:n,schemas:o})=>{for(let i of o)e.has(i)||o.delete(i);for(let i of t)e.has(i)||t.delete(i);for(let i of r)e.has(i)||r.delete(i);for(let i of n)e.has(i)||n.delete(i);},Cl=({operations:e,resourceMetadata:t})=>{let r=new Set,o=[...new Set([...e].flatMap(i=>[...t.operations.get(i)?.dependencies??[]]))];for(;o.length;){let i=o.pop();if(r.has(i))continue;r.add(i);let{namespace:a}=ie(i),p;if(a==="body"?p=t.requestBodies.get(i)?.dependencies:a==="operation"?p=t.operations.get(i)?.dependencies:a==="parameter"?p=t.parameters.get(i)?.dependencies:a==="response"?p=t.responses.get(i)?.dependencies:a==="schema"&&(p=t.schemas.get(i)?.dependencies),!!p?.size)for(let c of p)r.has(c)||o.push(c);}return {operationDependencies:r}},yr=({filters:e,logger:t,resourceMetadata:r})=>{let n=t.timeEvent("create-filtered-dependencies"),{schemas:o}=Tl({filters:e,resourceMetadata:r}),{parameters:i}=bl({filters:e,resourceMetadata:r,schemas:o}),{requestBodies:a}=Sl({filters:e,resourceMetadata:r,schemas:o}),{responses:p}=Ol({filters:e,resourceMetadata:r,schemas:o});Al({filters:e,resourceMetadata:r,schemas:o}),Rl({filters:e,parameters:i,resourceMetadata:r}),Il({filters:e,requestBodies:a,resourceMetadata:r}),Pl({filters:e,resourceMetadata:r,responses:p});let{operations:c}=xl({filters:e,parameters:i,requestBodies:a,resourceMetadata:r,responses:p,schemas:o});if(!e.orphans&&c.size){let{operationDependencies:l}=Cl({operations:c,resourceMetadata:r});El({operationDependencies:l,parameters:i,requestBodies:a,responses:p,schemas:o});}return n.timeEnd(),{operations:c,parameters:i,requestBodies:a,responses:p,schemas:o}};var hr=(e,t)=>{let r=t.timeEvent("build-resource-metadata"),n={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},o=i=>{let a=new Set,p=e.allDependencies.get(i);if(p?.size)for(let c of p){let l=Qe(c),m=l[l.length-2],f=l[l.length-1];if(m&&f){let d=va(m);d==="unknown"&&console.warn(`unsupported type: ${m}`),a.add(j(d,f));}}return a};for(let[i,a]of e.nodes){let p=Qe(i);if(p[0]==="components"){if(p.length===3){if(p[1]==="schemas"){let c=p[p.length-1];n.schemas.set(j("schema",c),{dependencies:o(i),deprecated:a.deprecated??false});}else if(p[1]==="parameters"){let c=p[p.length-1];n.parameters.set(j("parameter",c),{dependencies:o(i),deprecated:a.deprecated??false});}else if(p[1]==="requestBodies"){let c=p[p.length-1];n.requestBodies.set(j("body",c),{dependencies:o(i),deprecated:a.deprecated??false});}else if(p[1]==="responses"){let c=p[p.length-1];n.responses.set(j("response",c),{dependencies:o(i),deprecated:a.deprecated??false});}}continue}if(p[0]==="paths"){if(p.length===3&&ae.includes(p[2])){let c=p[p.length-1],l=p.slice(1,-1).join("/"),m=L({method:c,path:l});n.operations.set(j("operation",m),{dependencies:o(i),deprecated:a.deprecated??false,tags:a.tags??new Set});}continue}if(p[0]==="definitions"){if(p.length===2){let c=p[p.length-1];n.schemas.set(j("schema",c),{dependencies:o(i),deprecated:a.deprecated??false});}continue}}return r.timeEnd(),{resourceMetadata:n}};var O=({config:e,name:t})=>{if(typeof e.name=="function")t=e.name(t);else if(e.name){let r=e.case==="preserve"?"":"-";t=e.name.replace("{{name}}",`${r}${t}${r}`);}return k({case:e.case,value:t})};var Nt=[["additionalProperties","single"],["allOf","array"],["anyOf","array"],["contains","single"],["dependentSchemas","objectMap"],["else","single"],["if","single"],["items","singleOrArray"],["oneOf","array"],["patternProperties","objectMap"],["properties","objectMap"],["propertyNames","single"],["then","single"]];var Xr=e=>{if(wn(e))return e.components.schemas;if(qn(e))return e.definitions},wn=e=>typeof e=="object"&&e!==null&&"components"in e&&typeof e.components=="object"&&e.components!==null&&"schemas"in e.components&&typeof e.components.schemas=="object"&&e.components.schemas!==null,qn=e=>typeof e=="object"&&e!==null&&"definitions"in e&&typeof e.definitions=="object"&&e.definitions!==null;var wa=(e,t)=>e instanceof Set?e.has(t):e instanceof Array?e.includes(t):t in e,Gr=({base:e,components:t,extraComponents:r})=>{let n=2,o=e;for(;wa(t,o)||r&&wa(r,o);)o=`${e}${n}`,n+=1;return o},$n=e=>e.length===3&&e[0]==="components"&&e[1]==="schemas"||e.length===2&&e[0]==="definitions",gr=e=>{if(e&&typeof e=="object"){if("swagger"in e)return "#/definitions/";if("openapi"in e)return "#/components/schemas/"}return ""};var Fo=e=>{if(!e||typeof e!="object"||!("enum"in e)||!(e.enum instanceof Array))return;let t=("type"in e?e.type:void 0)||"",r=[...e.enum].sort();return JSON.stringify({type:t,values:r})},Mo=({key:e,node:t,parent:r,path:n,visitor:o})=>{if(!t||typeof t!="object"||t instanceof Array)return;let i=t;("type"in i||"enum"in i||Nt.some(([a])=>a in i))&&o({key:e,node:t,parent:r,path:n});for(let[a,p]of Object.entries(i))typeof p=="object"&&p!==null&&(p instanceof Array?p.forEach((c,l)=>Mo({key:l,node:c,parent:p,path:[...n,a,l],visitor:o})):Mo({key:a,node:p,parent:t,path:[...n,a],visitor:o}));},Nl=({spec:e})=>{let t=Xr(e);if(!t)return;let r=gr(e),n={};for(let[i,a]of Object.entries(t))Fo(a)&&(n[`${r}${i}`]=a);let o=i=>{if(i instanceof Array)i.forEach(o);else if(i&&typeof i=="object")for(let[a,p]of Object.entries(i))a==="$ref"&&typeof p=="string"&&p in n?(Object.assign(i,Ur(n[p])),delete i.$ref):o(p);};o(e);for(let i of Object.keys(n)){let a=Qe(i),p=a[a.length-1];p&&delete t[p];}},jl=({config:e,spec:t})=>{let r=Xr(t);if(!r)return;let n={};for(let[c,l]of Object.entries(r)){let m=Fo(l);m&&(n[m]=c);}let o=[];Mo({key:null,node:t,parent:null,path:[],visitor:c=>{if(!$n(c.path)){let l=Fo(c.node);l&&o.push({...c,signature:l});}}});let i={},a={};for(let{key:c,node:l,signature:m}of o){if(m in i)continue;if(m in n){i[m]=n[m];continue}let f=O({config:e,name:typeof l=="object"&&l&&"title"in l&&typeof l.title=="string"?l.title:String(c)}),d=Gr({base:f,components:r,extraComponents:Object.values(i)});i[m]=d,a[m]=l;}for(let[c,l]of Object.entries(i)){let m=a[c];l&&!(l in r)&&m&&typeof m=="object"&&(r[l]=m);}let p=gr(t);for(let{key:c,parent:l,signature:m}of o){let f=i[m];f&&c!=null&&l&&typeof l=="object"&&(l[c]={$ref:`${p}${f}`});}},qa=({config:e,spec:t})=>{if(e.mode==="inline"){Nl({spec:t});return}if(e.mode==="root"){jl({config:e,spec:t});return}};var Lo=(e,t)=>{if(e===t)return  true;if(e===null||t===null)return e===t;let r=typeof e;if(r!==typeof t||r!=="object")return  false;if(Array.isArray(e)||Array.isArray(t)){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return  false;for(let c=0;c<e.length;c++)if(!Lo(e[c],t[c]))return  false;return  true}let o=e,i=t,a=Object.keys(o).sort(),p=Object.keys(i).sort();if(a.length!==p.length)return  false;for(let c=0;c<a.length;c++)if(a[c]!==p[c])return  false;for(let c of a)if(!Lo(o[c],i[c]))return  false;return  true},Do=Lo;var kl=e=>{for(let[,t]of e)if(!t.scopes&&t.parentPointer){let r=e.get(t.parentPointer);r?.scopes&&(t.scopes=new Set(r.scopes));}},Bo=({cache:e,graph:t,pointer:r,visited:n})=>{let o=e.allDependencies.get(r);if(o)return o;if(n.has(r))return new Set;if(n.add(r),!t.nodes.get(r))return new Set;let a=new Set,p=t.dependencies.get(r);if(p)for(let l of p){a.add(l);let m=Bo({cache:e,graph:t,pointer:l,visited:n});for(let f of m)a.add(f);}let c=e.parentToChildren.get(r);if(c)for(let l of c){let m=e.childDependencies.get(l);m||(m=Bo({cache:e,graph:t,pointer:l,visited:n}),e.childDependencies.set(l,m));for(let f of m)a.add(f);}return e.allDependencies.set(r,a),a},vl=e=>{let t=new Set(Array.from(e.nodes.entries()).filter(([,o])=>o.scopes&&o.scopes.size>0).map(([o])=>o)),r=(o,i,a)=>{i.parentPointer&&t.add(i.parentPointer);let p=e.reverseDependencies.get(o);if(p)for(let c of p)t.add(c);if(a){let c=a.match(/(.*)\/(allOf|anyOf|oneOf)\/\d+$/);if(c){let l=c[1];l&&t.add(l);}}},n=(o,i,a)=>{if(!i?.scopes)return;let p=e.nodes.get(a);if(!p?.scopes)return;Vo(p,i)&&r(o,i,a);};for(;t.size>0;){let o=t.values().next().value;t.delete(o);let i=e.nodes.get(o);if(!i)continue;i.scopes||(i.scopes=new Set);let a=i.node;for(let[c,l]of Nt){if(!a||typeof a!="object"||!(c in a))continue;let m=a[c];if(l==="array"&&m instanceof Array)for(let f=0;f<m.length;f++){let d=`${o}/${c}/${f}`;n(o,i,d);}else if(l==="objectMap"&&typeof m=="object"&&m!==null&&!(m instanceof Array))for(let f of Object.keys(m)){let d=`${o}/${c}/${f}`;n(o,i,d);}else if(l==="single"&&typeof m=="object"&&m!==null){let f=`${o}/${c}`;n(o,i,f);}else if(l==="singleOrArray"){if(m instanceof Array)for(let f=0;f<m.length;f++){let d=`${o}/${c}/${f}`;n(o,i,d);}else if(typeof m=="object"&&m!==null){let f=`${o}/${c}`;n(o,i,f);}}}let p=e.dependencies.get(o);if(p)for(let c of p){let l=e.nodes.get(c);l?.scopes&&Vo(l,i)&&r(o,i);}if(i.parentPointer){let c=e.nodes.get(i.parentPointer);c&&Vo(i,c)&&r(i.parentPointer,c);}}},Vo=(e,t)=>{if(!e.scopes)return  false;t.scopes||(t.scopes=new Set);let r=false;for(let n of e.scopes)t.scopes.has(n)||(t.scopes.add(n),r=true);return r},wl=e=>{for(let[t,r]of e){let{node:n}=r;typeof n!="object"||n===null||n instanceof Array||("readOnly"in n&&n.readOnly===true?r.scopes=new Set(["read"]):"writeOnly"in n&&n.writeOnly===true?r.scopes=new Set(["write"]):t.match(/\/properties\/[^/]+$/)&&(r.scopes=new Set(["normal"])));}},jt=(e,t)=>{let r=t.timeEvent("build-graph"),n={allDependencies:new Map,dependencies:new Map,nodes:new Map,reverseDependencies:new Map},o=({key:a,node:p,parentPointer:c,path:l})=>{if(typeof p!="object"||p===null)return;let m=Pa(l),f,d;if(typeof p=="object"&&p!==null){if("deprecated"in p&&typeof p.deprecated=="boolean"&&(f=!!p.deprecated),"$ref"in p&&typeof p.$ref=="string"){let u=Ia(p.$ref);n.dependencies.has(m)||n.dependencies.set(m,new Set),n.dependencies.get(m).add(u);}"tags"in p&&p.tags instanceof Array&&(d=new Set(p.tags.filter(u=>typeof u=="string")));}if(n.nodes.set(m,{deprecated:f,key:a,node:p,parentPointer:c,tags:d}),p instanceof Array)p.forEach((u,y)=>o({key:y,node:u,parentPointer:m,path:[...l,y]}));else for(let[u,y]of Object.entries(p))o({key:u,node:y,parentPointer:m,path:[...l,u]});};o({key:null,node:e,parentPointer:null,path:[]});let i={allDependencies:new Map,childDependencies:new Map,parentToChildren:new Map};for(let[a,p]of n.nodes){let c=p.parentPointer;c&&(i.parentToChildren.has(c)||i.parentToChildren.set(c,[]),i.parentToChildren.get(c).push(a));}for(let[a,p]of n.dependencies)for(let c of p)n.reverseDependencies.has(c)||n.reverseDependencies.set(c,new Set),n.reverseDependencies.get(c).add(a);wl(n.nodes),vl(n),kl(n.nodes);for(let a of n.nodes.keys()){let p=Bo({cache:i,graph:n,pointer:a,visited:new Set});n.allDependencies.set(a,p);}return r.timeEnd(),{graph:n}};var ql=new Set(["additionalProperties","allOf","anyOf","items","not","oneOf","patternProperties","properties","schema"]),$l=e=>{if(e.length===3&&e[0]==="components"){let t=e[1];if(t==="parameters"||t==="requestBodies")return "write";if(t==="responses"||t==="headers")return "read"}if(e.length===2){let t=e[0];if(t==="parameters")return "write";if(t==="responses")return "read"}},Fl=(e,t)=>{let r=t.timeEvent("capture-original-schemas"),n={};if(wn(e))for(let[o,i]of Object.entries(e.components.schemas))n[`#/components/schemas/${o}`]=i;else if(qn(e))for(let[o,i]of Object.entries(e.definitions))n[`#/definitions/${o}`]=i;return r.timeEnd(),n},Ml=({logger:e,spec:t,split:r})=>{let n=e.timeEvent("insert-split-schemas-into-spec");wn(t)?Object.assign(t.components.schemas,r.schemas):qn(t)&&Object.assign(t.definitions,r.schemas),n.timeEnd();},Qt=(e,t,r)=>{if(t&&typeof t=="object"){if("$ref"in t&&typeof t.$ref=="string"){let n=e.nodes.get(t.$ref);if(n?.scopes&&(r==="writeOnly"&&n.scopes.size===1&&n.scopes.has("write")||r==="readOnly"&&n.scopes.size===1&&n.scopes.has("read"))&&(delete t.$ref,!Nt.some(([o])=>o in t)))return  true}for(let[n,o]of Nt){if(!(n in t))continue;let i=t[n];if(o==="array"&&i instanceof Array){for(let a=i.length-1;a>=0;a--){let p=i[a];(p&&typeof p=="object"&&p[r]===true||Qt(e,p,r))&&i.splice(a,1);}i.length||delete t[n];}else if(o==="objectMap"&&typeof i=="object"&&i!==null&&!(i instanceof Array)){let a=i,p=new Set;for(let c of Object.keys(a)){let l=a[c];(l&&typeof l=="object"&&l[r]===true||Qt(e,l,r))&&(delete a[c],n==="properties"&&p.add(c));}if(p.size>0&&n==="properties"&&"required"in t&&Array.isArray(t.required)){let l=t.required.filter(m=>!p.has(m));l.length===0?delete t.required:t.required=l;}Object.keys(a).length||delete t[n];}else if(o==="single"&&typeof i=="object"&&i!==null)(i[r]===true||Qt(e,i,r))&&delete t[n];else if(o==="singleOrArray")if(i instanceof Array){for(let a=i.length-1;a>=0;a--){let p=i[a];(p&&typeof p=="object"&&p[r]===true||Qt(e,p,r))&&i.splice(a,1);}i.length||delete t[n];}else typeof i=="object"&&i!==null&&(i[r]===true||Qt(e,i,r))&&delete t[n];}if(t.type==="object"&&!Nt.some(([n])=>n in t))return  true}return  false},Ll=({logger:e,originalSchemas:t,spec:r,split:n})=>{let o=e.timeEvent("remove-original-split-schemas"),i=Xr(r);for(let a of Object.keys(n.mapping)){let p=Qe(a),c=p[p.length-1];typeof c=="string"&&i&&Object.prototype.hasOwnProperty.call(i,c)&&i[c]===t[a]&&delete i[c];}o.timeEnd();},Dl=({config:e,graph:t,logger:r,spec:n})=>{let o=r.timeEvent("split-schemas"),i=new Set,a={mapping:{},reverseMapping:{},schemas:{}},p=gr(n),c=p.split("/").length-1,l=m=>{if(m.startsWith(p)){let f=Qe(m);if(f.length===c)return f[c-1]||""}return ""};for(let m of t.nodes.keys()){let f=l(m);f&&i.add(f);}for(let[m,f]of t.nodes){let d=l(m);if(!d||!(f.scopes?.has("read")||f.scopes?.has("write"))||!f.scopes?.has("normal"))continue;let u=Ur(f.node);Qt(t,u,"writeOnly");let y=O({config:e.responses,name:d}),g=y===d?y:Gr({base:y,components:i});i.add(g),a.schemas[g]=u;let x=`${p}${g}`,b=Ur(f.node);if(Qt(t,b,"readOnly"),Do(u,b)&&Do(u,f.node))continue;let P=O({config:e.requests,name:d}),C=P===d&&P!==g?P:Gr({base:P,components:i});i.add(C),a.schemas[C]=b;let $=`${p}${C}`;a.mapping[m]={read:x,write:$},a.reverseMapping[x]=m,a.reverseMapping[$]=m;}return o.timeEnd(),a},Vl=({logger:e,spec:t,split:r})=>{let n=e.timeEvent("update-refs-in-spec"),o=gr(t),i=({context:a,currentPointer:p,inSchema:c,node:l,path:m})=>{if(l instanceof Array)l.forEach((f,d)=>i({context:a,currentPointer:p,inSchema:c,node:f,path:[...m,d]}));else if(l&&typeof l=="object"){let f=p,d=a;if($n(m)){let y=m[m.length-1];f=`${o}${y}`;let g=r.reverseMapping[f];if(g){let x=r.mapping[g];x?.read===f?d="read":x?.write===f&&(d="write");}}let u=$l(m);if(u!==void 0){for(let y in l)Object.prototype.hasOwnProperty.call(l,y)&&i({context:u,currentPointer:f,inSchema:false,node:l[y],path:[...m,y]});return}for(let y in l){if(!Object.prototype.hasOwnProperty.call(l,y))continue;let g=l[y];if(!c){if(y==="requestBody"){i({context:"write",currentPointer:f,inSchema:false,node:g,path:[...m,y]});continue}if(y==="responses"){i({context:"read",currentPointer:f,inSchema:false,node:g,path:[...m,y]});continue}if(y==="parameters"&&Array.isArray(g)){g.forEach((x,b)=>{x&&typeof x=="object"&&"schema"in x&&i({context:"write",currentPointer:f,inSchema:true,node:x.schema,path:[...m,y,b,"schema"]}),x&&typeof x=="object"&&"content"in x&&i({context:"write",currentPointer:f,inSchema:false,node:x.content,path:[...m,y,b,"content"]});});continue}if(y==="headers"&&typeof g=="object"&&g!==null){for(let x in g)Object.prototype.hasOwnProperty.call(g,x)&&i({context:"read",currentPointer:f,inSchema:false,node:g[x],path:[...m,y,x]});continue}}if(ql.has(y))i({context:d,currentPointer:f,inSchema:true,node:g,path:[...m,y]});else if(y==="$ref"&&typeof g=="string"){let x=r.mapping[g];x&&(x.read&&(!d||d==="read")?l[y]=x.read:x.write&&(!d||d==="write")&&(l[y]=x.write));}else i({context:d,currentPointer:f,inSchema:c,node:g,path:[...m,y]});}}};i({context:null,currentPointer:null,inSchema:false,node:t,path:[]}),n.timeEnd();},$a=({config:e,logger:t,spec:r})=>{let{graph:n}=jt(r,t),o=Fl(r,t),i=Dl({config:e,graph:n,logger:t,spec:r});Ml({logger:t,spec:r,split:i}),Vl({logger:t,spec:r,split:i}),Ll({logger:t,originalSchemas:o,spec:r,split:i});};var xr=({context:e})=>{let{logger:t}=e,r=t.timeEvent("transform-openapi-spec");e.config.parser.transforms.enums.enabled&&qa({config:e.config.parser.transforms.enums,spec:e.spec}),e.config.parser.transforms.readWrite.enabled&&$a({config:e.config.parser.transforms.readWrite,logger:t,spec:e.spec}),r.timeEnd();};var v=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var Bl=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),Kl=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:Bl(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),Wl=e=>{let t=Kl(e.path),r=e.severity==="error"?At.bold.red:At.bold.yellow,n=e.message.replace(/`([^`]+)`/g,(o,i)=>At.yellow(`\`${i}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${At.cyan(t)}: ${n}`},zl=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,br=({context:e,result:t})=>{for(let r of t.issues)zl({context:e,issue:r})&&console.log(Wl(r));t.valid||process.exit(1);};var Fa=({logger:e,operations:t,preserveOrder:r,schemas:n,spec:o})=>{let i=e.timeEvent("filter-spec");if(o.definitions){let a={};if(r)for(let[p,c]of Object.entries(o.definitions))n.has(j("schema",p))&&(a[p]=c);else for(let p of n){let{name:c}=ie(p),l=o.definitions[c];l&&(a[c]=l);}o.definitions=a;}if(o.paths)for(let a of Object.entries(o.paths)){let p=a[0],c=a[1];for(let l of ae){if(!c[l])continue;let f=j("operation",L({method:l,path:p}));t.has(f)||delete c[l];}Object.keys(c).length||delete o.paths[p];}i.timeEnd();};var Ma=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,La=/^application\/(.*\+)?json(;.*)?$/i,Da=/^multipart\/form-data(;.*)?$/i,Va=/^text\/[a-z0-9.+-]+(;.*)?$/i,Ba=/^application\/x-www-form-urlencoded(;.*)?$/i,Ka=/^application\/octet-stream(;.*)?$/i,dt=({mediaType:e})=>(Ma.lastIndex=0,Ma.test(e)),Sr=({mediaType:e})=>{if(La.lastIndex=0,La.test(e))return "json";if(Da.lastIndex=0,Da.test(e))return "form-data";if(Va.lastIndex=0,Va.test(e))return "text";if(Ba.lastIndex=0,Ba.test(e))return "url-search-params";if(Ka.lastIndex=0,Ka.test(e))return "octet-stream"};var Wa=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&dt({mediaType:t})?{...r,format:"binary"}:r:dt({mediaType:t})?{format:"binary",type:"string"}:void 0},Ko=({mimeTypes:e,response:t})=>{let r=[];for(let n of e??[])r.push({mediaType:n,schema:t.schema,type:Sr({mediaType:n})});return r};function Ie(e){let t=`^(${e.keywords.join("|")})$`;return new RegExp(t)}var Ue=(e,t,r)=>{let n=[];for(let o in t)t[o]===e&&n.push(o);return !n.length&&(!r||r())?[D(e)]:n};var Jr=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},_l=({irSchema:e,schema:t})=>{t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Mn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=M(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=M(e.accessScopes,["both"]));},Ql=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=Pe({context:e,schema:r.items,state:n});if(t.accessScopes=M(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let a=r.items.allOf;a&&a.length>1&&!r.items["x-nullable"]?t={...t,...i}:o.push(i);}}return t=z({items:o,schema:t}),t},Hl=({irSchema:e={}})=>(e.type="boolean",e),Zl=({irSchema:e={},schema:t})=>(e.type=t.type,e),Ul=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=Pe({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=M(t.accessScopes,p.accessScopes),o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")n.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=Pe({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},Xl=({irSchema:e={}})=>(e.type="string",e),Or=({schema:e})=>{let t={};return _l({irSchema:t,schema:e}),t},Gl=({context:e,schema:t,state:r})=>{let n=Or({schema:t}),o=[],i=Jr({schema:t}),a=t.allOf;for(let p of a){let l="$ref"in p?r:{...r,inAllOf:true},m=Pe({context:e,schema:p,state:l});if(n.accessScopes=M(n.accessScopes,m.accessScopes),t.required&&(m.required?m.required=[...m.required,...t.required]:m.required=t.required),o.push(m),p.$ref){let f=e.resolveRef(p.$ref);if(f.discriminator&&r.$ref){let u=Ue(r.$ref).map(g=>({const:g,type:"string"})),y={properties:{[f.discriminator]:u.length>1?{items:u,logicalOperator:"or"}:u[0]},type:"object"};f.required?.includes(f.discriminator)&&(y.required=[f.discriminator]),o.push(y);}if(!r.circularReferenceTracker.has(p.$ref)){let d=Pe({context:e,schema:f,state:{...r,$ref:p.$ref}});n.accessScopes=M(n.accessScopes,d.accessScopes);}}}if(i==="object"){let p=Yr({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=M(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let l of a){let m=l.$ref?e.resolveRef(l.$ref):l;if(Jr({schema:m})==="object"){let f=Yr({context:e,schema:{...m,type:"object"},state:r});if(n.accessScopes=M(n.accessScopes,f.accessScopes),f.properties?.[c]){p.properties[c]=f.properties[c];break}}}o.push(p);}}if(n=z({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},Jl=({context:e,schema:t,state:r})=>{let n=Or({schema:t});n.type="enum";let o=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let l=Yr({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});l.const=a,c==="null"&&(l.type=c),l.type==="array"&&(l.type="tuple"),n.accessScopes=M(n.accessScopes,l.accessScopes),o.push(l);}return n=z({items:o,schema:n}),n},Yl=({context:e,schema:t,state:r})=>{let n={};if(!t.$ref.startsWith("#/definitions/")&&!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref);return Pe({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}})}if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref),a=Pe({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=M(n.accessScopes,a.accessScopes);}return n},ef=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=Or({schema:r}));let o={};Mn({irSchema:o,schema:r,state:n}),o.default===null&&delete o.default;let i=[Yr({context:e,irSchema:o,schema:r,state:n}),{type:"null"}];return t=z({items:i,schema:t}),t},tf=({context:e,schema:t,state:r})=>{let n=Or({schema:t});Mn({irSchema:n,schema:t,state:r});let o=Jr({schema:t});return o?t["x-nullable"]?ef({context:e,irSchema:n,schema:{...t,type:o},state:r}):Yr({context:e,irSchema:n,schema:{...t,type:o},state:r}):n},Yr=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=Or({schema:r}),Mn({irSchema:t,schema:r,state:n})),r.type){case "array":return Ql({context:e,irSchema:t,schema:r,state:n});case "boolean":return Hl({irSchema:t});case "integer":case "number":return Zl({irSchema:t,schema:r});case "object":return Ul({context:e,irSchema:t,schema:r,state:n});case "string":return Xl({irSchema:t});default:return za({irSchema:t,schema:r,state:n})}},za=({irSchema:e,schema:t,state:r})=>(e||(e=Or({schema:t})),e.type="unknown",Mn({irSchema:e,schema:t,state:r}),e),Pe=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Yl({context:e,schema:t,state:r}):t.enum?Jl({context:e,schema:t,state:r}):t.allOf?Gl({context:e,schema:t,state:r}):t.type||t.properties?tf({context:e,schema:t,state:r}):za({schema:t,state:r})),_a=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[D(e)]=Pe({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var rf=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",kt=({context:e,name:t,schema:r})=>{if(Ie(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref??"");if("in"in o&&o.in){let i="schema"in o?o.schema:{...o,in:void 0};return kt({context:e,name:t,schema:i})}return kt({context:e,name:t,schema:o})}if("in"in r){if(!r.in)return  false;let o="schema"in r?r.schema:{...r,in:void 0};return kt({context:e,name:t,schema:o})}for(let o in r.properties)if(Ie(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"&&!("$ref"in a)){let p=Jr({schema:a});if(rf(p))return o}}for(let o of r.allOf??[]){let i=kt({context:e,name:t,schema:o});if(i)return i}return  false};var nf=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},sf=({context:e,method:t,operation:r,path:n,state:o})=>{let i={id:_t({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),nf({irOperation:i,operation:r}),i},of=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{let a=sf({context:e,method:t,operation:r,path:n,state:i});r.parameters&&(a.parameters=r.parameters);let p=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},l=[];for(let m of r.requestBody??[]){let f="$ref"in m?e.resolveRef(m.$ref):m,d=f.in==="body"?f.schema:{...f,format:f.type==="file"?"binary":f.format,required:void 0,type:f.type==="file"?"string":f.type},u=Ko({mimeTypes:r.consumes,response:{schema:d}}),y=u.find(g=>g.type==="json")||u[0];if(y){let g=kt({context:e,name:"",schema:y.schema&&"$ref"in y.schema?{allOf:[{...y.schema}],description:f.description}:{description:f.description,...y.schema}}),x=Pe({context:e,schema:"$ref"in f?{allOf:[{...f,$ref:f.$ref,required:[],type:"string"}],description:f.description}:y.schema&&"$ref"in y.schema?{allOf:[{...y.schema}],description:f.description}:{description:f.description,...y.schema},state:void 0});c.mediaType=y.mediaType,f.in==="body"?c.schema=x:(c.schema.properties[f.name]=x,f.required&&l.push(f.name)),g&&(c.pagination=g),y.type&&(c.type=y.type);}f.required&&(p=true);}c.mediaType&&(l.length&&(c.schema.required=l),a.body=c,p&&(a.body.required=p));for(let m in r.responses){a.responses||(a.responses={});let f=r.responses[m],d="$ref"in f?e.resolveRef(f.$ref):f,u=Ko({mimeTypes:r.produces?r.produces:["application/json"],response:d}),y=u.find(g=>g.type==="json")||u[0];y?a.responses[m]={mediaType:y.mediaType,schema:Pe({context:e,schema:{description:d.description,...Wa({content:y})},state:void 0})}:a.responses[m]={schema:{description:d.description,type:m==="204"?"void":"unknown"}};}if(r.security){let m=new Map;for(let f of r.security)for(let d in f){let u=o.get(d);if(!u)continue;let y;if(u.type==="apiKey"&&(y=u),u.type==="basic"&&(y={description:u.description,scheme:"basic",type:"http"}),u.type==="oauth2")switch(y={description:u.description,flows:{},type:"oauth2"},u.flow){case "accessCode":y.flows.authorizationCode={authorizationUrl:u.authorizationUrl,scopes:u.scopes,tokenUrl:u.tokenUrl};break;case "application":y.flows.clientCredentials={scopes:u.scopes,tokenUrl:u.tokenUrl};break;case "implicit":y.flows.implicit={authorizationUrl:u.authorizationUrl,scopes:u.scopes};break;case "password":y.flows.password={scopes:u.scopes,tokenUrl:u.tokenUrl};break}y&&m.set(d,y);}m.size&&(a.security=Array.from(m.values()));}return a},vt=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),e.ir.paths[n][t]=of({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i});};var af=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},pf=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},ut=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let o of r){let i="$ref"in o?e.dereference(o):o;if(i.in==="body"||i.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(i);continue}n[i.in]||(n[i.in]={}),n[i.in][i.name.toLocaleLowerCase()]=cf({context:e,parameter:i});}return n},cf=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},o=kt({context:e,name:t.name,schema:n}),i=pf(t.in),c={allowReserved:false,explode:af(t.collectionFormat),location:t.in,name:t.name,schema:Pe({context:e,schema:n,state:void 0}),style:i};return t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c};var Qa=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,Xe=e=>{let t={host:"",path:"",port:"",protocol:""};Qa.lastIndex=0;let r=e.match(Qa);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let o=r[8]||"",i=r[2]||"";return i.length===1?t:{host:n,path:o==="/"?"":o,port:r[7]||"",protocol:i}};var Ha=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let i=Xe(e.config.input.path);t.length||i.protocol&&(t=[i.protocol]),r||(r=`${i.host}${i.port?`:${i.port}`:""}`);}t.length||(t=[""]);let o=t.map(i=>`${i?`${i}://`:""}${r}${n}`).filter(Boolean);o.length&&(e.ir.servers=o.map(i=>({url:i})));};var Za=(e,t)=>{let r=t.timeEvent("validate"),n=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of ae){if(c==="trace")continue;let l=p[c];if(!l)continue;let m=L({method:c,path:a});l.operationId&&(o.has(l.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:l.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):o.set(l.operationId,m));}}return r.timeEnd(),{issues:n,valid:!n.some(i=>i.severity==="error")}};var Wo=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=Za(e.spec,e.logger);br({context:e,result:o});}if(ur(e.config.parser.filters)){let o=dr(e.config.parser.filters,e.spec,e.logger),{graph:i}=jt(e.spec,e.logger),{resourceMetadata:a}=hr(i,e.logger),p=yr({filters:o,logger:e.logger,resourceMetadata:a});Fa({...p,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}xr({context:e});let r={ids:new Map},n=new Map;for(let o in e.spec.securityDefinitions){let i=e.spec.securityDefinitions[o];n.set(o,i);}if(e.spec.definitions)for(let o in e.spec.definitions){let i=`#/definitions/${o}`,a=e.spec.definitions[o];_a({$ref:i,context:e,schema:a});}Ha({context:e});for(let o in e.spec.paths){if(o.startsWith("x-"))continue;let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},c={context:e,operation:{...p,parameters:ut({context:e,operation:p,parameters:a.parameters})},path:o,securitySchemesMap:n,state:r};if(a.delete){let l=v({source:ut({context:e,operation:a.delete,parameters:a.delete.parameters}),target:c.operation.parameters});vt({...c,method:"delete",operation:{...c.operation,...a.delete,parameters:l}});}if(a.get){let l=v({source:ut({context:e,operation:a.get,parameters:a.get.parameters}),target:c.operation.parameters});vt({...c,method:"get",operation:{...c.operation,...a.get,parameters:l}});}if(a.head){let l=v({source:ut({context:e,operation:a.head,parameters:a.head.parameters}),target:c.operation.parameters});vt({...c,method:"head",operation:{...c.operation,...a.head,parameters:l}});}if(a.options){let l=v({source:ut({context:e,operation:a.options,parameters:a.options.parameters}),target:c.operation.parameters});vt({...c,method:"options",operation:{...c.operation,...a.options,parameters:l}});}if(a.patch){let l=v({source:ut({context:e,operation:a.patch,parameters:a.patch.parameters}),target:c.operation.parameters});vt({...c,method:"patch",operation:{...c.operation,...a.patch,parameters:l}});}if(a.post){let l=v({source:ut({context:e,operation:a.post,parameters:a.post.parameters}),target:c.operation.parameters});vt({...c,method:"post",operation:{...c.operation,...a.post,parameters:l}});}if(a.put){let l=v({source:ut({context:e,operation:a.put,parameters:a.put.parameters}),target:c.operation.parameters});vt({...c,method:"put",operation:{...c.operation,...a.put,parameters:l}});}}};var Ua=({logger:e,operations:t,parameters:r,preserveOrder:n,requestBodies:o,responses:i,schemas:a,spec:p})=>{let c=e.timeEvent("filter-spec");if(p.components){if(p.components.parameters){let l={};if(n)for(let[m,f]of Object.entries(p.components.parameters))r.has(j("parameter",m))&&(l[m]=f);else for(let m of r){let{name:f}=ie(m),d=p.components.parameters[f];d&&(l[f]=d);}p.components.parameters=l;}if(p.components.requestBodies){let l={};if(n)for(let[m,f]of Object.entries(p.components.requestBodies))o.has(j("body",m))&&(l[m]=f);else for(let m of o){let{name:f}=ie(m),d=p.components.requestBodies[f];d&&(l[f]=d);}p.components.requestBodies=l;}if(p.components.responses){let l={};if(n)for(let[m,f]of Object.entries(p.components.responses))i.has(j("response",m))&&(l[m]=f);else for(let m of i){let{name:f}=ie(m),d=p.components.responses[f];d&&(l[f]=d);}p.components.responses=l;}if(p.components.schemas){let l={};if(n)for(let[m,f]of Object.entries(p.components.schemas))a.has(j("schema",m))&&(l[m]=f);else for(let m of a){let{name:f}=ie(m),d=p.components.schemas[f];d&&(l[f]=d);}p.components.schemas=l;}}if(p.paths)for(let l of Object.entries(p.paths)){let m=l[0],f=l[1];for(let d of ae){if(!f[d])continue;let y=j("operation",L({method:d,path:m}));t.has(y)||delete f[d];}Object.keys(f).length||delete p.paths[m];}c.timeEnd();};var Xa=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&dt({mediaType:t})?{...r,format:"binary"}:r:dt({mediaType:t})?{format:"binary",type:"string"}:void 0},yt=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:Sr({mediaType:r})});return t};var Ht=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},mf=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Ln=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=M(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=M(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=M(e.accessScopes,["both"]));},lf=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=pe({context:e,schema:r.items,state:n});if(t.accessScopes=M(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!r.items.nullable?t={...t,...i}:o.push(i);}}return t=z({items:o,schema:t}),t},ff=({irSchema:e={}})=>(e.type="boolean",e),df=({irSchema:e={},schema:t})=>(e.type=t.type,e),uf=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=pe({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=M(t.accessScopes,p.accessScopes),o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")n.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=pe({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},yf=({irSchema:e={}})=>(e.type="string",e),wt=({schema:e})=>{let t={};return mf({irSchema:t,schema:e}),t},hf=({context:e,schema:t,state:r})=>{let n=wt({schema:t}),o=[],i=Ht({schema:t}),a=t.allOf;for(let p of a){let l="$ref"in p?r:{...r,inAllOf:true},m=pe({context:e,schema:p,state:l});if(n.accessScopes=M(n.accessScopes,m.accessScopes),t.required&&(m.required?m.required=[...m.required,...t.required]:m.required=t.required),o.push(m),"$ref"in p){let f=e.resolveRef(p.$ref);if(f.discriminator&&r.$ref){let d=Ue(r.$ref,f.discriminator.mapping,f.oneOf?()=>f.oneOf.some(u=>"$ref"in u&&u.$ref===r.$ref):void 0);if(d.length>0){let u=d.map(g=>({const:g,type:"string"})),y={properties:{[f.discriminator.propertyName]:u.length>1?{items:u,logicalOperator:"or"}:u[0]},type:"object"};f.required?.includes(f.discriminator.propertyName)&&(y.required=[f.discriminator.propertyName]),o.push(y);}}if(!r.circularReferenceTracker.has(p.$ref)){let d=pe({context:e,schema:f,state:{...r,$ref:p.$ref}});n.accessScopes=M(n.accessScopes,d.accessScopes);}}}if(i==="object"){let p=Zt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=M(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let l of a){let m="$ref"in l?e.resolveRef(l.$ref):l;if(Ht({schema:m})==="object"){let f=Zt({context:e,schema:{...m,type:"object"},state:r});if(n.accessScopes=M(n.accessScopes,f.accessScopes),f.properties?.[c]){p.properties[c]=f.properties[c];break}}}o.push(p);}}if(n=z({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},gf=({context:e,schema:t,state:r})=>{let n=wt({schema:t}),o=[],i=Ht({schema:t}),a=t.anyOf;for(let p of a){let c=pe({context:e,schema:p,state:r});if(n.accessScopes=M(n.accessScopes,c.accessScopes),t.discriminator&&c.$ref!=null){let m=Ue(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(t.nullable&&o.push({type:"null"}),n=z({items:o,mutateSchemaOneItem:true,schema:n}),i==="object"){let p=Zt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=M(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},xf=({context:e,schema:t,state:r})=>{let n=wt({schema:t});n.type="enum";let o=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let l=Zt({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});l.const=a,c==="null"&&(l.type=c),l.type==="array"&&(l.type="tuple"),n.accessScopes=M(n.accessScopes,l.accessScopes),o.push(l);}return n=z({items:o,schema:n}),n},bf=({context:e,schema:t,state:r})=>{let n=wt({schema:t}),o=[],i=Ht({schema:t}),a=t.oneOf;for(let p of a){let c=pe({context:e,schema:p,state:r});if(n.accessScopes=M(n.accessScopes,c.accessScopes),t.discriminator&&c.$ref!=null){let m=Ue(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(t.nullable&&o.push({type:"null"}),n=z({items:o,mutateSchemaOneItem:true,schema:n}),i==="object"){let p=Zt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=M(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Sf=({context:e,schema:t,state:r})=>{if(!t.$ref.startsWith("#/components/")&&!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref);return pe({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}})}let o={};if(o.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref),a=pe({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});o.accessScopes=M(o.accessScopes,a.accessScopes);}return o},Of=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=wt({schema:r}));let o={};Ln({irSchema:o,schema:r,state:n}),o.default===null&&delete o.default;let i=[Zt({context:e,irSchema:o,schema:r,state:n}),{type:"null"}];return t=z({items:i,schema:t}),t},Tf=({context:e,schema:t,state:r})=>{let n=wt({schema:t});Ln({irSchema:n,schema:t,state:r});let o=Ht({schema:t});return o?t.nullable?Of({context:e,irSchema:n,schema:{...t,type:o},state:r}):Zt({context:e,irSchema:n,schema:{...t,type:o},state:r}):n},Zt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=wt({schema:r}),Ln({irSchema:t,schema:r,state:n})),r.type){case "array":return lf({context:e,irSchema:t,schema:r,state:n});case "boolean":return ff({irSchema:t});case "integer":case "number":return df({irSchema:t,schema:r});case "object":return uf({context:e,irSchema:t,schema:r,state:n});case "string":return yf({irSchema:t});default:return Ga({irSchema:t,schema:r,state:n})}},Ga=({irSchema:e,schema:t,state:r})=>(e||(e=wt({schema:t})),e.type="unknown",Ln({irSchema:e,schema:t,state:r}),e),pe=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?Sf({context:e,schema:t,state:r}):t.enum?xf({context:e,schema:t,state:r}):t.allOf?hf({context:e,schema:t,state:r}):t.anyOf?gf({context:e,schema:t,state:r}):t.oneOf?bf({context:e,schema:t,state:r}):t.type||t.properties?Tf({context:e,schema:t,state:r}):Ga({schema:t,state:r})),Ja=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[D(e)]=pe({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Rf=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Ut=({context:e,name:t,schema:r})=>{if(Ie(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let a=yt({content:o.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(i=p.schema);}return i?Ut({context:e,name:t,schema:i}):false}return Ut({context:e,name:t,schema:o})}for(let o in r.properties)if(Ie(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"&&!("$ref"in a)){let p=Ht({schema:a});if(Rf(p))return o}}for(let o of r.allOf??[]){let i=Ut({context:e,name:t,schema:o});if(i)return i}return  false};var If=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Pf=({context:e,method:t,operation:r,path:n,state:o})=>{let i={id:_t({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),If({irOperation:i,operation:r}),i},Af=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{let a=Pf({context:e,method:t,operation:r,path:n,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=yt({content:p.content}),l=c.find(m=>m.type==="json")||c[0];if(l){let m=Ut({context:e,name:"",schema:l.schema&&"$ref"in l.schema?{allOf:[{...l.schema}],description:p.description}:{description:p.description,...l.schema}});a.body={mediaType:l.mediaType,schema:pe({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:p.description}:l.schema&&"$ref"in l.schema?{allOf:[{...l.schema}],description:p.description}:{description:p.description,...l.schema},state:void 0})},m&&(a.body.pagination=m),p.required&&(a.body.required=p.required),l.type&&(a.body.type=l.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],l="$ref"in c?e.resolveRef(c.$ref):c,m=yt({content:l.content}),f=m.find(d=>d.type==="json")||m[0];f?a.responses[p]={mediaType:f.mediaType,schema:pe({context:e,schema:{description:l.description,...Xa({content:f})},state:void 0})}:a.responses[p]={schema:{description:l.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=new Map;for(let c of r.security)for(let l in c){let m=o.get(l);m&&p.set(l,m);}p.size&&(a.security=Array.from(p.values()));}return a},ht=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=Af({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i});};var Ef=e=>{switch(e){case "query":return  false;default:return}},Cf=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Nf=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Ge=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let o="$ref"in n?e.dereference(n):n;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=Ya({context:e,parameter:o});}return r},Ya=({context:e,parameter:t})=>{let r=t.schema;if(!r){let l=yt({content:t.content}),m=l.find(f=>f.type==="json")||l[0];m&&(r=m.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},o=Ut({context:e,name:t.name,schema:n}),i=t.style||Nf(t.in),a=t.explode!==void 0?t.explode:Cf(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Ef(t.in),explode:a,location:t.in,name:t.name,schema:pe({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},ep=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[D(e)]=Ya({context:t,parameter:r});};var jf=({context:e,requestBody:t})=>{let r=yt({content:t.content}),n=r.find(p=>p.type==="json")||r[0],o=n?n.schema:void 0,i={description:t.description,...o},a={schema:pe({context:e,schema:i,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},tp=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[D(e)]=jf({context:t,requestBody:r});};var rp=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Xe(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var np=(e,t)=>{let r=t.timeEvent("validate"),n=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of ae){let l=p[c];if(!l)continue;let m=L({method:c,path:a});l.operationId&&(o.has(l.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:l.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):o.set(l.operationId,m));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let a=e.servers[i];!a||typeof a!="object"?n.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):a.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return r.timeEnd(),{issues:n,valid:!n.some(i=>i.severity==="error")}};var zo=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=np(e.spec,e.logger);br({context:e,result:o});}if(ur(e.config.parser.filters)){let o=dr(e.config.parser.filters,e.spec,e.logger),{graph:i}=jt(e.spec,e.logger),{resourceMetadata:a}=hr(i,e.logger),p=yr({filters:o,logger:e.logger,resourceMetadata:a});Ua({...p,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}xr({context:e});let r={ids:new Map},n=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],a="$ref"in i?e.resolveRef(i.$ref):i;n.set(o,a);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],p="$ref"in a?e.resolveRef(a.$ref):a;ep({$ref:i,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],p="$ref"in a?e.resolveRef(a.$ref):a;tp({$ref:i,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];Ja({$ref:i,context:e,schema:a});}}rp({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={context:e,operation:{description:a.description,parameters:Ge({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:n,state:r};a.delete&&ht({...p,method:"delete",operation:{...p.operation,...a.delete,parameters:v({source:Ge({context:e,parameters:a.delete.parameters}),target:p.operation.parameters})}}),a.get&&ht({...p,method:"get",operation:{...p.operation,...a.get,parameters:v({source:Ge({context:e,parameters:a.get.parameters}),target:p.operation.parameters})}}),a.head&&ht({...p,method:"head",operation:{...p.operation,...a.head,parameters:v({source:Ge({context:e,parameters:a.head.parameters}),target:p.operation.parameters})}}),a.options&&ht({...p,method:"options",operation:{...p.operation,...a.options,parameters:v({source:Ge({context:e,parameters:a.options.parameters}),target:p.operation.parameters})}}),a.patch&&ht({...p,method:"patch",operation:{...p.operation,...a.patch,parameters:v({source:Ge({context:e,parameters:a.patch.parameters}),target:p.operation.parameters})}}),a.post&&ht({...p,method:"post",operation:{...p.operation,...a.post,parameters:v({source:Ge({context:e,parameters:a.post.parameters}),target:p.operation.parameters})}}),a.put&&ht({...p,method:"put",operation:{...p.operation,...a.put,parameters:v({source:Ge({context:e,parameters:a.put.parameters}),target:p.operation.parameters})}}),a.trace&&ht({...p,method:"trace",operation:{...p.operation,...a.trace,parameters:v({source:Ge({context:e,parameters:a.trace.parameters}),target:p.operation.parameters})}});}};var sp=({logger:e,operations:t,parameters:r,preserveOrder:n,requestBodies:o,responses:i,schemas:a,spec:p})=>{let c=e.timeEvent("filter-spec");if(p.components){if(p.components.parameters){let l={};if(n)for(let[m,f]of Object.entries(p.components.parameters))r.has(j("parameter",m))&&(l[m]=f);else for(let m of r){let{name:f}=ie(m),d=p.components.parameters[f];d&&(l[f]=d);}p.components.parameters=l;}if(p.components.requestBodies){let l={};if(n)for(let[m,f]of Object.entries(p.components.requestBodies))o.has(j("body",m))&&(l[m]=f);else for(let m of o){let{name:f}=ie(m),d=p.components.requestBodies[f];d&&(l[f]=d);}p.components.requestBodies=l;}if(p.components.responses){let l={};if(n)for(let[m,f]of Object.entries(p.components.responses))i.has(j("response",m))&&(l[m]=f);else for(let m of i){let{name:f}=ie(m),d=p.components.responses[f];d&&(l[f]=d);}p.components.responses=l;}if(p.components.schemas){let l={};if(n)for(let[m,f]of Object.entries(p.components.schemas))a.has(j("schema",m))&&(l[m]=f);else for(let m of a){let{name:f}=ie(m),d=p.components.schemas[f];d&&(l[f]=d);}p.components.schemas=l;}}if(p.paths)for(let l of Object.entries(p.paths)){let m=l[0],f=l[1];for(let d of ae){if(!f[d])continue;let y=j("operation",L({method:d,path:m}));t.has(y)||delete f[d];}Object.keys(f).length||delete p.paths[m];}c.timeEnd();};var op=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&dt({mediaType:t})?{...r,format:"binary"}:r:dt({mediaType:t})?{format:"binary",type:"string"}:void 0},gt=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:Sr({mediaType:r})});return t};var Je=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],kf=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Dn=({irSchema:e,schema:t})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?e.accessScope="read":t.writeOnly&&(e.accessScope="write");},vf=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let o=[];for(let i of r.prefixItems??[]){let a=J({context:e,schema:i,state:n});o.push(a);}if(r.items){let i=J({context:e,schema:r.items,state:n});if(!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!Je({schema:r.items}).includes("null")?t={...t,...i}:o.push(i);}}return t=z({items:o,schema:t}),t},wf=({irSchema:e={}})=>(e.type="boolean",e),qf=({irSchema:e={}})=>(e.type="null",e),$f=({irSchema:e={},schema:t})=>(e.type=t.type,e),Ff=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=J({context:e,schema:a,state:{...n,isProperty:true}});o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")n.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)&&(!r.patternProperties||Object.keys(r.patternProperties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let i=J({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}if(r.patternProperties){let i={};for(let a in r.patternProperties){let p=r.patternProperties[a],c=J({context:e,schema:p,state:n});i[a]=c;}Object.keys(i).length&&(t.patternProperties=i);}return r.propertyNames&&(t.propertyNames=J({context:e,schema:r.propertyNames,state:n})),r.required&&(t.required=r.required),t},Mf=({irSchema:e={}})=>(e.type="string",e),xt=({schema:e})=>{let t={};return kf({irSchema:t,schema:e}),t},Lf=({context:e,schema:t,state:r})=>{let n=xt({schema:t}),o=[],i=Je({schema:t}),a=t.allOf;for(let p of a){let l="$ref"in p?r:{...r,inAllOf:true},m=J({context:e,schema:p,state:l});if(t.required&&(m.required?m.required=[...m.required,...t.required]:m.required=t.required),o.push(m),p.$ref){let f=e.resolveRef(p.$ref);if(f.discriminator&&r.$ref){let d=Ue(r.$ref,f.discriminator.mapping,f.oneOf?()=>f.oneOf.some(u=>"$ref"in u&&u.$ref===r.$ref):void 0);if(d.length>0){let u=d.map(g=>({const:g,type:"string"})),y={properties:{[f.discriminator.propertyName]:u.length>1?{items:u,logicalOperator:"or"}:u[0]},type:"object"};f.required?.includes(f.discriminator.propertyName)&&(y.required=[f.discriminator.propertyName]),o.push(y);}}r.circularReferenceTracker.has(p.$ref)||J({context:e,schema:f,state:{...r,$ref:p.$ref}});}}if(i.includes("object")){let p=Xt({context:e,schema:{...t,type:"object"},state:r});if(p.properties){for(let c of p.required??[])if(!p.properties[c])for(let l of a){let m=l.$ref?e.resolveRef(l.$ref):l;if(Je({schema:m}).includes("object")){let f=Xt({context:e,schema:{...m,type:"object"},state:r});if(f.properties?.[c]){p.properties[c]=f.properties[c];break}}}o.push(p);}}if(n=z({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),i.includes("null")){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"};}return n},Df=({context:e,schema:t,state:r})=>{let n=xt({schema:t}),o=[],i=Je({schema:t}),a=t.anyOf;for(let p of a){let c=J({context:e,schema:p,state:r});if(t.discriminator&&c.$ref!=null){let m=Ue(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(i.includes("null")&&o.push({type:"null"}),n=z({items:o,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let p=Xt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Vf=({context:e,schema:t,state:r})=>{let n=xt({schema:t});n.type="enum";let o=[],i=Je({schema:t});for(let[a,p]of t.enum.entries()){let c=typeof p,l;if(c==="string"||c==="number"||c==="boolean"?l=c:c==="object"&&Array.isArray(p)?l="array":p===null?i.includes("null")&&(l="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${p}" for enum`,t.enum),!l)continue;let m=Xt({context:e,schema:{const:p,description:t["x-enum-descriptions"]?.[a],title:t["x-enum-varnames"]?.[a]??t["x-enumNames"]?.[a],type:l},state:r});o.push(m);}return n=z({items:o,schema:n}),n},Bf=({context:e,schema:t,state:r})=>{let n=xt({schema:t}),o=[],i=Je({schema:t}),a=t.oneOf;for(let p of a){let c=J({context:e,schema:p,state:r});if(t.discriminator&&c.$ref!=null){let m=Ue(c.$ref,t.discriminator.mapping).map(d=>({const:d,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(i.includes("null")&&o.push({type:"null"}),n=z({items:o,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let p=Xt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Kf=({context:e,schema:t,state:r})=>{if(!t.$ref.startsWith("#/components/")&&!r.circularReferenceTracker.has(t.$ref)){let p=e.resolveRef(t.$ref);return J({context:e,schema:p,state:{...r,$ref:t.$ref,isProperty:false}})}let o=xt({schema:t}),i={};if(i.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let p=e.resolveRef(t.$ref);J({context:e,schema:p,state:{...r,$ref:t.$ref,isProperty:false}});}let a=[];return a.push(i),t.type&&typeof t.type!="string"&&t.type.includes("null")&&a.push({type:"null"}),o=z({items:a,mutateSchemaOneItem:true,schema:o}),o},Xt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=xt({schema:r}),Dn({irSchema:t,schema:r})),r.type){case "array":return vf({context:e,irSchema:t,schema:r,state:n});case "boolean":return wf({irSchema:t});case "integer":case "number":return $f({irSchema:t,schema:r});case "null":return qf({irSchema:t});case "object":return Ff({context:e,irSchema:t,schema:r,state:n});case "string":return Mf({irSchema:t});default:return ip({irSchema:t,schema:r})}},Wf=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=xt({schema:r}));let o={};Dn({irSchema:o,schema:r}),r.type.includes("null")&&o.default===null&&delete o.default;let i=[];for(let a of r.type)if(a==="null")i.push({type:"null"});else {let p=Xt({context:e,irSchema:{...o},schema:{...r,type:a},state:n});i.push(p);}return t=z({items:i,schema:t}),t},zf=({context:e,schema:t,state:r})=>{let n=xt({schema:t});Dn({irSchema:n,schema:t});let o=Je({schema:t});return o.length===1?Xt({context:e,irSchema:n,schema:{...t,type:o[0]},state:r}):Wf({context:e,irSchema:n,schema:{...t,type:o},state:r})},ip=({irSchema:e,schema:t})=>(e||(e=xt({schema:t})),e.type="unknown",Dn({irSchema:e,schema:t}),e),J=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Kf({context:e,schema:t,state:r}):t.enum?Vf({context:e,schema:t,state:r}):t.allOf?Lf({context:e,schema:t,state:r}):t.anyOf?Df({context:e,schema:t,state:r}):t.oneOf?Bf({context:e,schema:t,state:r}):t.type||t.properties?zf({context:e,schema:t,state:r}):ip({schema:t})),ap=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[D(e)]=J({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var pp=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),Gt=({context:e,name:t,schema:r})=>{if(Ie(e.config.parser.pagination).test(t))return  true;if(r.$ref){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let a=gt({content:o.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(i=p.schema);}return i?Gt({context:e,name:t,schema:i}):false}return Gt({context:e,name:t,schema:o})}for(let o in r.properties)if(Ie(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"){let p=Je({schema:a});if(!p.length){let l=(a.anyOf??a.oneOf??[]).filter(m=>m.type!=="null");if(l.length===1){let m=Je({schema:l[0]});if(pp(m))return o}}if(pp(p))return o}}for(let o of r.allOf??[]){let i=Gt({context:e,name:t,schema:o});if(i)return i}return  false};var _f=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Qf=({context:e,method:t,operation:r,path:n,state:o})=>{let i={id:_t({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),_f({irOperation:i,operation:r}),i},Hf=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{let a=Qf({context:e,method:t,operation:r,path:n,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=gt({content:p.content}),l=c.find(m=>m.type==="json")||c[0];if(l){let m=Gt({context:e,name:"",schema:{description:p.description,...l.schema}});a.body={mediaType:l.mediaType,schema:J({context:e,schema:{description:p.description,..."$ref"in r.requestBody?r.requestBody:l.schema},state:void 0})},m&&(a.body.pagination=m),p.required&&(a.body.required=p.required),l.type&&(a.body.type=l.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],l="$ref"in c?e.resolveRef(c.$ref):c,m=gt({content:l.content}),f=m.find(d=>d.type==="json")||m[0];f?a.responses[p]={mediaType:f.mediaType,schema:J({context:e,schema:{description:l.description,...op({content:f})},state:void 0})}:a.responses[p]={schema:{description:l.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=new Map;for(let c of r.security)for(let l in c){let m=o.get(l);m&&p.set(l,m);}p.size&&(a.security=Array.from(p.values()));}return a},cp=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>(r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),{parsed:Hf({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})}),bt=({context:e,method:t,path:r,...n})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[r]||(e.ir.paths[r]={});let{parsed:o}=cp({context:e,method:t,path:r,...n});e.ir.paths[r][t]=o;},St=({context:e,key:t,method:r,...n})=>{e.ir.webhooks||(e.ir.webhooks={}),e.ir.webhooks[t]||(e.ir.webhooks[t]={});let{parsed:o}=cp({context:e,method:r,path:t,...n});e.ir.webhooks[t][r]=o;};var Zf=e=>{switch(e){case "query":return  false;default:return}},Uf=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Xf=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Y=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let o="$ref"in n?e.dereference(n):n;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=mp({context:e,parameter:o});}return r},mp=({context:e,parameter:t})=>{let r=t.schema;if(!r){let l=gt({content:t.content}),m=l.find(f=>f.type==="json")||l[0];m&&(r=m.schema);}let n={deprecated:t.deprecated,description:t.description,...r},o=Gt({context:e,name:t.name,schema:n}),i=t.style||Xf(t.in),a=t.explode!==void 0?t.explode:Uf(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Zf(t.in),explode:a,location:t.in,name:t.name,schema:J({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},lp=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[D(e)]=mp({context:t,parameter:r});};var Gf=({context:e,requestBody:t})=>{let r=gt({content:t.content}),n=r.find(p=>p.type==="json")||r[0],o=n?n.schema:void 0,i={description:t.description,...o},a={schema:J({context:e,schema:i,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},fp=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[D(e)]=Gf({context:t,requestBody:r});};var dp=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=Xe(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var up=(e,t)=>{let r=t.timeEvent("validate"),n=[],o=new Map;if(e.paths)for(let i of Object.entries(e.paths)){let a=i[0],p=i[1];for(let c of ae){let l=p[c];if(!l)continue;let m=L({method:c,path:a});l.operationId&&(o.has(l.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:l.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):o.set(l.operationId,m));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let i=0;i<e.servers.length;i++){let a=e.servers[i];!a||typeof a!="object"?n.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",i],severity:"error"}):a.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",i],severity:"error"});}}return r.timeEnd(),{issues:n,valid:!n.some(i=>i.severity==="error")}};var yp=({context:e,securitySchemesMap:t})=>{let r={ids:new Map};for(let n in e.spec.webhooks){let o=e.spec.webhooks[n],i="$ref"in o?{...e.resolveRef(o.$ref),...o}:o,a={context:e,key:n,operation:{description:i.description,parameters:Y({context:e,parameters:i.parameters}),security:e.spec.security,servers:i.servers,summary:i.summary},securitySchemesMap:t,state:r};i.delete&&St({...a,method:"delete",operation:{...a.operation,...i.delete,parameters:v({source:Y({context:e,parameters:i.delete.parameters}),target:a.operation.parameters})}}),i.get&&St({...a,method:"get",operation:{...a.operation,...i.get,parameters:v({source:Y({context:e,parameters:i.get.parameters}),target:a.operation.parameters})}}),i.head&&St({...a,method:"head",operation:{...a.operation,...i.head,parameters:v({source:Y({context:e,parameters:i.head.parameters}),target:a.operation.parameters})}}),i.options&&St({...a,method:"options",operation:{...a.operation,...i.options,parameters:v({source:Y({context:e,parameters:i.options.parameters}),target:a.operation.parameters})}}),i.patch&&St({...a,method:"patch",operation:{...a.operation,...i.patch,parameters:v({source:Y({context:e,parameters:i.patch.parameters}),target:a.operation.parameters})}}),i.post&&St({...a,method:"post",operation:{...a.operation,...i.post,parameters:v({source:Y({context:e,parameters:i.post.parameters}),target:a.operation.parameters})}}),i.put&&St({...a,method:"put",operation:{...a.operation,...i.put,parameters:v({source:Y({context:e,parameters:i.put.parameters}),target:a.operation.parameters})}}),i.trace&&St({...a,method:"trace",operation:{...a.operation,...i.trace,parameters:v({source:Y({context:e,parameters:i.trace.parameters}),target:a.operation.parameters})}});}};var _o=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=up(e.spec,e.logger);br({context:e,result:o});}if(ur(e.config.parser.filters)){let o=dr(e.config.parser.filters,e.spec,e.logger),{graph:i}=jt(e.spec,e.logger),{resourceMetadata:a}=hr(i,e.logger),p=yr({filters:o,logger:e.logger,resourceMetadata:a});sp({...p,logger:e.logger,preserveOrder:o.preserveOrder,spec:e.spec});}xr({context:e});let r={ids:new Map},n=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],a="$ref"in i?e.resolveRef(i.$ref):i;n.set(o,a);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],p="$ref"in a?e.resolveRef(a.$ref):a;lp({$ref:i,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],p="$ref"in a?e.resolveRef(a.$ref):a;fp({$ref:i,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];ap({$ref:i,context:e,schema:a});}}dp({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={context:e,operation:{description:a.description,parameters:Y({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:n,state:r};a.delete&&bt({...p,method:"delete",operation:{...p.operation,...a.delete,parameters:v({source:Y({context:e,parameters:a.delete.parameters}),target:p.operation.parameters})}}),a.get&&bt({...p,method:"get",operation:{...p.operation,...a.get,parameters:v({source:Y({context:e,parameters:a.get.parameters}),target:p.operation.parameters})}}),a.head&&bt({...p,method:"head",operation:{...p.operation,...a.head,parameters:v({source:Y({context:e,parameters:a.head.parameters}),target:p.operation.parameters})}}),a.options&&bt({...p,method:"options",operation:{...p.operation,...a.options,parameters:v({source:Y({context:e,parameters:a.options.parameters}),target:p.operation.parameters})}}),a.patch&&bt({...p,method:"patch",operation:{...p.operation,...a.patch,parameters:v({source:Y({context:e,parameters:a.patch.parameters}),target:p.operation.parameters})}}),a.post&&bt({...p,method:"post",operation:{...p.operation,...a.post,parameters:v({source:Y({context:e,parameters:a.post.parameters}),target:p.operation.parameters})}}),a.put&&bt({...p,method:"put",operation:{...p.operation,...a.put,parameters:v({source:Y({context:e,parameters:a.put.parameters}),target:p.operation.parameters})}}),a.trace&&bt({...p,method:"trace",operation:{...p.operation,...a.trace,parameters:v({source:Y({context:e,parameters:a.trace.parameters}),target:p.operation.parameters})}});}yp({context:e,securitySchemesMap:n});};var Vn=["connect","delete","get","head","options","patch","post","put","trace"];function Bn(e="1.0"){return String(e).replace(/^v/gi,"")}var Tr="#/components/parameters/",Kn="#/components/schemas/";var Rr=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.config.classNameBuilder){let n="";return typeof r.config.classNameBuilder=="function"?n=r.config.classNameBuilder(t):n=r.config.classNameBuilder.replace("{{name}}",t),n}return t},Qo=e=>I().plugins["@hey-api/typescript"]?.config.style==="PascalCase"?k({case:"PascalCase",value:e}):e,hp=e=>{let t=Qo(e);return qe(t).replace(he,"_$1")};var gp=(e,t)=>{if(e.enum&&!t.includes("boolean"))return "enum"},Ho=e=>Ir(e).includes("null"),qt=e=>e.nullable===true||Ho(e),Ir=({type:e})=>Array.isArray(e)?e:e?[e]:[];var en=e=>e.trim().replace(/^#\/definitions\//,"").replace(/^#\/parameters\//,"").replace(/^#\/responses\//,"").replace(/^#\/securityDefinitions\//,"").replace(/^#\/components\/schemas\//,"").replace(/^#\/components\/responses\//,"").replace(/^#\/components\/parameters\//,"").replace(/^#\/components\/examples\//,"").replace(/^#\/components\/requestBodies\//,"").replace(/^#\/components\/headers\//,"").replace(/^#\/components\/securitySchemes\//,"").replace(/^#\/components\/links\//,"").replace(/^#\/components\/callbacks\//,"");var xp=(e,t)=>{if(t==="binary")return "binary";switch(e){case "any":case "object":case "unknown":return "unknown";case "array":return "unknown[]";case "boolean":return "boolean";case "byte":case "double":case "float":case "int":case "integer":case "long":case "number":case "short":return "number";case "char":case "date":case "date-time":case "password":case "string":return "string";case "file":return "binary";case "null":return "null";case "void":return "void";default:return}},bp=/(?<!`1)\[.*\]$/g,N=({debug:e,format:t,type:r="unknown"})=>{let n={$refs:[],base:"unknown",imports:[],isNullable:false,template:null,type:"unknown"};if(Array.isArray(r)){let a=r.filter(p=>p!=="null").map(p=>xp(p,t)).filter(Boolean).join(" | ");return n.type=a,n.base=a,n.isNullable=Ho({type:r}),n}let o=xp(r,t);if(o)return n.type=o,n.base=o,n;let i=decodeURIComponent(en(r));if(bp.lastIndex=0,bp.test(i)){let a=i.match(/(.*?)\[(.*)\]$/);if(a?.length){let p=N({debug:e,type:qe(a[1])}),c=N({debug:e,type:qe(a[2])});return p.type==="unknown[]"?(n.type=`${c.type}[]`,n.base=`${c.type}`,p.$refs=[],p.imports=[]):c.type?(n.type=`${p.type}<${c.type}>`,n.base=p.type,n.template=c.type):(n.type=p.type,n.base=p.type,n.template=p.type),n.$refs=[...n.$refs,...p.$refs,...c.$refs],n.imports=[...n.imports,...p.imports,...c.imports],n}}if(i){let a=Qo(qe(i));return r.startsWith(Tr)&&(a=`Parameter${a}`),n.type=a,n.base=a,r.startsWith("#")&&(n.$refs=[...n.$refs,decodeURIComponent(r)]),n.imports=[...n.imports,a],n}return n};function Ye(e,t,r){return r.indexOf(e)===t}var Pr=(e,t)=>{if(!Array.isArray(t))return [];let r=(e["x-enum-descriptions"]??[]).filter(o=>typeof o=="string"),n=(e["x-enum-varnames"]??e["x-enumNames"]??[]).filter(o=>typeof o=="string");return t.filter(Ye).filter(o=>typeof o=="number"||typeof o=="string").map((o,i)=>({customDescription:r[i],customName:n[i],description:void 0,value:o}))};var te=e=>e?.replace(/\\/g,"\\\\").replace(/'/g,"\\'");var Wn=({definition:e,getModel:t,openApi:r,types:n})=>{let o=[];return Object.entries(e.properties??{}).forEach(([i,a])=>{let p=!!e.required?.includes(i);if(a.$ref){let c=N({type:a.$ref});o.push({$refs:[],base:c.base,description:a.description||null,enum:[],enums:[],exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:"reference",format:a.format,imports:c.imports,in:"",isDefinition:false,isNullable:a["x-nullable"]===true,isReadOnly:a.readOnly===true,isRequired:p,link:null,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,name:Ae(i),pattern:te(a.pattern),properties:[],template:c.template,type:c.type,uniqueItems:a.uniqueItems});}else {let c=t({definition:a,openApi:r,types:n});o.push({$refs:[],base:c.base,description:a.description||null,enum:c.enum,enums:c.enums,exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:c.export,format:a.format,imports:c.imports,in:"",isDefinition:false,isNullable:a["x-nullable"]===true,isReadOnly:a.readOnly===true,isRequired:p,link:c.link,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,name:Ae(i),pattern:te(a.pattern),properties:c.properties,template:c.template,type:c.type,uniqueItems:a.uniqueItems});}}),o};var Jf=/~1/g,Yf=/~0/g;function Q(e,t){if(t.$ref){let r=t.$ref.replace(/^#/g,"").split("/").filter(Boolean),n=e;return r.forEach(o=>{let i=decodeURIComponent(o.replace(Jf,"/").replace(Yf,"~"));if(n.hasOwnProperty(i))n=n[i];else throw new Error(`Could not find reference: "${t.$ref}"`)}),n}return t}var Sp=({definitions:e,getModel:t,openApi:r,required:n,types:o})=>e.reduce((i,a)=>{if(a.$ref){let p=Q(r,a);return [...i,...t({definition:p,openApi:r,types:o}).properties]}return [...i,...t({definition:a,openApi:r,types:o}).properties]},[]).filter(i=>!i.isRequired&&n.includes(i.name)).map(i=>({...i,isRequired:true}));var Op=({definition:e,definitions:t,getModel:r,openApi:n,type:o,types:i})=>{let a={$refs:[],enums:[],export:o,imports:[],properties:[]},p=[];if(t.map(c=>r({definition:c,openApi:n,types:i})).filter(c=>{let l=c.properties.length,m=c.enums.length;return !(c.type==="unknown"&&!l&&!m)}).forEach(c=>{a.imports.push(...c.imports),a.enums.push(...c.enums),a.properties.push(c);}),e.required&&o==="all-of"){let c=Sp({definitions:t,getModel:r,openApi:n,required:e.required,types:i});c.forEach(l=>{a.imports.push(...l.imports),a.enums.push(...l.enums);}),p.push(...c);}if(e.properties){let c=Wn({definition:e,getModel:r,openApi:n,types:i});c.forEach(l=>{a.imports.push(...l.imports),a.enums.push(...l.enums),l.export==="enum"&&a.enums.push(l);}),p.push(...c);}return p.length&&a.properties.push({$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:p,template:null,type:"unknown"}),a};var et=({definition:e,isDefinition:t=false,meta:r,openApi:n,types:o})=>{let i={$refs:[],base:"unknown",description:e.description||null,enum:[],enums:[],exclusiveMaximum:e.exclusiveMaximum,exclusiveMinimum:e.exclusiveMinimum,export:"interface",format:e.format,imports:[],in:"",isDefinition:t,isNullable:e["x-nullable"]===true,isReadOnly:e.readOnly===true,isRequired:false,link:null,maxItems:e.maxItems,maxLength:e.maxLength,maxProperties:e.maxProperties,maximum:e.maximum,meta:r,minItems:e.minItems,minLength:e.minLength,minProperties:e.minProperties,minimum:e.minimum,multipleOf:e.multipleOf,name:r?.name??"",pattern:te(e.pattern),properties:[],template:null,type:"unknown",uniqueItems:e.uniqueItems};if(e.$ref){let a=N({type:e.$ref});return i.export="reference",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}if(e.enum&&e.type!=="boolean"){let a=Pr(e,e.enum);if(a.length)return i.base="string",i.enum=[...i.enum,...a],i.export="enum",i.type="string",i}if(e.type==="array"&&e.items)if(e.items.$ref){let a=N({type:e.items.$ref});return i.export="array",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}else {let a=et({definition:e.items,openApi:n,types:o});return i.export="array",i.type=a.type,i.base=a.base,i.template=a.template,i.link=a,i.imports.push(...a.imports),i}if(e.type==="object"&&typeof e.additionalProperties=="object")if(e.additionalProperties.$ref){let a=N({type:e.additionalProperties.$ref});return i.export="dictionary",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}else {let a=et({definition:e.additionalProperties,openApi:n,types:o});return i.export="dictionary",i.type=a.type,i.base=a.base,i.template=a.template,i.link=a,i.imports.push(...a.imports),i}if(e.allOf?.length){let a=Op({definition:e,definitions:e.allOf,getModel:et,openApi:n,type:"all-of",types:o});return i.export=a.export,i.imports.push(...a.imports),i.properties.push(...a.properties),i.enums=[...i.enums,...a.enums],i}if(e.type==="object")return i.export="interface",i.type="unknown",i.base="unknown",e.properties&&Wn({definition:e,getModel:et,openApi:n,types:o}).forEach(p=>{i.imports.push(...p.imports),i.enums=[...i.enums,...p.enums],i.properties.push(p),p.export==="enum"&&(i.enums=[...i.enums,p]);}),i;if(e.type){let a=N({format:e.format,type:e.type});return i.export="generic",i.type=a.type,i.base=a.base,i.template=a.template,i.imports.push(...a.imports),i}return i};var Tp=e=>{let t={},r=[];return Object.entries(e.definitions??{}).forEach(([n,o])=>{let a=N({type:n}).base.replace(he,"_$1"),p={$ref:`#/definitions/${n}`,name:a};t[a]=p;let c=et({definition:o,isDefinition:true,meta:p,openApi:e,types:t});r=[...r,c];}),{models:r,types:t}};function Zo(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var tn=(e,t)=>Zo(e.name,t.name);function Rp(e){return e.sort(tn)}var ed=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},Ip=e=>e.map(t=>zn(t.value,true)).filter(Ye).join(" | "),zn=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,_n=e=>{let t=ed(e.value,e.customName),r=zn(e.value);return {key:t,value:r}},Qn=e=>{let t=e.enum.map(r=>_n(r)).sort((r,n)=>Zo(r.key,n.key)).map(r=>`${r.key}=${r.value}`).join("&");return {$ref:`enum/${e.name}/${t}`,name:qe(or(e.name))}};var Pp=e=>{let r=`Parameter${N({type:e}).base.replace(he,"_$1")}`;return {$ref:Tr+e,name:r}},Hn=e=>{let t=hp(e);return {$ref:Kn+e,name:t}};var rn=e=>e.format==="date"||e.format==="date-time",Uo=e=>{let t=I();return e.base==="binary"?s.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.config.dates&&rn(e)?s.typeNode("Date"):s.typeNode(e.base)},td=e=>{let t=e.base==="null"?false:e.isNullable,r=Uo(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(Kn)){let o=Hn(e.base);r=s.typeNode(o.name);}return s.typeUnionNode({isNullable:t,types:[r]})},rd=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>Ne(n));return s.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(Ne(e.link));return s.typeTupleNode({isNullable:e.isNullable,types:t})}return s.typeArrayNode([Ne(e.link)],e.isNullable)}return s.typeArrayNode([Uo(e)],e.isNullable)},nd=e=>{let t=e.enum.map(r=>zn(r.value));return s.typeUnionNode({isNullable:e.isNullable,types:t})},sd=e=>{let t=e.link&&!Array.isArray(e.link)?Ne(e.link):Uo(e);return s.typeRecordNode(["string"],[t],e.isNullable,true)},Ap=({model:e,style:t})=>{let r=e.properties.map(o=>s.nodeToString({node:Ne(o),unescape:true})).filter(Ye),n=t==="union"?s.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(o=>o.isNullable),types:r}):s.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:s.typeParenthesizedNode({type:n})},od=e=>{if(!e.properties.length)return s.typeNode("unknown");let t=I(),r=U(t),n=e.properties.map(o=>{let i=o.isRequired?"":"?",a=Ne(o),p=r?/^\dXX$/.test(o.name)?Ae(o.name):o.name:Ae(or(Xo(o.name)));return o.name==="[key: string]"&&(p=o.name,i&&(i="",a=s.typeUnionNode({types:[a,"undefined"]}))),{comment:[o.description&&_(o.description),o.deprecated&&"@deprecated"],isReadOnly:o.isReadOnly,isRequired:i==="",name:p,type:a}});return s.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},Ne=e=>{switch(e.export){case "all-of":return Ap({model:e,style:"intersection"});case "any-of":case "one-of":return Ap({model:e,style:"union"});case "array":return rd(e);case "dictionary":return sd(e);case "enum":return nd(e);case "interface":return od(e);case "const":case "generic":case "reference":default:return td(e)}},je=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:o})=>{let i={created:false,name:""},a=n.name;o&&(a=o(a)),t>1&&(a=`${a}${t}`);let p=e.types[a];return p?p.$ref===n.$ref?i={created:false,name:a}:i=je({client:e,count:t+1,create:r,meta:n,nameTransformer:o}):r&&(e.types[a]=n,i={created:true,name:a}),i},Ep=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},Xo=e=>{let t=I();return U(t)?k({case:"camelCase",value:$o(e)}).replace(he,"_$1"):e};var Zn=e=>{let t=e.find(r=>r.in==="header");return t?t.name:null},tt=e=>e.some(r=>r.isRequired),Un=e=>{if(e==="default")return "default";if(e==="1XX")return "1XX";if(e==="2XX")return "2XX";if(e==="3XX")return "3XX";if(e==="4XX")return "4XX";if(e==="5XX")return "5XX";if(/\d{3}/g.test(e)){let t=Number.parseInt(e,10);if(t>=100&&t<600)return t}return null},Xn=(e,t)=>e.code>t.code?1:e.code<t.code?-1:0,id=e=>e==="3XX"||e==="4XX"||e==="5XX"||typeof e=="number"&&e>=300,Cp=e=>e==="2XX"||typeof e=="number"&&e>=200&&e<300,ad=(e,t)=>{let r=[],n=l=>{r.includes(l)||(r=[...r,l]);};t.some(({code:l})=>Cp(l))||n("success");let i=(e.description??"").toLocaleLowerCase(),a=e.$refs.join("|").toLocaleLowerCase(),p=["error","problem"];return ["success"].some(l=>i.includes(l)||a.includes(l))&&n("success"),p.some(l=>i.includes(l)||a.includes(l))&&n("error"),r.length||n("error"),r},Gn=({config:e,operationKey:t})=>{let r=e.plugins["@hey-api/sdk"]?.config.filter?new RegExp(e.plugins["@hey-api/sdk"]?.config.filter):void 0;return !r||r.test(t)},Jn=({config:e,method:t,operationId:r,path:n})=>{if(e.plugins["@hey-api/sdk"]?.config.operationId&&r)return k({case:"camelCase",value:ft(r)});let o=n;return U(e)&&(o=o.replace(/[^/]*?{api-version}.*?\//g,"")),o=o.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-"),k({case:"camelCase",value:`${t}-${o}`})},Yn=e=>{let t=I();return !U(t)||e.prop!=="api-version"},es=e=>{let t=I();return U(t)?Xo(e.prop):e.prop},ts=e=>e.map(t=>{let{code:r}=t;return r==="default"?t.responseTypes=ad(t,e):Cp(r)?t.responseTypes=["success"]:id(r)&&(t.responseTypes=["error"]),t});var H=(e,t)=>{if(e.default===void 0||e.default===null)return e.default;switch(Ir(e).find(o=>o!=="null")||typeof e.default){case "int":case "integer":case "number":if(t?.export==="enum"&&t.enum?.[e.default]){let{value:o}=t.enum[e.default];return o}return e.default;case "array":case "boolean":case "object":case "string":return e.default;default:return}};var Np=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:t.in,isDefinition:false,isNullable:t["x-nullable"]===true,isReadOnly:false,isRequired:t.required===true,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maximum:t.maximum,mediaType:null,minItems:t.minItems,minLength:t.minLength,minimum:t.minimum,multipleOf:t.multipleOf,pattern:te(t.pattern),prop:t.name,properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems},o={...n,name:es(n)};if(t.$ref){let a=N({type:t.$ref});return o={...o,$refs:[...o.$refs,...a.$refs],base:a.base,export:"reference",imports:[...o.imports,...a.imports],template:a.template,type:a.type},o.default=H(t,o),o}if(t.enum){let a=Pr(t,t.enum);if(a.length)return o={...o,base:"string",enum:[...o.enum,...a],export:"enum",type:"string"},o.default=H(t,o),o}if(t.type==="array"&&t.items){let a=N({format:t.items.format,type:t.items.type});return o={...o,$refs:[...o.$refs,...a.$refs],base:a.base,export:"array",imports:[...o.imports,...a.imports],template:a.template,type:a.type},o.default=H(t,o),o}if(t.type==="object"&&t.items){let a=N({format:t.items.format,type:t.items.type});return o={...o,$refs:[...o.$refs,...a.$refs],base:a.base,export:"dictionary",imports:[...o.imports,...a.imports],template:a.template,type:a.type},o.default=H(t,o),o}let i=t.schema;if(i){if(i.$ref?.startsWith("#/parameters/")&&(i=Q(e,i)),i.$ref){let p=N({type:i.$ref});return o={...o,$refs:[...o.$refs,...p.$refs],base:p.base,export:"reference",imports:[...o.imports,...p.imports],template:p.template,type:p.type},o.default=H(t,o),o}let a=et({definition:i,openApi:e,types:r});return o={...o,$refs:[...o.$refs,...a.$refs],base:a.base,enum:[...o.enum,...a.enum],enums:[...o.enums,...a.enums],export:a.export,imports:[...o.imports,...a.imports],link:a.link,properties:[...o.properties,...a.properties],template:a.template,type:a.type},o.default=H(t,o),o}if(t.type){let a=N({format:t.format,type:t.type});return o={...o,$refs:[...o.$refs,...a.$refs],base:a.base,export:"generic",imports:[...o.imports,...a.imports],template:a.template,type:a.type},o.default=H(t,o),o}return o};var pd=["body","formData","header","path","query"],rs=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(o=>{let i=Q(e,o),a=Np({openApi:e,parameter:i,types:r}),p=!Yn(a);if(!(!pd.includes(i.in)||p)){switch(i.in){case "body":n.parametersBody=a;break;case "formData":n.parametersForm=[...n.parametersForm,a];break;case "header":n.parametersHeader=[...n.parametersHeader,a];break;case "path":n.parametersPath=[...n.parametersPath,a];break;case "query":n.parametersQuery=[...n.parametersQuery,a];break}n.$refs=[...n.$refs,...a.$refs],n.imports=[...n.imports,...a.imports],n.parameters=[...n.parameters,a];}}),n};function ns(e){return e.sort((t,r)=>{let n=t.isRequired&&t.default===void 0,o=r.isRequired&&r.default===void 0;return n&&!o?-1:o&&!n?1:0})}var jp=({code:e,openApi:t,response:r,types:n})=>{let o={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"},i=r.schema;if(i){if(i.$ref?.startsWith("#/responses/")&&(i=Q(t,i)),i.$ref){let p=N({type:i.$ref});return o.export="reference",o.type=p.type,o.base=p.base,o.template=p.template,o.imports=[...o.imports,...p.imports],o}let a=et({definition:i,openApi:t,types:n});return o.export=a.export,o.type=a.type,o.base=a.base,o.template=a.template,o.link=a.link,o.isReadOnly=a.isReadOnly,o.isRequired=a.isRequired,o.isNullable=a.isNullable,o.format=a.format,o.maximum=a.maximum,o.exclusiveMaximum=a.exclusiveMaximum,o.minimum=a.minimum,o.exclusiveMinimum=a.exclusiveMinimum,o.multipleOf=a.multipleOf,o.maxLength=a.maxLength,o.minLength=a.minLength,o.maxItems=a.maxItems,o.minItems=a.minItems,o.uniqueItems=a.uniqueItems,o.maxProperties=a.maxProperties,o.minProperties=a.minProperties,o.pattern=te(a.pattern),o.imports=[...o.imports,...a.imports],o.enum=[...o.enum,...a.enum],o.enums=[...o.enums,...a.enums],o.properties=[...o.properties,...a.properties],o}if(r.headers)for(let a in r.headers)return o.in="header",o.name=a,o.type="string",o.base="string",o;return o};var kp=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([o,i])=>{let a=Un(o);if(!a)return;let p=Q(e,i),c=jp({code:a,openApi:e,response:p,types:r});n=[...n,c];}),n=ts(n),n.sort(Xn)};var vp=({method:e,op:t,openApi:r,pathParams:n,types:o,url:i})=>{let a={$refs:[],deprecated:t.deprecated===true,description:t.description||null,id:t.operationId||null,imports:[],method:e.toUpperCase(),parameters:[...n.parameters],parametersBody:n.parametersBody,parametersCookie:[...n.parametersCookie],parametersForm:[...n.parametersForm],parametersHeader:[...n.parametersHeader],parametersPath:[...n.parametersPath],parametersQuery:[...n.parametersQuery],path:i,responseHeader:null,responses:[],summary:t.summary||null,tags:t.tags||null},p={...a,name:Jn({config:I(),method:a.method,operationId:t.operationId,path:a.path})};if(t.parameters){let c=rs({openApi:r,parameters:t.parameters,types:o});p.$refs=[...p.$refs,...c.$refs],p.imports=[...p.imports,...c.imports],p.parameters=[...p.parameters,...c.parameters],p.parametersBody=c.parametersBody,p.parametersCookie=[...p.parametersCookie,...c.parametersCookie],p.parametersForm=[...p.parametersForm,...c.parametersForm],p.parametersHeader=[...p.parametersHeader,...c.parametersHeader],p.parametersPath=[...p.parametersPath,...c.parametersPath],p.parametersQuery=[...p.parametersQuery,...c.parametersQuery];}if(t.responses){p.responses=kp({openApi:r,responses:t.responses,types:o});let c=p.responses.filter(l=>l.responseTypes.includes("success"));p.responseHeader=Zn(c),c.forEach(l=>{p.$refs=[...p.$refs,...l.$refs],p.imports=[...p.imports,...l.imports];});}return p.parameters=ns(p.parameters),p};var wp=({openApi:e,types:t})=>{let r=new Map,n=[],o=I();for(let i in e.paths){let a=e.paths[i],p=rs({openApi:e,parameters:a.parameters??[],types:t});for(let c in a){let l=c,m=L({method:l,path:i});if(Vn.includes(l)){let f=a[l];if(f.operationId&&(r.has(f.operationId)?o.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${f.operationId} in ${m}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(f.operationId,m)),Gn({config:o,operationKey:m})){let d=vp({method:l,op:f,openApi:e,pathParams:p,types:t,url:i});n.push(d);}}}}return n};var qp=e=>{let t=e.schemes?.[0]||"http",r=e.host,n=e.basePath||"";return (r?`${t}://${r}${n}`:n).replace(/\/$/g,"")};var $p=e=>{let t=Bn(e.info.version),r=qp(e),{models:n,types:o}=Tp(e),i=wp({openApi:e,types:o});return {models:n,operations:i,server:r,types:o,version:t}};var cd=e=>{let t={};for(let r in e)t[e[r]]=r;return t},Fp=(e,t)=>{if(e.components&&t){for(let r in e.components.schemas)if(e.components.schemas.hasOwnProperty(r)){let n=e.components.schemas[r];if(n.discriminator&&n.oneOf?.length&&n.oneOf.some(o=>o.$ref&&en(o.$ref)==t.name))return n.discriminator}}},Mp=(e,t)=>{if(e.mapping){let r=cd(e.mapping),n=Object.keys(r).find(o=>en(o)==t.name);if(n&&r[n])return r[n]}return t.name};var Go=({debug:e,definition:t,getModel:r,model:n,openApi:o,types:i})=>{let a=typeof t.additionalProperties=="object"?t.additionalProperties:{},p=r({debug:e,definition:a,openApi:o,parentDefinition:t,types:i});if(a.$ref){let c=N({type:a.$ref});return n.base=c.base,n.default=H(t,n),n.export="dictionary",n.imports.push(...c.imports),n.template=c.template,n.type=c.type,n}if(t.additionalProperties&&t.properties&&Object.keys(t.properties).length>0){let c=typeof t.additionalProperties=="object"&&t.additionalProperties.type&&!Array.isArray(t.additionalProperties.type)?t.additionalProperties.type:p.base,l=[N({type:c}).base,...n.properties.map(m=>m.base)];return p.base=l.filter(Ye).join(" | "),p.default=H(t,n),p.export="generic",p.isRequired=t.additionalProperties===true,p.name="[key: string]",p}return n.base=p.base,n.default=H(t,n),n.export="dictionary",n.imports.push(...p.imports),n.link=p,n.template=p.template,n.type=p.type,n},ss=({debug:e,definition:t,getModel:r,openApi:n,parent:o,types:i})=>{let a=[],p=Fp(n,o);return Object.entries(t.properties??{}).forEach(([c,l])=>{let m=!!t.required?.includes(c),f={default:l.default,deprecated:l.deprecated===true,description:l.description||null,exclusiveMaximum:l.exclusiveMaximum,exclusiveMinimum:l.exclusiveMinimum,format:l.type==="array"?l.items?.format??l.format:l.format,in:"",isDefinition:false,isReadOnly:l.readOnly===true,isRequired:m,maxItems:l.maxItems,maxLength:l.maxLength,maxProperties:l.maxProperties,maximum:l.maximum,minItems:l.minItems,minLength:l.minLength,minProperties:l.minProperties,minimum:l.minimum,multipleOf:l.multipleOf,name:Ae(c),pattern:te(l.pattern),uniqueItems:l.uniqueItems};if(o&&p?.propertyName==c){a=[...a,{...f,$refs:[],base:`'${Mp(p,o)}'`,enum:[],enums:[],export:"reference",imports:[],isNullable:qt(l),link:null,properties:[],template:null,type:"string"}];return}if(l.$ref){let u=N({type:l.$ref});a=[...a,{...f,$refs:u.$refs,base:u.base,enum:[],enums:[],export:"reference",imports:u.imports,isNullable:u.isNullable||qt(l),link:null,properties:[],template:u.template,type:u.type}];return}let d=r({debug:e,definition:l,initialValues:f,openApi:n,parentDefinition:t,types:i});d.isNullable=d.isNullable||qt(l),a=[...a,d];}),a};var Lp=({debug:e,definitions:t,getModel:r,openApi:n,required:o,types:i})=>t.reduce((p,c)=>{if(c.$ref){let l=N({type:c.$ref}),m={$ref:c.$ref,name:l.base};i[l.base]=m;let f=Q(n,c);return [...p,...r({debug:e,definition:f,meta:m,openApi:n,types:i}).properties]}return [...p,...r({debug:e,definition:c,openApi:n,parentDefinition:c,types:i}).properties]},[]).filter(p=>!p.isRequired&&o.includes(p.name)).map(p=>({...p,isRequired:true}));var os=e=>[{definitions:e.allOf,type:"all-of"},{definitions:e.anyOf,type:"any-of"},{definitions:e.oneOf,type:"one-of"}].find(r=>r.definitions?.length),Dp=({debug:e,definition:t,definitions:r,getModel:n,model:o,openApi:i,type:a,types:p})=>{let c={$refs:o.$refs,enums:o.enums,export:a,imports:o.imports,properties:o.properties},l=[];if(r.map(m=>n({debug:e,definition:m,openApi:i,parentDefinition:t,types:p})).forEach(m=>{c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports],c.enums=[...c.enums,...m.enums],c.properties=[...c.properties,m];}),t.required&&a==="all-of"){let m=Lp({debug:e,definitions:r,getModel:n,openApi:i,required:t.required,types:p});m.forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.enums=[...c.enums,...f.enums];}),l=[...l,...m];}if(t.properties){let m=ss({definition:t,getModel:n,openApi:i,types:p});m.forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.enums=[...c.enums,...f.enums],f.export==="enum"&&(c.enums=[...c.enums,f]);}),l=[...l,...m];}if(l.length){let m=os(t);if(m){let f={$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:l,template:null,type:"unknown"};m.type==="one-of"?(c.properties=[{...c,base:"",description:null,enum:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:true,link:null,name:"",template:null,type:""},f],c.export="all-of"):c.properties=[...c.properties,f];}}return c};var de=({debug:e,definition:t,initialValues:r={},isDefinition:n=false,meta:o,openApi:i,parentDefinition:a=null,types:p})=>{let c=Ir(t),l=gp(t,c),m={$refs:[],base:"unknown",deprecated:!!t.deprecated,description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:"",isDefinition:n,isNullable:qt(t),isReadOnly:t.readOnly===true,isRequired:false,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maxProperties:t.maxProperties,maximum:t.maximum,meta:o,minItems:t.minItems,minLength:t.minLength,minProperties:t.minProperties,minimum:t.minimum,multipleOf:t.multipleOf,name:o?.name??"",pattern:te(t.pattern),properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems,...r};if(t.$ref){let d=N({debug:e,type:t.$ref});return m.$refs=[...m.$refs,decodeURIComponent(t.$ref)],m.base=d.base,m.export="reference",m.imports=[...m.imports,...d.imports],m.template=d.template,m.type=d.type,m.default=H(t,m),m}if(l==="enum"){let d=Pr(t,t.enum);if(d.length)return m.base="string",m.enum=[...m.enum,...d],m.export="enum",m.type="string",m.default=H(t,m),m.meta||(m.meta=Qn(m)),m}if(c.includes("array")&&(t.items||t.prefixItems)){if(t.prefixItems){let y=t.prefixItems.map(g=>de({definition:g,openApi:i,parentDefinition:t,types:p}));return m.export="array",m.$refs=[...m.$refs,...y.reduce((g,x)=>[...g,...x.$refs],[])],m.imports=[...m.imports,...y.reduce((g,x)=>[...g,...x.imports],[])],m.link=y,m.default=H(t,m),m}if(!t.items)return m;if(t.items.$ref){let y=N({type:t.items.$ref});return m.$refs=[...m.$refs,decodeURIComponent(t.items.$ref)],m.base=y.base,m.export="array",m.imports=[...m.imports,...y.imports],m.template=y.template,m.type=y.type,m.default=H(t,m),m}if(t.items.anyOf&&a&&a.type){let y=os(a);if(y&&y.definitions.some(g=>!Ir(g).includes("array")))return de({definition:t.items,openApi:i,parentDefinition:t,types:p})}let d=Array.isArray(t.items)?{anyOf:t.items}:t.items,u=de({definition:d,openApi:i,parentDefinition:t,types:p});return m.base=u.base,m.export="array",m.$refs=[...m.$refs,...u.$refs],m.imports=[...m.imports,...u.imports],m.link=u,m.template=u.template,m.type=u.type,m.default=H(t,m),m}let f=os(t);if(f){let d=Dp({...f,debug:e,definition:t,getModel:de,model:m,openApi:i,types:p});return {...m,...d}}if(c.includes("object")||t.properties||t.additionalProperties){if(t.properties&&(Object.keys(t.properties).length>0||!t.additionalProperties)){if(m.base="unknown",m.export="interface",m.type="unknown",m.default=H(t,m),ss({debug:e,definition:t,getModel:de,openApi:i,parent:m,types:p}).forEach(y=>{m.$refs=[...m.$refs,...y.$refs],m.enums=[...m.enums,...y.enums],m.imports=[...m.imports,...y.imports],m.properties=[...m.properties,y],y.export==="enum"&&(m.enums=[...m.enums,y]);}),t.additionalProperties){let y=Go({debug:e,definition:t,getModel:de,model:m,openApi:i,types:p});m.properties=[...m.properties,y];}return !m.properties.length&&m.base==="unknown"&&m.type==="unknown"&&(m.export="dictionary",m.name||(m.name="[key: string]")),m}return Go({debug:e,definition:t,getModel:de,model:m,openApi:i,types:p})}if(t.const!==void 0){let d=t.const,u=typeof d=="string"?`"${d}"`:`${d}`;return m.base=u,m.export="const",m.type=u,m}if(c.length){let d=N({format:t.format,type:t.type});return m.base=d.base,m.export="generic",m.$refs=[...m.$refs,...d.$refs],m.imports=[...m.imports,...d.imports],m.isNullable=d.isNullable||m.isNullable,m.template=d.template,m.type=d.type,m.default=H(t,m),m}return m};var is=e=>{if(e.schema)return e.schema;if(e.content){let t=Object.entries(e.content);for(let[r,n]of t)if(n.schema){let o=r;return e.content[o].schema}}};var Vp=e=>{let t={},r=[];return e.components?(Object.entries(e.components.schemas??{}).forEach(([n,o])=>{let i=Hn(n);t[i.name]=i;let a=de({definition:o,isDefinition:true,meta:i,openApi:e,types:t});r=[...r,a];}),Object.entries(e.components.parameters??{}).forEach(([n,o])=>{let i=is(o);if(!i)return;let a=Pp(n);t[a.name]=a;let p=de({definition:i,isDefinition:true,meta:a,openApi:e,types:t});p.deprecated=o.deprecated,p.description=o.description||null,r=[...r,p];}),{models:r,types:t}):{models:r,types:t}};var Bp=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",deprecated:t.deprecated===true,description:t.description||null,enum:[],enums:[],export:"interface",imports:[],in:t.in,isDefinition:false,isNullable:qt(t),isReadOnly:false,isRequired:t.required===true,link:null,mediaType:null,prop:t.name,properties:[],template:null,type:"unknown"},o={...n,name:es(n)};if(t.$ref){let a=N({type:t.$ref});return o={...o,$refs:[...o.$refs,...a.$refs],base:a.base,export:"reference",imports:[...o.imports,...a.imports],template:a.template,type:a.type},o}let i=is(t);if(i){if(i.$ref?.startsWith(Tr)&&(i=Q(e,i)),i.$ref){let p=N({type:i.$ref});return o={...o,$refs:[...o.$refs,...p.$refs],base:p.base,export:"reference",imports:[...o.imports,...p.imports],template:p.template,type:p.type},o.default=H(i),o}let a=de({definition:i,openApi:e,types:r});return o={...o,$refs:[...o.$refs,...a.$refs],base:a.base,enum:[...o.enum,...a.enum],enums:[...o.enums,...a.enums],exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:a.export,format:a.format,imports:[...o.imports,...a.imports],isNullable:o.isNullable||a.isNullable,isReadOnly:a.isReadOnly,isRequired:o.isRequired||a.isRequired,link:a.link,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,pattern:te(a.pattern),properties:[...o.properties,...a.properties],template:a.template,type:a.type,uniqueItems:a.uniqueItems},(o.enum.length||o.enums.length)&&!o.meta&&(o.meta=Qn(o)),o.default=a.default,o}return o};var md=["cookie","formData","header","path","query"],as=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(o=>{let i=Q(e,o),a=Bp({openApi:e,parameter:i,types:r}),p=!Yn(a);if(!(!md.includes(i.in)||p)){switch(i.in){case "cookie":n.parametersCookie=[...n.parametersCookie,a];break;case "formData":n.parametersForm=[...n.parametersForm,a];break;case "header":n.parametersHeader=[...n.parametersHeader,a];break;case "path":n.parametersPath=[...n.parametersPath,a];break;case "query":n.parametersQuery=[...n.parametersQuery,a];break}n.$refs=[...n.$refs,...a.$refs],n.imports=[...n.imports,...a.imports],n.parameters=[...n.parameters,a];}}),n};var ld=["application/json-patch+json","application/json","application/ld+json","application/x-www-form-urlencoded","multipart/batch","multipart/form-data","multipart/mixed","multipart/related","text/json","text/plain"],ps=(e,t)=>{let r=Object.keys(t).filter(o=>{let i=o.split(";")[0].trim();return ld.includes(i)}).find(o=>!!t[o]?.schema);if(r)return {mediaType:r,schema:t[r].schema};let n=Object.keys(t).find(o=>!!t[o]?.schema);if(n)return {mediaType:n,schema:t[n].schema}};var Kp=({body:e,debug:t,openApi:r,types:n})=>{let o=e["x-body-name"]??"requestBody",i={$refs:[],base:"unknown",default:void 0,description:e.description||null,enum:[],enums:[],export:"interface",imports:[],in:"body",isDefinition:false,isNullable:e.nullable===true,isReadOnly:false,isRequired:e.required===true,link:null,mediaType:null,name:o,prop:o,properties:[],template:null,type:"unknown"};if(!e.content)return i;let a=ps(r,e.content);if(!a)return i;switch(i.mediaType=a.mediaType,i.mediaType){case "application/x-www-form-urlencoded":case "multipart/form-data":i.in="formData",i.name="formData",i.prop="formData";break}if(a.schema.$ref){let c=N({type:a.schema.$ref});return i.export="reference",i.type=c.type,i.base=c.base,i.template=c.template,i.$refs=[...i.$refs,...c.$refs],i.imports=[...i.imports,...c.imports],i}let p=de({debug:t,definition:a.schema,openApi:r,types:n});return i.$refs=[...i.$refs,...p.$refs],i.base=p.base,i.enum=[...i.enum,...p.enum],i.enums=[...i.enums,...p.enums],i.exclusiveMaximum=p.exclusiveMaximum,i.exclusiveMinimum=p.exclusiveMinimum,i.export=p.export,i.format=p.format,i.imports=[...i.imports,...p.imports],i.isNullable=i.isNullable||p.isNullable,i.isReadOnly=p.isReadOnly,i.isRequired=i.isRequired||p.isRequired,i.link=p.link,i.maximum=p.maximum,i.maxItems=p.maxItems,i.maxLength=p.maxLength,i.maxProperties=p.maxProperties,i.minimum=p.minimum,i.minItems=p.minItems,i.minLength=p.minLength,i.minProperties=p.minProperties,i.multipleOf=p.multipleOf,i.pattern=te(p.pattern),i.properties=[...i.properties,...p.properties],i.template=p.template,i.type=p.type,i.uniqueItems=p.uniqueItems,i};var Wp=({code:e,openApi:t,response:r,types:n})=>{let o={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"};if(r.content){let i=ps(t,r.content);if(i){if(i.schema.$ref?.startsWith("#/components/responses/")&&(i.schema=Q(t,i.schema)),i.schema.$ref){let p=N({type:i.schema.$ref});return o.base=p.base,o.export="reference",o.$refs=[...o.$refs,...p.$refs],o.imports=[...o.imports,...p.imports],o.template=p.template,o.type=p.type,o}let a=de({definition:i.schema,openApi:t,types:n});return o.export=a.export,o.type=a.type,o.base=a.base,o.template=a.template,o.link=a.link,o.isReadOnly=a.isReadOnly,o.isRequired=a.isRequired,o.isNullable=a.isNullable,o.format=a.format,o.maximum=a.maximum,o.exclusiveMaximum=a.exclusiveMaximum,o.minimum=a.minimum,o.exclusiveMinimum=a.exclusiveMinimum,o.multipleOf=a.multipleOf,o.maxLength=a.maxLength,o.minLength=a.minLength,o.maxItems=a.maxItems,o.minItems=a.minItems,o.uniqueItems=a.uniqueItems,o.maxProperties=a.maxProperties,o.minProperties=a.minProperties,o.pattern=te(a.pattern),o.$refs=[...o.$refs,...a.$refs],o.imports=[...o.imports,...a.imports],o.enum=[...o.enum,...a.enum],o.enums=[...o.enums,...a.enums],o.properties=[...o.properties,...a.properties],o}}if(r.headers)for(let i in r.headers)return o.in="header",o.name=i,o.type="string",o.base="string",o;return o};var zp=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([o,i])=>{let a=Un(o);if(!a)return;let p=Q(e,i),c=Wp({code:a,openApi:e,response:p,types:r});n=[...n,c];}),n=ts(n),n.sort(Xn)};var Ar=(e,t)=>{let r=[...e],n=[...t];for(;n.length>0;){let o=n[0];n=n.slice(1),r.every(a=>a.in!==o.in||a.name!==o.name)&&(r=[...r,o]);}return r},_p=({debug:e,method:t,op:r,openApi:n,pathParams:o,types:i,url:a})=>{let p={$refs:[],deprecated:!!r.deprecated,description:r.description||null,id:r.operationId||null,imports:[],method:t.toUpperCase(),parameters:[],parametersBody:o.parametersBody,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[],path:a,responseHeader:null,responses:[],summary:r.summary||null,tags:r.tags||null},c={...p,name:Jn({config:I(),method:p.method,operationId:r.operationId,path:p.path})};if(r.parameters){let l=as({openApi:n,parameters:r.parameters,types:i});c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.parameters=[...c.parameters,...l.parameters],c.parametersBody=l.parametersBody,c.parametersCookie=[...c.parametersCookie,...l.parametersCookie],c.parametersForm=[...c.parametersForm,...l.parametersForm],c.parametersHeader=[...c.parametersHeader,...l.parametersHeader],c.parametersPath=[...c.parametersPath,...l.parametersPath],c.parametersQuery=[...c.parametersQuery,...l.parametersQuery];}if(r.requestBody){let l=Q(n,r.requestBody),m=Kp({body:l,debug:e,openApi:n,types:i});c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports],c.parameters=[...c.parameters,m],c.parametersBody=m;}if(r.responses){c.responses=zp({openApi:n,responses:r.responses,types:i});let l=c.responses.filter(m=>m.responseTypes.includes("success"));c.responseHeader=Zn(l),l.forEach(m=>{c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports];});}return c.parameters=Ar(c.parameters,o.parameters),c.parametersCookie=Ar(c.parametersCookie,o.parametersCookie),c.parametersForm=Ar(c.parametersForm,o.parametersForm),c.parametersHeader=Ar(c.parametersHeader,o.parametersHeader),c.parametersPath=Ar(c.parametersPath,o.parametersPath),c.parametersQuery=Ar(c.parametersQuery,o.parametersQuery),c.parameters=ns(c.parameters),c};var Qp=({openApi:e,types:t})=>{let r=new Map,n=[],o=I();for(let i in e.paths){let a=e.paths[i],p=as({openApi:e,parameters:a.parameters??[],types:t});for(let c in a){let l=c,m=L({method:l,path:i});if(Vn.includes(l)){let f=a[l];if(f.operationId&&(r.has(f.operationId)?o.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${f.operationId} in ${m}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(f.operationId,m)),Gn({config:o,operationKey:m})){let d=_p({method:l,op:f,openApi:e,pathParams:p,types:t,url:i});n.push(d);}}}}return n};var Hp=e=>{let t=e.servers?.[0],r=t?.variables||{},n=t?.url||"";return Object.entries(r).forEach(([o,i])=>{n=n.replace(`{${o}}`,i.default);}),n.replace(/\/$/g,"")};var Zp=e=>{let t=Bn(e.info.version),r=Hp(e),{models:n,types:o}=Vp(e),i=Qp({openApi:e,types:o});return {models:n,operations:i,server:r,types:o,version:t}};function mP({openApi:e}){let t=e;if("openapi"in t)return Zp(t);if("swagger"in t)return $p(t);throw new Error(`Unsupported OpenAPI specification: ${JSON.stringify(t,null,2)}`)}var lP=({config:e,dependencies:t,logger:r,spec:n})=>{let o=new kn({config:e,dependencies:t,logger:r,spec:n});if("swagger"in o.spec)return Wo(o),o;switch(o.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return zo(o),o;case "3.1.0":case "3.1.1":return _o(o),o;}throw new Error("Unsupported OpenAPI specification")};var rt={baseUrl:true,bundle:true,exportFromIndex:false},nt={dependencies:["@hey-api/typescript"],output:"client",tags:["client"]};var ud=fileURLToPath(import.meta.url),Up=Z.dirname(ud),Gp=e=>{let t=e.split(Z.sep);return t.slice(0,t.length-1).join(Z.sep)},re=({config:e,sourceOutput:t})=>{let r=A(e);if("bundle"in r.config&&r.config.bundle)return tr({moduleOutput:"client",sourceOutput:t});if(Z.isAbsolute(r.name)){let n=Gp(r.name),o=Z.resolve(e.output.path);return Z.relative(o,n).replace(/\\/g,"/")}return r.name},cs=(e,t)=>{if(ke.statSync(e).isDirectory()){ke.existsSync(t)||ke.mkdirSync(t,{recursive:true});let n=ke.readdirSync(e);for(let o of n)cs(Z.join(e,o),Z.join(t,o));}else {let n=ke.readFileSync(e);ke.writeFileSync(t,n);}},yd=({filePath:e,relativeImportSuffix:t})=>{let r=ke.readFileSync(e,"utf8");t&&(r=r.replace(/from\s+['"](\.\.?\/[^'"]*?)['"]/g,(o,i)=>{let a=i.lastIndexOf("/");return (a>=0?i.slice(a+1):i).includes(".")?o:`from '${i}${t}'`})),r=`// This file is auto-generated by @hey-api/openapi-ts

${r}`,ke.writeFileSync(e,r,"utf8");},Xp=({fileName:e,outputPath:t,shouldAppendJs:r,shouldRename:n})=>{let{extension:o,name:i}=Hr(e),a=Z.resolve(t,e),p="";if(n&&(p=".gen",i!=="index"&&!i.endsWith(p))){let l=Z.resolve(t,[i,"gen",o].join("."));ke.renameSync(a,l),a=l;}r&&(p=`${p}.js`),yd({filePath:a,relativeImportSuffix:p});},IP=({legacy:e,outputPath:t,plugin:r,tsConfig:n})=>{if(r.name.startsWith("@hey-api/client-")){let d=n?.options.moduleResolution===S.ModuleResolutionKind.NodeNext,u=Z.resolve(t,"core");lt(u);let y=Z.resolve(Up,"clients","core");cs(y,u);let g=ke.readdirSync(u);for(let $ of g)Xp({fileName:$,outputPath:u,shouldAppendJs:d,shouldRename:!e});let x=Z.resolve(t,"client");lt(x);let b=r.name.slice(16),P=Z.resolve(Up,"clients",b);cs(P,x);let C=ke.readdirSync(x);for(let $ of C)Xp({fileName:$,outputPath:x,shouldAppendJs:d,shouldRename:!e});return}let i="";if(Z.isAbsolute(r.name)&&(i=Gp(r.name)),i){let d=Z.resolve(t,"client");lt(d),cs(i,d);return}let p=Z.normalize(Ci.resolve(r.name)).split(Z.sep),c=p.slice(0,p.indexOf("dist")+1).join(Z.sep),m=[p[p.length-1],"index.d.ts","index.d.cts"],f=Z.resolve(t,"client");lt(f);for(let d of m)ke.copyFileSync(Z.resolve(c,d),Z.resolve(f,d));};var hd=({plugin:e})=>{let{baseUrl:t}=e.config;if(t===false)return;if(typeof t=="string")return t;let{servers:r}=e.context.ir;if(r)return r[typeof t=="number"?t:0]?.url},Jp=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=re({config:e.context.config,sourceOutput:t.path}),n=t.addSymbol({name:"createClient"});t.addImport({aliases:{[n.name]:n.placeholder},from:r,names:[n.name]});let o=t.addSymbol({name:"createConfig"});t.addImport({aliases:{[o.name]:o.placeholder},from:r,names:[o.name]});let i=e.getPluginOrThrow("@hey-api/typescript"),a=e.gen.selectSymbolFirstOrThrow(i.api.getSelector("ClientOptions"));t.addImport({from:a.file,typeNames:[a.placeholder]});let p;e.config.runtimeConfigPath&&(p=t.addSymbol({name:"createClientConfig"}),t.addImport({from:t.relativePathToFile({path:e.config.runtimeConfigPath}),names:[p.placeholder]}));let c=[],l=hd({plugin:e});if(l){let u=Xe(l);if(u.protocol&&u.host&&!l.includes("{"))c.push({key:ge(e.context.config),value:l});else if(l!=="/"&&l.startsWith("/")){let y=l.endsWith("/")?l.slice(0,-1):l;c.push({key:ge(e.context.config),value:y});}}"throwOnError"in e.config&&e.config.throwOnError&&c.push({key:"throwOnError",value:true});let m=[s.callExpression({functionName:o.placeholder,parameters:c.length?[s.objectExpression({obj:c})]:void 0,types:[s.typeReferenceNode({typeName:a.placeholder})]})],f=t.addSymbol({name:"client",selector:e.api.getSelector("client")}),d=s.constVariable({exportConst:true,expression:s.callExpression({functionName:n.placeholder,parameters:p?[s.callExpression({functionName:p.placeholder,parameters:m})]:m}),name:f.placeholder});f.update({value:d});};var Yp=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=re({config:e.context.config,sourceOutput:t.path}),n=e.getPluginOrThrow("@hey-api/typescript"),o=e.gen.selectSymbolFirstOrThrow(n.api.getSelector("ClientOptions"));t.addImport({from:o.file,typeNames:[o.placeholder]});let i=t.addSymbol({name:"Config"}),a=t.addSymbol({name:"DefaultClientOptions"});t.addImport({aliases:{ClientOptions:a.placeholder,[i.name]:i.placeholder},from:r,typeNames:["ClientOptions",i.name]});let p=s.typeReferenceNode({typeName:a.placeholder}),c=s.typeReferenceNode({typeName:"T"}),l=t.addSymbol({name:"CreateClientConfig"}),m=s.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:l.placeholder,type:s.functionTypeNode({parameters:[s.parameterDeclaration({name:"override",required:false,type:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[p,c]})],typeName:i.placeholder})})],returnType:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:[p],typeName:"Required"}),c]})],typeName:i.placeholder})}),typeParameters:[{default:s.typeReferenceNode({typeName:o.placeholder}),extends:p,name:"T"}]});l.update({value:m});};var st=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F});Yp({plugin:e}),Jp({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var ms=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var gd=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},ec=({operation:e,plugin:t})=>{if(!e.security||!t.config.auth)return [];let r=[];for(let n of e.security){let o=gd({securitySchemeObject:n});o?r.push(o):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r};var Er="TComposable",ot="DefaultT",Jo="ResT";var tc=({operation:e,plugin:t})=>{if(!t.config.validator.request)return;let r=t.getPluginOrThrow(t.config.validator.request);if(r.api.createRequestValidator)return r.api.createRequestValidator({file:t.gen.ensureFile(t.output),operation:e,plugin:r})},rc=({operation:e,plugin:t})=>{if(!t.config.validator.response)return;let r=t.getPluginOrThrow(t.config.validator.response);if(r.api.createResponseValidator)return r.api.createResponseValidator({file:t.gen.ensureFile(t.output),operation:e,plugin:r})};var nc=({context:e,value:t})=>{let r=k({case:"PascalCase",value:ft(t)});return Rr({config:e.config,name:r})},xd=({operation:e,plugin:t})=>t.config.methodNameBuilder?t.config.methodNameBuilder(e):!t.config.asClass&&e.id.match(he)?`${e.id}_`:e.id,$e=({context:e,operation:t,plugin:r})=>{let n=new Map,o,i,a=[];if(r.config.classStructure==="auto"&&t.operationId&&(a=t.operationId.split(/[./]/).filter(Boolean),a.length>1)){let c=a.pop();i=k({case:"camelCase",value:ft(c)}),o=a.pop();}let p=r.config.instance?[r.config.instance]:t.tags??["default"];for(let c of p){let l=nc({context:e,value:o||c}),m=[c];o&&(a.includes(c)||c===o?m=[...a,o]:m=[c,...a,o]),n.set(c,{className:l,methodName:i||xd({operation:t,plugin:r}),path:m.map(f=>nc({context:e,value:f}))});}return n},nn=({file:e,operation:t,plugin:r,throwOnError:n})=>{let i=A(r.context.config).name==="@hey-api/client-nuxt",a=r.getPluginOrThrow("@hey-api/typescript"),p=r.gen.selectSymbolFirst(a.api.getSelector("data",t.id));p&&e.addImport({from:p.file,typeNames:[p.placeholder]});let c=p?.placeholder||"unknown",l=r.gen.selectSymbolFirstOrThrow(r.api.getSelector("Options"));if(i){let m=r.gen.selectSymbolFirst(a.api.getSelector("response",t.id));m&&e.addImport({from:m.file,typeNames:[m.placeholder]});let f=m?.placeholder||"unknown";return `${l.placeholder}<${Er}, ${c}, ${f}, ${ot}>`}return n?`${l.placeholder}<${c}, ${n}>`:p?`${l.placeholder}<${p.placeholder}>`:l.placeholder},Yo=({file:e,isRequiredOptions:t,operation:r,plugin:n})=>{let o={argNames:[],fields:[],parameters:[]},i=n.getPluginOrThrow("@hey-api/typescript"),a={usedTypeIDs:new Set},c=A(n.context.config).name==="@hey-api/client-nuxt";if(n.config.params_EXPERIMENTAL==="experiment"){if(r.parameters?.path)for(let l in r.parameters.path){let m=r.parameters.path[l],f=_e(m.name);o.argNames.push(f),o.fields.push({in:"path",key:f}),o.parameters.push({isRequired:m.required,name:f,type:i.api.schemaToType({onRef:d=>{e.addImport({from:d.file,typeNames:[d.placeholder]});},plugin:i,schema:m.schema,state:a})});}if(r.parameters?.query)for(let l in r.parameters.query){let m=r.parameters.query[l],f=_e(m.name);o.argNames.push(f),o.fields.push({in:"path",key:f}),o.parameters.push({isRequired:m.required,name:f,type:i.api.schemaToType({onRef:d=>{e.addImport({from:d.file,typeNames:[d.placeholder]});},plugin:i,schema:m.schema,state:a})});}if(r.body){let l="body";o.argNames.push(l),o.fields.push({in:"body"}),o.parameters.push({isRequired:r.body.required,name:l,type:i.api.schemaToType({onRef:m=>{e.addImport({from:m.file,typeNames:[m.placeholder]});},plugin:i,schema:r.body.schema,state:a})});}}return o.parameters.push({isRequired:t,name:"options",type:nn({file:e,operation:r,plugin:n,throwOnError:c?void 0:"ThrowOnError"})}),o},bd=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},ei=({isRequiredOptions:e,opParameters:t,operation:r,plugin:n})=>{let o=n.gen.ensureFile(n.output),i=A(n.context.config),a=i.name==="@hey-api/client-nuxt",p=n.getPluginOrThrow("@hey-api/typescript"),c=n.gen.selectSymbolFirst(p.api.getSelector(a?"response":"responses",r.id));c&&o.addImport({from:c.file,typeNames:[c.placeholder]});let l=c?.placeholder||"unknown",m=n.gen.selectSymbolFirst(p.api.getSelector(a?"error":"errors",r.id));m&&o.addImport({from:m.file,typeNames:[m.placeholder]});let f=m?.placeholder||"unknown",d=[];if(r.body)switch(r.body.type){case "form-data":{let w=o.ensureSymbol({name:"formDataBodySerializer",selector:n.api.getSelector("formDataBodySerializer")});o.addImport({from:re({config:n.context.config,sourceOutput:o.path}),names:[w.name]}),d.push({spread:w.placeholder});break}case "json":break;case "text":case "octet-stream":d.push({key:"bodySerializer",value:null});break;case "url-search-params":{let w=o.ensureSymbol({name:"urlSearchParamsBodySerializer",selector:n.api.getSelector("urlSearchParamsBodySerializer")});o.addImport({from:re({config:n.context.config,sourceOutput:o.path}),names:[w.name]}),d.push({spread:w.placeholder});break}}for(let w in r.parameters?.query){let K=r.parameters.query[w];if((K.schema.type==="array"||K.schema.type==="tuple")&&(K.style!=="form"||!K.explode)){d.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}let u=tc({operation:r,plugin:n});if(u&&d.push({key:"requestValidator",value:u}),n.config.transformer==="@hey-api/transformers"){let w=n.getPluginOrThrow(n.config.transformer),K=n.gen.selectSymbolFirst(w.api.getSelector("response",r.id));K?.value&&(o.addImport({from:K.file,names:[K.placeholder]}),d.push({key:"responseTransformer",value:K.placeholder}));}let y=false,g;for(let w in r.responses){let K=r.responses[w];!g&&i.name==="@hey-api/client-axios"&&vo({statusCode:w})==="2XX"&&(g=bd(K.mediaType),g&&d.push({key:"responseType",value:g})),K.mediaType==="text/event-stream"&&(y=true);}let x=rc({operation:r,plugin:n});x&&d.push({key:"responseValidator",value:x}),n.config.responseStyle==="data"&&d.push({key:"responseStyle",value:n.config.responseStyle});let b=ec({context:n.context,operation:r,plugin:n});b.length&&d.push({key:"security",value:s.arrayLiteralExpression({elements:b})}),d.push({key:"url",value:r.path}),d.push({spread:"options"});let P=[],C=t.argNames.length;if(C){let w=[],K=[];for(let Le of t.argNames)w.push(s.identifier({text:Le}));for(let Le of t.fields){let er=[];"in"in Le&&(er.push({key:"in",value:Le.in}),Le.key&&er.push({key:"key",value:Le.key}),Le.map&&er.push({key:"map",value:Le.map})),K.push(s.objectExpression({obj:er}));}let mt=o.ensureSymbol({name:"buildClientParams",selector:n.api.getSelector("buildClientParams")});o.addImport({aliases:{buildClientParams:mt.placeholder},from:re({config:n.context.config,sourceOutput:o.path}),names:["buildClientParams"]}),P.push(s.constVariable({expression:s.callExpression({functionName:mt.placeholder,parameters:[s.arrayLiteralExpression({elements:w}),s.arrayLiteralExpression({elements:K})]}),name:"params"})),d.push({spread:"params"});}if(r.body){let w=r.parameters?.header?.["content-type"];if(!!!w?.required){let mt=[{key:w?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!e,name:"headers"})}];C&&mt.push({spread:s.propertyAccessExpression({expression:s.identifier({text:"params"}),name:"headers"})}),d.push({key:"headers",value:mt});}}let $;n.config.client&&i.api&&"getSelector"in i.api&&($=n.gen.selectSymbolFirst(i.api.getSelector("client")),$&&o.addImport({from:$.file,names:[$.placeholder]}));let q=s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!e,name:"client"}),B;n.config.instance?B=s.binaryExpression({left:q,operator:"??",right:s.propertyAccessExpression({expression:s.this(),name:"_client"})}):$?B=s.binaryExpression({left:q,operator:"??",right:$.placeholder}):B=q;let W=[];a?W.push(Er,`${l} | ${ot}`,f,ot):W.push(l,f,"ThrowOnError"),n.config.responseStyle==="data"&&W.push(s.stringLiteral({text:n.config.responseStyle}));let se=y?s.propertyAccessExpression({expression:B,name:s.identifier({text:"sse"})}):B;return se=s.propertyAccessExpression({expression:se,name:s.identifier({text:r.method})}),P.push(s.returnFunctionCall({args:[s.objectExpression({identifiers:["responseTransformer"],obj:d})],name:se,types:W})),P};var X=({operation:e})=>{let t=[];return e.summary&&t.push(_(e.summary)),e.description&&t.push(_(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},ce=({context:e,operation:t})=>{let n=A(e.config).name==="@hey-api/client-nuxt",o=e.config.plugins["@hey-api/sdk"];return o&&!o.config.client&&!o.config.instance||n||lr(t)},Cr=({operation:e})=>{for(let t in e.responses)if(e.responses[t].mediaType==="text/event-stream")return  true;return  false};var Nr="/http/requests",Sd=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${Nr}`),r=new Map,n=new Set,o=e.getPluginOrThrow("@hey-api/sdk");e.forEach("operation",({operation:a})=>{let p=ce({context:e.context,operation:a}),c=$e({context:e.context,operation:a,plugin:o});for(let l of c.values())l.path.forEach((m,f)=>{r.has(m)||r.set(m,{className:m,classes:new Set,methods:new Set,nodes:[],root:!f});let d=l.path[f-1];if(d&&d!==m){let b=r.get(d);b.classes.add(m),r.set(d,b);}if(!(l.path.length===f+1))return;let y=r.get(m),g=e.config.httpRequests.methodNameBuilder(a);if(y.methods.has(g))return;let x=Td({isRequiredOptions:p,methodName:g,operation:a,plugin:e});y.nodes.length?y.nodes.push(s.identifier({text:`
`}),x):y.nodes.push(x),y.methods.add(g),r.set(m,y);});});let i=a=>{if(n.has(a.className))return;if(a.classes.size)for(let m of a.classes){let f=r.get(m);i(f),a.nodes.push(s.propertyDeclaration({initializer:s.newExpression({argumentsArray:[],expression:s.identifier({text:O({config:{case:"preserve",name:e.config.httpRequests.classNameBuilder},name:f.className})})}),name:k({case:"camelCase",value:f.className})}));}let p=t.ensureSymbol({selector:e.api.getSelector("Injectable")}).update({name:"Injectable"});t.addImport({from:"@angular/core",names:[p.placeholder]});let c=t.addSymbol({name:O({config:{case:"preserve",name:e.config.httpRequests.classNameBuilder},name:a.className}),selector:e.api.getSelector("class",a.className)}),l=s.classDeclaration({decorator:a.root?{args:[{providedIn:"root"}],name:p.placeholder}:void 0,exportClass:a.root,name:c.placeholder,nodes:a.nodes});c.update({value:l}),n.add(a.className);};for(let a of r.values())i(a);},Od=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${Nr}`);e.forEach("operation",({operation:r})=>{let n=ce({context:e.context,operation:r}),o=t.addSymbol({name:e.config.httpRequests.methodNameBuilder(r),selector:e.api.getSelector("httpRequest",r.id)}),i=Rd({isRequiredOptions:n,operation:r,plugin:e,symbol:o});o.update({value:i});});},sc=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(`${t.output}${Nr}`),n,o=A(t.context.config);o.api&&"getSelector"in o.api&&(n=t.gen.selectSymbolFirst(o.api.getSelector("client")),n&&r.addImport({from:n.file,names:[n.placeholder]}));let i=s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:"client"}),a;return n?a=s.binaryExpression({left:i,operator:"??",right:n.placeholder}):a=i,s.callExpression({functionName:s.propertyAccessExpression({expression:a,name:"requestOptions"}),parameters:[s.objectExpression({obj:[{key:"responseStyle",value:s.identifier({text:"'data'"})},{key:"method",value:s.identifier({text:`'${e.method.toUpperCase()}'`})},{key:"url",value:s.identifier({text:`'${e.path}'`})},{spread:"options"}]})]})},Td=({isRequiredOptions:e,methodName:t,operation:r,plugin:n})=>{let o=n.gen.ensureFile(`${n.output}${Nr}`),i=n.getPluginOrThrow("@hey-api/typescript"),a=o.ensureSymbol({selector:n.api.getSelector("HttpRequest")}).update({name:"HttpRequest"});o.addImport({from:"@angular/common/http",typeNames:[a.placeholder]});let p=n.getPluginOrThrow("@hey-api/sdk"),c=n.gen.selectSymbolFirstOrThrow(p.api.getSelector("Options"));o.addImport({from:c.file,typeNames:[c.placeholder]});let l=n.gen.selectSymbolFirst(i.api.getSelector("data",r.id));l&&o.addImport({from:l.file,typeNames:[l.placeholder]});let m=l?.placeholder||"unknown";return s.methodDeclaration({accessLevel:"public",comment:X({operation:r}),name:t,parameters:[{isRequired:e,name:"options",type:`${c.placeholder}<${m}, ThrowOnError>`}],returnType:`${a.placeholder}<unknown>`,statements:[s.returnStatement({expression:sc({operation:r,plugin:n})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]})},Rd=({isRequiredOptions:e,operation:t,plugin:r,symbol:n})=>{let o=r.gen.ensureFile(`${r.output}${Nr}`),i=r.getPluginOrThrow("@hey-api/typescript"),a=o.ensureSymbol({selector:r.api.getSelector("HttpRequest")}).update({name:"HttpRequest"});o.addImport({from:"@angular/common/http",typeNames:[a.placeholder]});let p=r.getPluginOrThrow("@hey-api/sdk"),c=r.gen.selectSymbolFirstOrThrow(p.api.getSelector("Options"));o.addImport({from:c.file,typeNames:[c.placeholder]});let l=r.gen.selectSymbolFirst(i.api.getSelector("data",t.id));l&&o.addImport({from:l.file,typeNames:[l.placeholder]});let m=l?.placeholder||"unknown";return s.constVariable({comment:X({operation:t}),exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:e,name:"options",type:`${c.placeholder}<${m}, ThrowOnError>`}],returnType:`${a.placeholder}<unknown>`,statements:[s.returnStatement({expression:sc({operation:t,plugin:r})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]}),name:n.placeholder})},oc=({plugin:e})=>{let t=e.gen.createFile(`${e.output}${Nr}`,{extension:".ts",path:"{{path}}.gen",renderer:new F});e.config.httpRequests.asClass?Sd({plugin:e}):Od({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var jr="/http/resources",Id=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${jr}`),r=new Map,n=new Set,o=e.getPluginOrThrow("@hey-api/sdk");e.forEach("operation",({operation:a})=>{let p=ce({context:e.context,operation:a}),c=$e({context:e.context,operation:a,plugin:o});for(let l of c.values())l.path.forEach((m,f)=>{r.has(m)||r.set(m,{className:m,classes:new Set,methods:new Set,nodes:[],root:!f});let d=l.path[f-1];if(d&&d!==m){let b=r.get(d);b.classes.add(m),r.set(d,b);}if(!(l.path.length===f+1))return;let y=r.get(m),g=e.config.httpResources.methodNameBuilder(a);if(y.methods.has(g))return;let x=Ad({isRequiredOptions:p,methodName:g,operation:a,plugin:e});y.nodes.length?y.nodes.push(s.identifier({text:`
`}),x):y.nodes.push(x),y.methods.add(g),r.set(m,y);});});let i=a=>{if(n.has(a.className))return;if(a.classes.size)for(let m of a.classes){let f=r.get(m);i(f),a.nodes.push(s.propertyDeclaration({initializer:s.newExpression({argumentsArray:[],expression:s.identifier({text:O({config:{case:"preserve",name:e.config.httpResources.classNameBuilder},name:f.className})})}),name:k({case:"camelCase",value:f.className})}));}let p=t.ensureSymbol({selector:e.api.getSelector("Injectable")}).update({name:"Injectable"});t.addImport({from:"@angular/core",names:[p.placeholder]});let c=t.addSymbol({name:O({config:{case:"preserve",name:e.config.httpResources.classNameBuilder},name:a.className})}),l=s.classDeclaration({decorator:a.root?{args:[{providedIn:"root"}],name:p.placeholder}:void 0,exportClass:a.root,name:c.placeholder,nodes:a.nodes});c.update({value:l}),n.add(a.className);};for(let a of r.values())i(a);},Pd=({plugin:e})=>{let t=e.gen.ensureFile(`${e.output}${jr}`);e.forEach("operation",({operation:r})=>{let n=ce({context:e.context,operation:r}),o=t.addSymbol({name:e.config.httpResources.methodNameBuilder(r)}),i=Ed({isRequiredOptions:n,operation:r,plugin:e,symbol:o});o.update({value:i});});},ic=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(`${t.output}${jr}`),n=t.getPluginOrThrow("@hey-api/sdk"),o=t.getPluginOrThrow("@hey-api/typescript"),i=r.ensureSymbol({selector:t.api.getSelector("httpResource")}).update({name:"httpResource"});r.addImport({from:"@angular/common/http",names:[i.placeholder]});let a=t.gen.selectSymbolFirst(o.api.getSelector("response",e.id));a&&r.addImport({from:a.file,typeNames:[a.placeholder]});let p=a?.placeholder||"unknown";if(t.config.httpRequests.asClass){let c=$e({context:t.context,operation:e,plugin:n}),l=Array.from(c.values())[0];if(l){let m=l.path[0],f=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("class",m));r.addImport({from:f.file,names:[f.placeholder]});let d=r.ensureSymbol({selector:t.api.getSelector("inject")}).update({name:"inject"});r.addImport({from:"@angular/core",names:[d.placeholder]});let u=s.callExpression({functionName:d.placeholder,parameters:[s.identifier({text:f.placeholder})]});for(let y=1;y<l.path.length;y++){let g=l.path[y];g&&(u=s.propertyAccessExpression({expression:u,name:k({case:"camelCase",value:g})}));}return u=s.propertyAccessExpression({expression:u,name:t.config.httpRequests.methodNameBuilder(e)}),s.callExpression({functionName:i.placeholder,parameters:[s.arrowFunction({parameters:[],statements:[s.constVariable({expression:s.conditionalExpression({condition:s.identifier({text:"options"}),whenFalse:s.identifier({text:"undefined"}),whenTrue:s.callExpression({functionName:"options",parameters:[]})}),name:"opts"}),s.returnStatement({expression:s.conditionalExpression({condition:s.identifier({text:"opts"}),whenFalse:s.identifier({text:"undefined"}),whenTrue:s.callExpression({functionName:u,parameters:[s.identifier({text:"opts"})]})})})]})],types:[s.typeNode(p)]})}}else {let c=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("httpRequest",e.id));return r.addImport({from:c.file,names:[c.placeholder]}),s.callExpression({functionName:i.placeholder,parameters:[s.arrowFunction({parameters:[],statements:[s.constVariable({expression:s.conditionalExpression({condition:s.identifier({text:"options"}),whenFalse:s.identifier({text:"undefined"}),whenTrue:s.callExpression({functionName:"options",parameters:[]})}),name:"opts"}),s.returnStatement({expression:s.conditionalExpression({condition:s.identifier({text:"opts"}),whenFalse:s.identifier({text:"undefined"}),whenTrue:s.callExpression({functionName:c.placeholder,parameters:[s.identifier({text:"opts"})]})})})]})],types:[s.typeNode(p)]})}return s.callExpression({functionName:i.placeholder,parameters:[s.arrowFunction({parameters:[],statements:[s.returnStatement({expression:s.identifier({text:"undefined"})})]})],types:[s.typeNode(p)]})},Ad=({isRequiredOptions:e,methodName:t,operation:r,plugin:n})=>{let o=n.gen.ensureFile(`${n.output}${jr}`),i=n.getPluginOrThrow("@hey-api/typescript"),a=n.getPluginOrThrow("@hey-api/sdk"),p=n.gen.selectSymbolFirstOrThrow(a.api.getSelector("Options"));o.addImport({from:p.file,typeNames:[p.placeholder]});let c=n.gen.selectSymbolFirst(i.api.getSelector("data",r.id));c&&o.addImport({from:c.file,typeNames:[c.placeholder]});let l=c?.placeholder||"unknown";return s.methodDeclaration({accessLevel:"public",comment:X({operation:r}),name:t,parameters:[{isRequired:e,name:"options",type:`() => ${p.placeholder}<${l}, ThrowOnError> | undefined`}],returnType:void 0,statements:[s.returnStatement({expression:ic({operation:r,plugin:n})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]})},Ed=({isRequiredOptions:e,operation:t,plugin:r,symbol:n})=>{let o=r.gen.ensureFile(`${r.output}${jr}`),i=r.getPluginOrThrow("@hey-api/typescript"),a=r.getPluginOrThrow("@hey-api/sdk"),p=r.gen.selectSymbolFirstOrThrow(a.api.getSelector("Options"));o.addImport({from:p.file,typeNames:[p.placeholder]});let c=r.gen.selectSymbolFirst(i.api.getSelector("data",t.id));c&&o.addImport({from:c.file,typeNames:[c.placeholder]});let l=c?.placeholder||"unknown";return s.constVariable({comment:X({operation:t}),exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:e,name:"options",type:`() => ${p.placeholder}<${l}, ThrowOnError> | undefined`}],statements:[s.returnStatement({expression:ic({operation:t,plugin:r})})],types:[{default:false,extends:"boolean",name:"ThrowOnError"}]}),name:n.placeholder})},ac=({plugin:e})=>{let t=e.gen.createFile(`${e.output}${jr}`,{extension:".ts",path:"{{path}}.gen",renderer:new F});e.config.httpResources.asClass?Id({plugin:e}):Pd({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var pc=({plugin:e})=>{e.config.httpRequests.enabled&&oc({plugin:e}),e.config.httpResources.enabled&&ac({plugin:e});};var ls={api:new ms({name:"@angular/common"}),config:{exportFromIndex:false},dependencies:["@hey-api/client-angular","@hey-api/sdk"],handler:pc,name:"@angular/common",output:"@angular/common",resolveConfig:(e,t)=>{if(e.config.httpRequests=t.valueToObject({defaultValue:{asClass:false,classNameBuilder:"{{name}}Requests",enabled:true},mappers:{boolean:r=>({enabled:r})},value:e.config.httpRequests}),!e.config.httpRequests.methodNameBuilder){let{asClass:r}=e.config.httpRequests;e.config.httpRequests.methodNameBuilder=n=>r?String(n.id):`${String(n.id)}Request`;}if(e.config.httpResources=t.valueToObject({defaultValue:{asClass:false,classNameBuilder:"{{name}}Resources",enabled:true},mappers:{boolean:r=>({enabled:r})},value:e.config.httpResources}),!e.config.httpResources.methodNameBuilder){let{asClass:r}=e.config.httpResources;e.config.httpResources.methodNameBuilder=n=>r?String(n.id):`${String(n.id)}Resource`;}}};var fs=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var ds={...nt,api:new fs({name:"@hey-api/client-angular"}),config:{...rt,throwOnError:false},handler:st,name:"@hey-api/client-angular"};var us=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var ys={...nt,api:new us({name:"@hey-api/client-axios"}),config:{...rt,throwOnError:false},handler:st,name:"@hey-api/client-axios"};var hs=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var gs={...nt,api:new hs({name:"@hey-api/client-fetch"}),config:{...rt,throwOnError:false},handler:st,name:"@hey-api/client-fetch"};var xs=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var bs={...nt,api:new xs({name:"@hey-api/client-next"}),config:{...rt,throwOnError:false},handler:st,name:"@hey-api/client-next"};var Ss=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Os={...nt,api:new Ss({name:"@hey-api/client-nuxt"}),config:rt,handler:st,name:"@hey-api/client-nuxt"};var Ts={config:{},handler:()=>{},name:"legacy/angular",output:"client",tags:["client"]};var Rs={config:{},handler:()=>{},name:"legacy/axios",output:"client",tags:["client"]};var Is={config:{},handler:()=>{},name:"legacy/fetch",output:"client",tags:["client"]};var Ps={config:{},handler:()=>{},name:"legacy/node",output:"client",tags:["client"]};var As={config:{},handler:()=>{},name:"legacy/xhr",output:"client",tags:["client"]};var Es=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var ti=({plugin:e,schema:t})=>{e.config.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},kr=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>kr({context:e,plugin:t,schema:o}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(ti({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=kr({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>kr({context:e,plugin:t,schema:o}))),n.items&&(n.items=kr({context:e,plugin:t,schema:n.items})),n.properties)for(let o in n.properties){let i=n.properties[o];typeof i!="boolean"&&(n.properties[o]=kr({context:e,plugin:t,schema:i}));}return n},$t=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>$t({context:e,plugin:t,schema:o}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(ti({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=$t({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>$t({context:e,plugin:t,schema:o}))),n.anyOf&&(n.anyOf=n.anyOf.map(o=>$t({context:e,plugin:t,schema:o}))),n.items&&(n.items=$t({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(o=>$t({context:e,plugin:t,schema:o}))),n.properties)for(let o in n.properties){let i=n.properties[o];typeof i!="boolean"&&(n.properties[o]=$t({context:e,plugin:t,schema:i}));}return n},Ot=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>Ot({context:e,plugin:t,schema:o}));let n=structuredClone(r);if(ti({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=Ot({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>Ot({context:e,plugin:t,schema:o}))),n.anyOf&&(n.anyOf=n.anyOf.map(o=>Ot({context:e,plugin:t,schema:o}))),n.items&&(n.items=Ot({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(o=>Ot({context:e,plugin:t,schema:o}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(o=>Ot({context:e,plugin:t,schema:o}))),n.properties)for(let o in n.properties){let i=n.properties[o];typeof i!="boolean"&&(n.properties[o]=Ot({context:e,plugin:t,schema:i}));}return n},ri=({name:e,plugin:t,schema:r})=>{let n="";return t.config.nameBuilder&&(typeof t.config.nameBuilder=="function"?n=t.config.nameBuilder(e,r):n=t.config.nameBuilder.replace("{{name}}",e)),n||(n=`${e}Schema`),_e(n)},Dd=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],i=t.gen.ensureFile(t.output).ensureSymbol({name:ri({name:r,plugin:t,schema:n}),selector:t.api.getSelector("ref",r)}),a=kr({context:e,plugin:t,schema:n}),p=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:a}),name:i.placeholder});i.update({value:p});}},Vd=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],i=t.gen.ensureFile(t.output).ensureSymbol({name:ri({name:r,plugin:t,schema:n}),selector:t.api.getSelector("ref",r)}),a=$t({context:e,plugin:t,schema:n}),p=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:a}),name:i.placeholder});i.update({value:p});}},Bd=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],i=t.gen.ensureFile(t.output).ensureSymbol({name:ri({name:r,plugin:t,schema:n}),selector:t.api.getSelector("ref",r)}),a=Ot({context:e,plugin:t,schema:n}),p=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:a}),name:i.placeholder});i.update({value:p});}},cc=({plugin:e})=>{if(e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),"swagger"in e.context.spec){Dd({context:e.context,plugin:e});return}switch(e.context.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":Vd({context:e.context,plugin:e});break;case "3.1.0":case "3.1.1":Bd({context:e.context,plugin:e});break;default:throw new Error("Unsupported OpenAPI specification")}};var ni=(e,t)=>{let r=I();if(Array.isArray(e))return e.map(o=>ni(o));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([o,i])=>{if(r.plugins["@hey-api/schemas"]?.config.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(o)&&t!=="properties"){delete n[o];return}o==="$ref"&&typeof i=="string"&&(n[o]=decodeURIComponent(i)),i&&typeof i=="object"&&(n[o]=ni(i,o));}),n},Kd=(e,t)=>{let r=I(),n=qe(e),o=r.plugins["@hey-api/schemas"];return o?.config.nameBuilder?typeof o.config.nameBuilder=="function"?o.config.nameBuilder(n,t):o.config.nameBuilder.replace("{{name}}",n):`${n}Schema`},mc=({files:e,openApi:t,plugin:r})=>{let n=I();e.schemas=new ze({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"schemas",name:"schemas.ts"});let o=(i,a)=>{let p=ni(a),c=s.objectExpression({obj:p}),l=s.constVariable({assertion:"const",exportConst:true,expression:c,name:Kd(i,a)});e.schemas.add(l);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([i,a])=>{o(i,a);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([i,a])=>{o(i,a);});};var Cs={api:new Es({name:"@hey-api/schemas"}),config:{exportFromIndex:false,nameBuilder:e=>`${e}Schema`,type:"json"},handler:cc,handlerLegacy:mc,name:"@hey-api/schemas",output:"schemas"};var Ns=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Jt=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:o}=je({meta:e,...r});return o&&t(o),{created:n,name:o}},yc=e=>`${e}ModelResponseTransformer`,Yt=e=>`${k({case:"PascalCase",value:e})}Data`,vr=e=>`${k({case:"PascalCase",value:e})}Error`,si=e=>`${e}Transformer`,it=e=>`${k({case:"PascalCase",value:e})}Response`,oi=({importedType:e,throwOnError:t})=>{let r="OptionsLegacyParser";return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},lc=(e,t)=>{let r=I(),{name:n}=je({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Yt}),o=tt(t.parameters);if(!U(r))return [{isRequired:o,name:"options",type:oi({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let i=a=>{if(a.default!==void 0)return JSON.stringify(a.default,null,4)};return r.useOptions?[{default:o?void 0:{},name:"data",type:n}]:t.parameters.map(a=>{let p=`${n}['${a.name}']`;return {default:a?.default,isRequired:(!a.isRequired&&!i(a)?"?":"")=="",name:a.name,type:p}})},fc=(e,t)=>{let r=I(),n=s.typeNode("void");if(t.responses.filter(a=>a.responseTypes.includes("success")).length){let{name:a}=je({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:it});n=s.typeUnionNode({types:[a]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.config.response==="response"&&(n=s.typeNode("ApiResult",[n])),A(r).name==="legacy/angular"?n=s.typeNode("Observable",[n]):n=s.typeNode("CancelablePromise",[n]),n},dc=e=>{let t=I();if(!U(t))return [e.deprecated&&"@deprecated",e.summary&&_(e.summary),e.description&&_(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(i=>`@param data.${i.name} ${i.description?_(i.description):""}`)]:r=e.parameters.map(i=>`@param ${i.name} ${i.description?_(i.description):""}`));let n=e.responses.filter(i=>i.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&_(e.summary),e.description&&_(e.description),...r,...n.map(i=>`@returns ${i.type} ${i.description?_(i.description):""}`),"@throws ApiError"]},zd=({client:e,onClientImport:t,onImport:r,operation:n})=>{let o=I(),i=it(n.name),{name:a}=je({client:e,meta:{$ref:`transformers/${i}`,name:i},nameTransformer:si});if(a&&r(a),!U(o)){let m=[{spread:"options"}],d=n.parameters.filter(u=>u.in==="body"||u.in==="formData").map(u=>u.mediaType||(u.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(Ye);return d.length===1&&(d[0]==="multipart/form-data"&&(m=[...m,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),d[0]==="application/x-www-form-urlencoded"&&(m=[...m,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:d[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),m=[...m,{key:"url",value:n.path}],a&&(m=[...m,{key:"responseTransformer",value:a}]),s.objectExpression({identifiers:["responseTransformer"],obj:m})}let p=m=>m.reduce((f,d)=>{let u=d.prop,y=o.useOptions?`data.${d.name}`:d.name;return u===y?f[u]=u:Ae(u)===u?f[u]=y:f[`'${u}'`]=y,f},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=p(n.parametersPath)),n.parametersCookie.length&&(c.cookies=p(n.parametersCookie)),n.parametersHeader.length&&(c.headers=p(n.parametersHeader)),n.parametersQuery.length&&(c.query=p(n.parametersQuery)),n.parametersForm.length&&(c.formData=p(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(o.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(o.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),a&&(c.responseTransformer=a);let l=n.responses.filter(m=>m.responseTypes.includes("error"));if(l.length>0){let m={};l.forEach(f=>{m[f.code]=f.description??"";}),c.errors=m;}return s.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},Se=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.config.methodNameBuilder?e.plugins["@hey-api/sdk"].config.methodNameBuilder(n):t&&r.match(he)?`${r}_`:r,uc=({client:e,onClientImport:t,onImport:r,operation:n})=>{let o=I(),i=zd({client:e,onClientImport:t,onImport:r,operation:n});if(!U(o)){let p=je({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:vr}).name,l=n.responses.filter(m=>m.responseTypes.includes("success")).length?je({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:it}).name:"void";return [s.returnFunctionCall({args:[i],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:p&&l?[l,p,"ThrowOnError"]:p?["unknown",p,"ThrowOnError"]:l?[l,"unknown","ThrowOnError"]:[]})]}return Dt(o)?[s.returnFunctionCall({args:[i],name:"this.httpRequest.request"})]:A(o).name==="legacy/angular"?[s.returnFunctionCall({args:["OpenAPI","this.http",i],name:"__request"})]:[s.returnFunctionCall({args:["OpenAPI",i],name:"__request"})]},_d=({client:e,onClientImport:t,onImport:r,onNode:n,service:o})=>{let i=I(),a=A(i),p=U(i);for(let d of o.operations)d.parameters.length&&Jt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:Yt,onImport:r}),p||Jt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:vr,onImport:r}),d.responses.filter(y=>y.responseTypes.includes("success")).length&&Jt({client:e,meta:{$ref:d.name,name:d.name},nameTransformer:it,onImport:r});let c={default:("throwOnError"in a.config?a.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!i.plugins["@hey-api/sdk"]?.config.asClass&&!Dt(i)){for(let d of o.operations){let u={parameters:lc(e,d),returnType:p?fc(e,d):void 0,statements:uc({client:e,onClientImport:t,onImport:r,operation:d}),types:p?void 0:[c]},y=a.name==="legacy/angular"?s.anonymousFunction(u):s.arrowFunction(u),g=s.constVariable({comment:dc(d),exportConst:true,expression:y,name:Se({config:i,handleIllegal:true,id:d.name,operation:d})});n(g);}return}let l=o.operations.map(d=>s.methodDeclaration({accessLevel:"public",comment:dc(d),isStatic:Dt(i)===void 0&&a.name!=="legacy/angular",name:Se({config:i,id:d.name,operation:d}),parameters:lc(e,d),returnType:p?fc(e,d):void 0,statements:uc({client:e,onClientImport:t,onImport:r,operation:d}),types:p?void 0:[c]}));if(!l.length)return;Dt(i)?l=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...l]:a.name==="legacy/angular"&&(l=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...l]);let m=[];l.forEach((d,u)=>{u&&m.push(s.identifier({text:`
`})),m.push(d);});let f=s.classDeclaration({decorator:a.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:Rr({config:i,name:o.name}),nodes:m});n(f);},hc=({client:e,files:t,plugin:r})=>{let n=I(),o=U(n),i="sdk";if(t.sdk=new ze({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"sdk",name:`${i}.ts`}),!o)t.sdk.import({module:re({config:n,sourceOutput:i}),name:"createClient"}),t.sdk.import({module:re({config:n,sourceOutput:i}),name:"createConfig"}),t.sdk.import({asType:true,module:re({config:n,sourceOutput:i}),name:"OptionsLegacyParser"});else if(A(n).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),Dt(n)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),n.plugins["@hey-api/sdk"]?.config.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),Dt(n)){let p=A(n);t.sdk.import({asType:p.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!o){let a=A(n),p=s.constVariable({exportConst:true,expression:s.callExpression({functionName:"createClient",parameters:[s.callExpression({functionName:"createConfig",parameters:["throwOnError"in a&&a.throwOnError?s.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(p);}for(let a of e.services)_d({client:e,onClientImport:p=>{t.sdk.import({module:re({config:n,sourceOutput:i}),name:p});},onImport:p=>{t.sdk.import({asType:!p.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:p});},onNode:p=>{t.sdk.add(p);},service:a});};var gc=({plugin:e,symbolClientOptions:t})=>{let r=e.gen.ensureFile(e.output),o=A(e.context.config).name==="@hey-api/client-nuxt",i=re({config:e.context.config,sourceOutput:r.path}),a=r.addSymbol({name:"TDataShape"}),p=r.ensureSymbol({name:"Client",selector:e.api.getSelector("Client")});r.addImport({from:i,typeNames:[p.name,a.name]});let c=r.ensureSymbol({selector:e.api.getSelector("Options")}).update({name:"Options"}),l=s.typeAliasDeclaration({exportType:true,name:c.placeholder,type:s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:o?[s.typeReferenceNode({typeName:"TComposable"}),s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:Jo}),s.typeReferenceNode({typeName:ot})]:[s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:"ThrowOnError"})],typeName:t.placeholder}),s.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!e.config.client,name:"client",type:s.typeReferenceNode({typeName:p.placeholder})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:s.typeReferenceNode({typeArguments:[s.keywordTypeNode({keyword:"string"}),s.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:o?[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:"Composable"}),defaultType:s.typeNode("'$fetch'"),name:"TComposable"}),s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:a.placeholder}),defaultType:s.typeReferenceNode({typeName:a.placeholder}),name:"TData"}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"unknown"}),name:Jo}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"undefined"}),name:ot})]:[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:a.placeholder}),defaultType:s.typeReferenceNode({typeName:a.placeholder}),name:"TData"}),s.typeParameterDeclaration({constraint:s.keywordTypeNode({keyword:"boolean"}),defaultType:s.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});c.update({value:l});};var Qd=({plugin:e})=>{let t=s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:s.this(),name:"_client"}),operator:"=",right:s.propertyAccessExpression({expression:s.identifier({text:"args"}),name:"client"})})}),n=e.gen.ensureFile(e.output).ensureSymbol({selector:e.api.getSelector("Client")}),o=A(e.context.config),i;return o.api&&"getSelector"in o.api&&(i=e.gen.selectSymbolFirst(o.api.getSelector("client"))),[s.propertyDeclaration({initializer:i?s.identifier({text:i.placeholder}):void 0,modifier:"protected",name:"_client",type:s.typeReferenceNode({typeName:n.placeholder})}),s.identifier({text:`
`}),s.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.config.client,name:"args",type:s.typeInterfaceNode({properties:[{isRequired:!e.config.client,name:"client",type:n.placeholder}],useLegacyResolution:false})}],statements:[e.config.client?s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:s.block({statements:[t]})}):t]})]},Hd=({plugin:e})=>{let t=A(e.context.config),r=t.name==="@hey-api/client-angular",n=t.name==="@hey-api/client-nuxt",o=e.gen.ensureFile(e.output),i=new Map,a=new Set,p=e.config.instance?Qd({plugin:e}):[];e.forEach("operation",({operation:m})=>{let f=ce({context:e.context,operation:m}),d=e.getPluginOrThrow("@hey-api/typescript"),u;n&&(u=e.gen.selectSymbolFirst(d.api.getSelector("response",m.id)),u&&o.addImport({from:u.file,typeNames:[u.placeholder]}));let y=$e({context:e.context,operation:m,plugin:e});for(let g of y.values())g.path.forEach((x,b)=>{let P=o.ensureSymbol({name:x,selector:e.api.getSelector("class",x)});i.has(P.id)||i.set(P.id,{className:P.name,classes:new Set,id:P.id,methods:new Set,nodes:[],root:!b});let C=g.path[b-1];if(C){let w=o.ensureSymbol({name:C,selector:e.api.getSelector("class",C)});if(w.placeholder!==P.placeholder){let K=i.get(w.id);K.classes.add(P.id),i.set(w.id,K);}}if(!(g.path.length===b+1))return;let q=i.get(P.id);if(q.methods.has(g.methodName))return;let B=Yo({file:o,isRequiredOptions:f,operation:m,plugin:e}),W=ei({isRequiredOptions:f,opParameters:B,operation:m,plugin:e}),se=s.methodDeclaration({accessLevel:"public",comment:X({operation:m}),isStatic:r?false:!e.config.instance,name:g.methodName,parameters:B.parameters,returnType:void 0,statements:W,types:n?[{default:s.ots.string("$fetch"),extends:s.typeNode("Composable"),name:Er},{default:u?s.typeReferenceNode({typeName:u.placeholder}):s.typeNode("undefined"),extends:u?s.typeReferenceNode({typeName:u.placeholder}):void 0,name:ot}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});q.nodes.length?q.nodes.push(s.identifier({text:`
`}),se):q.nodes.push(se),q.methods.add(g.methodName),i.set(P.id,q);});});let c=o.addSymbol({name:"_HeyApiClient"}),l=m=>{if(a.has(m.id))return;if(m.classes.size)for(let u of m.classes){let y=i.get(u);l(y),m.nodes.push(s.propertyDeclaration({initializer:e.config.instance?s.newExpression({argumentsArray:e.config.instance?[s.objectExpression({multiLine:false,obj:[{key:"client",value:s.propertyAccessExpression({expression:s.this(),name:"_client"})}]})]:[],expression:s.identifier({text:o.getSymbolById(y.id).placeholder})}):s.identifier({text:o.getSymbolById(y.id).placeholder}),modifier:e.config.instance?void 0:"static",name:k({case:"camelCase",value:y.className})}));}let f=o.ensureSymbol({name:m.className,selector:e.api.getSelector("class",m.className)}),d=s.classDeclaration({decorator:m.root&&r?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:m.root,extendedClasses:e.config.instance?[c.placeholder]:void 0,name:f.placeholder,nodes:m.nodes});f.update({value:d}),a.add(f.id);};if(p.length){let m=s.classDeclaration({exportClass:false,name:c.placeholder,nodes:p});c.update({value:m});}for(let m of i.values())l(m);},Zd=({plugin:e})=>{let t=A(e.context.config),r=t.name==="@hey-api/client-nuxt",n=e.gen.ensureFile(e.output);e.forEach("operation",({operation:o})=>{let i=ce({context:e.context,operation:o}),a=e.getPluginOrThrow("@hey-api/typescript"),p;r&&(p=e.gen.selectSymbolFirst(a.api.getSelector("response",o.id)),p&&n.addImport({from:p.file,typeNames:[p.placeholder]}));let c=Yo({file:n,isRequiredOptions:i,operation:o,plugin:e}),l=ei({isRequiredOptions:i,opParameters:c,operation:o,plugin:e}),m=n.addSymbol({name:Se({config:e.context.config,handleIllegal:true,id:o.id,operation:o}),selector:e.api.getSelector("function",o.id)}),f=s.constVariable({comment:X({operation:o}),exportConst:true,expression:s.arrowFunction({parameters:c.parameters,returnType:void 0,statements:l,types:r?[{default:s.ots.string("$fetch"),extends:s.typeNode("Composable"),name:Er},{default:p?s.typeReferenceNode({typeName:p.placeholder}):s.typeNode("undefined"),extends:p?s.typeReferenceNode({typeName:p.placeholder}):void 0,name:ot}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:m.placeholder});m.update({value:f});});},xc=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r=re({config:e.context.config,sourceOutput:t.path}),n=t.addSymbol({name:"ClientOptions"});t.addImport({aliases:{Options:n.placeholder},from:r,typeNames:["Options"]});let o=A(e.context.config),i=o.name==="@hey-api/client-angular";o.name==="@hey-api/client-nuxt"&&t.addImport({from:r,typeNames:["Composable"]}),i&&e.config.asClass&&t.addImport({from:"@angular/core",names:["Injectable"]}),gc({plugin:e,symbolClientOptions:n}),e.config.asClass?Hd({plugin:e}):Zd({plugin:e}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var js={api:new Ns({name:"@hey-api/sdk"}),config:{asClass:false,auth:true,classNameBuilder:"{{name}}",classStructure:"auto",client:true,exportFromIndex:true,instance:false,operationId:true,params_EXPERIMENTAL:"default",response:"body",responseStyle:"fields",transformer:false,validator:false},dependencies:["@hey-api/typescript"],handler:xc,handlerLegacy:hc,name:"@hey-api/sdk",output:"sdk",resolveConfig:(e,t)=>{e.config.client?(typeof e.config.client=="boolean"&&(e.config.client=t.pluginByTag("client",{defaultPlugin:"@hey-api/client-fetch"})),e.dependencies.add(e.config.client)):e.config.client=false,e.config.transformer?(typeof e.config.transformer=="boolean"&&(e.config.transformer=t.pluginByTag("transformer")),e.dependencies.add(e.config.transformer)):e.config.transformer=false,typeof e.config.validator!="object"&&(e.config.validator={request:e.config.validator,response:e.config.validator}),e.config.validator.request?(typeof e.config.validator.request=="boolean"&&(e.config.validator.request=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.request)):e.config.validator.request=false,e.config.validator.response?(typeof e.config.validator.response=="boolean"&&(e.config.validator.response=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.response)):e.config.validator.response=false,e.config.instance?(typeof e.config.instance!="string"&&(e.config.instance="Sdk"),e.config.asClass=true):e.config.instance=false,e.config.classNameBuilder==="{{name}}"&&e.config.client==="@hey-api/client-angular"&&(e.config.classNameBuilder="{{name}}Service");}};var ks=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var bc=({dataExpression:e,schema:t})=>{if(t.type!=="integer"||t.format!=="int64")return;let r=e!==void 0?s.callExpression({functionName:"BigInt",parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(r){if(typeof e=="string")return [r];if(e)return [s.assignment({left:e,right:r})]}},Sc=({dataExpression:e,schema:t})=>{if(t.type!=="string"||!(t.format==="date"||t.format==="date-time"))return;let r=s.identifier({text:"Date"});if(typeof e=="string")return [s.newExpression({argumentsArray:[s.identifier({text:e})],expression:r})];if(e)return [s.assignment({left:e,right:s.newExpression({argumentsArray:[e],expression:r})})]};var vs="data",sn=e=>e.map(t=>S.isStatement(t)?t:s.expressionToStatement({expression:t})),Tc=({node:e})=>e.kind===S.SyntaxKind.ReturnStatement,Rc=({plugin:e,schema:t})=>{let r=s.identifier({text:vs}),n=on({dataExpression:r,plugin:e,schema:t});return n.length&&!Tc({node:n[n.length-1]})&&n.push(s.returnStatement({expression:r})),n},on=({dataExpression:e,plugin:t,schema:r})=>{let n=t.gen.ensureFile(t.output);if(r.$ref){let o=t.api.getSelector("response-ref",r.$ref),i=n.selectSymbolFirst(o);if(!i){i=n.addSymbol({name:O({config:{case:"camelCase",name:"{{name}}SchemaResponseTransformer"},name:D(r.$ref)}),selector:o});let a=t.context.resolveIrRef(r.$ref),p=Rc({plugin:t,schema:a});if(p.length){let c=s.constVariable({expression:s.arrowFunction({async:false,multiLine:true,parameters:[{name:vs,type:s.keywordTypeNode({keyword:"any"})}],statements:sn(p)}),name:i.placeholder});i.update({value:c});}else i.update({value:null});}if(i=n.selectSymbolFirst(o),i?.value){let a=s.callExpression({functionName:i.placeholder,parameters:[e]});if(e)return typeof e=="string"&&e==="item"?[s.returnStatement({expression:a})]:[typeof e=="string"?a:s.assignment({left:e,right:a})]}return []}if(r.type==="array"){if(!e||typeof e=="string")return [];let o=r.items?on({dataExpression:"item",plugin:t,schema:r.items?.[0]?r.items[0]:{...r,type:void 0}}):[];if(!o.length)return [];let i=sn(o);return i.some(p=>Tc({node:p}))||i.push(s.returnStatement({expression:s.identifier({text:"item"})})),[s.assignment({left:e,right:s.callExpression({functionName:s.propertyAccessExpression({expression:e,name:"map"}),parameters:[s.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:i})]})})]}if(r.type==="object"){let o=[],i=r.required??[];for(let a in r.properties){let p=r.properties[a],c=s.propertyAccessExpression({expression:e||vs,name:a}),l=on({dataExpression:c,plugin:t,schema:p});if(!l.length)continue;let m=!p.items?.find(d=>d.type==="null");i.includes(a)&&m?o=o.concat(l):o.push(s.ifStatement({expression:c,thenStatement:s.block({statements:sn(l)})}));}return o}if(r.items){if(r.items.length===1)return on({dataExpression:"item",plugin:t,schema:r.items[0]});let o=[];if(r.logicalOperator==="and"||r.items.length===2&&r.items.find(i=>i.type==="null"||i.type==="void")){for(let i of r.items){let a=on({dataExpression:e||"item",plugin:t,schema:i});if(a.length)if(e)o=o.concat(a);else {let p=s.identifier({text:"item"});o.push(s.ifStatement({expression:p,thenStatement:s.block({statements:sn(a)})}),s.returnStatement({expression:p}));}}return o}r.type!=="enum"&&((r.items??[]).every(i=>["boolean","integer","null","number","string"].includes(i.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(r)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}for(let o of t.config.transformers){let i=o({config:t.config,dataExpression:e,file:n,schema:r});if(i)return i}return []},Ic=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F});e.forEach("operation",({operation:r})=>{let{response:n}=He(r);if(!n)return;if(n.items&&n.items.length>1){e.context.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${L(r)} has ${n.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let o=e.getPluginOrThrow("@hey-api/typescript"),i=e.gen.selectSymbolFirst(o.api.getSelector("response",r.id));if(!i)return;let a=t.addSymbol({name:O({config:{case:"camelCase",name:"{{name}}ResponseTransformer"},name:r.id}),selector:e.api.getSelector("response",r.id)}),p=Rc({plugin:e,schema:n});if(p.length){t.addImport({from:i.file,typeNames:[i.placeholder]});let c=s.constVariable({exportConst:true,expression:s.arrowFunction({async:true,multiLine:true,parameters:[{name:vs,type:s.keywordTypeNode({keyword:"any"})}],returnType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:i.placeholder})],typeName:"Promise"}),statements:sn(p)}),name:a.placeholder});a.update({value:c});}else a.update({value:null});});};var Xd="$OpenApiTs",ue={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},Gd=({comments:e,leadingComment:t,meta:r,obj:n,onNode:o,...i})=>{if(!r)return;let{created:a,name:p}=je({create:true,meta:r,...i});if(a){let l=I().plugins["@hey-api/typescript"],m=s.enumDeclaration({asConst:typeof l?.config.enums=="object"&&l.config.enums.mode==="typescript-const",comments:e,leadingComment:t,name:p,obj:n});o(m);}},Tt=({comment:e,meta:t,onCreated:r,onNode:n,type:o,...i})=>{if(!t)return {created:false,name:""};let a=je({create:true,meta:t,...i}),{created:p,name:c}=a;if(p){let l=s.typeAliasDeclaration({comment:e,exportType:true,name:c,type:o});n(l),r?.(c);}return a},Jd=e=>{let t=[];Pc(e),e.model.enums.forEach(r=>eu({...e,model:r,onNode:n=>{t.push(n);}})),t.length&&e.onNode(s.namespaceDeclaration({name:e.model.name,statements:t}));},Yd=({client:e,model:t,onNode:r})=>{let n=I(),o={},i={};t.enum.forEach(c=>{let{key:l,value:m}=_n(c);o[l]=m;let f=c.customDescription||c.description;f&&(i[l]=[_(f)]);});let a=[t.description&&_(t.description),t.deprecated&&"@deprecated"],p=n.plugins["@hey-api/typescript"];if(p?.config&&typeof p.config.enums=="object"&&p.config.enums.enabled&&(p.config.enums.mode==="typescript"||p.config.enums.mode==="typescript-const")){Gd({asConst:p.config.enums.mode==="typescript-const",client:e,comments:i,leadingComment:a,meta:t.meta,obj:o,onNode:r});return}Tt({client:e,comment:a,meta:t.meta,onCreated:c=>{let l=n.plugins["@hey-api/typescript"];if(l?.config&&typeof l.config.enums=="object"&&l.config.enums.enabled&&l.config.enums.mode==="javascript"){let m=s.objectExpression({multiLine:true,obj:Object.entries(o).map(([d,u])=>({comments:i[d],key:d,value:u})),unescape:true}),f=s.constVariable({assertion:"const",comment:a,exportConst:true,expression:m,name:c});r(f);}},onNode:r,type:Ip(t.enum)});},eu=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(a=>{let{key:p,value:c}=_n(a);r[p]=c;let l=a.customDescription||a.description;l&&(n[p]=[_(l)]);});let i=I().plugins["@hey-api/typescript"];t(s.enumDeclaration({asConst:typeof i?.config.enums=="object"&&i.config.enums.mode==="typescript-const",comments:n,leadingComment:[e.description&&_(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},Pc=({client:e,model:t,onNode:r})=>{Tt({client:e,comment:[t.description&&_(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:Ne(t)});},tu=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return Jd(e);case "enum":return Yd(e);default:return Pc(e)}},ru=({client:e,onNode:t})=>{let r={},n=I();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.config.tree)return;let o=U(n);for(let a of e.services)for(let p of a.operations){if(!p.parameters.length&&!p.responses.length)continue;r[p.path]||(r[p.path]={});let c=r[p.path];c[p.method]||(c[p.method]={});let l=c[p.method];if(l.$ref=p.name,p.responses.length>0){if(l.res||(l.res={}),Array.isArray(l.res))continue;p.responses.forEach(f=>{l.res[f.code]=f;});}if(p.parameters.length>0){let f={mediaType:null,...ue,in:"body",name:"body",prop:"body"},d=p.parameters.filter(b=>b.in==="body");d.length||(d=p.parameters.filter(b=>b.in==="formData")),d.length===1?f={...ue,...d[0],in:"body",isRequired:d[0].isRequired,name:"body",prop:"body"}:d.length>1&&(f={...ue,in:"body",isRequired:d.some(b=>b.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:d});let u={...ue,in:"header",isRequired:tt(p.parameters.filter(b=>b.in==="header")),mediaType:null,name:o?"header":"headers",prop:o?"header":"headers",properties:p.parameters.filter(b=>b.in==="header").sort(tn)},y={...ue,in:"path",isRequired:tt(p.parameters.filter(b=>b.in==="path")),mediaType:null,name:"path",prop:"path",properties:p.parameters.filter(b=>b.in==="path").sort(tn)},g={...ue,in:"query",isRequired:tt(p.parameters.filter(b=>b.in==="query")),mediaType:null,name:"query",prop:"query",properties:p.parameters.filter(b=>b.in==="query").sort(tn)},x=o?Rp([...p.parameters]):[f,u,y,g].filter(b=>b.properties.length||b.$refs.length||b.mediaType);l.req=x,Tt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Yt,onNode:t,type:Ne({...ue,properties:x})});}let m=p.responses.filter(f=>f.responseTypes.includes("success"));if(m.length>0){Tt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:it,onNode:t,type:Ne({...ue,export:"any-of",properties:m})});let f=p.responses.filter(d=>d.responseTypes.includes("error"));o||Tt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:vr,onNode:t,type:Ne(f.length?{...ue,export:"one-of",properties:f}:{...ue,base:"unknown"})});}}let i=Object.entries(r).map(([a,p])=>{let c=Object.entries(p).map(([m,f])=>{let d=m,u=[];if(f.req){let g=f.$ref,{name:x}=je({client:e,meta:{$ref:g,name:g},nameTransformer:Yt}),b={...ue,base:x,export:"reference",isRequired:true,name:"req",properties:[],type:x};u=[...u,b];}if(f.res){let g=Object.entries(f.res).map(([b,P])=>({...ue,...P,isRequired:true,name:String(b)})),x={...ue,isRequired:true,name:"res",properties:g};u=[...u,x];}return {...ue,isRequired:true,name:d.toLocaleLowerCase(),properties:u}}).filter(Boolean);return {...ue,isRequired:true,name:`'${a}'`,properties:c}});n.plugins["@hey-api/typescript"]?.config.tree&&Tt({client:e,meta:{$ref:"@hey-api/openapi-ts",name:Xd},onNode:t,type:Ne({...ue,properties:i})});},Ac=({client:e,files:t,plugin:r})=>{let n=I();t.types=new ze({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"types",name:"types.ts"});let o=i=>{t.types?.add(i);};for(let i of e.models)tu({client:e,model:i,onNode:o});ru({client:e,onNode:o});};var Ft="data",nu=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",Ec=({client:e,model:t})=>t.$refs.map(n=>{let o=e.models.find(i=>i.meta?.$ref===n);if(!o)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return o}),Cc=e=>{let t=e.model.meta.name,{name:r}=Tt({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:yc,onCreated:o=>{let i=ws({...e,meta:{$ref:`transformers/${t}`,name:o},path:[Ft]});Nc({...e,async:false,name:o,statements:i});},type:`(${Ft}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},su=e=>{let{model:t}=e,r=Ec(e);if(r.length===1){let{created:n,name:o}=Cc({...e,model:r[0]});return n?[s.transformArrayMutation({path:e.path,transformerName:o})]:[]}return rn(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>rn(n))?[s.transformArrayMap({path:e.path,transformExpression:s.conditionalExpression({condition:s.identifier({text:"item"}),whenFalse:s.identifier({text:"item"}),whenTrue:s.transformNewDate({parameterName:"item"})})})]:[]},ou=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&rn(t)?[s.transformDateMutation({path:r})]:ws({...e,model:t,path:r})},ws=e=>{let{model:t}=e;switch(t.export){case "array":return su(e);case "interface":return t.properties.flatMap(r=>ou({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=Ec(e),{created:n,name:o}=Cc({...e,model:r[0]});return n?t.in==="response"?[s.expressionToStatement({expression:s.callExpression({functionName:o,parameters:[Ft]})})]:s.transformFunctionMutation({path:e.path,transformerName:o}):[]}default:return []}},Nc=({async:e,client:t,name:r,onNode:n,onRemoveNode:o,statements:i})=>{let a={created:false,name:r};if(!i.length)return Ep({client:t,name:r}),o?.(),a;let p=s.arrowFunction({async:e,multiLine:true,parameters:[{name:Ft}],statements:[...i,s.returnVariable({expression:Ft})]}),c=s.constVariable({exportConst:true,expression:p,name:r,typeName:r});return n(c),{created:true,name:r}},jc=({client:e,files:t})=>{let r=I(),n=i=>{t.types?.add(i);},o=()=>{t.types?.removeNode_LEGACY();};for(let i of e.services)for(let a of i.operations){let p=a.responses.filter(m=>m.responseTypes.includes("success"));if(!p.length)continue;let c=p.filter(m=>!nu(m));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${L(a)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let l=it(a.name);Tt({client:e,meta:{$ref:`transformers/${l}`,name:l},nameTransformer:si,onCreated:m=>{let f=p.length>1?p.flatMap(d=>{let u=ws({client:e,meta:{$ref:`transformers/${l}`,name:l},model:d,onNode:n,onRemoveNode:o,path:[Ft]});return u.length?[s.ifStatement({expression:s.safeAccessExpression(["data"]),thenStatement:s.block({statements:u})})]:[]}):ws({client:e,meta:{$ref:`transformers/${l}`,name:l},model:p[0],onNode:n,onRemoveNode:o,path:[Ft]});Nc({async:true,client:e,name:m,onNode:n,onRemoveNode:o,statements:f});},onNode:n,type:`(${Ft}: any) => Promise<${l}>`});}};var qs={api:new ks({name:"@hey-api/transformers"}),config:{bigInt:true,dates:true,exportFromIndex:false,transformers:[],typeTransformers:[]},dependencies:["@hey-api/typescript"],handler:Ic,handlerLegacy:jc,name:"@hey-api/transformers",output:"transformers",resolveConfig:e=>{e.config.transformers||(e.config.transformers=[]),e.config.dates&&(e.config.transformers=[...e.config.transformers,Sc]),e.config.bigInt&&(e.config.transformers=[...e.config.transformers,bc]);},tags:["transformer"]};var vc=({context:e,name:t})=>(oe.lastIndex=0,oe.test(t)?t.startsWith("-")?S.factory.createStringLiteral(t):S.factory.createNumericLiteral(t):k({case:e.config.output.case,value:t}));var Oe=({schema:e})=>{let t=[];return e.title&&t.push(_(e.title)),e.description&&t.push(_(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var $s=s.keywordTypeNode({keyword:"string"}),pu=({server:e})=>{let t=Xe(e.url);return t.protocol&&t.host?s.literalTypeNode({literal:s.stringLiteral({text:e.url})}):s.templateLiteralType({value:[t.protocol||$s,"://",t.host||$s,t.port?`:${t.port}`:"",t.path||""]})},wc=({plugin:e,servers:t,symbolClientOptions:r})=>{let n=A(e.context.config),o=t.map(p=>pu({server:p}));t.length?"strictBaseUrl"in n.config&&n.config.strictBaseUrl||o.push(s.typeIntersectionNode({types:[$s,S.factory.createTypeLiteralNode([])]})):o.push($s);let i=s.typeInterfaceNode({properties:[{name:ge(e.context.config),type:s.typeUnionNode({types:o})}],useLegacyResolution:false}),a=s.typeAliasDeclaration({exportType:true,name:r.placeholder,type:i});r.update({value:a});};var cu=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((o,i)=>{let a=typeof o.const;r.includes(a)||r.push(a);let p;return o.title?p=o.title:a==="number"||a==="string"?p=`${o.const}`:a==="boolean"?p=o.const?"true":"false":o.const===null?p="null":p=`${i}`,p&&(p=k({case:e.config.enums.case,stripLeadingSeparators:false,value:p}),oe.lastIndex=0,oe.test(p)&&e.config.enums.enabled&&(e.config.enums.mode==="typescript"||e.config.enums.mode==="typescript-const")&&(p=`_${p}`)),{comments:Oe({schema:o}),key:p,value:o.const}}),typeofItems:r}},qc=({plugin:e,schema:t,symbol:r,type:n})=>{if(t.type==="enum"&&e.config.enums.enabled){let i=cu({plugin:e,schema:t});if(e.config.enums.mode==="javascript"){e.config.enums.constantsIgnoreNull&&i.typeofItems.includes("object")&&(i.obj=i.obj.filter(l=>l.value!==null));let a=s.constVariable({assertion:"const",comment:Oe({schema:t}),exportConst:true,expression:s.objectExpression({multiLine:true,obj:i.obj}),name:r.placeholder}),p=s.typeOfExpression({text:r.placeholder}),c=s.typeAliasDeclaration({comment:Oe({schema:t}),exportType:true,name:r.placeholder,type:s.indexedAccessTypeNode({indexType:s.typeOperatorNode({operator:"keyof",type:p}),objectType:p})});r.update({value:[a,c]});return}else if((e.config.enums.mode==="typescript"||e.config.enums.mode==="typescript-const")&&!i.typeofItems.some(p=>p!=="number"&&p!=="string")){let p=s.enumDeclaration({asConst:e.config.enums.mode==="typescript-const",leadingComment:Oe({schema:t}),name:r.placeholder,obj:i.obj});r.update({value:p});return}}let o=s.typeAliasDeclaration({comment:Oe({schema:t}),exportType:true,name:r.placeholder,type:n});r.update({value:o});};var ii=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let o in e){let i=e[o];r[i.name]=G({detectFormat:false,schema:i.schema}),i.required&&n.push(i.name);}t.properties=r,n.length&&(t.required=n);}return t},mu=({operation:e,plugin:t,state:r})=>{let n={type:"object"},o=[];n.properties||(n.properties={}),e.body?(n.properties.body=e.body.schema,e.body.required&&o.push("body")):n.properties.body={type:"never"},e.parameters?.header&&(n.properties.headers=ii({parameters:e.parameters.header}),n.properties.headers.required&&o.push("headers")),e.parameters?.path?(n.properties.path=ii({parameters:e.parameters.path}),n.properties.path.required&&o.push("path")):n.properties.path={type:"never"},e.parameters?.query?(n.properties.query=ii({parameters:e.parameters.query}),n.properties.query.required&&o.push("query")):n.properties.query={type:"never"},n.properties.url={const:e.path,type:"string"},o.push("url"),n.required=o;let a=t.gen.ensureFile(t.output).addSymbol({name:O({config:t.config.requests,name:e.id}),selector:t.api.getSelector("data",e.id)}),p=ne({onRef:void 0,plugin:t,schema:n,state:r}),c=s.typeAliasDeclaration({exportType:true,name:a.placeholder,type:p});a.update({value:c});},$c=({operation:e,plugin:t,state:r})=>{mu({operation:e,plugin:t,state:r});let n=t.gen.ensureFile(t.output),{error:o,errors:i,response:a,responses:p}=He(e);if(i){let c=n.addSymbol({name:O({config:t.config.errors,name:e.id}),selector:t.api.getSelector("errors",e.id)}),l=ne({onRef:void 0,plugin:t,schema:i,state:r}),m=s.typeAliasDeclaration({exportType:true,name:c.placeholder,type:l});if(c.update({value:m}),o){let f=n.addSymbol({name:O({config:{case:t.config.errors.case,name:t.config.errors.error},name:e.id}),selector:t.api.getSelector("error",e.id)}),d=s.indexedAccessTypeNode({indexType:s.typeOperatorNode({operator:"keyof",type:s.typeReferenceNode({typeName:c.placeholder})}),objectType:s.typeReferenceNode({typeName:c.placeholder})}),u=s.typeAliasDeclaration({exportType:true,name:f.placeholder,type:d});f.update({value:u});}}if(p){let c=n.addSymbol({name:O({config:t.config.responses,name:e.id}),selector:t.api.getSelector("responses",e.id)}),l=ne({onRef:void 0,plugin:t,schema:p,state:r}),m=s.typeAliasDeclaration({exportType:true,name:c.placeholder,type:l});if(c.update({value:m}),a){let f=n.addSymbol({name:O({config:{case:t.config.responses.case,name:t.config.responses.response},name:e.id}),selector:t.api.getSelector("response",e.id)}),d=s.indexedAccessTypeNode({indexType:s.typeOperatorNode({operator:"keyof",type:s.typeReferenceNode({typeName:c.placeholder})}),objectType:s.typeReferenceNode({typeName:c.placeholder})}),u=s.typeAliasDeclaration({exportType:true,name:f.placeholder,type:d});f.update({value:u});}}};var lu=({operation:e,plugin:t,state:r})=>{let n=t.gen.ensureFile(t.output),o={type:"object"},i=[];if(o.properties||(o.properties={}),e.body){let l=n.ensureSymbol({selector:t.api.getSelector("webhook-payload",e.id)}).update({name:O({config:{case:t.config.webhooks.case,name:t.config.webhooks.payload},name:e.id})}),m=ne({onRef:void 0,plugin:t,schema:e.body.schema,state:r}),f=s.typeAliasDeclaration({comment:Oe({schema:e.body.schema}),exportType:true,name:l.placeholder,type:m});l.update({value:f}),n.ensureSymbol({selector:t.api.getSelector("ref",l.placeholder)}).update({name:l.name,placeholder:l.placeholder}),o.properties.body={$ref:l.placeholder},i.push("body");}else o.properties.body={type:"never"};o.properties.key={const:e.path,type:"string"},i.push("key"),o.properties.path={type:"never"},o.properties.query={type:"never"},o.required=i;let a=n.addSymbol({name:O({config:t.config.webhooks,name:e.id}),selector:t.api.getSelector("webhook-request",e.id)}),p=ne({onRef:void 0,plugin:t,schema:o,state:r}),c=s.typeAliasDeclaration({exportType:true,name:a.placeholder,type:p});return a.update({value:c}),a.placeholder},Fc=({operation:e,plugin:t,state:r})=>lu({operation:e,plugin:t,state:r});var Mc=({symbolWebhooks:e,webhookNames:t})=>{if(!t.length)return;let r=s.typeUnionNode({types:t.map(o=>s.typeReferenceNode({typeName:o}))}),n=s.typeAliasDeclaration({exportType:true,name:e.placeholder,type:r});e.update({value:n});};var fu=({onRef:e,plugin:t,schema:r,state:n})=>{if(!r.items)return s.typeArrayNode(s.keywordTypeNode({keyword:t.config.topType}));r=G({detectFormat:true,schema:r});let o=[];for(let i of r.items){let a=ne({onRef:e,plugin:t,schema:i,state:n});o.push(a);}return o.length===1?s.typeArrayNode(o[0]):r.logicalOperator==="and"?s.typeArrayNode(s.typeIntersectionNode({types:o})):s.typeArrayNode(s.typeUnionNode({types:o}))},du=({schema:e})=>e.const!==void 0?s.literalTypeNode({literal:s.ots.boolean(e.const)}):s.keywordTypeNode({keyword:"boolean"}),uu=({onRef:e,plugin:t,schema:r,state:n})=>ne({onRef:e,plugin:t,schema:{...r,type:void 0},state:n}),yu=({plugin:e,schema:t})=>t.const!==void 0?s.literalTypeNode({literal:s.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.getPlugin("@hey-api/transformers")?.config.bigInt?s.typeReferenceNode({typeName:"bigint"}):s.keywordTypeNode({keyword:"number"}),hu=({onRef:e,plugin:t,schema:r,state:n})=>{let o,i,a=[],p=[],c=r.required??[],l=false;for(let y in r.properties){let g=r.properties[y],x=ne({onRef:e,plugin:t,schema:g,state:n}),b=c.includes(y);a.push({comment:Oe({schema:g}),isReadOnly:g.accessScope==="read",isRequired:b,name:vc({context:t.context,name:y}),type:x}),p.push(g),b||(l=true);}if(r.patternProperties)for(let y in r.patternProperties){let g=r.patternProperties[y];p.unshift(g);}let m=!!r.patternProperties&&Object.keys(r.patternProperties).length>0,f=r.additionalProperties,d=f!==false&&f?f:void 0;if(m||!!d&&(d.type!=="never"||!p.length)){let y=d;y&&y.type!=="never"?p.unshift(y):!m&&!p.length&&y&&y.type==="never"&&(p=[y]),l&&p.push({type:"undefined"}),i={isRequired:!r.propertyNames,name:"key",type:p.length===1?ne({onRef:e,plugin:t,schema:p[0],state:n}):ne({onRef:e,plugin:t,schema:{items:p,logicalOperator:"or"},state:n})},r.propertyNames?.$ref&&(o=ne({onRef:e,plugin:t,schema:{$ref:r.propertyNames.$ref},state:n}));}return s.typeInterfaceNode({indexKey:o,indexProperty:i,properties:a,useLegacyResolution:false})},gu=({plugin:e,schema:t,state:r})=>{if(t.const!==void 0)return s.literalTypeNode({literal:s.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return s.typeUnionNode({types:[s.typeReferenceNode({typeName:"Blob"}),s.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.getPlugin("@hey-api/transformers")?.config.dates)return s.typeReferenceNode({typeName:"Date"});if(t.format==="typeid"&&typeof t.example=="string"){let n=String(t.example).split("_");n.pop();let o=n.join("_");r.usedTypeIDs.add(o);let i=_e(k({case:e.config.case,value:o+"_id"}));return s.typeReferenceNode({typeName:i})}}return s.keywordTypeNode({keyword:"string"})},xu=({onRef:e,plugin:t,schema:r,state:n})=>{let o=[];if(r.const&&Array.isArray(r.const))o=r.const.map(i=>s.valueToExpression({value:i})??s.identifier({text:t.config.topType}));else if(r.items)for(let i of r.items){let a=ne({onRef:e,plugin:t,schema:i,state:n});o.push(a);}return s.typeTupleNode({types:o})},Lc=({onRef:e,plugin:t,schema:r,state:n})=>{let o=t.getPlugin("@hey-api/transformers");if(o?.config.typeTransformers)for(let i of o.config.typeTransformers){let a=t.gen.ensureFile(t.output),p=i({file:a,schema:r});if(p)return p}switch(r.type){case "array":return fu({onRef:e,plugin:t,schema:r,state:n});case "boolean":return du({schema:r});case "enum":return uu({onRef:e,plugin:t,schema:r,state:n});case "integer":case "number":return yu({plugin:t,schema:r});case "never":return s.keywordTypeNode({keyword:"never"});case "null":return s.literalTypeNode({literal:s.null()});case "object":return hu({onRef:e,plugin:t,schema:r,state:n});case "string":return gu({plugin:t,schema:r,state:n});case "tuple":return xu({onRef:e,plugin:t,schema:r,state:n});case "undefined":return s.keywordTypeNode({keyword:"undefined"});case "unknown":return s.keywordTypeNode({keyword:t.config.topType});case "void":return s.keywordTypeNode({keyword:"void"})}},ne=({onRef:e,plugin:t,schema:r,state:n})=>{let o=t.gen.ensureFile(t.output);if(r.$ref){let i=o.ensureSymbol({selector:t.api.getSelector("ref",r.$ref)});return e&&e(i),s.typeReferenceNode({typeName:i.placeholder})}if(r.type)return Lc({onRef:e,plugin:t,schema:r,state:n});if(r.items){if(r=G({detectFormat:false,schema:r}),r.items){let i=[];for(let a of r.items){let p=ne({onRef:e,plugin:t,schema:a,state:n});i.push(p);}return r.logicalOperator==="and"?s.typeIntersectionNode({types:i}):s.typeUnionNode({types:i})}return ne({onRef:e,plugin:t,schema:r,state:n})}return Lc({onRef:e,plugin:t,schema:{type:"unknown"},state:n})},ai=({id:e,plugin:t,schema:r,state:n})=>{let o=ne({onRef:void 0,plugin:t,schema:r,state:n}),a=t.gen.ensureFile(t.output).ensureSymbol({selector:t.api.getSelector("ref",e)}).update({name:O({config:t.config.definitions,name:D(e)})});qc({plugin:t,schema:r,symbol:a,type:o});},Dc=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r=t.addSymbol({name:O({config:{case:e.config.case},name:"ClientOptions"}),selector:e.api.getSelector("ClientOptions")}),n=t.addSymbol({name:O({config:{case:e.config.case},name:"Webhooks"}),selector:e.api.getSelector("Webhooks")}),o=[],i={usedTypeIDs:new Set},a=[];if(e.forEach("operation","parameter","requestBody","schema","server","webhook",p=>{switch(p.type){case "operation":$c({operation:p.operation,plugin:e,state:i});break;case "parameter":ai({id:p.$ref,plugin:e,schema:p.parameter.schema,state:i});break;case "requestBody":ai({id:p.$ref,plugin:e,schema:p.requestBody.schema,state:i});break;case "schema":ai({id:p.$ref,plugin:e,schema:p.schema,state:i});break;case "server":o.push(p.server);break;case "webhook":a.push(Fc({operation:p.operation,plugin:e,state:i}));break}}),i.usedTypeIDs.size){let p=s.typeParameterDeclaration({constraint:s.keywordTypeNode({keyword:"string"}),name:"T"}),c=t.addSymbol({name:"TypeID"}),l=s.typeAliasDeclaration({exportType:true,name:c.placeholder,type:s.templateLiteralType({value:[s.typeReferenceNode({typeName:"T"}),"_",s.keywordTypeNode({keyword:"string"})]}),typeParameters:[p]});c.update({value:l});for(let m of i.usedTypeIDs.values()){let f=t.addSymbol({name:_e(k({case:e.config.case,value:`${m}_id`}))}),d=s.typeAliasDeclaration({exportType:true,name:f.placeholder,type:s.typeReferenceNode({typeArguments:[s.literalTypeNode({literal:s.stringLiteral({text:m})})],typeName:c.placeholder})});f.update({value:d});}}wc({plugin:e,servers:o,symbolClientOptions:r}),Mc({symbolWebhooks:n,webhookNames:a}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var Fs=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}schemaToType(t){return ne({onRef:void 0,...t})}};var Ms={api:new Fs({name:"@hey-api/typescript"}),config:{case:"PascalCase",exportFromIndex:true,style:"preserve",topType:"unknown",tree:false},handler:Dc,handlerLegacy:Ac,name:"@hey-api/typescript",output:"types",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.enums=t.valueToObject({defaultValue:{case:"SCREAMING_SNAKE_CASE",constantsIgnoreNull:false,enabled:!!e.config.enums,mode:"javascript"},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.config.enums}),e.config.errors=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",error:"{{name}}Error",name:"{{name}}Errors"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.errors}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Data"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Responses",response:"{{name}}Response"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}WebhookRequest",payload:"{{name}}WebhookPayload"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.webhooks});}};var Ls=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Ds=(e,t,r)=>{let n=e.config[r].meta;if(!n)return;let o=n(t);if(Object.keys(o).length)return s.valueToExpression({value:o})};var wr=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),n=t.getPluginOrThrow("@hey-api/sdk");return nn({file:r,operation:e,plugin:n})},Vs=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),n=A(t.context.config),o=t.getPluginOrThrow("@hey-api/typescript"),i=t.gen.selectSymbolFirst(o.api.getSelector("error",e.id));i&&r.addImport({from:i.file,typeNames:[i.placeholder]});let a=i?.placeholder;if(a||(a="Error"),n.name==="@hey-api/client-axios"){let p=r.ensureSymbol({selector:t.api.getSelector("AxiosError")}).update({name:"AxiosError"});r.addImport({from:"axios",typeNames:[p.placeholder]}),a=`${p.placeholder}<${a}>`;}return a},Bs=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),n=t.getPluginOrThrow("@hey-api/typescript"),o=t.gen.selectSymbolFirst(n.api.getSelector("response",e.id));return o&&r.addImport({from:o.file,typeNames:[o.placeholder]}),o?.placeholder||"unknown"};var qr=({plugin:e,typeData:t})=>{let n=A(e.context.config).name==="@hey-api/client-nuxt",o=n?`Omit<${t}, 'composable'>`:t;return {isNuxtClient:n,strippedTypeData:o}};var Vc=({operation:e,plugin:t,queryFn:r,state:n})=>{let o=t.gen.ensureFile(t.output);n.hasMutations||(n.hasMutations=true);let i=o.ensureSymbol({name:"UseMutationOptions",selector:t.api.getSelector("UseMutationOptions")});o.addImport({from:t.name,typeNames:[i.name]}),n.hasUsedQueryFn=true;let a=wr({operation:e,plugin:t}),p=Vs({operation:e,plugin:t}),c=Bs({operation:e,plugin:t}),{isNuxtClient:l,strippedTypeData:m}=qr({plugin:t,typeData:a}),f=l?`${i.placeholder}<${c}, ${m}, ${p}>`:`${i.placeholder}<${c}, ${a}, ${p}>`,d="fnOptions",u=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:d},{key:"throwOnError",value:true}]})]})}),y=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?y.push(s.returnVariable({expression:u})):y.push(s.constVariable({destructure:true,expression:u,name:"data"}),s.returnVariable({expression:"data"}));let g=[{key:"mutation",value:s.arrowFunction({async:true,multiLine:true,parameters:[l?{name:d,type:`Partial<${m}>`}:{name:d}],statements:y})}],x=Ds(t,e,"mutationOptions");x&&g.push({key:"meta",value:x});let b=o.addSymbol({name:O({config:t.config.mutationOptions,name:e.id})}),P=s.constVariable({comment:t.config.comments?X({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${m}>`}],returnType:f,statements:[s.returnStatement({expression:s.objectExpression({obj:g})})]}),name:b.placeholder});b.update({value:P});};var an="TOptions",Ks=s.identifier({text:"options"}),Bc=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=t.ensureSymbol({selector:e.api.getSelector("createQueryKey")}).update({name:O({config:{case:e.config.case},name:"createQueryKey"})}),n=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}),o=s.indexedAccessTypeNode({indexType:s.literalTypeNode({literal:s.ots.number(0)}),objectType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:an})],typeName:n.placeholder})}),i=ge(e.context.config),a=e.getPluginOrThrow("@hey-api/sdk"),p=e.gen.selectSymbolFirstOrThrow(a.api.getSelector("Options")),c=A(e.context.config),l;c.api&&"getSelector"in c.api&&(l=e.gen.selectSymbolFirst(c.api.getSelector("client")));let m=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:s.typeReferenceNode({typeName:an})},{isRequired:false,name:"tags",type:s.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],returnType:s.typeTupleNode({types:[o]}),statements:[s.constVariable({assertion:o,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:i,value:s.identifier({text:`options?.${i} || (options?.client ?? ${l?.placeholder}).getConfig().${i}`})}]}),name:"params",typeName:o}),s.ifStatement({expression:s.identifier({text:"tags"}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"tags"}),right:s.asExpression({expression:s.asExpression({expression:s.identifier({text:"tags"}),type:s.keywordTypeNode({keyword:"unknown"})}),type:s.keywordTypeNode({keyword:"undefined"})})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Ks,isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Ks,isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.asExpression({expression:s.asExpression({expression:s.propertyAccessExpression({expression:"options",name:"headers"}),type:s.keywordTypeNode({keyword:"unknown"})}),type:s.keywordTypeNode({keyword:"undefined"})})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Ks,isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Ks,isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.asExpression({expression:s.asExpression({expression:s.propertyAccessExpression({expression:"options",name:"query"}),type:s.keywordTypeNode({keyword:"unknown"})}),type:s.keywordTypeNode({keyword:"undefined"})})})})]})}),s.returnStatement({expression:s.arrayLiteralExpression({elements:[s.identifier({text:"params"})]})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:p.placeholder})}),name:an}]}),name:r.placeholder});r.update({value:m});},Su=({id:e,operation:t,plugin:r})=>{let n=r.gen.ensureFile(r.output),o=r.config.queryKeys,i;o.tags&&t.tags&&t.tags.length>0&&(i=s.arrayLiteralExpression({elements:t.tags.map(c=>s.stringLiteral({text:c}))}));let a=n.ensureSymbol({selector:r.api.getSelector("createQueryKey")});return s.callExpression({functionName:a.placeholder,parameters:[s.ots.string(e),"options",i]})},Kc=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=t.ensureSymbol({selector:e.api.getSelector("_JSONValue")}).update({name:"_JSONValue"});t.addImport({from:e.name,typeNames:[r.placeholder]});let n=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:ge(e.context.config),type:s.typeReferenceNode({typeName:r.placeholder})},{isRequired:false,name:"headers",type:s.typeReferenceNode({typeName:r.placeholder})},{isRequired:false,name:"query",type:s.typeReferenceNode({typeName:r.placeholder})},{isRequired:false,name:"tags",type:s.typeReferenceNode({typeName:r.placeholder})}],o=e.getPluginOrThrow("@hey-api/sdk"),i=e.gen.selectSymbolFirstOrThrow(o.api.getSelector("Options")),a=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}).update({name:"QueryKey"}),p=s.typeAliasDeclaration({exportType:true,name:a.placeholder,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${an}, 'body' | 'path'>`}),s.typeInterfaceNode({properties:n,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:i.placeholder})}),name:an}]});a.update({value:p});},Wc=({operation:e,plugin:t,symbol:r})=>{let n=wr({operation:e,plugin:t}),{strippedTypeData:o}=qr({plugin:t,typeData:n});return s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:lr(e),name:"options",type:o}],statements:Su({id:e.id,operation:e,plugin:t})}),name:r.placeholder})};var pi="context",ci="options",zc=({operation:e,plugin:t,queryFn:r,state:n})=>{if(Cr({operation:e}))return;let o=t.gen.ensureFile(t.output),i=ce({context:t.context,operation:e});n.hasQueries||(n.hasQueries=true,n.hasCreateQueryKeyParamsFunction||(Kc({plugin:t}),Bc({plugin:t}),n.hasCreateQueryKeyParamsFunction=true));let a=o.ensureSymbol({name:"UseQueryOptions",selector:t.api.getSelector("UseQueryOptions")});o.addImport({from:t.name,typeNames:[a.name]}),n.hasUsedQueryFn=true;let p=o.addSymbol({name:O({config:t.config.queryKeys,name:e.id})}),c=Wc({operation:e,plugin:t,symbol:p});p.update({value:c});let l=wr({operation:e,plugin:t}),m=Vs({operation:e,plugin:t}),f=Bs({operation:e,plugin:t}),{isNuxtClient:d,strippedTypeData:u}=qr({plugin:t,typeData:l}),y=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:ci},{spread:pi},{key:"throwOnError",value:true}]})]})}),g=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?g.push(s.returnVariable({expression:y})):g.push(s.constVariable({destructure:true,expression:y,name:"data"}),s.returnVariable({expression:"data"}));let x=[{key:"key",value:s.callExpression({functionName:p.placeholder,parameters:[ci]})},{key:"query",value:s.arrowFunction({async:true,multiLine:true,parameters:[d?{name:pi,type:u}:{name:pi}],statements:g})}],b=Ds(t,e,"queryOptions");b&&x.push({key:"meta",value:b});let P=o.ensureSymbol({selector:t.api.getSelector("queryOptionsFn",e.id)}).update({name:O({config:t.config.queryOptions,name:e.id})}),C=s.constVariable({comment:t.config.comments?X({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:i,name:ci,type:u}],returnType:d?`${a.placeholder}<${f}, ${u}, ${m}>`:`${a.placeholder}<${f}, ${m}>`,statements:[s.returnStatement({expression:s.objectExpression({obj:x})})]}),name:P.placeholder});P.update({value:C});};var _c=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r={hasCreateQueryKeyParamsFunction:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false},n=e.getPluginOrThrow("@hey-api/sdk"),o=e.gen.selectSymbolFirst(n.api.getSelector("Options"));if(o&&t.addImport({from:o.file,typeNames:[o.placeholder]}),e.forEach("operation",({operation:i})=>{r.hasUsedQueryFn=false;let a=n.config.asClass?$e({context:e.context,operation:i,plugin:n}):void 0,p=a?a.values().next().value:void 0,c=(p?[p.path[0],...p.path.slice(1).map(l=>k({case:"camelCase",value:l})),p.methodName].filter(Boolean):[Se({config:e.context.config,handleIllegal:true,id:i.id,operation:i})]).join(".");if(e.hooks.operation.isQuery(i)&&e.config.queryOptions.enabled&&zc({operation:i,plugin:e,queryFn:c,state:r}),e.hooks.operation.isMutation(i)&&e.config.mutationOptions.enabled&&Vc({operation:i,plugin:e,queryFn:c,state:r}),r.hasUsedQueryFn){let l=e.gen.selectSymbolFirst(p?n.api.getSelector("class",p.path[0]):n.api.getSelector("function",i.id));l&&t.addImport({from:l.file,names:[l.placeholder]});}}),r.hasQueries){let i,a=A(e.context.config);a.api&&"getSelector"in a.api&&(i=e.gen.selectSymbolFirst(a.api.getSelector("client")),i&&t.addImport({from:i.file,names:[i.placeholder]}));}e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var Ws={api:new Ls({name:"@pinia/colada"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/typescript","@hey-api/sdk"],handler:_c,name:"@pinia/colada",output:"@pinia/colada",resolveConfig:(e,t)=>{e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Query"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var $r=(e,t,r)=>{let n=e.config[r].meta;if(!n)return;let o=n(t);if(Object.keys(o).length)return s.valueToExpression({value:o})};var at=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),n=t.getPluginOrThrow("@hey-api/sdk");return nn({file:r,operation:e,plugin:n})},zs=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),n=A(t.context.config),o=t.getPluginOrThrow("@hey-api/typescript"),i=t.gen.selectSymbolFirst(o.api.getSelector("error",e.id));i&&r.addImport({from:i.file,typeNames:[i.placeholder]});let a=i?.placeholder;if(!a){let p=r.ensureSymbol({selector:t.api.getSelector("DefaultError")}).update({name:"DefaultError"});r.addImport({from:t.name,typeNames:[p.placeholder]}),a=p.placeholder;}if(n.name==="@hey-api/client-axios"){let p=r.ensureSymbol({selector:t.api.getSelector("AxiosError")}).update({name:"AxiosError"});r.addImport({from:"axios",typeNames:[p.placeholder]}),a=`${p.placeholder}<${a}>`;}return a},_s=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),n=t.getPluginOrThrow("@hey-api/typescript"),o=t.gen.selectSymbolFirst(n.api.getSelector("response",e.id));return o&&r.addImport({from:o.file,typeNames:[o.placeholder]}),o?.placeholder||"unknown"};var pn="TOptions",Qc=s.identifier({text:"infinite"}),Qs=s.identifier({text:"options"}),Hs=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=t.ensureSymbol({selector:e.api.getSelector("createQueryKey")}).update({name:O({config:{case:e.config.case},name:"createQueryKey"})}),n=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}),o=s.indexedAccessTypeNode({indexType:s.literalTypeNode({literal:s.ots.number(0)}),objectType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:pn})],typeName:n.placeholder})}),i=ge(e.context.config),a=A(e.context.config),p;a.api&&"getSelector"in a.api&&(p=e.gen.selectSymbolFirst(a.api.getSelector("client")));let c=e.getPluginOrThrow("@hey-api/sdk"),l=e.gen.selectSymbolFirstOrThrow(c.api.getSelector("Options")),m=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:s.typeReferenceNode({typeName:pn})},{isRequired:false,name:"infinite",type:s.typeReferenceNode({typeName:"boolean"})},{isRequired:false,name:"tags",type:s.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],returnType:s.typeTupleNode({types:[o]}),statements:[s.constVariable({assertion:o,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:i,value:s.identifier({text:`options?.${i} || (options?.client ?? ${p?.placeholder}).getConfig().${i}`})}]}),name:"params",typeName:o}),s.ifStatement({expression:Qc,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:Qc})})]})}),s.ifStatement({expression:s.identifier({text:"tags"}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"tags"}),right:s.identifier({text:"tags"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Qs,isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Qs,isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Qs,isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Qs,isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnStatement({expression:s.arrayLiteralExpression({elements:[s.identifier({text:"params"})]})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:l.placeholder})}),name:pn}]}),name:r.placeholder});r.update({value:m});},Tu=({id:e,isInfinite:t,operation:r,plugin:n})=>{let o=n.gen.ensureFile(n.output),i=t?n.config.infiniteQueryKeys:n.config.queryKeys,a;i.tags&&r.tags&&r.tags.length>0&&(a=s.arrayLiteralExpression({elements:r.tags.map(l=>s.stringLiteral({text:l}))}));let p=o.ensureSymbol({selector:n.api.getSelector("createQueryKey")});return s.callExpression({functionName:p.placeholder,parameters:[s.ots.string(e),"options",t||a?s.ots.boolean(!!t):void 0,a]})},Zs=({plugin:e})=>{let t=e.gen.ensureFile(e.output),r=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})},{isRequired:false,name:"tags",type:s.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],n=e.getPluginOrThrow("@hey-api/sdk"),o=e.gen.selectSymbolFirstOrThrow(n.api.getSelector("Options")),i=t.ensureSymbol({selector:e.api.getSelector("QueryKey")}).update({name:"QueryKey"}),a=s.typeAliasDeclaration({exportType:true,name:i.placeholder,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${pn}, '${ge(e.context.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:r,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:o.placeholder})}),name:pn}]});i.update({value:a});},Us=({isInfinite:e,operation:t,plugin:r,symbol:n,typeQueryKey:o})=>{let i=at({operation:t,plugin:r});return s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:lr(t),name:"options",type:i}],returnType:e?o:void 0,statements:Tu({id:t.id,isInfinite:e,operation:t,plugin:r})}),name:n.placeholder})};var Iu=({plugin:e})=>{let r=e.gen.ensureFile(e.output).ensureSymbol({selector:e.api.getSelector("createInfiniteParams")}).update({name:O({config:{case:e.config.case},name:"createInfiniteParams"})}),n=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeReferenceNode({typeName:"QueryKey<Options>"})},{name:"page",type:s.typeReferenceNode({typeName:"K"})}],statements:[s.constVariable({expression:s.objectExpression({obj:[{spread:s.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),s.returnVariable({expression:s.asExpression({expression:s.asExpression({expression:s.identifier({text:"params"}),type:s.keywordTypeNode({keyword:"unknown"})}),type:S.factory.createTypeQueryNode(s.identifier({text:"page"}))})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:"Pick<QueryKey<Options>[0], 'body' | 'headers' | 'path' | 'query'>"})}),name:"K"}]}),name:r.placeholder});r.update({value:n});},Hc=({operation:e,plugin:t,queryFn:r,state:n})=>{let o=Ea({context:t.context,operation:e});if(!o)return;let i=t.gen.ensureFile(t.output),a=ce({context:t.context,operation:e});n.hasInfiniteQueries||(n.hasInfiniteQueries=true,n.hasCreateQueryKeyParamsFunction||(Zs({plugin:t}),Hs({plugin:t}),n.hasCreateQueryKeyParamsFunction=true),n.hasCreateInfiniteParamsFunction||(Iu({plugin:t}),n.hasCreateInfiniteParamsFunction=true));let p=i.ensureSymbol({selector:t.api.getSelector("infiniteQueryOptions")}).update({name:"infiniteQueryOptions"}),c=i.ensureSymbol({selector:t.api.getSelector("InfiniteData")}).update({name:"InfiniteData"});i.addImport({from:t.name,names:[p.name],typeNames:[c.name]}),n.hasUsedQueryFn=true;let l=at({operation:e,plugin:t}),m=zs({operation:e,plugin:t}),f=_s({operation:e,plugin:t}),u=`${i.ensureSymbol({selector:t.api.getSelector("QueryKey")}).placeholder}<${l}>`,y=`Pick<${u}[0], 'body' | 'headers' | 'path' | 'query'>`,g=t.getPluginOrThrow("@hey-api/typescript"),x={usedTypeIDs:new Set},b=g.api.schemaToType({plugin:g,schema:o.schema,state:x}),P=`${me({node:b,unescape:true})} | ${y}`,C=i.addSymbol({name:O({config:t.config.infiniteQueryKeys,name:e.id})}),$=Us({isInfinite:true,operation:e,plugin:t,symbol:C,typeQueryKey:u});C.update({value:$});let q=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),B=i.ensureSymbol({selector:t.api.getSelector("createInfiniteParams")}),W=[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:o.in,value:s.objectExpression({multiLine:true,obj:[{key:o.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:y}),s.constVariable({expression:s.callExpression({functionName:B.placeholder,parameters:["queryKey","page"]}),name:"params"})];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?W.push(s.returnVariable({expression:q})):W.push(s.constVariable({destructure:true,expression:q,name:"data"}),s.returnVariable({expression:"data"}));let se=[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:W})},{key:"queryKey",value:s.callExpression({functionName:C.placeholder,parameters:["options"]})}],w=$r(t,e,"infiniteQueryOptions");w&&se.push({key:"meta",value:w});let K=i.addSymbol({name:O({config:t.config.infiniteQueryOptions,name:e.id})}),mt=s.constVariable({comment:t.config.comments?X({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:a,name:"options",type:l}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:se})],name:p.placeholder,types:[f,m||"unknown",`${c.placeholder}<${f}>`,u,P]})]}),name:K.placeholder});K.update({value:mt});};var Zc=({operation:e,plugin:t,queryFn:r,state:n})=>{let o=t.name==="@tanstack/angular-query-experimental"||t.name==="@tanstack/svelte-query"||t.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",i=t.gen.ensureFile(t.output);n.hasMutations||(n.hasMutations=true);let a=i.ensureSymbol({name:o,selector:t.api.getSelector("MutationOptions")});i.addImport({from:t.name,typeNames:[a.name]}),n.hasUsedQueryFn=true;let p=at({operation:e,plugin:t}),c=zs({operation:e,plugin:t}),l=_s({operation:e,plugin:t}),m=`${a.placeholder}<${l}, ${c}, ${p}>`,f="fnOptions",d=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:f},{key:"throwOnError",value:true}]})]})}),u=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?u.push(s.returnVariable({expression:d})):u.push(s.constVariable({destructure:true,expression:d,name:"data"}),s.returnVariable({expression:"data"}));let y=[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:f}],statements:u})}],g=$r(t,e,"mutationOptions");g&&y.push({key:"meta",value:g});let x="mutationOptions",b=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${p}>`}],returnType:m,statements:[s.constVariable({expression:s.objectExpression({obj:y}),name:x,typeName:m}),s.returnVariable({expression:x})]}),P=i.addSymbol({name:O({config:t.config.mutationOptions,name:e.id})}),C=s.constVariable({comment:t.config.comments?X({operation:e}):void 0,exportConst:true,expression:b,name:P.placeholder});P.update({value:C});};var mi="options",Uc=({operation:e,plugin:t,queryFn:r,state:n})=>{if(Cr({operation:e}))return;let o=t.gen.ensureFile(t.output),i=ce({context:t.context,operation:e});n.hasQueries||(n.hasQueries=true,n.hasCreateQueryKeyParamsFunction||(Zs({plugin:t}),Hs({plugin:t}),n.hasCreateQueryKeyParamsFunction=true));let a=o.ensureSymbol({name:"queryOptions",selector:t.api.getSelector("queryOptions")});o.addImport({from:t.name,names:[a.name]}),n.hasUsedQueryFn=true;let p=o.addSymbol({name:O({config:t.config.queryKeys,name:e.id})}),c=Us({isInfinite:false,operation:e,plugin:t,symbol:p});p.update({value:c});let l=at({operation:e,plugin:t}),m=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:mi},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),f=[];t.getPluginOrThrow("@hey-api/sdk").config.responseStyle==="data"?f.push(s.returnVariable({expression:m})):f.push(s.constVariable({destructure:true,expression:m,name:"data"}),s.returnVariable({expression:"data"}));let d=[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:f})},{key:"queryKey",value:s.callExpression({functionName:p.placeholder,parameters:[mi]})}],u=$r(t,e,"queryOptions");u&&d.push({key:"meta",value:u});let y=o.ensureSymbol({selector:t.api.getSelector("queryOptionsFn",e.id)}).update({name:O({config:t.config.queryOptions,name:e.id})}),g=s.constVariable({comment:t.config.comments?X({operation:e}):void 0,exportConst:t.config.queryOptions.exported,expression:s.arrowFunction({parameters:[{isRequired:i,name:mi,type:l}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:d})],name:a.placeholder})]}),name:y.placeholder});y.update({value:g});};var Xc="options",Gc=({operation:e,plugin:t,state:r})=>{if(Cr({operation:e})||!("useQuery"in t.config))return;let n=t.gen.ensureFile(t.output),o=n.addSymbol({name:O({config:t.config.useQuery,name:e.id})});r.hasUseQuery||(r.hasUseQuery=true);let i=n.ensureSymbol({name:"useQuery",selector:t.api.getSelector("useQuery")});n.addImport({from:t.name,names:[i.name]});let a=ce({context:t.context,operation:e}),p=at({operation:e,plugin:t}),c=n.ensureSymbol({selector:t.api.getSelector("queryOptionsFn",e.id)}),l=s.constVariable({comment:t.config.comments?X({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:a,name:Xc,type:p}],statements:[s.returnStatement({expression:s.callExpression({functionName:i.placeholder,parameters:[s.callExpression({functionName:c.placeholder,parameters:[Xc]})]})})]}),name:o.placeholder});o.update({value:l});};var pt=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false},n=e.getPluginOrThrow("@hey-api/sdk"),o=e.gen.selectSymbolFirst(n.api.getSelector("Options"));if(o&&t.addImport({from:o.file,typeNames:[o.placeholder]}),e.forEach("operation",({operation:i})=>{r.hasUsedQueryFn=false;let a=n.config.asClass?$e({context:e.context,operation:i,plugin:n}):void 0,p=a?a.values().next().value:void 0,c=(p?[p.path[0],...p.path.slice(1).map(l=>k({case:"camelCase",value:l})),p.methodName].filter(Boolean):[Se({config:e.context.config,handleIllegal:true,id:i.id,operation:i})]).join(".");if(e.hooks.operation.isQuery(i)&&(e.config.queryOptions.enabled&&Uc({operation:i,plugin:e,queryFn:c,state:r}),e.config.infiniteQueryOptions.enabled&&Hc({operation:i,plugin:e,queryFn:c,state:r}),"useQuery"in e.config&&e.config.useQuery.enabled&&Gc({operation:i,plugin:e,state:r})),e.hooks.operation.isMutation(i)&&e.config.mutationOptions.enabled&&Zc({operation:i,plugin:e,queryFn:c,state:r}),r.hasUsedQueryFn){let l=e.gen.selectSymbolFirst(p?n.api.getSelector("class",p.path[0]):n.api.getSelector("function",i.id));l&&t.addImport({from:l.file,names:[l.placeholder]});}}),r.hasQueries||r.hasInfiniteQueries){let i,a=A(e.context.config);a.api&&"getSelector"in a.api&&(i=e.gen.selectSymbolFirst(a.api.getSelector("client")),i&&t.addImport({from:i.file,names:[i.placeholder]}));}e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var Pu=e=>`${Se({config:I(),id:e.name,operation:e})}InfiniteOptions`,Au=e=>`${Se({config:I(),id:e.name,operation:e})}Mutation`,Eu=({config:e,id:t,operation:r})=>`${Se({config:e,id:t,operation:r})}Options`,Xs=({config:e,id:t,isInfinite:r,operation:n})=>`${Se({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,Cu=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},Nu="createInfiniteParams",im="createQueryKey",Jc="infiniteQueryOptions",Yc="mutationOptions",fi="QueryKey",em="queryOptions",mn="TOptions",ju=({file:e})=>{let t=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeNode("QueryKey<OptionsLegacyParser>")},{name:"page",type:s.typeNode("K")}],statements:[s.constVariable({expression:s.identifier({text:"queryKey[0]"}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),s.returnVariable({expression:S.factory.createAsExpression(S.factory.createAsExpression(s.identifier({text:"params"}),S.factory.createKeywordTypeNode(S.SyntaxKind.UnknownKeyword)),S.factory.createTypeQueryNode(s.identifier({text:"page"})))})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:"Pick<QueryKey<OptionsLegacyParser>[0], 'body' | 'headers' | 'path' | 'query'>"})}),name:"K"}]}),name:Nu});e.add(t);},tm=({file:e})=>{let t=s.indexedAccessTypeNode({indexType:s.typeNode(0),objectType:s.typeNode(fi,[s.typeNode(mn)])}),r=s.identifier({text:"infinite"}),n=ge(I()),o=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeNode("string")},{isRequired:false,name:"options",type:s.typeNode(mn)},{isRequired:false,name:"infinite",type:s.typeNode("boolean")}],returnType:t,statements:[s.constVariable({assertion:t,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:n,value:s.identifier({text:`options?.${n} || (options?.client ?? _heyApiClient).getConfig().${n}`})}]}),name:"params",typeName:t}),s.ifStatement({expression:r,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnVariable({expression:"params"})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:"OptionsLegacyParser"})}),name:mn}]}),name:im});e.add(o);},rm=({file:e})=>{let t=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})}],r=s.typeAliasDeclaration({name:fi,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${mn}, '${ge(I())}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:"OptionsLegacyParser"})}),name:mn}]});e.add(r);},li=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:o}=Jt({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Yt,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeData:oi({importedType:o})}},nm=({client:e,file:t,operation:r,pluginName:n,typesModulePath:o})=>{let i=I(),{name:a}=Jt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:vr,onImport:l=>{t.import({asType:true,module:o,name:l});}}),p={asType:true,name:a};if(p.name||(p=t.import({asType:true,module:n,name:"DefaultError"})),A(i).name==="@hey-api/client-axios"){let l=t.import({asType:true,module:"axios",name:"AxiosError"});p={...l,name:`${l.name}<${p.name}>`};}return {typeError:p}},sm=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:o}=Jt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:it,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeResponse:o||"void"}},om=({id:e,isInfinite:t})=>s.arrayLiteralExpression({elements:[s.callExpression({functionName:im,parameters:[s.ots.string(e),"options",t?s.ots.boolean(true):void 0]})],multiLine:false}),ct=({client:e,files:t,plugin:r})=>{let n=I();if(U(n))throw new Error("TanStack Query plugin does not support legacy clients");let o=t[r.name];o.import({asType:true,module:re({config:n,sourceOutput:r.output}),name:"OptionsLegacyParser"});let i=tr({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),a=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p,c=false,l=false,m=false,f=false,d=false,u=new Map;for(let y of e.services)for(let g of y.operations){let x=L(g);if(u.has(x))continue;u.set(x,true);let b=[n.plugins["@hey-api/sdk"]?.config.asClass&&Rr({config:n,name:y.name}),Se({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.config.asClass,id:g.name,operation:g})].filter(Boolean).join("."),P=false;if(r.config.queryOptions.enabled&&["GET","POST"].includes(g.method)){d||(d=true,l||(rm({file:o}),tm({file:o}),l=true),o.import({module:r.name,name:em})),P=true;let{typeData:C}=li({client:e,file:o,operation:g,typesModulePath:i}),$=tt(g.parameters),q=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:$,name:"options",type:C}],statements:om({id:g.name})}),name:Xs({config:n,id:g.name,operation:g})});o.add(q);let B=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:$,name:"options",type:C}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:b,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:Xs({config:n,id:g.name,operation:g}),parameters:["options"]})}]})],name:em})]}),name:Eu({config:n,id:g.name,operation:g})});o.add(B);}if(r.config.infiniteQueryOptions&&["GET","POST"].includes(g.method)){let C,$=g.parameters.find(q=>{if(Ie(n.parser.pagination).test(q.name))return C=q,true;if(q.in==="body"){if(q.export==="reference"){let W=q.$refs[0];return e.models.find(w=>w.meta?.$ref===W)?.properties.find(w=>{if(Ie(n.parser.pagination).test(w.name))return C=w,true})}return q.properties.find(W=>{if(Ie(n.parser.pagination).test(W.name))return C=W,true})}});if($&&C){m||(m=true,l||(rm({file:o}),tm({file:o}),l=true),c||(ju({file:o}),c=true),o.import({module:r.name,name:Jc}),p=o.import({asType:true,module:r.name,name:"InfiniteData"})),P=true;let{typeData:q}=li({client:e,file:o,operation:g,typesModulePath:i}),{typeError:B}=nm({client:e,file:o,operation:g,pluginName:r.name,typesModulePath:i}),{typeResponse:W}=sm({client:e,file:o,operation:g,typesModulePath:i}),se=tt(g.parameters),w=`${fi}<${q}>`,K=`Pick<${w}[0], 'body' | 'headers' | 'path' | 'query'>`,mt=`${C.base} | ${K}`,Le=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:se,name:"options",type:q}],returnType:w,statements:om({id:g.name,isInfinite:true})}),name:Xs({config:n,id:g.name,isInfinite:true,operation:g})});o.add(Le);let er=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:se,name:"options",type:q}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:Cu($),value:s.objectExpression({multiLine:true,obj:[{key:C.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:K}),s.constVariable({expression:s.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:b,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:Xs({config:n,id:g.name,isInfinite:true,operation:g}),parameters:["options"]})}]})],name:Jc,types:[W,B.name,`${typeof p=="string"?p:p.name}<${W}>`,w,mt]})]}),name:Pu(g)});o.add(er);}}if(r.config.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(g.method)){f||(f=true,o.import({asType:true,module:r.name,name:a})),P=true;let{typeData:C}=li({client:e,file:o,operation:g,typesModulePath:i}),{typeError:$}=nm({client:e,file:o,operation:g,pluginName:r.name,typesModulePath:i}),{typeResponse:q}=sm({client:e,file:o,operation:g,typesModulePath:i}),B="fnOptions",W=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${C}>`}],statements:[s.constVariable({expression:s.objectExpression({obj:[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:B}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:b,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:B},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})}]}),name:Yc,typeName:`${a}<${q}, ${$.name}, ${C}>`}),s.returnVariable({expression:Yc})]}),se=s.constVariable({comment:[],exportConst:true,expression:W,name:Au(g)});o.add(se);}(d||m)&&o.import({alias:"_heyApiClient",module:tr({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),P&&o.import({module:tr({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:b.split(".")[0]});}};var Gs=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Js={api:new Gs({name:"@tanstack/angular-query-experimental"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:pt,handlerLegacy:ct,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var Ys=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var eo={api:new Ys({name:"@tanstack/react-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:pt,handlerLegacy:ct,name:"@tanstack/react-query",output:"@tanstack/react-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions}),e.config.useQuery=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:false,name:"use{{name}}Query"},mappers:{boolean:r=>({enabled:r}),function:r=>({enabled:true,name:r}),object:r=>({enabled:true,...r}),string:r=>({enabled:true,name:r})},value:e.config.useQuery}),e.config.useQuery.enabled&&(e.config.queryOptions.enabled||(e.config.queryOptions.enabled=true,e.config.queryOptions.exported=false));}};var to=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var ro={api:new to({name:"@tanstack/solid-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:pt,handlerLegacy:ct,name:"@tanstack/solid-query",output:"@tanstack/solid-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var no=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var so={api:new no({name:"@tanstack/svelte-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:pt,handlerLegacy:ct,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var oo=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var io={api:new oo({name:"@tanstack/vue-query"}),config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:pt,handlerLegacy:ct,name:"@tanstack/vue-query",output:"@tanstack/vue-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,exported:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var ao=class{constructor(t){this.meta=t;}getSelector(...t){return [this.meta.name,...t]}};var Fu=({operation:e,plugin:t})=>{let r=t.gen.ensureFile(t.output),n=[],o=t.getPluginOrThrow("@hey-api/typescript"),i=t.gen.selectSymbolFirst(o.api.getSelector("data",e.id));i&&(e.body&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),n.push({isRequired:e.body.required,name:"Body",type:`${i.placeholder}['body']`})),e.parameters&&(e.parameters.header&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),n.push({isRequired:Ct(e.parameters.header),name:"Headers",type:`${i.placeholder}['headers']`})),e.parameters.path&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),n.push({isRequired:Ct(e.parameters.path),name:"Params",type:`${i.placeholder}['path']`})),e.parameters.query&&(r.addImport({from:i.file,typeNames:[i.placeholder]}),n.push({isRequired:Ct(e.parameters.query),name:"Querystring",type:`${i.placeholder}['query']`}))));let{errors:a,responses:p}=He(e),c,l=t.gen.selectSymbolFirst(o.api.getSelector("errors",e.id));if(l&&a&&a.properties){let g=Object.keys(a.properties);if(g.length){if(!g.includes("default"))r.addImport({from:l.file,typeNames:[l.placeholder]}),c=s.typeReferenceNode({typeName:l.placeholder});else if(g.length>1){r.addImport({from:l.file,typeNames:[l.placeholder]});let b=s.typeReferenceNode({typeName:l.placeholder}),P=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});c=s.typeReferenceNode({typeArguments:[b,P],typeName:"Omit"});}}}let m,f=t.gen.selectSymbolFirst(o.api.getSelector("responses",e.id));if(f&&p&&p.properties){let g=Object.keys(p.properties);if(g.length){if(!g.includes("default"))r.addImport({from:f.file,typeNames:[f.placeholder]}),m=s.typeReferenceNode({typeName:f.placeholder});else if(g.length>1){r.addImport({from:f.file,typeNames:[f.placeholder]});let b=s.typeReferenceNode({typeName:f.placeholder}),P=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});m=s.typeReferenceNode({typeArguments:[b,P],typeName:"Omit"});}}}let d=[c,m].filter(Boolean);if(d.length&&n.push({name:"Reply",type:s.typeIntersectionNode({types:d})}),!n.length)return;let u=r.ensureSymbol({selector:t.api.getSelector("RouteHandler")});return {name:e.id,type:s.typeReferenceNode({typeArguments:[s.typeInterfaceNode({properties:n,useLegacyResolution:false})],typeName:u.placeholder})}},am=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r=[];e.forEach("operation",({operation:i})=>{let a=Fu({operation:i,plugin:e});a&&r.push(a);});let n=t.addSymbol({name:"RouteHandlers"});if(r.length){let i=t.ensureSymbol({selector:e.api.getSelector("RouteHandler")}).update({name:"RouteHandler"});t.addImport({from:"fastify",typeNames:[i.name]});}let o=s.typeAliasDeclaration({exportType:true,name:n.placeholder,type:s.typeInterfaceNode({properties:r,useLegacyResolution:false})});n.update({value:o});};var po={api:new ao({name:"fastify"}),config:{exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:am,name:"fastify",output:"fastify"};var T={actions:{args:s.identifier({text:"args"}),base64:s.identifier({text:"base64"}),bic:s.identifier({text:"bic"}),brand:s.identifier({text:"brand"}),bytes:s.identifier({text:"bytes"}),check:s.identifier({text:"check"}),checkItems:s.identifier({text:"checkItems"}),creditCard:s.identifier({text:"creditCard"}),cuid2:s.identifier({text:"cuid2"}),decimal:s.identifier({text:"decimal"}),description:s.identifier({text:"description"}),digits:s.identifier({text:"digits"}),email:s.identifier({text:"email"}),emoji:s.identifier({text:"emoji"}),empty:s.identifier({text:"empty"}),endsWith:s.identifier({text:"endsWith"}),entries:s.identifier({text:"entries"}),everyItem:s.identifier({text:"everyItem"}),excludes:s.identifier({text:"excludes"}),filterItems:s.identifier({text:"filterItems"}),findItem:s.identifier({text:"findItem"}),finite:s.identifier({text:"finite"}),flavor:s.identifier({text:"flavor"}),graphemes:s.identifier({text:"graphemes"}),gtValue:s.identifier({text:"gtValue"}),hash:s.identifier({text:"hash"}),hexColor:s.identifier({text:"hexColor"}),hexadecimal:s.identifier({text:"hexadecimal"}),imei:s.identifier({text:"imei"}),includes:s.identifier({text:"includes"}),integer:s.identifier({text:"integer"}),ip:s.identifier({text:"ip"}),ipv4:s.identifier({text:"ipv4"}),ipv6:s.identifier({text:"ipv6"}),isoDate:s.identifier({text:"isoDate"}),isoDateTime:s.identifier({text:"isoDateTime"}),isoTime:s.identifier({text:"isoTime"}),isoTimeSecond:s.identifier({text:"isoTimeSecond"}),isoTimestamp:s.identifier({text:"isoTimestamp"}),isoWeek:s.identifier({text:"isoWeek"}),length:s.identifier({text:"length"}),ltValue:s.identifier({text:"ltValue"}),mac:s.identifier({text:"mac"}),mac48:s.identifier({text:"mac48"}),mac64:s.identifier({text:"mac64"}),mapItems:s.identifier({text:"mapItems"}),maxBytes:s.identifier({text:"maxBytes"}),maxEntries:s.identifier({text:"maxEntries"}),maxGraphemes:s.identifier({text:"maxGraphemes"}),maxLength:s.identifier({text:"maxLength"}),maxSize:s.identifier({text:"maxSize"}),maxValue:s.identifier({text:"maxValue"}),maxWords:s.identifier({text:"maxWords"}),metadata:s.identifier({text:"metadata"}),mimeType:s.identifier({text:"mimeType"}),minBytes:s.identifier({text:"minBytes"}),minEntries:s.identifier({text:"minEntries"}),minGraphemes:s.identifier({text:"minGraphemes"}),minLength:s.identifier({text:"minLength"}),minSize:s.identifier({text:"minSize"}),minValue:s.identifier({text:"minValue"}),minWords:s.identifier({text:"minWords"}),multipleOf:s.identifier({text:"multipleOf"}),nanoid:s.identifier({text:"nanoid"}),nonEmpty:s.identifier({text:"nonEmpty"}),normalize:s.identifier({text:"normalize"}),notBytes:s.identifier({text:"notBytes"}),notEntries:s.identifier({text:"notEntries"}),notGraphemes:s.identifier({text:"notGraphemes"}),notLength:s.identifier({text:"notLength"}),notSize:s.identifier({text:"notSize"}),notValue:s.identifier({text:"notValue"}),notValues:s.identifier({text:"notValues"}),notWords:s.identifier({text:"notWords"}),octal:s.identifier({text:"octal"}),parseJson:s.identifier({text:"parseJson"}),partialCheck:s.identifier({text:"partialCheck"}),rawCheck:s.identifier({text:"rawCheck"}),rawTransform:s.identifier({text:"rawTransform"}),readonly:s.identifier({text:"readonly"}),reduceItems:s.identifier({text:"reduceItems"}),regex:s.identifier({text:"regex"}),returns:s.identifier({text:"returns"}),rfcEmail:s.identifier({text:"rfcEmail"}),safeInteger:s.identifier({text:"safeInteger"}),size:s.identifier({text:"size"}),slug:s.identifier({text:"slug"}),someItem:s.identifier({text:"someItem"}),sortItems:s.identifier({text:"sortItems"}),startsWith:s.identifier({text:"startsWith"}),stringifyJson:s.identifier({text:"stringifyJson"}),title:s.identifier({text:"title"}),toLowerCase:s.identifier({text:"toLowerCase"}),toMaxValue:s.identifier({text:"toMaxValue"}),toMinValue:s.identifier({text:"toMinValue"}),toUpperCase:s.identifier({text:"toUpperCase"}),transform:s.identifier({text:"transform"}),trim:s.identifier({text:"trim"}),trimEnd:s.identifier({text:"trimEnd"}),trimStart:s.identifier({text:"trimStart"}),ulid:s.identifier({text:"ulid"}),url:s.identifier({text:"url"}),uuid:s.identifier({text:"uuid"}),value:s.identifier({text:"value"}),values:s.identifier({text:"values"}),words:s.identifier({text:"words"})},async:{argsAsync:s.identifier({text:"argsAsync"}),arrayAsync:s.identifier({text:"arrayAsync"}),awaitAsync:s.identifier({text:"awaitAsync"}),checkAsync:s.identifier({text:"checkAsync"}),checkItemsAsync:s.identifier({text:"checkItemsAsync"}),customAsync:s.identifier({text:"customAsync"}),exactOptionalAsync:s.identifier({text:"exactOptionalAsync"}),fallbackAsync:s.identifier({text:"fallbackAsync"}),forwardAsync:s.identifier({text:"forwardAsync"}),getDefaultsAsync:s.identifier({text:"getDefaultsAsync"}),getFallbacksAsync:s.identifier({text:"getFallbacksAsync"}),intersectAsync:s.identifier({text:"intersectAsync"}),lazyAsync:s.identifier({text:"lazyAsync"}),looseObjectAsync:s.identifier({text:"looseObjectAsync"}),looseTupleAsync:s.identifier({text:"looseTupleAsync"}),mapAsync:s.identifier({text:"mapAsync"}),nonNullableAsync:s.identifier({text:"nonNullableAsync"}),nonNullishAsync:s.identifier({text:"nonNullishAsync"}),nonOptionalAsync:s.identifier({text:"nonOptionalAsync"}),nullableAsync:s.identifier({text:"nullableAsync"}),nullishAsync:s.identifier({text:"nullishAsync"}),objectAsync:s.identifier({text:"objectAsync"}),objectWithRestAsync:s.identifier({text:"objectWithRestAsync"}),optionalAsync:s.identifier({text:"optionalAsync"}),parseAsync:s.identifier({text:"parseAsync"}),parserAsync:s.identifier({text:"parserAsync"}),partialAsync:s.identifier({text:"partialAsync"}),partialCheckAsync:s.identifier({text:"partialCheckAsync"}),pipeAsync:s.identifier({text:"pipeAsync"}),rawCheckAsync:s.identifier({text:"rawCheckAsync"}),rawTransformAsync:s.identifier({text:"rawTransformAsync"}),recordAsync:s.identifier({text:"recordAsync"}),requiredAsync:s.identifier({text:"requiredAsync"}),returnsAsync:s.identifier({text:"returnsAsync"}),safeParseAsync:s.identifier({text:"safeParseAsync"}),safeParserAsync:s.identifier({text:"safeParserAsync"}),setAsync:s.identifier({text:"setAsync"}),strictObjectAsync:s.identifier({text:"strictObjectAsync"}),strictTupleAsync:s.identifier({text:"strictTupleAsync"}),transformAsync:s.identifier({text:"transformAsync"}),tupleAsync:s.identifier({text:"tupleAsync"}),tupleWithRestAsync:s.identifier({text:"tupleWithRestAsync"}),undefinedableAsync:s.identifier({text:"undefinedableAsync"}),unionAsync:s.identifier({text:"unionAsync"}),variantAsync:s.identifier({text:"variantAsync"})},methods:{assert:s.identifier({text:"assert"}),config:s.identifier({text:"config"}),fallback:s.identifier({text:"fallback"}),flatten:s.identifier({text:"flatten"}),forward:s.identifier({text:"forward"}),getDefault:s.identifier({text:"getDefault"}),getDefaults:s.identifier({text:"getDefaults"}),getDescription:s.identifier({text:"getDescription"}),getFallback:s.identifier({text:"getFallback"}),getFallbacks:s.identifier({text:"getFallbacks"}),getMetadata:s.identifier({text:"getMetadata"}),getTitle:s.identifier({text:"getTitle"}),is:s.identifier({text:"is"}),keyof:s.identifier({text:"keyof"}),message:s.identifier({text:"message"}),omit:s.identifier({text:"omit"}),parse:s.identifier({text:"parse"}),parser:s.identifier({text:"parser"}),partial:s.identifier({text:"partial"}),pick:s.identifier({text:"pick"}),pipe:s.identifier({text:"pipe"}),required:s.identifier({text:"required"}),safeParse:s.identifier({text:"safeParse"}),safeParser:s.identifier({text:"safeParser"}),summarize:s.identifier({text:"summarize"}),unwrap:s.identifier({text:"unwrap"})},schemas:{any:s.identifier({text:"any"}),array:s.identifier({text:"array"}),bigInt:s.identifier({text:"bigint"}),blob:s.identifier({text:"blob"}),boolean:s.identifier({text:"boolean"}),custom:s.identifier({text:"custom"}),date:s.identifier({text:"date"}),enum:s.identifier({text:"enum"}),exactOptional:s.identifier({text:"exactOptional"}),file:s.identifier({text:"file"}),function:s.identifier({text:"function"}),instance:s.identifier({text:"instance"}),intersect:s.identifier({text:"intersect"}),lazy:s.identifier({text:"lazy"}),literal:s.identifier({text:"literal"}),looseObject:s.identifier({text:"looseObject"}),looseTuple:s.identifier({text:"looseTuple"}),map:s.identifier({text:"map"}),nan:s.identifier({text:"nan"}),never:s.identifier({text:"never"}),nonNullable:s.identifier({text:"nonNullable"}),nonNullish:s.identifier({text:"nonNullish"}),nonOptional:s.identifier({text:"nonOptional"}),null:s.identifier({text:"null"}),nullable:s.identifier({text:"nullable"}),nullish:s.identifier({text:"nullish"}),number:s.identifier({text:"number"}),object:s.identifier({text:"object"}),objectWithRest:s.identifier({text:"objectWithRest"}),optional:s.identifier({text:"optional"}),picklist:s.identifier({text:"picklist"}),promise:s.identifier({text:"promise"}),record:s.identifier({text:"record"}),set:s.identifier({text:"set"}),strictObject:s.identifier({text:"strictObject"}),strictTuple:s.identifier({text:"strictTuple"}),string:s.identifier({text:"string"}),symbol:s.identifier({text:"symbol"}),tuple:s.identifier({text:"tuple"}),tupleWithRest:s.identifier({text:"tupleWithRest"}),undefined:s.identifier({text:"undefined"}),undefinedable:s.identifier({text:"undefinedable"}),union:s.identifier({text:"union"}),unknown:s.identifier({text:"unknown"}),variant:s.identifier({text:"variant"}),void:s.identifier({text:"void"})},types:{GenericSchema:s.identifier({text:"GenericSchema"})}};var co=class{constructor(t){this.meta=t;}createRequestValidator({file:t,operation:r,plugin:n}){let o=n.gen.selectSymbolFirst(n.api.getSelector("data",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i=t.ensureSymbol({name:"v",selector:n.api.getSelector("import","valibot")});t.addImport({from:"valibot",namespaceImport:i.placeholder});let a="data";return s.arrowFunction({async:true,parameters:[{name:a}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:i.placeholder,name:T.async.parseAsync}),parameters:[s.identifier({text:o.placeholder}),s.identifier({text:a})]})})})]})}createResponseValidator({file:t,operation:r,plugin:n}){let o=n.gen.selectSymbolFirst(n.api.getSelector("responses",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i=t.ensureSymbol({name:"v",selector:n.api.getSelector("import","valibot")});t.addImport({from:"valibot",namespaceImport:i.placeholder});let a="data";return s.arrowFunction({async:true,parameters:[{name:a}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:i.placeholder,name:T.async.parseAsync}),parameters:[s.identifier({text:o.placeholder}),s.identifier({text:a})]})})})]})}getSelector(...t){return [this.meta.name,...t]}};var mo={int16:{max:32767,maxError:"Invalid value: Expected int16 to be <= 2^15-1",min:-32768,minError:"Invalid value: Expected int16 to be >= -2^15",needsBigInt:false},int32:{max:2147483647,maxError:"Invalid value: Expected int32 to be <= 2^31-1",min:-2147483648,minError:"Invalid value: Expected int32 to be >= -2^31",needsBigInt:false},int64:{max:"9223372036854775807",maxError:"Invalid value: Expected int64 to be <= 2^63-1",min:"-9223372036854775808",minError:"Invalid value: Expected int64 to be >= -2^63",needsBigInt:true},int8:{max:127,maxError:"Invalid value: Expected int8 to be <= 2^7-1",min:-128,minError:"Invalid value: Expected int8 to be >= -2^7",needsBigInt:false},uint16:{max:65535,maxError:"Invalid value: Expected uint16 to be <= 2^16-1",min:0,minError:"Invalid value: Expected uint16 to be >= 0",needsBigInt:false},uint32:{max:4294967295,maxError:"Invalid value: Expected uint32 to be <= 2^32-1",min:0,minError:"Invalid value: Expected uint32 to be >= 0",needsBigInt:false},uint64:{max:"18446744073709551615",maxError:"Invalid value: Expected uint64 to be <= 2^64-1",min:"0",minError:"Invalid value: Expected uint64 to be >= 0",needsBigInt:true},uint8:{max:255,maxError:"Invalid value: Expected uint8 to be <= 2^8-1",min:0,minError:"Invalid value: Expected uint8 to be >= 0",needsBigInt:false}},di=e=>e!==void 0&&e in mo,pm=e=>di(e)&&mo[e].needsBigInt,Fr=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r};var cm=({operation:e,plugin:t,state:r})=>{if(t.config.requests.enabled){let n=new Set,o={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let l in e.parameters.header){let m=e.parameters.header[l];p[m.name]=m.schema,m.required&&(c.push(m.name),n.add("headers"));}Object.keys(p).length&&(o.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let l in e.parameters.path){let m=e.parameters.path[l];p[m.name]=m.schema,m.required&&(c.push(m.name),n.add("path"));}Object.keys(p).length&&(o.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let l in e.parameters.query){let m=e.parameters.query[l];p[m.name]=m.schema,m.required&&(c.push(m.name),n.add("query"));}Object.keys(p).length&&(o.properties.query={properties:p,required:c,type:"object"});}}e.body&&(o.properties.body=e.body.schema,e.body.required&&n.add("body")),o.required=[...n];let a=t.gen.ensureFile(t.output).addSymbol({name:O({config:t.config.requests,name:e.id}),selector:t.api.getSelector("data",e.id)});ye({$ref:`#/valibot-data/${e.id}`,plugin:t,schema:o,state:r,symbol:a});}if(t.config.responses.enabled&&e.responses){let{response:n}=He(e);if(n){let i=t.gen.ensureFile(t.output).addSymbol({name:O({config:t.config.responses,name:e.id}),selector:t.api.getSelector("responses",e.id)});ye({$ref:`#/valibot-response/${e.id}`,plugin:t,schema:n,state:r,symbol:i});}}};var mm=({operation:e,plugin:t,state:r})=>{if(t.config.webhooks.enabled){let n=new Set,o={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let l={},m=[];for(let f in e.parameters.header){let d=e.parameters.header[f];l[d.name]=d.schema,d.required&&(m.push(d.name),n.add("headers"));}Object.keys(l).length&&(o.properties.headers={properties:l,required:m,type:"object"});}if(e.parameters.path){let l={},m=[];for(let f in e.parameters.path){let d=e.parameters.path[f];l[d.name]=d.schema,d.required&&(m.push(d.name),n.add("path"));}Object.keys(l).length&&(o.properties.path={properties:l,required:m,type:"object"});}if(e.parameters.query){let l={},m=[];for(let f in e.parameters.query){let d=e.parameters.query[f];l[d.name]=d.schema,d.required&&(m.push(d.name),n.add("query"));}Object.keys(l).length&&(o.properties.query={properties:l,required:m,type:"object"});}}e.body&&(o.properties.body=e.body.schema,e.body.required&&n.add("body")),o.required=[...n];let i=t.api.getSelector("webhook-request",e.id),a=O({config:t.config.webhooks,name:e.id}),c=t.gen.ensureFile(t.output).addSymbol({name:a,selector:i});ye({$ref:`#/valibot-webhook/${e.id}`,plugin:t,schema:o,state:r,symbol:c});}};var Fe=({pipes:e,plugin:t})=>{if(e.length===1)return e[0];let r=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","valibot"));return s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.methods.pipe}),parameters:e})},Lu=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot")),o=s.propertyAccessExpression({expression:n.placeholder,name:T.schemas.array}),i=[];if(t.items){t=G({schema:t});let a=t.items.map(p=>{let c=ye({plugin:e,schema:p,state:r});return Fe({pipes:c,plugin:e})});if(a.length===1){let p=s.callExpression({functionName:o,parameters:a});i.push(p);}else {t.logicalOperator;let p=s.callExpression({functionName:o,parameters:[ln({plugin:e})]});i.push(p);}}else {let a=s.callExpression({functionName:o,parameters:[ln({plugin:e})]});i.push(a);}if(t.minItems===t.maxItems&&t.minItems!==void 0){let a=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:T.actions.length}),parameters:[s.valueToExpression({value:t.minItems})]});i.push(a);}else {if(t.minItems!==void 0){let a=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:T.actions.minLength}),parameters:[s.valueToExpression({value:t.minItems})]});i.push(a);}if(t.maxItems!==void 0){let a=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:T.actions.maxLength}),parameters:[s.valueToExpression({value:t.maxItems})]});i.push(a);}}return Fe({pipes:i,plugin:e})},Du=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return typeof t.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.schemas.literal}),parameters:[s.ots.boolean(t.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.schemas.boolean})})},Vu=({plugin:e,schema:t})=>{let r=[],n=false;for(let a of t.items??[])a.type==="string"&&typeof a.const=="string"?r.push(s.stringLiteral({text:a.const})):(a.type==="null"||a.const===null)&&(n=true);if(!r.length)return ln({plugin:e});let o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot")),i=s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:T.schemas.picklist}),parameters:[s.arrayLiteralExpression({elements:r,multiLine:false})]});return n&&(i=s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:T.schemas.nullable}),parameters:[i]})),i},Bu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:T.schemas.never})})},Ku=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:T.schemas.null})})},lm=({plugin:e,schema:t})=>{let r=t.format,n=t.type==="integer",o=pm(r),i=di(r)?mo[r]:null,a=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(t.const!==void 0&&t.const!==null){let c=t.const,l;if(typeof c=="number"&&!r)l=s.ots.number(c);else if(typeof c=="number"&&r)o?l=s.callExpression({functionName:"BigInt",parameters:[s.ots.string(c.toString())]}):l=s.ots.number(c);else if(typeof c=="string"&&o){let m=c.endsWith("n")?c.slice(0,-1):c;l=s.callExpression({functionName:"BigInt",parameters:[s.ots.string(m)]});}else if(typeof c=="bigint"){let m=c.toString(),f=m.endsWith("n")?m.slice(0,-1):m;l=s.callExpression({functionName:"BigInt",parameters:[s.ots.string(f)]});}else l=s.valueToExpression({value:c});return s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.schemas.literal}),parameters:[l]})}let p=[];if(o){let c=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.schemas.union}),parameters:[s.arrayLiteralExpression({elements:[s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.schemas.number})}),s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.schemas.string})}),s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.schemas.bigInt})})],multiLine:false})]});p.push(c);let l=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.transform}),parameters:[s.arrowFunction({parameters:[{name:"x"}],statements:s.callExpression({functionName:"BigInt",parameters:[s.identifier({text:"x"})]})})]});p.push(l);}else {let c=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.schemas.number})});p.push(c);}if(!o&&n){let c=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.integer})});p.push(c);}if(i){let c=i.min,l=i.max,m=i.minError,f=i.maxError,d=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.minValue}),parameters:[o?s.callExpression({functionName:"BigInt",parameters:[s.ots.string(c.toString())]}):s.ots.number(c),s.ots.string(m)]});p.push(d);let u=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.maxValue}),parameters:[o?s.callExpression({functionName:"BigInt",parameters:[s.ots.string(l.toString())]}):s.ots.number(l),s.ots.string(f)]});p.push(u);}if(t.exclusiveMinimum!==void 0){let c=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.gtValue}),parameters:[Fr({isBigInt:o,value:t.exclusiveMinimum})]});p.push(c);}else if(t.minimum!==void 0){let c=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.minValue}),parameters:[Fr({isBigInt:o,value:t.minimum})]});p.push(c);}if(t.exclusiveMaximum!==void 0){let c=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.ltValue}),parameters:[Fr({isBigInt:o,value:t.exclusiveMaximum})]});p.push(c);}else if(t.maximum!==void 0){let c=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:T.actions.maxValue}),parameters:[Fr({isBigInt:o,value:t.maximum})]});p.push(c);}return Fe({pipes:p,plugin:e})},Wu=({plugin:e,schema:t,state:r})=>{let n=[],o=t.required??[];for(let p in t.properties){let c=t.properties[p],l=o.includes(p),m=ye({optional:!l,plugin:e,schema:c,state:r});oe.lastIndex=0;let f;oe.test(p)?f=p.startsWith("-")?S.factory.createStringLiteral(p):S.factory.createNumericLiteral(p):f=p,(p.match(/^[0-9]/)&&p.match(/\D+/g)||p.match(/\W/g))&&!p.startsWith("'")&&!p.endsWith("'")&&(f=`'${p}'`),n.push(s.propertyAssignment({initializer:Fe({pipes:m,plugin:e}),name:f}));}let i=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(n).length){let p=ye({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:i.placeholder,name:T.schemas.record}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:i.placeholder,name:T.schemas.string}),parameters:[]}),Fe({pipes:p,plugin:e})]})}}let a=s.callExpression({functionName:s.propertyAccessExpression({expression:i.placeholder,name:T.schemas.object}),parameters:[S.factory.createObjectLiteralExpression(n,true)]});return {anyType:T.types.GenericSchema.text,expression:a}},zu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(typeof t.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.schemas.literal}),parameters:[s.ots.string(t.const)]});let n=[],o=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.schemas.string})});if(n.push(o),t.format)switch(t.format){case "date":n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.isoDate})}));break;case "date-time":n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.isoTimestamp})}));break;case "ipv4":case "ipv6":n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.ip})}));break;case "uri":n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.url})}));break;case "email":case "time":case "uuid":n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:s.identifier({text:t.format})})}));break}if(t.minLength===t.maxLength&&t.minLength!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.length}),parameters:[s.valueToExpression({value:t.minLength})]});n.push(i);}else {if(t.minLength!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.minLength}),parameters:[s.valueToExpression({value:t.minLength})]});n.push(i);}if(t.maxLength!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.maxLength}),parameters:[s.valueToExpression({value:t.maxLength})]});n.push(i);}}if(t.pattern){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:T.actions.regex}),parameters:[s.regularExpressionLiteral({text:t.pattern})]});n.push(i);}return Fe({pipes:n,plugin:e})},_u=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));if(t.const&&Array.isArray(t.const)){let o=t.const.map(a=>s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:T.schemas.literal}),parameters:[s.valueToExpression({value:a})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:T.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:o})]})}if(t.items){let o=t.items.map(a=>{let p=ye({plugin:e,schema:a,state:r});return Fe({pipes:p,plugin:e})});return s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:T.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:o})]})}return ln({plugin:e})},Qu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:T.schemas.undefined})})},ln=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:T.schemas.unknown})})},Hu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","valibot"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:T.schemas.void})})},fm=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:Lu({plugin:e,schema:t,state:r})};case "boolean":return {expression:Du({plugin:e,schema:t})};case "enum":return {expression:Vu({plugin:e,schema:t})};case "integer":case "number":return {expression:lm({plugin:e,schema:t})};case "never":return {expression:Bu({plugin:e})};case "null":return {expression:Ku({plugin:e})};case "object":return Wu({plugin:e,schema:t,state:r});case "string":return t.format==="int64"||t.format==="uint64"?{expression:lm({plugin:e,schema:t})}:{expression:zu({plugin:e,schema:t})};case "tuple":return {expression:_u({plugin:e,schema:t,state:r})};case "undefined":return {expression:Qu({plugin:e})};case "unknown":return {expression:ln({plugin:e})};case "void":return {expression:Hu({plugin:e})}}},ye=({$ref:e,optional:t,plugin:r,schema:n,state:o,symbol:i})=>{let a=r.gen.ensureFile(r.output),p,c=[];if(e&&(o.circularReferenceTracker.add(e),!i)){let m=r.api.getSelector("ref",e);r.gen.selectSymbolFirst(m)||(i=a.ensureSymbol({name:O({config:{case:o.nameCase,name:o.nameTransformer},name:D(e)}),selector:m}));}let l=r.gen.selectSymbolFirstOrThrow(r.api.getSelector("import","valibot"));if(n.$ref){let m=o.circularReferenceTracker.has(n.$ref),f=r.api.getSelector("ref",n.$ref),d=r.gen.selectSymbolFirst(f);if(!d){let u=r.context.resolveIrRef(n.$ref),y=ye({$ref:n.$ref,plugin:r,schema:u,state:o});c.push(...y),d=r.gen.selectSymbolFirst(f);}if(d){let u=s.identifier({text:d.placeholder});if(m){let y=s.callExpression({functionName:s.propertyAccessExpression({expression:l.placeholder,name:T.schemas.lazy}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:u})]})]});c.push(y),o.hasCircularReference=true;}else c.push(u);}}else if(n.type){let m=fm({plugin:r,schema:n,state:o});if(p=m.anyType,c.push(m.expression),r.config.metadata&&n.description){let f=s.callExpression({functionName:s.propertyAccessExpression({expression:l.placeholder,name:T.actions.metadata}),parameters:[s.objectExpression({obj:[{key:"description",value:s.stringLiteral({text:n.description})}]})]});c.push(f);}}else if(n.items)if(n=G({schema:n}),n.items){let m=n.items.map(f=>{let d=ye({plugin:r,schema:f,state:o});return Fe({pipes:d,plugin:r})});if(n.logicalOperator==="and"){let f=s.callExpression({functionName:s.propertyAccessExpression({expression:l.placeholder,name:T.schemas.intersect}),parameters:[s.arrayLiteralExpression({elements:m})]});c.push(f);}else {let f=s.callExpression({functionName:s.propertyAccessExpression({expression:l.placeholder,name:T.schemas.union}),parameters:[s.arrayLiteralExpression({elements:m})]});c.push(f);}}else {let m=ye({plugin:r,schema:n,state:o});c.push(...m);}else {let m=fm({plugin:r,schema:{type:"unknown"},state:o});p=m.anyType,c.push(m.expression);}if(e&&o.circularReferenceTracker.delete(e),c.length&&n.accessScope==="read"){let m=s.callExpression({functionName:s.propertyAccessExpression({expression:l.placeholder,name:T.actions.readonly})});c.push(m);}if(c.length){let m;if(n.default!==void 0){let f=n.type==="integer"&&n.format==="int64";m=Fr({isBigInt:f,value:n.default}),m&&(c=[s.callExpression({functionName:s.propertyAccessExpression({expression:l.placeholder,name:T.schemas.optional}),parameters:[Fe({pipes:c,plugin:r}),m]})]);}t&&!m&&(c=[s.callExpression({functionName:s.propertyAccessExpression({expression:l.placeholder,name:T.schemas.optional}),parameters:[Fe({pipes:c,plugin:r})]})]);}if(i){let m=s.constVariable({comment:r.config.comments?Oe({schema:n}):void 0,exportConst:true,expression:Fe({pipes:c,plugin:r}),name:i.placeholder,typeName:o.hasCircularReference?s.propertyAccessExpression({expression:l.placeholder,name:p||T.types.GenericSchema.text}):void 0});return i.update({value:m}),[]}return c},dm=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r=t.ensureSymbol({name:"v",selector:e.api.getSelector("import","valibot")});t.addImport({from:"valibot",namespaceImport:r.placeholder}),e.forEach("operation","parameter","requestBody","schema","webhook",n=>{let o={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};switch(n.type){case "operation":cm({operation:n.operation,plugin:e,state:o});break;case "parameter":ye({$ref:n.$ref,plugin:e,schema:n.parameter.schema,state:o});break;case "requestBody":ye({$ref:n.$ref,plugin:e,schema:n.requestBody.schema,state:o});break;case "schema":ye({$ref:n.$ref,plugin:e,schema:n.schema,state:o});break;case "webhook":mm({operation:n.operation,plugin:e,state:o});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var lo={api:new co({name:"valibot"}),config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:dm,name:"valibot",output:"valibot",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Data"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Response"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}WebhookRequest"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.webhooks});},tags:["validator"]};var h={ZodMiniOptional:s.identifier({text:"ZodMiniOptional"}),ZodOptional:s.identifier({text:"ZodOptional"}),_default:s.identifier({text:"_default"}),and:s.identifier({text:"and"}),array:s.identifier({text:"array"}),bigint:s.identifier({text:"bigint"}),boolean:s.identifier({text:"boolean"}),check:s.identifier({text:"check"}),coerce:s.identifier({text:"coerce"}),date:s.identifier({text:"date"}),datetime:s.identifier({text:"datetime"}),default:s.identifier({text:"default"}),describe:s.identifier({text:"describe"}),email:s.identifier({text:"email"}),enum:s.identifier({text:"enum"}),globalRegistry:s.identifier({text:"globalRegistry"}),gt:s.identifier({text:"gt"}),gte:s.identifier({text:"gte"}),infer:s.identifier({text:"infer"}),int:s.identifier({text:"int"}),intersection:s.identifier({text:"intersection"}),ip:s.identifier({text:"ip"}),ipv4:s.identifier({text:"ipv4"}),ipv6:s.identifier({text:"ipv6"}),iso:s.identifier({text:"iso"}),lazy:s.identifier({text:"lazy"}),length:s.identifier({text:"length"}),literal:s.identifier({text:"literal"}),lt:s.identifier({text:"lt"}),lte:s.identifier({text:"lte"}),max:s.identifier({text:"max"}),maxLength:s.identifier({text:"maxLength"}),min:s.identifier({text:"min"}),minLength:s.identifier({text:"minLength"}),never:s.identifier({text:"never"}),null:s.identifier({text:"null"}),nullable:s.identifier({text:"nullable"}),number:s.identifier({text:"number"}),object:s.identifier({text:"object"}),optional:s.identifier({text:"optional"}),parseAsync:s.identifier({text:"parseAsync"}),readonly:s.identifier({text:"readonly"}),record:s.identifier({text:"record"}),regex:s.identifier({text:"regex"}),register:s.identifier({text:"register"}),string:s.identifier({text:"string"}),time:s.identifier({text:"time"}),tuple:s.identifier({text:"tuple"}),undefined:s.identifier({text:"undefined"}),union:s.identifier({text:"union"}),unknown:s.identifier({text:"unknown"}),url:s.identifier({text:"url"}),uuid:s.identifier({text:"uuid"}),void:s.identifier({text:"void"})};var fo=class{constructor(t){this.meta=t;}createRequestValidator({file:t,operation:r,plugin:n}){let o=n.gen.selectSymbolFirst(n.api.getSelector("data",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i="data";return s.arrowFunction({async:true,parameters:[{name:i}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.parseAsync}),parameters:[s.identifier({text:i})]})})})]})}createResponseValidator({file:t,operation:r,plugin:n}){let o=n.gen.selectSymbolFirst(n.api.getSelector("responses",r.id));if(!o)return;t.addImport({from:o.file,names:[o.placeholder]});let i="data";return s.arrowFunction({async:true,parameters:[{name:i}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.parseAsync}),parameters:[s.identifier({text:i})]})})})]})}getSelector(...t){return [this.meta.name,...t]}};var Me=({plugin:e,schema:t,symbol:r,typeInferSymbol:n,zodSchema:o})=>{let i=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),a=s.constVariable({comment:e.config.comments?Oe({schema:t}):void 0,exportConst:true,expression:o.expression,name:r.placeholder,typeName:o.typeName?s.propertyAccessExpression({expression:i.placeholder,name:o.typeName}):void 0});if(r.update({value:a}),n){let p=s.typeAliasDeclaration({exportType:true,name:n.placeholder,type:s.typeReferenceNode({typeArguments:[s.typeOfExpression({text:r.placeholder})],typeName:s.propertyAccessExpression({expression:i.placeholder,name:h.infer})})});n.update({value:p});}};var Mr=({plugin:e})=>{let t=e.package.getVersion("zod");if(t&&e.package.satisfies(t,"<4.0.0"))switch(e.config.compatibilityVersion){case 3:default:return "zod";case 4:return "zod/v4";case "mini":return "zod/v4-mini"}switch(e.config.compatibilityVersion){case 3:return "zod/v3";case 4:default:return "zod";case "mini":return "zod/mini"}};var Lr=({getZodSchema:e,operation:t,plugin:r})=>{let n=r.gen.ensureFile(r.output);if(r.config.requests.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(t.parameters){if(t.parameters.header){let l={},m=[];for(let f in t.parameters.header){let d=t.parameters.header[f];l[d.name]=d.schema,d.required&&(m.push(d.name),o.add("headers"));}Object.keys(l).length&&(i.properties.headers={properties:l,required:m,type:"object"});}if(t.parameters.path){let l={},m=[];for(let f in t.parameters.path){let d=t.parameters.path[f];l[d.name]=d.schema,d.required&&(m.push(d.name),o.add("path"));}Object.keys(l).length&&(i.properties.path={properties:l,required:m,type:"object"});}if(t.parameters.query){let l={},m=[];for(let f in t.parameters.query){let d=t.parameters.query[f];l[d.name]=d.schema,d.required&&(m.push(d.name),o.add("query"));}Object.keys(l).length&&(i.properties.query={properties:l,required:m,type:"object"});}}t.body&&(i.properties.body=t.body.schema,t.body.required&&o.add("body")),i.required=[...o];let a=e(i),p=n.addSymbol({name:O({config:r.config.requests,name:t.id}),selector:r.api.getSelector("data",t.id)}),c=r.config.requests.types.infer.enabled?n.addSymbol({name:O({config:r.config.requests.types.infer,name:t.id}),selector:r.api.getSelector("type-infer-data",t.id)}):void 0;Me({plugin:r,schema:i,symbol:p,typeInferSymbol:c,zodSchema:a});}if(r.config.responses.enabled&&t.responses){let{response:o}=He(t);if(o){let i=e(o),a=n.addSymbol({name:O({config:r.config.responses,name:t.id}),selector:r.api.getSelector("responses",t.id)}),p=r.config.responses.types.infer.enabled?n.addSymbol({name:O({config:r.config.responses.types.infer,name:t.id}),selector:r.api.getSelector("type-infer-responses",t.id)}):void 0;Me({plugin:r,schema:o,symbol:a,typeInferSymbol:p,zodSchema:i});}}};var Dr=({getZodSchema:e,operation:t,plugin:r})=>{let n=r.gen.ensureFile(r.output);if(r.config.webhooks.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(t.parameters){if(t.parameters.header){let l={},m=[];for(let f in t.parameters.header){let d=t.parameters.header[f];l[d.name]=d.schema,d.required&&(m.push(d.name),o.add("headers"));}Object.keys(l).length&&(i.properties.headers={properties:l,required:m,type:"object"});}if(t.parameters.path){let l={},m=[];for(let f in t.parameters.path){let d=t.parameters.path[f];l[d.name]=d.schema,d.required&&(m.push(d.name),o.add("path"));}Object.keys(l).length&&(i.properties.path={properties:l,required:m,type:"object"});}if(t.parameters.query){let l={},m=[];for(let f in t.parameters.query){let d=t.parameters.query[f];l[d.name]=d.schema,d.required&&(m.push(d.name),o.add("query"));}Object.keys(l).length&&(i.properties.query={properties:l,required:m,type:"object"});}}t.body&&(i.properties.body=t.body.schema,t.body.required&&o.add("body")),i.required=[...o];let a=e(i),p=n.addSymbol({name:O({config:r.config.webhooks,name:t.id}),selector:r.api.getSelector("webhook-request",t.id)}),c=r.config.webhooks.types.infer.enabled?n.addSymbol({name:O({config:r.config.webhooks.types.infer,name:t.id}),selector:r.api.getSelector("type-infer-webhook-request",t.id)}):void 0;Me({plugin:r,schema:i,symbol:p,typeInferSymbol:c,zodSchema:a});}};var Uu=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o={},i=s.propertyAccessExpression({expression:n.placeholder,name:h.array});if(!t.items)o.expression=s.callExpression({functionName:i,parameters:[hi({plugin:e}).expression]});else {t=G({schema:t});let p=t.items.map(c=>{let l=Rt({plugin:e,schema:c,state:r});return l.hasCircularReference&&(o.hasCircularReference=true),l.expression});p.length===1?o.expression=s.callExpression({functionName:i,parameters:p}):(t.logicalOperator,o.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.array}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.union}),parameters:[s.arrayLiteralExpression({elements:p})]})]}));}let a=[];return t.minItems===t.maxItems&&t.minItems!==void 0?a.push(s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.length}),parameters:[s.valueToExpression({value:t.minItems})]})):(t.minItems!==void 0&&a.push(s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.minLength}),parameters:[s.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&a.push(s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.maxLength}),parameters:[s.valueToExpression({value:t.maxItems})]}))),a.length&&(o.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:o.expression,name:h.check}),parameters:a})),o},Xu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),n={};return typeof t.const=="boolean"?(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.literal}),parameters:[s.ots.boolean(t.const)]}),n):(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.boolean})}),n)},Gu=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),n={},o=[],i=false;for(let a of t.items??[])a.type==="string"&&typeof a.const=="string"?o.push(s.stringLiteral({text:a.const})):(a.type==="null"||a.const===null)&&(i=true);return o.length?(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.enum}),parameters:[s.arrayLiteralExpression({elements:o,multiLine:false})]}),i&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.nullable}),parameters:[n.expression]})),n):hi({plugin:e})},Ju=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.never})}),r},Yu=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.null})}),r},fn=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},ey=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),n={},o=t.type==="integer"&&t.format==="int64";if(typeof t.const=="number")return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.literal}),parameters:[s.ots.number(t.const)]}),n;n.expression=s.callExpression({functionName:o?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:r.placeholder,name:h.coerce}),name:h.bigint}):s.propertyAccessExpression({expression:r.placeholder,name:h.number})}),!o&&t.type==="integer"&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.int})}));let i=[];return t.exclusiveMinimum!==void 0?i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.gt}),parameters:[fn({isBigInt:o,value:t.exclusiveMinimum})]})):t.minimum!==void 0&&i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.gte}),parameters:[fn({isBigInt:o,value:t.minimum})]})),t.exclusiveMaximum!==void 0?i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.lt}),parameters:[fn({isBigInt:o,value:t.exclusiveMaximum})]})):t.maximum!==void 0&&i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.lte}),parameters:[fn({isBigInt:o,value:t.maximum})]})),i.length&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:h.check}),parameters:i})),n},ty=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o={},i=[],a=t.required??[];for(let p in t.properties){let c=t.properties[p],l=a.includes(p),m=Rt({optional:!l,plugin:e,schema:c,state:r});m.hasCircularReference&&(o.hasCircularReference=true),oe.lastIndex=0;let f;oe.test(p)?f=p.startsWith("-")?S.factory.createStringLiteral(p):S.factory.createNumericLiteral(p):f=p,(p.match(/^[0-9]/)&&p.match(/\D+/g)||p.match(/\W/g))&&!p.startsWith("'")&&!p.endsWith("'")&&(f=`'${p}'`),m.hasCircularReference?i.push(s.getAccessorDeclaration({name:f,returnType:m.typeName?s.propertyAccessExpression({expression:n.placeholder,name:m.typeName}):void 0,statements:[s.returnStatement({expression:m.expression})]})):i.push(s.propertyAssignment({initializer:m.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let p=Rt({plugin:e,schema:t.additionalProperties,state:r});return o.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.record}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.string}),parameters:[]}),p.expression]}),p.hasCircularReference&&(o.hasCircularReference=true),o}return o.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.object}),parameters:[S.factory.createObjectLiteralExpression(i,true)]}),o},ry=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),n={};if(typeof t.const=="string")return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.literal}),parameters:[s.ots.string(t.const)]}),n;n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.string})});let o=[];if(e.config.dates.offset&&o.push({key:"offset",value:true}),e.config.dates.local&&o.push({key:"local",value:true}),t.format)switch(t.format){case "date":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:r.placeholder,name:h.iso}),name:h.date})});break;case "date-time":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:r.placeholder,name:h.iso}),name:h.datetime}),parameters:o.length>0?[s.objectExpression({obj:o})]:[]});break;case "email":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.email})});break;case "ipv4":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.ipv4})});break;case "ipv6":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.ipv6})});break;case "time":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:r.placeholder,name:h.iso}),name:h.time})});break;case "uri":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.url})});break;case "uuid":n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.uuid})});break}let i=[];return t.minLength===t.maxLength&&t.minLength!==void 0?i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.length}),parameters:[s.valueToExpression({value:t.minLength})]})):(t.minLength!==void 0&&i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.minLength}),parameters:[s.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.maxLength}),parameters:[s.valueToExpression({value:t.maxLength})]}))),t.pattern&&i.push(s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.regex}),parameters:[s.regularExpressionLiteral({text:t.pattern})]})),i.length&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:h.check}),parameters:i})),n},ny=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o={};if(t.const&&Array.isArray(t.const)){let a=t.const.map(p=>s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.literal}),parameters:[s.valueToExpression({value:p})]}));return o.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.tuple}),parameters:[s.arrayLiteralExpression({elements:a})]}),o}let i=[];for(let a of t.items??[]){let p=Rt({plugin:e,schema:a,state:r});i.push(p.expression),p.hasCircularReference&&(o.hasCircularReference=true);}return o.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.tuple}),parameters:[s.arrayLiteralExpression({elements:i})]}),o},sy=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.undefined})}),r},hi=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.unknown})}),r},oy=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),r={};return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.void})}),r},um=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return Uu({plugin:e,schema:t,state:r});case "boolean":return Xu({plugin:e,schema:t});case "enum":return Gu({plugin:e,schema:t});case "integer":case "number":return ey({plugin:e,schema:t});case "never":return Ju({plugin:e});case "null":return Yu({plugin:e});case "object":return ty({plugin:e,schema:t,state:r});case "string":return ry({plugin:e,schema:t});case "tuple":return ny({plugin:e,schema:t,state:r});case "undefined":return sy({plugin:e});case "unknown":return hi({plugin:e});case "void":return oy({plugin:e})}},Rt=({optional:e,plugin:t,schema:r,state:n})=>{let o=t.gen.ensureFile(t.output),i={},a=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","zod"));if(r.$ref){let p=n.circularReferenceTracker.includes(r.$ref),c=n.currentReferenceTracker.includes(r.$ref);n.circularReferenceTracker.push(r.$ref),n.currentReferenceTracker.push(r.$ref);let l=t.api.getSelector("ref",r.$ref),m=t.gen.selectSymbolFirst(l);if(p)m||(m=o.ensureSymbol({selector:l})),c?i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.lazy}),parameters:[s.arrowFunction({returnType:s.keywordTypeNode({keyword:"any"}),statements:[s.returnStatement({expression:s.identifier({text:m.placeholder})})]})]}):i.expression=s.identifier({text:m.placeholder}),i.hasCircularReference=true;else if(!m){let f=t.context.resolveIrRef(r.$ref);uo({id:r.$ref,plugin:t,schema:f,state:n});}if(!p){let f=t.gen.selectSymbolFirstOrThrow(l);i.expression=s.identifier({text:f.placeholder});}n.circularReferenceTracker.pop(),n.currentReferenceTracker.pop();}else if(r.type){let p=um({plugin:t,schema:r,state:n});i.expression=p.expression,i.hasCircularReference=p.hasCircularReference,t.config.metadata&&r.description&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.register}),parameters:[s.propertyAccessExpression({expression:a.placeholder,name:h.globalRegistry}),s.objectExpression({obj:[{key:"description",value:s.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=G({schema:r}),r.items){let p=r.items.map(c=>Rt({plugin:t,schema:c,state:n}).expression);if(r.logicalOperator==="and"){let c=r.items[0];c.logicalOperator==="or"||c.type&&c.type!=="object"?i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.intersection}),parameters:p}):(i.expression=p[0],p.slice(1).forEach(l=>{i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.intersection}),parameters:[i.expression,l]});}));}else i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.union}),parameters:[s.arrayLiteralExpression({elements:p})]});}else i=Rt({plugin:t,schema:r,state:n});else {let p=um({plugin:t,schema:{type:"unknown"},state:n});i.expression=p.expression;}if(i.expression&&(r.accessScope==="read"&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.readonly}),parameters:[i.expression]})),e&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.optional}),parameters:[i.expression]}),i.typeName=h.ZodMiniOptional),r.default!==void 0)){let p=r.type==="integer"&&r.format==="int64",c=fn({isBigInt:p,value:r.default});c&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h._default}),parameters:[i.expression,c]}));}return i},uo=({id:e,plugin:t,schema:r,state:n})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...n,currentReferenceTracker:[e]},i=t.api.getSelector("ref",e),a=t.gen.selectSymbolFirst(i);if(a&&!a.headless)return;let p=Rt({plugin:t,schema:r,state:o}),c=t.gen.ensureFile(t.output),l=D(e);a=c.ensureSymbol({selector:i}),a=a.update({name:O({config:t.config.definitions,name:l})});let m=t.config.definitions.types.infer.enabled?c.addSymbol({name:O({config:t.config.definitions.types.infer,name:l}),selector:t.api.getSelector("type-infer-ref",e)}):void 0;Me({plugin:t,schema:r,symbol:a,typeInferSymbol:m,zodSchema:p});},ym=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r=t.ensureSymbol({name:"z",selector:e.api.getSelector("import","zod")});t.addImport({from:Mr({plugin:e}),namespaceImport:r.placeholder}),e.forEach("operation","parameter","requestBody","schema","webhook",n=>{switch(n.type){case "operation":Lr({getZodSchema:o=>Rt({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:n.operation,plugin:e});break;case "parameter":uo({id:n.$ref,plugin:e,schema:n.parameter.schema});break;case "requestBody":uo({id:n.$ref,plugin:e,schema:n.requestBody.schema});break;case "schema":uo({id:n.$ref,plugin:e,schema:n.schema});break;case "webhook":Dr({getZodSchema:o=>Rt({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:n.operation,plugin:e});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var iy=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o=s.propertyAccessExpression({expression:n.placeholder,name:h.array}),i;if(!t.items)i=s.callExpression({functionName:o,parameters:[xi({plugin:e})]});else {t=G({schema:t});let a=t.items.map(p=>It({plugin:e,schema:p,state:r}).expression);a.length===1?i=s.callExpression({functionName:o,parameters:a}):(t.logicalOperator,i=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.array}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.union}),parameters:[s.arrayLiteralExpression({elements:a})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?i=s.callExpression({functionName:s.propertyAccessExpression({expression:i,name:h.length}),parameters:[s.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(i=s.callExpression({functionName:s.propertyAccessExpression({expression:i,name:h.min}),parameters:[s.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(i=s.callExpression({functionName:s.propertyAccessExpression({expression:i,name:h.max}),parameters:[s.valueToExpression({value:t.maxItems})]}))),i},ay=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return typeof t.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.literal}),parameters:[s.ots.boolean(t.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.boolean})})},py=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),n=[],o=false;for(let a of t.items??[])a.type==="string"&&typeof a.const=="string"?n.push(s.stringLiteral({text:a.const})):(a.type==="null"||a.const===null)&&(o=true);if(!n.length)return xi({plugin:e});let i=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.enum}),parameters:[s.arrayLiteralExpression({elements:n,multiLine:false})]});return o&&(i=s.callExpression({functionName:s.propertyAccessExpression({expression:i,name:h.nullable})})),i},cy=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.never})})},my=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.null})})},dn=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},ly=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),n=t.type==="integer"&&t.format==="int64";if(typeof t.const=="number")return s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.literal}),parameters:[s.ots.number(t.const)]});let o=s.callExpression({functionName:n?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:r.placeholder,name:h.coerce}),name:h.bigint}):s.propertyAccessExpression({expression:r.placeholder,name:h.number})});return !n&&t.type==="integer"&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:h.int})})),t.exclusiveMinimum!==void 0?o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:h.gt}),parameters:[dn({isBigInt:n,value:t.exclusiveMinimum})]}):t.minimum!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:h.gte}),parameters:[dn({isBigInt:n,value:t.minimum})]})),t.exclusiveMaximum!==void 0?o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:h.lt}),parameters:[dn({isBigInt:n,value:t.exclusiveMaximum})]}):t.maximum!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:h.lte}),parameters:[dn({isBigInt:n,value:t.maximum})]})),o},fy=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),o=[],i=t.required??[];for(let p in t.properties){let c=t.properties[p],l=i.includes(p),m=It({optional:!l,plugin:e,schema:c,state:r}).expression;oe.lastIndex=0;let f;oe.test(p)?f=p.startsWith("-")?S.factory.createStringLiteral(p):S.factory.createNumericLiteral(p):f=p,(p.match(/^[0-9]/)&&p.match(/\D+/g)||p.match(/\W/g))&&!p.startsWith("'")&&!p.endsWith("'")&&(f=`'${p}'`),o.push(s.propertyAssignment({initializer:m,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let p=It({plugin:e,schema:t.additionalProperties,state:r}).expression;return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.record}),parameters:[p]})}}return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.object}),parameters:[S.factory.createObjectLiteralExpression(o,true)]})}},dy=({plugin:e,schema:t})=>{let r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(typeof t.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.literal}),parameters:[s.ots.string(t.const)]});let n=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.string})}),o=[];if(e.config.dates.offset&&o.push({key:"offset",value:true}),e.config.dates.local&&o.push({key:"local",value:true}),t.format)switch(t.format){case "date":n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.date})});break;case "date-time":n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.datetime}),parameters:o.length>0?[s.objectExpression({obj:o})]:[]});break;case "email":n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.email})});break;case "ipv4":case "ipv6":n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.ip})});break;case "time":n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.time})});break;case "uri":n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.url})});break;case "uuid":n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.length}),parameters:[s.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.min}),parameters:[s.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.max}),parameters:[s.valueToExpression({value:t.maxLength})]}))),t.pattern&&(n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:h.regex}),parameters:[s.regularExpressionLiteral({text:t.pattern})]})),n},uy=({plugin:e,schema:t,state:r})=>{let n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(t.const&&Array.isArray(t.const)){let a=t.const.map(c=>s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.literal}),parameters:[s.valueToExpression({value:c})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.tuple}),parameters:[s.arrayLiteralExpression({elements:a})]})}let o=[];for(let a of t.items??[])o.push(It({plugin:e,schema:a,state:r}).expression);return s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.tuple}),parameters:[s.arrayLiteralExpression({elements:o})]})},yy=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.undefined})})},xi=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.unknown})})},hy=({plugin:e})=>{let t=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return s.callExpression({functionName:s.propertyAccessExpression({expression:t.placeholder,name:h.void})})},hm=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:iy({plugin:e,schema:t,state:r})};case "boolean":return {expression:ay({plugin:e,schema:t})};case "enum":return {expression:py({plugin:e,schema:t})};case "integer":case "number":return {expression:ly({plugin:e,schema:t})};case "never":return {expression:cy({plugin:e})};case "null":return {expression:my({plugin:e})};case "object":return fy({plugin:e,schema:t,state:r});case "string":return {expression:dy({plugin:e,schema:t})};case "tuple":return {expression:uy({plugin:e,schema:t,state:r})};case "undefined":return {expression:yy({plugin:e})};case "unknown":return {expression:xi({plugin:e})};case "void":return {expression:hy({plugin:e})}}},It=({optional:e,plugin:t,schema:r,state:n})=>{let o=t.gen.ensureFile(t.output),i={},a=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","zod"));if(r.$ref){let p=n.circularReferenceTracker.includes(r.$ref);n.circularReferenceTracker.push(r.$ref),n.currentReferenceTracker.push(r.$ref);let c=t.api.getSelector("ref",r.$ref),l=t.gen.selectSymbolFirst(c);if(p)l||(l=o.ensureSymbol({selector:c})),i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.lazy}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:s.identifier({text:l.placeholder})})]})]}),n.hasCircularReference=true;else if(!l){let m=t.context.resolveIrRef(r.$ref);yo({id:r.$ref,plugin:t,schema:m,state:n});}if(!p){let m=t.gen.selectSymbolFirstOrThrow(c);i.expression=s.identifier({text:m.placeholder});}n.circularReferenceTracker.pop(),n.currentReferenceTracker.pop();}else if(r.type){let p=hm({plugin:t,schema:r,state:n});i.expression=p.expression,i.typeName=p.anyType,t.config.metadata&&r.description&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.describe}),parameters:[s.stringLiteral({text:r.description})]}));}else if(r.items)if(r=G({schema:r}),r.items){let p=r.items.map(c=>It({plugin:t,schema:c,state:n}).expression);if(r.logicalOperator==="and"){let c=r.items[0];c.logicalOperator==="or"||c.type&&c.type!=="object"?i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.intersection}),parameters:p}):(i.expression=p[0],p.slice(1).forEach(l=>{i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.and}),parameters:[l]});}));}else i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.union}),parameters:[s.arrayLiteralExpression({elements:p})]});}else i=It({plugin:t,schema:r,state:n});else {let p=hm({plugin:t,schema:{type:"unknown"},state:n});i.expression=p.expression,i.typeName=p.anyType;}if(i.expression&&(r.accessScope==="read"&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.readonly})})),e&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.optional})})),r.default!==void 0)){let p=r.type==="integer"&&r.format==="int64",c=dn({isBigInt:p,value:r.default});c&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.default}),parameters:[c]}));}return n.hasCircularReference?i.typeName||(i.typeName="ZodTypeAny"):i.typeName=void 0,i},yo=({id:e,plugin:t,schema:r,state:n})=>{n||(n={circularReferenceTracker:[e],currentReferenceTracker:[e],hasCircularReference:false});let o=t.api.getSelector("ref",e),i=t.gen.selectSymbolFirst(o);if(i&&!i.headless)return;let a=It({plugin:t,schema:r,state:n}),p=t.gen.ensureFile(t.output),c=D(e);i=p.ensureSymbol({selector:o}),i=i.update({name:O({config:t.config.definitions,name:c})});let l=t.config.definitions.types.infer.enabled?p.addSymbol({name:O({config:t.config.definitions.types.infer,name:c}),selector:t.api.getSelector("type-infer-ref",e)}):void 0;Me({plugin:t,schema:r,symbol:i,typeInferSymbol:l,zodSchema:a});},gm=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r=t.ensureSymbol({name:"z",selector:e.api.getSelector("import","zod")});t.addImport({aliases:{[r.name]:r.placeholder},from:Mr({plugin:e}),names:[r.name]}),e.forEach("operation","parameter","requestBody","schema","webhook",n=>{switch(n.type){case "operation":Lr({getZodSchema:o=>It({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:n.operation,plugin:e});break;case "parameter":yo({id:n.$ref,plugin:e,schema:n.parameter.schema});break;case "requestBody":yo({id:n.$ref,plugin:e,schema:n.requestBody.schema});break;case "schema":yo({id:n.$ref,plugin:e,schema:n.schema});break;case "webhook":Dr({getZodSchema:o=>It({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:n.operation,plugin:e});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var gy=({plugin:e,schema:t,state:r})=>{let n={},o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod")),i=s.propertyAccessExpression({expression:o.placeholder,name:h.array});if(!t.items)n.expression=s.callExpression({functionName:i,parameters:[Si({plugin:e}).expression]});else {t=G({schema:t});let a=t.items.map(p=>{let c=Pt({plugin:e,schema:p,state:r});return c.hasCircularReference&&(n.hasCircularReference=true),c.expression});a.length===1?n.expression=s.callExpression({functionName:i,parameters:a}):(t.logicalOperator,n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.array}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.union}),parameters:[s.arrayLiteralExpression({elements:a})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:h.length}),parameters:[s.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:h.min}),parameters:[s.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:h.max}),parameters:[s.valueToExpression({value:t.maxItems})]}))),n},xy=({plugin:e,schema:t})=>{let r={},n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return typeof t.const=="boolean"?(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.literal}),parameters:[s.ots.boolean(t.const)]}),r):(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.boolean})}),r)},by=({plugin:e,schema:t})=>{let r={},n=[],o=false;for(let a of t.items??[])a.type==="string"&&typeof a.const=="string"?n.push(s.stringLiteral({text:a.const})):(a.type==="null"||a.const===null)&&(o=true);if(!n.length)return Si({plugin:e});let i=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.placeholder,name:h.enum}),parameters:[s.arrayLiteralExpression({elements:n,multiLine:false})]}),o&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.placeholder,name:h.nullable}),parameters:[r.expression]})),r},Sy=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.never})}),t},Oy=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.null})}),t},un=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},Ty=({plugin:e,schema:t})=>{let r={},n=t.type==="integer"&&t.format==="int64",o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return typeof t.const=="number"?(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.literal}),parameters:[s.ots.number(t.const)]}),r):(r.expression=s.callExpression({functionName:n?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:o.placeholder,name:h.coerce}),name:h.bigint}):s.propertyAccessExpression({expression:o.placeholder,name:h.number})}),!n&&t.type==="integer"&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.int})})),t.exclusiveMinimum!==void 0?r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.gt}),parameters:[un({isBigInt:n,value:t.exclusiveMinimum})]}):t.minimum!==void 0&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.gte}),parameters:[un({isBigInt:n,value:t.minimum})]})),t.exclusiveMaximum!==void 0?r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.lt}),parameters:[un({isBigInt:n,value:t.exclusiveMaximum})]}):t.maximum!==void 0&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.lte}),parameters:[un({isBigInt:n,value:t.maximum})]})),r)},Ry=({plugin:e,schema:t,state:r})=>{let n={},o=[],i=t.required??[],a=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));for(let p in t.properties){let c=t.properties[p],l=i.includes(p),m=Pt({optional:!l,plugin:e,schema:c,state:r});m.hasCircularReference&&(n.hasCircularReference=true),oe.lastIndex=0;let f;oe.test(p)?f=p.startsWith("-")?S.factory.createStringLiteral(p):S.factory.createNumericLiteral(p):f=p,(p.match(/^[0-9]/)&&p.match(/\D+/g)||p.match(/\W/g))&&!p.startsWith("'")&&!p.endsWith("'")&&(f=`'${p}'`),m.hasCircularReference?o.push(s.getAccessorDeclaration({name:f,returnType:m.typeName?s.propertyAccessExpression({expression:a.placeholder,name:m.typeName}):void 0,statements:[s.returnStatement({expression:m.expression})]})):o.push(s.propertyAssignment({initializer:m.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let p=Pt({plugin:e,schema:t.additionalProperties,state:r});return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.record}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.string}),parameters:[]}),p.expression]}),p.hasCircularReference&&(n.hasCircularReference=true),n.hasCircularReference?{...n,typeName:"ZodType"}:n}return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.object}),parameters:[S.factory.createObjectLiteralExpression(o,true)]}),n.hasCircularReference?{...n,typeName:"ZodType"}:n},Iy=({plugin:e,schema:t})=>{let r={},n=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(typeof t.const=="string")return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.literal}),parameters:[s.ots.string(t.const)]}),r;r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.string})});let o=[];if(e.config.dates.offset&&o.push({key:"offset",value:true}),e.config.dates.local&&o.push({key:"local",value:true}),t.format)switch(t.format){case "date":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:n.placeholder,name:h.iso}),name:h.date})});break;case "date-time":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:n.placeholder,name:h.iso}),name:h.datetime}),parameters:o.length>0?[s.objectExpression({obj:o})]:[]});break;case "email":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.email})});break;case "ipv4":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.ipv4})});break;case "ipv6":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.ipv6})});break;case "time":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:n.placeholder,name:h.iso}),name:h.time})});break;case "uri":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.url})});break;case "uuid":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.placeholder,name:h.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.length}),parameters:[s.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.min}),parameters:[s.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.max}),parameters:[s.valueToExpression({value:t.maxLength})]}))),t.pattern&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:h.regex}),parameters:[s.regularExpressionLiteral({text:t.pattern})]})),r},Py=({plugin:e,schema:t,state:r})=>{let n={},o=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));if(t.const&&Array.isArray(t.const)){let a=t.const.map(p=>s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.literal}),parameters:[s.valueToExpression({value:p})]}));return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.tuple}),parameters:[s.arrayLiteralExpression({elements:a})]}),n}let i=[];for(let a of t.items??[]){let p=Pt({plugin:e,schema:a,state:r});i.push(p.expression),p.hasCircularReference&&(n.hasCircularReference=true);}return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:o.placeholder,name:h.tuple}),parameters:[s.arrayLiteralExpression({elements:i})]}),n},Ay=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.undefined})}),t},Si=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.unknown})}),t},Ey=({plugin:e})=>{let t={},r=e.gen.selectSymbolFirstOrThrow(e.api.getSelector("import","zod"));return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.placeholder,name:h.void})}),t},xm=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return gy({plugin:e,schema:t,state:r});case "boolean":return xy({plugin:e,schema:t});case "enum":return by({plugin:e,schema:t});case "integer":case "number":return Ty({plugin:e,schema:t});case "never":return Sy({plugin:e});case "null":return Oy({plugin:e});case "object":return Ry({plugin:e,schema:t,state:r});case "string":return Iy({plugin:e,schema:t});case "tuple":return Py({plugin:e,schema:t,state:r});case "undefined":return Ay({plugin:e});case "unknown":return Si({plugin:e});case "void":return Ey({plugin:e})}},Pt=({optional:e,plugin:t,schema:r,state:n})=>{let o=t.gen.ensureFile(t.output),i={},a=t.gen.selectSymbolFirstOrThrow(t.api.getSelector("import","zod"));if(r.$ref){let p=n.circularReferenceTracker.includes(r.$ref),c=n.currentReferenceTracker.includes(r.$ref);n.circularReferenceTracker.push(r.$ref),n.currentReferenceTracker.push(r.$ref);let l=t.api.getSelector("ref",r.$ref),m=t.gen.selectSymbolFirst(l);if(p)m||(m=o.ensureSymbol({selector:l})),c?i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.lazy}),parameters:[s.arrowFunction({returnType:s.keywordTypeNode({keyword:"any"}),statements:[s.returnStatement({expression:s.identifier({text:m.placeholder})})]})]}):i.expression=s.identifier({text:m.placeholder}),i.hasCircularReference=true;else if(!m){let f=t.context.resolveIrRef(r.$ref);ho({id:r.$ref,plugin:t,schema:f,state:n});}if(!p){let f=t.gen.selectSymbolFirstOrThrow(l);i.expression=s.identifier({text:f.placeholder});}n.circularReferenceTracker.pop(),n.currentReferenceTracker.pop();}else if(r.type){let p=xm({plugin:t,schema:r,state:n});i.expression=p.expression,i.hasCircularReference=p.hasCircularReference,t.config.metadata&&r.description&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.register}),parameters:[s.propertyAccessExpression({expression:a.placeholder,name:h.globalRegistry}),s.objectExpression({obj:[{key:"description",value:s.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=G({schema:r}),r.items){let p=r.items.map(c=>Pt({plugin:t,schema:c,state:n}).expression);if(r.logicalOperator==="and"){let c=r.items[0];c.logicalOperator==="or"||c.type&&c.type!=="object"?i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.intersection}),parameters:p}):(i.expression=p[0],p.slice(1).forEach(l=>{i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.and}),parameters:[l]});}));}else i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.union}),parameters:[s.arrayLiteralExpression({elements:p})]});}else i=Pt({plugin:t,schema:r,state:n});else {let p=xm({plugin:t,schema:{type:"unknown"},state:n});i.expression=p.expression;}if(i.expression&&(r.accessScope==="read"&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.readonly})})),e&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.placeholder,name:h.optional}),parameters:[i.expression]}),i.typeName=h.ZodOptional),r.default!==void 0)){let p=r.type==="integer"&&r.format==="int64",c=un({isBigInt:p,value:r.default});c&&(i.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:i.expression,name:h.default}),parameters:[c]}));}return i},ho=({id:e,plugin:t,schema:r,state:n})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...n,currentReferenceTracker:[e]},i=t.api.getSelector("ref",e),a=t.gen.selectSymbolFirst(i);if(a&&!a.headless)return;let p=Pt({plugin:t,schema:r,state:o}),c=t.gen.ensureFile(t.output),l=D(e);a=c.ensureSymbol({selector:i}),a=a.update({name:O({config:t.config.definitions,name:l})});let m=t.config.definitions.types.infer.enabled?c.addSymbol({name:O({config:t.config.definitions.types.infer,name:l}),selector:t.api.getSelector("type-infer-ref",e)}):void 0;Me({plugin:t,schema:r,symbol:a,typeInferSymbol:m,zodSchema:p});},Oi=({plugin:e})=>{let t=e.gen.createFile(e.output,{extension:".ts",path:"{{path}}.gen",renderer:new F}),r=t.ensureSymbol({name:"z",selector:e.api.getSelector("import","zod")});t.addImport({aliases:{[r.name]:r.placeholder},from:Mr({plugin:e}),names:[r.name]}),e.forEach("operation","parameter","requestBody","schema","webhook",n=>{switch(n.type){case "operation":Lr({getZodSchema:o=>Pt({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:n.operation,plugin:e});break;case "parameter":ho({id:n.$ref,plugin:e,schema:n.parameter.schema});break;case "requestBody":ho({id:n.$ref,plugin:e,schema:n.requestBody.schema});break;case "schema":ho({id:n.$ref,plugin:e,schema:n.schema});break;case "webhook":Dr({getZodSchema:o=>Pt({plugin:e,schema:o,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:n.operation,plugin:e});break}}),e.config.exportFromIndex&&t.hasContent()&&e.gen.ensureFile("index").addExport({from:t,namespaceImport:true});};var bm=e=>{let{plugin:t}=e;switch(t.config.compatibilityVersion){case 3:return gm(e);case 4:return Oi(e);case "mini":return ym(e);default:return Oi(e)}};var go={api:new fo({name:"zod"}),config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:bm,name:"zod",output:"zod",resolveConfig:(e,t)=>{let n=t.package.getVersion("zod"),o=()=>n&&(n.major===4||n.major===3)?n.major:4,i=a=>{if(!a)return o();if(!n)return a;if((a===4||a===3||a==="mini")&&!t.package.satisfies(n,">=3.25.0 <5.0.0")){let p=o();return console.warn(`\u{1F50C} ${At.yellow("Warning:")} Installed ${At.cyan("zod")} ${At.cyan(`v${n.version}`)} does not support compatibility version ${At.yellow(String(a))}, using ${At.yellow(String(p))}.`),p}return a};e.config.compatibilityVersion=i(e.config.compatibilityVersion),e.config.dates=t.valueToObject({defaultValue:{local:false,offset:false},value:e.config.dates}),e.config.types=t.valueToObject({defaultValue:{infer:{case:"PascalCase",enabled:false}},mappers:{object:(a,p)=>({...a,infer:t.valueToObject({defaultValue:{...p.infer,enabled:a.infer!==void 0?!!a.infer:p.infer.enabled},mappers:Ve,value:a.infer})})},value:e.config.types}),e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ZodType"}}},mappers:{...Ve,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,l)=>({...c,infer:t.valueToObject({defaultValue:{...l.infer,enabled:c.infer!==void 0?!!c.infer:l.infer.enabled},mappers:Ve,value:c.infer})})},value:a.types})})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Data",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}DataZodType"}}},mappers:{...Ve,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,l)=>({...c,infer:t.valueToObject({defaultValue:{...l.infer,enabled:c.infer!==void 0?!!c.infer:l.infer.enabled},mappers:Ve,value:c.infer})})},value:a.types})})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Response",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ResponseZodType"}}},mappers:{...Ve,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,l)=>({...c,infer:t.valueToObject({defaultValue:{...l.infer,enabled:c.infer!==void 0?!!c.infer:l.infer.enabled},mappers:Ve,value:c.infer})})},value:a.types})})},value:e.config.responses}),e.config.webhooks=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}WebhookRequest",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}WebhookRequestZodType"}}},mappers:{...Ve,object:(a,p)=>({...a,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,l)=>({...c,infer:t.valueToObject({defaultValue:{...l.infer,enabled:c.infer!==void 0?!!c.infer:l.infer.enabled},mappers:Ve,value:c.infer})})},value:a.types})})},value:e.config.webhooks});},tags:["validator"]};var xo={"@angular/common":ls,"@hey-api/client-angular":ds,"@hey-api/client-axios":ys,"@hey-api/client-fetch":gs,"@hey-api/client-next":bs,"@hey-api/client-nuxt":Os,"@hey-api/schemas":Cs,"@hey-api/sdk":js,"@hey-api/transformers":qs,"@hey-api/typescript":Ms,"@pinia/colada":Ws,"@tanstack/angular-query-experimental":Js,"@tanstack/react-query":eo,"@tanstack/solid-query":ro,"@tanstack/svelte-query":so,"@tanstack/vue-query":io,fastify:po,"legacy/angular":Ts,"legacy/axios":Rs,"legacy/fetch":Is,"legacy/node":Ps,"legacy/xhr":As,valibot:lo,zod:go};var Sm=["@hey-api/typescript","@hey-api/sdk"],Ny=({dependencies:e,userPlugins:t,userPluginsConfig:r})=>{let n=new Set,o=new Set,i={},a=p=>{if(n.has(p))throw new Error(`Circular reference detected at '${p}'`);if(o.has(p))return;n.add(p);let c=xo[p],l=r[p];if(!c&&!l)throw new Error(`unknown plugin dependency "${p}" - do you need to register a custom plugin with this name?`);let m={...c,...l,config:{...c?.config,...l?.config},dependencies:new Set([...c?.dependencies||[],...l?.dependencies||[]])};if(m.resolveConfig){let f={package:Nn(e),pluginByTag:(d,u={})=>{let{defaultPlugin:y,errorMessage:g}=u;for(let x of t){let b=xo[x]||r[x];if(b&&b.tags?.includes(d)&&x!==p)return x}if(y){let x=xo[y]||r[y];if(x&&x.tags?.includes(d)&&y!==p)return y}throw new Error(g||`missing plugin - no plugin with tag "${d}" found`)},valueToObject:Lt};m.resolveConfig(m,f);}for(let f of m.dependencies)a(f);n.delete(p),o.add(p),i[p]=m;};for(let p of t)a(p);return {pluginOrder:Array.from(o),plugins:i}},jy=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e.tags&&e.tags.includes("client"),Om=({dependencies:e,userConfig:t})=>{let r={},n=Sm;t.plugins&&(t.plugins=t.plugins.filter(i=>typeof i=="string"&&i||typeof i!="string"&&i.name),t.plugins.length===1&&jy(t.plugins[0])?n=[...Sm,...t.plugins]:n=t.plugins);let o=n.map(i=>{if(typeof i=="string")return i;let a=i.name;return a&&(i.handler?r[a]=i:(r[a]={config:{...i}},delete r[a].config.name)),a}).filter(Boolean);return Ny({dependencies:e,userPlugins:o,userPluginsConfig:r})};var ky=/^([\w-]+)\/([\w-]+)(?:\?([\w=&.-]*))?$/,Vr="https://get.heyapi.dev",vy=(e,t,r)=>`${Vr}/${e}/${t}${r?`?${r}`:""}`,wy=e=>{let t=e.organization,r=e.project,n;if(e.path){let i=e.path.match(ky);if(!i)throw new Error(`Invalid Hey API shorthand format. Expected "organization/project?queryParams" or "organization/project", received: ${e.path}`);t=i[1],r=i[2],n=i[3];}if(!t)throw new Error("The Hey API organization cannot be empty.");if(!r)throw new Error("The Hey API project cannot be empty.");return {organization:t,project:r,queryParams:n}},Ti=e=>{let t=wy(e);return vy(t.organization,t.project,t.queryParams)};var qy=/^(@([\w-]+)\/([\w\-.]+)#)?([\w-]+)$/,$y=e=>`https://dash.readme.com/api/v1/api-registry/${e}`,bo="readme",Fy=e=>{let t=e.match(qy);if(!t)throw new Error(`Invalid ReadMe shorthand format. Expected "${bo}:@organization/project#uuid" or "${bo}:uuid", received: ${bo}:${e}`);let[,,r,n,o]=t;if(!o)throw new Error("The ReadMe UUID cannot be empty.");return {organization:r,project:n,uuid:o}},Tm=e=>{let t=e.slice(`${bo}:`.length),r=Fy(t);return $y(r.uuid)};var My=/^(@[\w-]+)\/([\w.-]+)$/,Ly=(e,t)=>`https://registry.scalar.com/${e}/apis/${t}/latest?format=json`,Ri="scalar",Dy=e=>{let t=e.match(My);if(!t)throw new Error(`Invalid Scalar shorthand format. Expected "${Ri}:@organization/project", received: ${Ri}:${e}`);let[,r,n]=t;if(!r)throw new Error("The Scalar organization cannot be empty.");if(!n)throw new Error("The Scalar project cannot be empty.");return {organization:r,project:n}},Rm=e=>{let t=e.slice(`${Ri}:`.length),r=Dy(t);return Ly(r.organization,r.project)};var Im=e=>{if(e.path.startsWith("readme:")){e.path=Tm(e.path);return}if(e.path.startsWith("scalar:")){e.path=Rm(e.path);return}if(e.path.startsWith("."))return;if(e.path.startsWith(Vr)){e.path=e.path.slice(Vr.length+1),e.path=Ti(e);return}let t=e.path.split("/"),r=t.filter(Boolean);t.length===2&&r.length===2&&(e.path=Ti(e));};var hn={enabled:false,interval:1e3,timeout:6e4},Pm=e=>{let t={...hn};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},Am=e=>{let t={path:"",watch:hn};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:Vr,...e.input},t.watch!==void 0&&(t.watch=Pm(t))):t={...t,path:e.input},typeof t.path=="string"&&Im(t),e.watch!==void 0&&t.watch.enabled===hn.enabled&&t.watch.interval===hn.interval&&t.watch.timeout===hn.timeout&&(t.watch=Pm({path:t.path,watch:e.watch})),t};var Vy=(e,t)=>({...e||{},...t||{}}),Ii=(e,t)=>{let r=e||{},n=t||{},o={...r,...n};return typeof o.logs=="object"&&(o.logs=Vy(r.logs,n.logs)),o};var Em=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t};var Nm=e=>{let t=e?Z.dirname(e):process.cwd();for(;t!==Z.dirname(t);){let r=Z.join(t,"package.json");if(ke.existsSync(r))try{let o=JSON.parse(ke.readFileSync(r,"utf8"));return {...o.dependencies,...o.devDependencies,...o.peerDependencies,...o.optionalDependencies}}catch{}let n=Z.dirname(t);if(n===t)break;t=n;}return {}};var sF=async e=>{let t;if(e?.configFile){let p=e.configFile.split(".");t=p.slice(0,p.length-1).join(".");}let{config:r,configFile:n}=await loadConfig({configFile:t,name:"openapi-ts"}),o=Nm(Object.keys(r).length?n:void 0),i=Array.isArray(e)?e:Array.isArray(r)?r.map(p=>Ii(p,e)):[Ii(r,e)],a=[];for(let p of i){let{base:c,configFile:l="",dryRun:m=false,experimentalParser:f=true,exportCore:d=true,interactive:u=false,name:y,request:g,useOptions:x=true}=p,b=[],P=ji(p);P.level==="debug"&&console.warn("userConfig:",p);let C=Am(p),$=Em(p),q=ki(p);C.path||b.push(new Mt("missing input - which OpenAPI specification should we use to generate your output?")),$.path||b.push(new Mt("missing output - where should we generate your output?")),x||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),$.path=Z.resolve(process.cwd(),$.path);let B;try{B=Om({dependencies:o,userConfig:p});}catch(se){b.push(se),B={pluginOrder:[],plugins:{}};}let W=Mi({...B,base:c,configFile:l,dryRun:m,experimentalParser:f,exportCore:false,input:C,interactive:u,logs:P,name:y,output:$,parser:q,request:g,useOptions:x});W.exportCore=U(W)?d:false,P.level==="debug"&&console.warn("config:",W),a.push({config:W,errors:b});}return {dependencies:o,results:a}};var Uy=e=>{let t=[];return e.forEach((r,n)=>{t.push([n,r]);}),t},Oo=(...e)=>{let t=new Headers;for(let r of e){if(!r)continue;let n=r instanceof Headers?Uy(r):Object.entries(r);for(let[o,i]of n)if(i===null)t.delete(o);else if(Array.isArray(i))for(let a of i)t.append(o,a);else i!==void 0&&t.set(o,typeof i=="object"?JSON.stringify(i):i);}return t};var zF=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let o=new $RefParser,i=getResolvedInput({pathOrUrlOrSchema:t}),a,p,c;if(i.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let m=await sendRequest({fetchOptions:{method:"HEAD",...e,headers:Oo(e?.headers,n.headers)},timeout:r,url:i.path});if(m.response.status>=300)return {error:"not-ok",response:m.response};c=m.response;}catch(m){return {error:"not-ok",response:new Response(m.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(p===void 0){let m=c.headers.get("ETag");m&&(p=m!==n.headers.get("If-None-Match"),p&&n.headers.set("If-None-Match",m));}if(p===void 0){let m=c.headers.get("Last-Modified");m&&(p=m!==n.headers.get("If-Modified-Since"),p&&n.headers.set("If-Modified-Since",m));}if(p===false)return {error:"not-modified",response:c}}try{let m=await sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:i.path});if(m.response.status>=300)return {error:"not-ok",response:m.response};c=m.response;}catch(m){return {error:"not-ok",response:new Response(m.message)}}if(!c.ok)return {error:"not-ok",response:c};if(a=c.body?await c.arrayBuffer():new ArrayBuffer(0),p===void 0){let m=new TextDecoder().decode(a);p=m!==n.lastValue,n.lastValue=m;}}else n.lastValue?p=false:n.lastValue=i.type;return p===false?{error:"not-modified",response:c}:{data:await o.bundle({arrayBuffer:a,pathOrUrlOrSchema:void 0,resolvedInput:i})}};
export{Rr as A,Ye as B,Zo as C,Rp as D,mP as E,lP as F,rt as G,nt as H,st as I,Sm as J,sF as K,zF as L,Ci as a,Yy as b,eh as c,ih as d,ah as e,lt as f,mh as g,Mt as h,gh as i,xh as j,bh as k,Sh as l,A as m,I as n,U as o,Dt as p,Vr as q,ji as r,Bm as s,R as t,s as u,mg as v,k as w,ze as x,IP as y,ft as z};//# sourceMappingURL=chunk-3AYBIZLR.js.map
//# sourceMappingURL=chunk-3AYBIZLR.js.map